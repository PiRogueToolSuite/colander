/*! For license information please see colander-dgraph.js.LICENSE.txt */
(()=>{var __webpack_modules__={5867:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>vueComponent});let COMPONENT_TRACK_IDS={};async function async_load_component(destJContainer,component_name){let domResponse=await fetch(`/vues/${component_name}.vue`),dom=await domResponse.text();destJContainer.append(dom);let jsResponse=await fetch(`/vues/${component_name}.vue?part=js`),js=await jsResponse.text(),vueInstance=eval(js);return vueInstance.$mount(destJContainer.find(".vue-container").get(0)),destJContainer.data("vue",vueInstance),destJContainer.trigger("vue-ready",[destJContainer,vueInstance]),`Vue component ready: ${component_name}`}const vueComponent=t=>{COMPONENT_TRACK_IDS[t]=COMPONENT_TRACK_IDS[t]||0,COMPONENT_TRACK_IDS[t]++;let e=$(`<div id='${t}-${COMPONENT_TRACK_IDS[t]}' class="vue-component"/>`);return async_load_component(e,t).then(console.log).catch(console.error),e}},4182:function(t,e,n){var r;r=function(t){return(()=>{"use strict";var e={45:(t,e,n)=>{var r={};r.layoutBase=n(551),r.CoSEConstants=n(806),r.CoSEEdge=n(767),r.CoSEGraph=n(880),r.CoSEGraphManager=n(578),r.CoSELayout=n(765),r.CoSENode=n(991),r.ConstraintHandler=n(902),t.exports=r},806:(t,e,n)=>{var r=n(551).FDLayoutConstants;function i(){}for(var o in r)i[o]=r[o];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=r.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,i.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,i.ENFORCE_CONSTRAINTS=!0,i.APPLY_LAYOUT=!0,i.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,i.TREE_REDUCTION_ON_INCREMENTAL=!0,i.PURE_INCREMENTAL=i.DEFAULT_INCREMENTAL,t.exports=i},767:(t,e,n)=>{var r=n(551).FDLayoutEdge;function i(t,e,n){r.call(this,t,e,n)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];t.exports=i},880:(t,e,n)=>{var r=n(551).LGraph;function i(t,e,n){r.call(this,t,e,n)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];t.exports=i},578:(t,e,n)=>{var r=n(551).LGraphManager;function i(t){r.call(this,t)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];t.exports=i},765:(t,e,n)=>{var r=n(551).FDLayout,i=n(578),o=n(880),a=n(991),s=n(767),u=n(806),l=n(902),c=n(551).FDLayoutConstants,h=n(551).LayoutConstants,p=n(551).Point,f=n(551).PointD,d=n(551).DimensionD,g=n(551).Layout,y=n(551).Integer,v=n(551).IGeometry,m=n(551).LGraph,_=n(551).Transform,b=n(551).LinkedList;function x(){r.call(this),this.toBeTiled={},this.constraints={}}for(var E in x.prototype=Object.create(r.prototype),r)x[E]=r[E];x.prototype.newGraphManager=function(){var t=new i(this);return this.graphManager=t,t},x.prototype.newGraph=function(t){return new o(null,this.graphManager,t)},x.prototype.newNode=function(t){return new a(this.graphManager,t)},x.prototype.newEdge=function(t){return new s(null,null,t)},x.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.isSubLayout||(u.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=u.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},x.prototype.initSpringEmbedder=function(){r.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/c.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},x.prototype.layout=function(){return h.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)u.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),e=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter((function(t){return e.has(t)})),this.graphManager.setAllNodesToApplyGravitation(n));else{var t=this.getFlatForest();if(t.length>0)this.positionNodesRadially(t);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(n),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(l.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),u.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter((function(e){return t.has(e)}));this.graphManager.setAllNodesToApplyGravitation(e),this.graphManager.updateBounds(),this.updateGrid(),u.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),u.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,r=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,r),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var t=this.graphManager.getAllNodes(),e={},n=0;n<t.length;n++){var r=t[n].rect,i=t[n].id;e[i]={id:i,x:r.getCenterX(),y:r.getCenterY(),w:r.width,h:r.height}}return e},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var t=!1;if("during"===c.ANIMATE)this.emit("layoutstarted");else{for(;!t;)t=this.tick();this.graphManager.updateBounds()}},x.prototype.moveNodes=function(){for(var t=this.getAllNodes(),e=0;e<t.length;e++)t[e].calculateDisplacement();for(Object.keys(this.constraints).length>0&&this.updateDisplacements(),e=0;e<t.length;e++)t[e].move()},x.prototype.initConstraintVariables=function(){var t=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var e=this.graphManager.getAllNodes(),n=0;n<e.length;n++){var r=e[n];this.idToNodeMap.set(r.id,r)}var i=function e(n){for(var r,i=n.getChild().getNodes(),o=0,a=0;a<i.length;a++)null==(r=i[a]).getChild()?t.fixedNodeSet.has(r.id)&&(o+=100):o+=e(r);return o};if(this.constraints.fixedNodeConstraint)for(this.constraints.fixedNodeConstraint.forEach((function(e){t.fixedNodeSet.add(e.nodeId)})),e=this.graphManager.getAllNodes(),n=0;n<e.length;n++)if(null!=(r=e[n]).getChild()){var o=i(r);o>0&&(r.fixedNodeWeight=o)}if(this.constraints.relativePlacementConstraint){var a=new Map,s=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach((function(e){t.fixedNodesOnHorizontal.add(e),t.fixedNodesOnVertical.add(e)})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var l=this.constraints.alignmentConstraint.vertical;for(n=0;n<l.length;n++)this.dummyToNodeForVerticalAlignment.set("dummy"+n,[]),l[n].forEach((function(e){a.set(e,"dummy"+n),t.dummyToNodeForVerticalAlignment.get("dummy"+n).push(e),t.fixedNodeSet.has(e)&&t.fixedNodesOnHorizontal.add("dummy"+n)}))}if(this.constraints.alignmentConstraint.horizontal){var c=this.constraints.alignmentConstraint.horizontal;for(n=0;n<c.length;n++)this.dummyToNodeForHorizontalAlignment.set("dummy"+n,[]),c[n].forEach((function(e){s.set(e,"dummy"+n),t.dummyToNodeForHorizontalAlignment.get("dummy"+n).push(e),t.fixedNodeSet.has(e)&&t.fixedNodesOnVertical.add("dummy"+n)}))}}if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(t){var e,n,r;for(r=t.length-1;r>=2*t.length/3;r--)e=Math.floor(Math.random()*(r+1)),n=t[r],t[r]=t[e],t[e]=n;return t},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach((function(e){if(e.left){var n=a.has(e.left)?a.get(e.left):e.left,r=a.has(e.right)?a.get(e.right):e.right;t.nodesInRelativeHorizontal.includes(n)||(t.nodesInRelativeHorizontal.push(n),t.nodeToRelativeConstraintMapHorizontal.set(n,[]),t.dummyToNodeForVerticalAlignment.has(n)?t.nodeToTempPositionMapHorizontal.set(n,t.idToNodeMap.get(t.dummyToNodeForVerticalAlignment.get(n)[0]).getCenterX()):t.nodeToTempPositionMapHorizontal.set(n,t.idToNodeMap.get(n).getCenterX())),t.nodesInRelativeHorizontal.includes(r)||(t.nodesInRelativeHorizontal.push(r),t.nodeToRelativeConstraintMapHorizontal.set(r,[]),t.dummyToNodeForVerticalAlignment.has(r)?t.nodeToTempPositionMapHorizontal.set(r,t.idToNodeMap.get(t.dummyToNodeForVerticalAlignment.get(r)[0]).getCenterX()):t.nodeToTempPositionMapHorizontal.set(r,t.idToNodeMap.get(r).getCenterX())),t.nodeToRelativeConstraintMapHorizontal.get(n).push({right:r,gap:e.gap}),t.nodeToRelativeConstraintMapHorizontal.get(r).push({left:n,gap:e.gap})}else{var i=s.has(e.top)?s.get(e.top):e.top,o=s.has(e.bottom)?s.get(e.bottom):e.bottom;t.nodesInRelativeVertical.includes(i)||(t.nodesInRelativeVertical.push(i),t.nodeToRelativeConstraintMapVertical.set(i,[]),t.dummyToNodeForHorizontalAlignment.has(i)?t.nodeToTempPositionMapVertical.set(i,t.idToNodeMap.get(t.dummyToNodeForHorizontalAlignment.get(i)[0]).getCenterY()):t.nodeToTempPositionMapVertical.set(i,t.idToNodeMap.get(i).getCenterY())),t.nodesInRelativeVertical.includes(o)||(t.nodesInRelativeVertical.push(o),t.nodeToRelativeConstraintMapVertical.set(o,[]),t.dummyToNodeForHorizontalAlignment.has(o)?t.nodeToTempPositionMapVertical.set(o,t.idToNodeMap.get(t.dummyToNodeForHorizontalAlignment.get(o)[0]).getCenterY()):t.nodeToTempPositionMapVertical.set(o,t.idToNodeMap.get(o).getCenterY())),t.nodeToRelativeConstraintMapVertical.get(i).push({bottom:o,gap:e.gap}),t.nodeToRelativeConstraintMapVertical.get(o).push({top:i,gap:e.gap})}}));else{var h=new Map,p=new Map;this.constraints.relativePlacementConstraint.forEach((function(t){if(t.left){var e=a.has(t.left)?a.get(t.left):t.left,n=a.has(t.right)?a.get(t.right):t.right;h.has(e)?h.get(e).push(n):h.set(e,[n]),h.has(n)?h.get(n).push(e):h.set(n,[e])}else{var r=s.has(t.top)?s.get(t.top):t.top,i=s.has(t.bottom)?s.get(t.bottom):t.bottom;p.has(r)?p.get(r).push(i):p.set(r,[i]),p.has(i)?p.get(i).push(r):p.set(i,[r])}}));var f=function(t,e){var n=[],r=[],i=new b,o=new Set,a=0;return t.forEach((function(s,u){if(!o.has(u)){n[a]=[],r[a]=!1;var l=u;for(i.push(l),o.add(l),n[a].push(l);0!=i.length;)l=i.shift(),e.has(l)&&(r[a]=!0),t.get(l).forEach((function(t){o.has(t)||(i.push(t),o.add(t),n[a].push(t))}));a++}})),{components:n,isFixed:r}},d=f(h,t.fixedNodesOnHorizontal);this.componentsOnHorizontal=d.components,this.fixedComponentsOnHorizontal=d.isFixed;var g=f(p,t.fixedNodesOnVertical);this.componentsOnVertical=g.components,this.fixedComponentsOnVertical=g.isFixed}}},x.prototype.updateDisplacements=function(){var t=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach((function(e){var n=t.idToNodeMap.get(e.nodeId);n.displacementX=0,n.displacementY=0})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var e=this.constraints.alignmentConstraint.vertical,n=0;n<e.length;n++){for(var r=0,i=0;i<e[n].length;i++){if(this.fixedNodeSet.has(e[n][i])){r=0;break}r+=this.idToNodeMap.get(e[n][i]).displacementX}var o=r/e[n].length;for(i=0;i<e[n].length;i++)this.idToNodeMap.get(e[n][i]).displacementX=o}if(this.constraints.alignmentConstraint.horizontal){var a=this.constraints.alignmentConstraint.horizontal;for(n=0;n<a.length;n++){var s=0;for(i=0;i<a[n].length;i++){if(this.fixedNodeSet.has(a[n][i])){s=0;break}s+=this.idToNodeMap.get(a[n][i]).displacementY}var l=s/a[n].length;for(i=0;i<a[n].length;i++)this.idToNodeMap.get(a[n][i]).displacementY=l}}}if(this.constraints.relativePlacementConstraint)if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach((function(e){if(!t.fixedNodesOnHorizontal.has(e)){var n=0;n=t.dummyToNodeForVerticalAlignment.has(e)?t.idToNodeMap.get(t.dummyToNodeForVerticalAlignment.get(e)[0]).displacementX:t.idToNodeMap.get(e).displacementX,t.nodeToRelativeConstraintMapHorizontal.get(e).forEach((function(r){var i;r.right?(i=t.nodeToTempPositionMapHorizontal.get(r.right)-t.nodeToTempPositionMapHorizontal.get(e)-n)<r.gap&&(n-=r.gap-i):(i=t.nodeToTempPositionMapHorizontal.get(e)-t.nodeToTempPositionMapHorizontal.get(r.left)+n)<r.gap&&(n+=r.gap-i)})),t.nodeToTempPositionMapHorizontal.set(e,t.nodeToTempPositionMapHorizontal.get(e)+n),t.dummyToNodeForVerticalAlignment.has(e)?t.dummyToNodeForVerticalAlignment.get(e).forEach((function(e){t.idToNodeMap.get(e).displacementX=n})):t.idToNodeMap.get(e).displacementX=n}})),this.nodesInRelativeVertical.forEach((function(e){if(!t.fixedNodesOnHorizontal.has(e)){var n=0;n=t.dummyToNodeForHorizontalAlignment.has(e)?t.idToNodeMap.get(t.dummyToNodeForHorizontalAlignment.get(e)[0]).displacementY:t.idToNodeMap.get(e).displacementY,t.nodeToRelativeConstraintMapVertical.get(e).forEach((function(r){var i;r.bottom?(i=t.nodeToTempPositionMapVertical.get(r.bottom)-t.nodeToTempPositionMapVertical.get(e)-n)<r.gap&&(n-=r.gap-i):(i=t.nodeToTempPositionMapVertical.get(e)-t.nodeToTempPositionMapVertical.get(r.top)+n)<r.gap&&(n+=r.gap-i)})),t.nodeToTempPositionMapVertical.set(e,t.nodeToTempPositionMapVertical.get(e)+n),t.dummyToNodeForHorizontalAlignment.has(e)?t.dummyToNodeForHorizontalAlignment.get(e).forEach((function(e){t.idToNodeMap.get(e).displacementY=n})):t.idToNodeMap.get(e).displacementY=n}}));else{for(n=0;n<this.componentsOnHorizontal.length;n++){var c=this.componentsOnHorizontal[n];if(this.fixedComponentsOnHorizontal[n])for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?this.dummyToNodeForVerticalAlignment.get(c[i]).forEach((function(e){t.idToNodeMap.get(e).displacementX=0})):this.idToNodeMap.get(c[i]).displacementX=0;else{var h=0,p=0;for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?(h+=(d=this.dummyToNodeForVerticalAlignment.get(c[i])).length*this.idToNodeMap.get(d[0]).displacementX,p+=d.length):(h+=this.idToNodeMap.get(c[i]).displacementX,p++);var f=h/p;for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?this.dummyToNodeForVerticalAlignment.get(c[i]).forEach((function(e){t.idToNodeMap.get(e).displacementX=f})):this.idToNodeMap.get(c[i]).displacementX=f}}for(n=0;n<this.componentsOnVertical.length;n++)if(c=this.componentsOnVertical[n],this.fixedComponentsOnVertical[n])for(i=0;i<c.length;i++)this.dummyToNodeForHorizontalAlignment.has(c[i])?this.dummyToNodeForHorizontalAlignment.get(c[i]).forEach((function(e){t.idToNodeMap.get(e).displacementY=0})):this.idToNodeMap.get(c[i]).displacementY=0;else{for(h=0,p=0,i=0;i<c.length;i++){var d;this.dummyToNodeForHorizontalAlignment.has(c[i])?(h+=(d=this.dummyToNodeForHorizontalAlignment.get(c[i])).length*this.idToNodeMap.get(d[0]).displacementY,p+=d.length):(h+=this.idToNodeMap.get(c[i]).displacementY,p++)}for(f=h/p,i=0;i<c.length;i++)this.dummyToNodeForHorizontalAlignment.has(c[i])?this.dummyToNodeForHorizontalAlignment.get(c[i]).forEach((function(e){t.idToNodeMap.get(e).displacementY=f})):this.idToNodeMap.get(c[i]).displacementY=f}}},x.prototype.calculateNodesToApplyGravitationTo=function(){var t,e,n=[],r=this.graphManager.getGraphs(),i=r.length;for(e=0;e<i;e++)(t=r[e]).updateConnected(),t.isConnected||(n=n.concat(t.getNodes()));return n},x.prototype.createBendpoints=function(){var t=[];t=t.concat(this.graphManager.getAllEdges());var e,n=new Set;for(e=0;e<t.length;e++){var r=t[e];if(!n.has(r)){var i=r.getSource(),o=r.getTarget();if(i==o)r.getBendpoints().push(new f),r.getBendpoints().push(new f),this.createDummyNodesForBendpoints(r),n.add(r);else{var a=[];if(a=(a=a.concat(i.getEdgeListToNode(o))).concat(o.getEdgeListToNode(i)),!n.has(a[0])){var s;if(a.length>1)for(s=0;s<a.length;s++){var u=a[s];u.getBendpoints().push(new f),this.createDummyNodesForBendpoints(u)}a.forEach((function(t){n.add(t)}))}}}if(n.size==t.length)break}},x.prototype.positionNodesRadially=function(t){for(var e=new p(0,0),n=Math.ceil(Math.sqrt(t.length)),r=0,i=0,o=0,a=new f(0,0),s=0;s<t.length;s++){s%n==0&&(o=0,i=r,0!=s&&(i+=u.DEFAULT_COMPONENT_SEPERATION),r=0);var l=t[s],c=g.findCenterOfTree(l);e.x=o,e.y=i,(a=x.radialLayout(l,c,e)).y>r&&(r=Math.floor(a.y)),o=Math.floor(a.x+u.DEFAULT_COMPONENT_SEPERATION)}this.transform(new f(h.WORLD_CENTER_X-a.x/2,h.WORLD_CENTER_Y-a.y/2))},x.radialLayout=function(t,e,n){var r=Math.max(this.maxDiagonalInTree(t),u.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(e,null,0,359,0,r);var i=m.calculateBounds(t),o=new _;o.setDeviceOrgX(i.getMinX()),o.setDeviceOrgY(i.getMinY()),o.setWorldOrgX(n.x),o.setWorldOrgY(n.y);for(var a=0;a<t.length;a++)t[a].transform(o);var s=new f(i.getMaxX(),i.getMaxY());return o.inverseTransformPoint(s)},x.branchRadialLayout=function(t,e,n,r,i,o){var a=(r-n+1)/2;a<0&&(a+=180);var s=(a+n)%360*v.TWO_PI/360,u=(Math.cos(s),i*Math.cos(s)),l=i*Math.sin(s);t.setCenter(u,l);var c=[],h=(c=c.concat(t.getEdges())).length;null!=e&&h--;for(var p,f=0,d=c.length,g=t.getEdgesBetween(e);g.length>1;){var y=g[0];g.splice(0,1);var m=c.indexOf(y);m>=0&&c.splice(m,1),d--,h--}p=null!=e?(c.indexOf(g[0])+1)%d:0;for(var _=Math.abs(r-n)/h,b=p;f!=h;b=++b%d){var E=c[b].getOtherEnd(t);if(E!=e){var w=(n+f*_)%360,C=(w+_)%360;x.branchRadialLayout(E,t,w,C,i+o,o),f++}}},x.maxDiagonalInTree=function(t){for(var e=y.MIN_VALUE,n=0;n<t.length;n++){var r=t[n].getDiagonal();r>e&&(e=r)}return e},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var t=this,e={};this.memberGroups={},this.idToDummyNode={};for(var n=[],r=this.graphManager.getAllNodes(),i=0;i<r.length;i++){var o=(s=r[i]).getParent();0!==this.getNodeDegreeWithChildren(s)||null!=o.id&&this.getToBeTiled(o)||n.push(s)}for(i=0;i<n.length;i++){var s,u=(s=n[i]).getParent().id;void 0===e[u]&&(e[u]=[]),e[u]=e[u].concat(s)}Object.keys(e).forEach((function(n){if(e[n].length>1){var r="DummyCompound_"+n;t.memberGroups[r]=e[n];var i=e[n][0].getParent(),o=new a(t.graphManager);o.id=r,o.paddingLeft=i.paddingLeft||0,o.paddingRight=i.paddingRight||0,o.paddingBottom=i.paddingBottom||0,o.paddingTop=i.paddingTop||0,t.idToDummyNode[r]=o;var s=t.getGraphManager().add(t.newGraph(),o),u=i.getChild();u.add(o);for(var l=0;l<e[n].length;l++){var c=e[n][l];u.remove(c),s.add(c)}}}))},x.prototype.clearCompounds=function(){var t={},e={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)e[this.compoundOrder[n].id]=this.compoundOrder[n],t[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(t,e)},x.prototype.clearZeroDegreeMembers=function(){var t=this,e=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(n){var r=t.idToDummyNode[n];if(e[n]=t.tileNodes(t.memberGroups[n],r.paddingLeft+r.paddingRight),r.rect.width=e[n].width,r.rect.height=e[n].height,r.setCenter(e[n].centerX,e[n].centerY),r.labelMarginLeft=0,r.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var i=r.rect.width,o=r.rect.height;r.labelWidth&&("left"==r.labelPosHorizontal?(r.rect.x-=r.labelWidth,r.setWidth(i+r.labelWidth),r.labelMarginLeft=r.labelWidth):"center"==r.labelPosHorizontal&&r.labelWidth>i?(r.rect.x-=(r.labelWidth-i)/2,r.setWidth(r.labelWidth),r.labelMarginLeft=(r.labelWidth-i)/2):"right"==r.labelPosHorizontal&&r.setWidth(i+r.labelWidth)),r.labelHeight&&("top"==r.labelPosVertical?(r.rect.y-=r.labelHeight,r.setHeight(o+r.labelHeight),r.labelMarginTop=r.labelHeight):"center"==r.labelPosVertical&&r.labelHeight>o?(r.rect.y-=(r.labelHeight-o)/2,r.setHeight(r.labelHeight),r.labelMarginTop=(r.labelHeight-o)/2):"bottom"==r.labelPosVertical&&r.setHeight(o+r.labelHeight))}}))},x.prototype.repopulateCompounds=function(){for(var t=this.compoundOrder.length-1;t>=0;t--){var e=this.compoundOrder[t],n=e.id,r=e.paddingLeft,i=e.paddingTop,o=e.labelMarginLeft,a=e.labelMarginTop;this.adjustLocations(this.tiledMemberPack[n],e.rect.x,e.rect.y,r,i,o,a)}},x.prototype.repopulateZeroDegreeMembers=function(){var t=this,e=this.tiledZeroDegreePack;Object.keys(e).forEach((function(n){var r=t.idToDummyNode[n],i=r.paddingLeft,o=r.paddingTop,a=r.labelMarginLeft,s=r.labelMarginTop;t.adjustLocations(e[n],r.rect.x,r.rect.y,i,o,a,s)}))},x.prototype.getToBeTiled=function(t){var e=t.id;if(null!=this.toBeTiled[e])return this.toBeTiled[e];var n=t.getChild();if(null==n)return this.toBeTiled[e]=!1,!1;for(var r=n.getNodes(),i=0;i<r.length;i++){var o=r[i];if(this.getNodeDegree(o)>0)return this.toBeTiled[e]=!1,!1;if(null!=o.getChild()){if(!this.getToBeTiled(o))return this.toBeTiled[e]=!1,!1}else this.toBeTiled[o.id]=!1}return this.toBeTiled[e]=!0,!0},x.prototype.getNodeDegree=function(t){t.id;for(var e=t.getEdges(),n=0,r=0;r<e.length;r++){var i=e[r];i.getSource().id!==i.getTarget().id&&(n+=1)}return n},x.prototype.getNodeDegreeWithChildren=function(t){var e=this.getNodeDegree(t);if(null==t.getChild())return e;for(var n=t.getChild().getNodes(),r=0;r<n.length;r++){var i=n[r];e+=this.getNodeDegreeWithChildren(i)}return e},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(t){for(var e=0;e<t.length;e++){var n=t[e];null!=n.getChild()&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},x.prototype.adjustLocations=function(t,e,n,r,i,o,a){n+=i+a;for(var s=e+=r+o,u=0;u<t.rows.length;u++){var l=t.rows[u];e=s;for(var c=0,h=0;h<l.length;h++){var p=l[h];p.rect.x=e,p.rect.y=n,e+=p.rect.width+t.horizontalPadding,p.rect.height>c&&(c=p.rect.height)}n+=c+t.verticalPadding}},x.prototype.tileCompoundMembers=function(t,e){var n=this;this.tiledMemberPack=[],Object.keys(t).forEach((function(r){var i=e[r];if(n.tiledMemberPack[r]=n.tileNodes(t[r],i.paddingLeft+i.paddingRight),i.rect.width=n.tiledMemberPack[r].width,i.rect.height=n.tiledMemberPack[r].height,i.setCenter(n.tiledMemberPack[r].centerX,n.tiledMemberPack[r].centerY),i.labelMarginLeft=0,i.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var o=i.rect.width,a=i.rect.height;i.labelWidth&&("left"==i.labelPosHorizontal?(i.rect.x-=i.labelWidth,i.setWidth(o+i.labelWidth),i.labelMarginLeft=i.labelWidth):"center"==i.labelPosHorizontal&&i.labelWidth>o?(i.rect.x-=(i.labelWidth-o)/2,i.setWidth(i.labelWidth),i.labelMarginLeft=(i.labelWidth-o)/2):"right"==i.labelPosHorizontal&&i.setWidth(o+i.labelWidth)),i.labelHeight&&("top"==i.labelPosVertical?(i.rect.y-=i.labelHeight,i.setHeight(a+i.labelHeight),i.labelMarginTop=i.labelHeight):"center"==i.labelPosVertical&&i.labelHeight>a?(i.rect.y-=(i.labelHeight-a)/2,i.setHeight(i.labelHeight),i.labelMarginTop=(i.labelHeight-a)/2):"bottom"==i.labelPosVertical&&i.setHeight(a+i.labelHeight))}}))},x.prototype.tileNodes=function(t,e){var n=this.tileNodesByFavoringDim(t,e,!0),r=this.tileNodesByFavoringDim(t,e,!1),i=this.getOrgRatio(n);return this.getOrgRatio(r)<i?r:n},x.prototype.getOrgRatio=function(t){var e=t.width/t.height;return e<1&&(e=1/e),e},x.prototype.calcIdealRowWidth=function(t,e){var n=u.TILING_PADDING_VERTICAL,r=u.TILING_PADDING_HORIZONTAL,i=t.length,o=0,a=0,s=0;t.forEach((function(t){o+=t.getWidth(),a+=t.getHeight(),t.getWidth()>s&&(s=t.getWidth())}));var l,c=o/i,h=a/i,p=Math.pow(n-r,2)+4*(c+r)*(h+n)*i,f=(r-n+Math.sqrt(p))/(2*(c+r));e?(l=Math.ceil(f))==f&&l++:l=Math.floor(f);var d=l*(c+r)-r;return s>d&&(d=s),d+2*r},x.prototype.tileNodesByFavoringDim=function(t,e,n){var r=u.TILING_PADDING_VERTICAL,i=u.TILING_PADDING_HORIZONTAL,o=u.TILING_COMPARE_BY,a={rows:[],rowWidth:[],rowHeight:[],width:0,height:e,verticalPadding:r,horizontalPadding:i,centerX:0,centerY:0};o&&(a.idealRowWidth=this.calcIdealRowWidth(t,n));var s=function(t){return t.rect.width*t.rect.height},l=function(t,e){return s(e)-s(t)};t.sort((function(t,e){var n=l;return a.idealRowWidth?(n=o)(t.id,e.id):n(t,e)}));for(var c=0,h=0,p=0;p<t.length;p++)c+=(f=t[p]).getCenterX(),h+=f.getCenterY();for(a.centerX=c/t.length,a.centerY=h/t.length,p=0;p<t.length;p++){var f=t[p];if(0==a.rows.length)this.insertNodeToRow(a,f,0,e);else if(this.canAddHorizontal(a,f.rect.width,f.rect.height)){var d=a.rows.length-1;a.idealRowWidth||(d=this.getShortestRowIndex(a)),this.insertNodeToRow(a,f,d,e)}else this.insertNodeToRow(a,f,a.rows.length,e);this.shiftToLastRow(a)}return a},x.prototype.insertNodeToRow=function(t,e,n,r){var i=r;n==t.rows.length&&(t.rows.push([]),t.rowWidth.push(i),t.rowHeight.push(0));var o=t.rowWidth[n]+e.rect.width;t.rows[n].length>0&&(o+=t.horizontalPadding),t.rowWidth[n]=o,t.width<o&&(t.width=o);var a=e.rect.height;n>0&&(a+=t.verticalPadding);var s=0;a>t.rowHeight[n]&&(s=t.rowHeight[n],t.rowHeight[n]=a,s=t.rowHeight[n]-s),t.height+=s,t.rows[n].push(e)},x.prototype.getShortestRowIndex=function(t){for(var e=-1,n=Number.MAX_VALUE,r=0;r<t.rows.length;r++)t.rowWidth[r]<n&&(e=r,n=t.rowWidth[r]);return e},x.prototype.getLongestRowIndex=function(t){for(var e=-1,n=Number.MIN_VALUE,r=0;r<t.rows.length;r++)t.rowWidth[r]>n&&(e=r,n=t.rowWidth[r]);return e},x.prototype.canAddHorizontal=function(t,e,n){if(t.idealRowWidth){var r=t.rows.length-1;return t.rowWidth[r]+e+t.horizontalPadding<=t.idealRowWidth}var i=this.getShortestRowIndex(t);if(i<0)return!0;var o=t.rowWidth[i];if(o+t.horizontalPadding+e<=t.width)return!0;var a,s,u=0;return t.rowHeight[i]<n&&i>0&&(u=n+t.verticalPadding-t.rowHeight[i]),a=t.width-o>=e+t.horizontalPadding?(t.height+u)/(o+e+t.horizontalPadding):(t.height+u)/t.width,u=n+t.verticalPadding,(s=t.width<e?(t.height+u)/e:(t.height+u)/t.width)<1&&(s=1/s),a<1&&(a=1/a),a<s},x.prototype.shiftToLastRow=function(t){var e=this.getLongestRowIndex(t),n=t.rowWidth.length-1,r=t.rows[e],i=r[r.length-1],o=i.width+t.horizontalPadding;if(t.width-t.rowWidth[n]>o&&e!=n){r.splice(-1,1),t.rows[n].push(i),t.rowWidth[e]=t.rowWidth[e]-o,t.rowWidth[n]=t.rowWidth[n]+o,t.width=t.rowWidth[instance.getLongestRowIndex(t)];for(var a=Number.MIN_VALUE,s=0;s<r.length;s++)r[s].height>a&&(a=r[s].height);e>0&&(a+=t.verticalPadding);var u=t.rowHeight[e]+t.rowHeight[n];t.rowHeight[e]=a,t.rowHeight[n]<i.height+t.verticalPadding&&(t.rowHeight[n]=i.height+t.verticalPadding);var l=t.rowHeight[e]+t.rowHeight[n];t.height+=l-u,this.shiftToLastRow(t)}},x.prototype.tilingPreLayout=function(){u.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){u.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var t,e=[],n=!0;n;){var r=this.graphManager.getAllNodes(),i=[];n=!1;for(var o=0;o<r.length;o++)if(1==(t=r[o]).getEdges().length&&!t.getEdges()[0].isInterGraph&&null==t.getChild()){if(u.PURE_INCREMENTAL){var a=t.getEdges()[0].getOtherEnd(t),s=new d(t.getCenterX()-a.getCenterX(),t.getCenterY()-a.getCenterY());i.push([t,t.getEdges()[0],t.getOwner(),s])}else i.push([t,t.getEdges()[0],t.getOwner()]);n=!0}if(1==n){for(var l=[],c=0;c<i.length;c++)1==i[c][0].getEdges().length&&(l.push(i[c]),i[c][0].getOwner().remove(i[c][0]));e.push(l),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=e},x.prototype.growTree=function(t){for(var e,n=t[t.length-1],r=0;r<n.length;r++)e=n[r],this.findPlaceforPrunedNode(e),e[2].add(e[0]),e[2].add(e[1],e[1].source,e[1].target);t.splice(t.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(t){var e,n,r=t[0];if(n=r==t[1].source?t[1].target:t[1].source,u.PURE_INCREMENTAL)r.setCenter(n.getCenterX()+t[3].getWidth(),n.getCenterY()+t[3].getHeight());else{var i=n.startX,o=n.finishX,a=n.startY,s=n.finishY,l=[0,0,0,0];if(a>0)for(var h=i;h<=o;h++)l[0]+=this.grid[h][a-1].length+this.grid[h][a].length-1;if(o<this.grid.length-1)for(h=a;h<=s;h++)l[1]+=this.grid[o+1][h].length+this.grid[o][h].length-1;if(s<this.grid[0].length-1)for(h=i;h<=o;h++)l[2]+=this.grid[h][s+1].length+this.grid[h][s].length-1;if(i>0)for(h=a;h<=s;h++)l[3]+=this.grid[i-1][h].length+this.grid[i][h].length-1;for(var p,f,d=y.MAX_VALUE,g=0;g<l.length;g++)l[g]<d?(d=l[g],p=1,f=g):l[g]==d&&p++;if(3==p&&0==d)0==l[0]&&0==l[1]&&0==l[2]?e=1:0==l[0]&&0==l[1]&&0==l[3]?e=0:0==l[0]&&0==l[2]&&0==l[3]?e=3:0==l[1]&&0==l[2]&&0==l[3]&&(e=2);else if(2==p&&0==d){var v=Math.floor(2*Math.random());e=0==l[0]&&0==l[1]?0==v?0:1:0==l[0]&&0==l[2]?0==v?0:2:0==l[0]&&0==l[3]?0==v?0:3:0==l[1]&&0==l[2]?0==v?1:2:0==l[1]&&0==l[3]?0==v?1:3:0==v?2:3}else e=4==p&&0==d?v=Math.floor(4*Math.random()):f;0==e?r.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-c.DEFAULT_EDGE_LENGTH-r.getHeight()/2):1==e?r.setCenter(n.getCenterX()+n.getWidth()/2+c.DEFAULT_EDGE_LENGTH+r.getWidth()/2,n.getCenterY()):2==e?r.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+c.DEFAULT_EDGE_LENGTH+r.getHeight()/2):r.setCenter(n.getCenterX()-n.getWidth()/2-c.DEFAULT_EDGE_LENGTH-r.getWidth()/2,n.getCenterY())}},t.exports=x},991:(t,e,n)=>{var r=n(551).FDLayoutNode,i=n(551).IMath;function o(t,e,n,i){r.call(this,t,e,n,i)}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];o.prototype.calculateDisplacement=function(){var t=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementX=t.coolingFactor*t.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementY=t.coolingFactor*t.maxNodeDisplacement*i.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},o.prototype.propogateDisplacementToChildren=function(t,e){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)null==(n=r[i]).getChild()?(n.displacementX+=t,n.displacementY+=e):n.propogateDisplacementToChildren(t,e)},o.prototype.move=function(){var t=this.graphManager.getLayout();null!=this.child&&0!=this.child.getNodes().length||(this.moveBy(this.displacementX,this.displacementY),t.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.setPred1=function(t){this.pred1=t},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(t){this.next=t},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(t){this.processed=t},o.prototype.isProcessed=function(){return processed},t.exports=o},902:(t,e,n)=>{function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=n(806),o=n(551).LinkedList,a=n(551).Matrix,s=n(551).SVD;function u(){}u.handleConstraints=function(t){var e={};e.fixedNodeConstraint=t.constraints.fixedNodeConstraint,e.alignmentConstraint=t.constraints.alignmentConstraint,e.relativePlacementConstraint=t.constraints.relativePlacementConstraint;for(var n=new Map,u=new Map,l=[],c=[],h=t.getAllNodes(),p=0,f=0;f<h.length;f++){var d=h[f];null==d.getChild()&&(u.set(d.id,p++),l.push(d.getCenterX()),c.push(d.getCenterY()),n.set(d.id,d))}e.relativePlacementConstraint&&e.relativePlacementConstraint.forEach((function(t){t.gap||0==t.gap||(t.left?t.gap=i.DEFAULT_EDGE_LENGTH+n.get(t.left).getWidth()/2+n.get(t.right).getWidth()/2:t.gap=i.DEFAULT_EDGE_LENGTH+n.get(t.top).getHeight()/2+n.get(t.bottom).getHeight()/2)}));var g=function(t){var e=0,n=0;return t.forEach((function(t){e+=l[u.get(t)],n+=c[u.get(t)]})),{x:e/t.size,y:n/t.size}},y=function(t,e,n,i,a){var s=new Map;t.forEach((function(t,e){s.set(e,0)})),t.forEach((function(t,e){t.forEach((function(t){s.set(t.id,s.get(t.id)+1)}))}));var h=new Map,p=new Map,f=new o;s.forEach((function(t,r){0==t?(f.push(r),n||("horizontal"==e?h.set(r,u.has(r)?l[u.get(r)]:i.get(r)):h.set(r,u.has(r)?c[u.get(r)]:i.get(r)))):h.set(r,Number.NEGATIVE_INFINITY),n&&p.set(r,new Set([r]))})),n&&a.forEach((function(t){var r=[];if(t.forEach((function(t){n.has(t)&&r.push(t)})),r.length>0){var o=0;r.forEach((function(t){"horizontal"==e?(h.set(t,u.has(t)?l[u.get(t)]:i.get(t)),o+=h.get(t)):(h.set(t,u.has(t)?c[u.get(t)]:i.get(t)),o+=h.get(t))})),o/=r.length,t.forEach((function(t){n.has(t)||h.set(t,o)}))}else{var a=0;t.forEach((function(t){a+="horizontal"==e?u.has(t)?l[u.get(t)]:i.get(t):u.has(t)?c[u.get(t)]:i.get(t)})),a/=t.length,t.forEach((function(t){h.set(t,a)}))}}));for(var d=function(){var r=f.shift();t.get(r).forEach((function(t){if(h.get(t.id)<h.get(r)+t.gap)if(n&&n.has(t.id)){var o;if(o="horizontal"==e?u.has(t.id)?l[u.get(t.id)]:i.get(t.id):u.has(t.id)?c[u.get(t.id)]:i.get(t.id),h.set(t.id,o),o<h.get(r)+t.gap){var a=h.get(r)+t.gap-o;p.get(r).forEach((function(t){h.set(t,h.get(t)-a)}))}}else h.set(t.id,h.get(r)+t.gap);s.set(t.id,s.get(t.id)-1),0==s.get(t.id)&&f.push(t.id),n&&p.set(t.id,function(t,e){var n=new Set(t),r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;n.add(u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(p.get(r),p.get(t.id)))}))};0!=f.length;)d();if(n){var g=new Set;t.forEach((function(t,e){0==t.length&&g.add(e)}));var y=[];p.forEach((function(t,e){if(g.has(e)){var i=!1,o=!0,a=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;n.has(c)&&(i=!0)}}catch(t){a=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}if(!i){var h=!1,p=void 0;y.forEach((function(e,n){e.has([].concat(r(t))[0])&&(h=!0,p=n)})),h?t.forEach((function(t){y[p].add(t)})):y.push(new Set(t))}}})),y.forEach((function(t,n){var r=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,p=!0,f=!1,d=void 0;try{for(var g,y=t[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var v,m=g.value;v="horizontal"==e?u.has(m)?l[u.get(m)]:i.get(m):u.has(m)?c[u.get(m)]:i.get(m);var _=h.get(m);v<r&&(r=v),v>a&&(a=v),_<o&&(o=_),_>s&&(s=_)}}catch(t){f=!0,d=t}finally{try{!p&&y.return&&y.return()}finally{if(f)throw d}}var b=(r+a)/2-(o+s)/2,x=!0,E=!1,w=void 0;try{for(var C,N=t[Symbol.iterator]();!(x=(C=N.next()).done);x=!0){var I=C.value;h.set(I,h.get(I)+b)}}catch(t){E=!0,w=t}finally{try{!x&&N.return&&N.return()}finally{if(E)throw w}}}))}return h},v=function(t){var e=0,n=0,r=0,i=0;if(t.forEach((function(t){t.left?l[u.get(t.left)]-l[u.get(t.right)]>=0?e++:n++:c[u.get(t.top)]-c[u.get(t.bottom)]>=0?r++:i++})),e>n&&r>i)for(var o=0;o<u.size;o++)l[o]=-1*l[o],c[o]=-1*c[o];else if(e>n)for(var a=0;a<u.size;a++)l[a]=-1*l[a];else if(r>i)for(var s=0;s<u.size;s++)c[s]=-1*c[s]},m=function(t){var e=[],n=new o,r=new Set,i=0;return t.forEach((function(o,a){if(!r.has(a)){e[i]=[];var s=a;for(n.push(s),r.add(s),e[i].push(s);0!=n.length;)s=n.shift(),t.get(s).forEach((function(t){r.has(t.id)||(n.push(t.id),r.add(t.id),e[i].push(t.id))}));i++}})),e},_=function(t){var e=new Map;return t.forEach((function(t,n){e.set(n,[])})),t.forEach((function(t,n){t.forEach((function(t){e.get(n).push(t),e.get(t.id).push({id:n,gap:t.gap,direction:t.direction})}))})),e},b=function(t){var e=new Map;return t.forEach((function(t,n){e.set(n,[])})),t.forEach((function(t,n){t.forEach((function(t){e.get(t.id).push({id:n,gap:t.gap,direction:t.direction})}))})),e},x=[],E=[],w=!1,C=!1,N=new Set,I=new Map,T=new Map,S=[];if(e.fixedNodeConstraint&&e.fixedNodeConstraint.forEach((function(t){N.add(t.nodeId)})),e.relativePlacementConstraint&&(e.relativePlacementConstraint.forEach((function(t){t.left?(I.has(t.left)?I.get(t.left).push({id:t.right,gap:t.gap,direction:"horizontal"}):I.set(t.left,[{id:t.right,gap:t.gap,direction:"horizontal"}]),I.has(t.right)||I.set(t.right,[])):(I.has(t.top)?I.get(t.top).push({id:t.bottom,gap:t.gap,direction:"vertical"}):I.set(t.top,[{id:t.bottom,gap:t.gap,direction:"vertical"}]),I.has(t.bottom)||I.set(t.bottom,[]))})),T=_(I),S=m(T)),i.TRANSFORM_ON_CONSTRAINT_HANDLING){if(e.fixedNodeConstraint&&e.fixedNodeConstraint.length>1)e.fixedNodeConstraint.forEach((function(t,e){x[e]=[t.position.x,t.position.y],E[e]=[l[u.get(t.nodeId)],c[u.get(t.nodeId)]]})),w=!0;else if(e.alignmentConstraint)!function(){var t=0;if(e.alignmentConstraint.vertical){for(var n=e.alignmentConstraint.vertical,i=function(e){var i=new Set;n[e].forEach((function(t){i.add(t)}));var o,a=new Set([].concat(r(i)).filter((function(t){return N.has(t)})));o=a.size>0?l[u.get(a.values().next().value)]:g(i).x,n[e].forEach((function(e){x[t]=[o,c[u.get(e)]],E[t]=[l[u.get(e)],c[u.get(e)]],t++}))},o=0;o<n.length;o++)i(o);w=!0}if(e.alignmentConstraint.horizontal){for(var a=e.alignmentConstraint.horizontal,s=function(e){var n=new Set;a[e].forEach((function(t){n.add(t)}));var i,o=new Set([].concat(r(n)).filter((function(t){return N.has(t)})));i=o.size>0?l[u.get(o.values().next().value)]:g(n).y,a[e].forEach((function(e){x[t]=[l[u.get(e)],i],E[t]=[l[u.get(e)],c[u.get(e)]],t++}))},h=0;h<a.length;h++)s(h);w=!0}e.relativePlacementConstraint&&(C=!0)}();else if(e.relativePlacementConstraint){for(var A=0,L=0,D=0;D<S.length;D++)S[D].length>A&&(A=S[D].length,L=D);if(A<T.size/2)v(e.relativePlacementConstraint),w=!1,C=!1;else{var M=new Map,O=new Map,P=[];S[L].forEach((function(t){I.get(t).forEach((function(e){"horizontal"==e.direction?(M.has(t)?M.get(t).push(e):M.set(t,[e]),M.has(e.id)||M.set(e.id,[]),P.push({left:t,right:e.id})):(O.has(t)?O.get(t).push(e):O.set(t,[e]),O.has(e.id)||O.set(e.id,[]),P.push({top:t,bottom:e.id}))}))})),v(P),C=!1;var R=y(M,"horizontal"),k=y(O,"vertical");S[L].forEach((function(t,e){E[e]=[l[u.get(t)],c[u.get(t)]],x[e]=[],R.has(t)?x[e][0]=R.get(t):x[e][0]=l[u.get(t)],k.has(t)?x[e][1]=k.get(t):x[e][1]=c[u.get(t)]})),w=!0}}if(w){for(var F,B=a.transpose(x),z=a.transpose(E),G=0;G<B.length;G++)B[G]=a.multGamma(B[G]),z[G]=a.multGamma(z[G]);var q=a.multMat(B,a.transpose(z)),V=s.svd(q);F=a.multMat(V.V,a.transpose(V.U));for(var U=0;U<u.size;U++){var j=[l[U],c[U]],Y=[F[0][0],F[1][0]],X=[F[0][1],F[1][1]];l[U]=a.dotProduct(j,Y),c[U]=a.dotProduct(j,X)}C&&v(e.relativePlacementConstraint)}}if(i.ENFORCE_CONSTRAINTS){if(e.fixedNodeConstraint&&e.fixedNodeConstraint.length>0){var H={x:0,y:0};e.fixedNodeConstraint.forEach((function(t,e){var n,r,i=(r={x:l[u.get(t.nodeId)],y:c[u.get(t.nodeId)]},{x:(n=t.position).x-r.x,y:n.y-r.y});H.x+=i.x,H.y+=i.y})),H.x/=e.fixedNodeConstraint.length,H.y/=e.fixedNodeConstraint.length,l.forEach((function(t,e){l[e]+=H.x})),c.forEach((function(t,e){c[e]+=H.y})),e.fixedNodeConstraint.forEach((function(t){l[u.get(t.nodeId)]=t.position.x,c[u.get(t.nodeId)]=t.position.y}))}if(e.alignmentConstraint){if(e.alignmentConstraint.vertical)for(var W=e.alignmentConstraint.vertical,$=function(t){var e=new Set;W[t].forEach((function(t){e.add(t)}));var n,i=new Set([].concat(r(e)).filter((function(t){return N.has(t)})));n=i.size>0?l[u.get(i.values().next().value)]:g(e).x,e.forEach((function(t){N.has(t)||(l[u.get(t)]=n)}))},Z=0;Z<W.length;Z++)$(Z);if(e.alignmentConstraint.horizontal)for(var K=e.alignmentConstraint.horizontal,Q=function(t){var e=new Set;K[t].forEach((function(t){e.add(t)}));var n,i=new Set([].concat(r(e)).filter((function(t){return N.has(t)})));n=i.size>0?c[u.get(i.values().next().value)]:g(e).y,e.forEach((function(t){N.has(t)||(c[u.get(t)]=n)}))},J=0;J<K.length;J++)Q(J)}e.relativePlacementConstraint&&function(){var t=new Map,n=new Map,r=new Map,i=new Map,o=new Map,a=new Map,s=new Set,h=new Set;if(N.forEach((function(t){s.add(t),h.add(t)})),e.alignmentConstraint){if(e.alignmentConstraint.vertical)for(var p=e.alignmentConstraint.vertical,f=function(e){r.set("dummy"+e,[]),p[e].forEach((function(n){t.set(n,"dummy"+e),r.get("dummy"+e).push(n),N.has(n)&&s.add("dummy"+e)})),o.set("dummy"+e,l[u.get(p[e][0])])},d=0;d<p.length;d++)f(d);if(e.alignmentConstraint.horizontal)for(var g=e.alignmentConstraint.horizontal,v=function(t){i.set("dummy"+t,[]),g[t].forEach((function(e){n.set(e,"dummy"+t),i.get("dummy"+t).push(e),N.has(e)&&h.add("dummy"+t)})),a.set("dummy"+t,c[u.get(g[t][0])])},x=0;x<g.length;x++)v(x)}var E=new Map,w=new Map,C=function(e){I.get(e).forEach((function(r){var i=void 0,o=void 0;"horizontal"==r.direction?(i=t.get(e)?t.get(e):e,o=t.get(r.id)?{id:t.get(r.id),gap:r.gap,direction:r.direction}:r,E.has(i)?E.get(i).push(o):E.set(i,[o]),E.has(o.id)||E.set(o.id,[])):(i=n.get(e)?n.get(e):e,o=n.get(r.id)?{id:n.get(r.id),gap:r.gap,direction:r.direction}:r,w.has(i)?w.get(i).push(o):w.set(i,[o]),w.has(o.id)||w.set(o.id,[]))}))},T=!0,S=!1,A=void 0;try{for(var L,D=I.keys()[Symbol.iterator]();!(T=(L=D.next()).done);T=!0)C(L.value)}catch(t){S=!0,A=t}finally{try{!T&&D.return&&D.return()}finally{if(S)throw A}}var M=_(E),O=_(w),P=m(M),R=m(O),k=b(E),F=b(w),B=[],z=[];P.forEach((function(t,e){B[e]=[],t.forEach((function(t){0==k.get(t).length&&B[e].push(t)}))})),R.forEach((function(t,e){z[e]=[],t.forEach((function(t){0==F.get(t).length&&z[e].push(t)}))}));var G=y(E,"horizontal",s,o,B),q=y(w,"vertical",h,a,z),V=function(t){r.get(t)?r.get(t).forEach((function(e){l[u.get(e)]=G.get(t)})):l[u.get(t)]=G.get(t)},U=!0,j=!1,Y=void 0;try{for(var X,H=G.keys()[Symbol.iterator]();!(U=(X=H.next()).done);U=!0)V(X.value)}catch(t){j=!0,Y=t}finally{try{!U&&H.return&&H.return()}finally{if(j)throw Y}}var W=function(t){i.get(t)?i.get(t).forEach((function(e){c[u.get(e)]=q.get(t)})):c[u.get(t)]=q.get(t)},$=!0,Z=!1,K=void 0;try{for(var Q,J=q.keys()[Symbol.iterator]();!($=(Q=J.next()).done);$=!0)W(Q.value)}catch(t){Z=!0,K=t}finally{try{!$&&J.return&&J.return()}finally{if(Z)throw K}}}()}for(var tt=0;tt<h.length;tt++){var et=h[tt];null==et.getChild()&&et.setCenter(l[u.get(et.id)],c[u.get(et.id)])}},t.exports=u},551:e=>{e.exports=t}},n={},r=function t(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}(45);return r})()},t.exports=r(n(2241))},474:t=>{self,t.exports=(()=>{var t={621:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){for(var e="",n=0;n<t.length;n++)e+=t[n],n!==t.length-1&&(e+=" ");return e}function o(t,e,n){n?t.setAttribute(e,""):t.removeAttribute(e)}function a(t,e,n){void 0===customElements.get(t)&&customElements.define(t,e,{extends:n})}n.r(e),n.d(e,{contextMenus:()=>A});var s="cy-context-menus-divider",u={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}function y(t){var e=x();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?v(t):e}(this,n)}}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _(t){var e="function"==typeof Map?new Map:void 0;return(_=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return b(t,arguments,w(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),E(r,t)})(t)}function b(t,e,n){return(b=x()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&E(i,n.prototype),i}).apply(null,arguments)}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t){t.preventDefault(),t.stopPropagation()}var N=function(t){g(n,t);var e=y(n);function n(t,r,i){var a,s,u,l,c,h,f,d,g,y;p(this,n),m((s=v(y=e.call(this)),w(n.prototype)),"setAttribute",s).call(s,"id",t.id);var _=y._getMenuItemClassStr(i.cxtMenuItemClasses,t.hasTrailingDivider);if(m((u=v(y),w(n.prototype)),"setAttribute",u).call(u,"class",_),m((l=v(y),w(n.prototype)),"setAttribute",l).call(l,"title",null!==(a=t.tooltipText)&&void 0!==a?a:""),t.disabled&&o(v(y),"disabled",!0),t.image){var b=document.createElement("img");b.src=t.image.src,b.width=t.image.width,b.height=t.image.height,b.style.position="absolute",b.style.top=t.image.y+"px",b.style.left=t.image.x+"px",m((c=v(y),w(n.prototype)),"appendChild",c).call(c,b)}if(y.innerHTML+=t.content,y.onMenuItemClick=r,y.data={},y.clickFns=[],y.selector=t.selector,y.hasTrailingDivider=t.hasTrailingDivider,y.show=void 0===t.show||t.show,y.coreAsWell=t.coreAsWell||!1,y.scratchpad=i,void 0===t.onClickFunction&&void 0===t.submenu)throw new Error("A menu item must either have click function or a submenu or both");return y.onClickFunction=t.onClickFunction,t.submenu instanceof Array&&y._createSubmenu(t.submenu),m((h=v(y),w(n.prototype)),"addEventListener",h).call(h,"mousedown",C),m((f=v(y),w(n.prototype)),"addEventListener",f).call(f,"mouseup",C),m((d=v(y),w(n.prototype)),"addEventListener",d).call(d,"touchstart",C),m((g=v(y),w(n.prototype)),"addEventListener",g).call(g,"touchend",C),y}return d(n,[{key:"bindOnClickFunction",value:function(t){this.clickFns.push(t),m(w(n.prototype),"addEventListener",this).call(this,"click",t)}},{key:"unbindOnClickFunctions",value:function(){var t,e=c(this.clickFns);try{for(e.s();!(t=e.n()).done;){var r=t.value;m(w(n.prototype),"removeEventListener",this).call(this,"click",r)}}catch(t){e.e(t)}finally{e.f()}this.clickFns=[]}},{key:"enable",value:function(){o(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){o(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(t){this.hasTrailingDivider=t}},{key:"hasSubmenu",value:function(){return this.submenu instanceof I}},{key:"appendSubmenuItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(t,e)}},{key:"isClickable",value:function(){return void 0!==this.onClickFunction}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return!0===this.show&&"none"!==this.style.display}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(t){var e=this.getBoundingClientRect(),r=function(t){t.style.opacity="0",t.style.display="block";var e=t.getBoundingClientRect();return t.style.opacity="1",t.style.display="none",e}(this.submenu),i=e.right+r.width>window.innerWidth,o=e.top+r.height>window.innerHeight;i||o?i&&!o?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):i&&o?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var a=Array.from(this.submenu.children).filter((function(t){if(t instanceof n)return t.isVisible()})),u=a.length;a.forEach((function(t,e){t instanceof n&&(e<u-1&&t.getHasTrailingDivider()?t.classList.add(s):t.getHasTrailingDivider()&&t.classList.remove(s))}))}},{key:"_onMouseLeave",value:function(t){var e,n,r,i,o;e={x:t.clientX,y:t.clientY},n=this.submenu,i=e.y,(r=e.x)>=(o=n.getBoundingClientRect()).left&&r<=o.right&&i>=o.top&&i<=o.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new I(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var e,r=c(t);try{for(r.s();!(e=r.n()).done;){var i=new n(e.value,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(i)}}catch(t){r.e(t)}finally{r.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(t,e){return e?t+" "+s:t}}],[{key:"define",value:function(){a("ctx-menu-item",n,"button")}}]),n}(_(HTMLButtonElement)),I=function(t){g(n,t);var e=y(n);function n(t,r){var i,o;return p(this,n),m((i=v(o=e.call(this)),w(n.prototype)),"setAttribute",i).call(i,"class",r.cxtMenuClasses),o.style.position="absolute",o.onMenuItemClick=t,o.scratchpad=r,o}return d(n,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return"none"!==this.style.display}},{key:"hideMenuItems",value:function(){var t,e=c(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;n instanceof HTMLElement?n.style.display="none":console.warn("".concat(n," is not a HTMLElement"))}}catch(t){e.e(t)}finally{e.f()}}},{key:"hideSubmenus",value:function(){var t,e=c(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;n instanceof N&&n.submenu&&n.submenu.hide()}}catch(t){e.e(t)}finally{e.f()}}},{key:"appendMenuItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==e){if(e.parentNode!==this)throw new Error("The item with id='".concat(e.id,"' is not a child of the context menu"));this.insertBefore(t,e)}else this.appendChild(t);t.isClickable()&&this._performBindings(t)}},{key:"moveBefore",value:function(t,e){if(t.parentNode!==this)throw new Error("The item with id='".concat(t.id,"' is not a child of context menu"));if(e.parentNode!==this)throw new Error("The item with id='".concat(e.id,"' is not a child of context menu"));this.removeChild(t),this.insertBefore(t,e)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var t=this.lastChild;t instanceof N?this._removeImmediateMenuItem(t):(console.warn("Found non menu item in the context menu: ",t),this.removeChild(t))}}},{key:"_removeImmediateMenuItem",value:function(t){if(!this._detachImmediateMenuItem(t))throw new Error("menu item(id=".concat(t.id,") is not in the context menu"));t.detachSubmenu(),t.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(t){if(t.parentNode===this){if(this.removeChild(t),this.children.length<=0){var e=this.parentNode;e instanceof N&&e.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(t){var e=this._bindOnClick(t.onClickFunction);t.bindOnClickFunction(e),t.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(t){var e=this;return function(){var n=e.scratchpad.currentCyEvent;t(n)}}}],[{key:"define",value:function(){a("menu-item-list",n,"div")}}]),n}(_(HTMLDivElement)),T=function(t){g(n,t);var e=y(n);function n(t,r){var i;return p(this,n),(i=e.call(this,t,r)).onMenuItemClick=function(e){C(e),i.hide(),t()},i}return d(n,[{key:"removeMenuItem",value:function(t){var e=t.parentElement;e instanceof I&&this.contains(e)&&e._removeImmediateMenuItem(t)}},{key:"appendMenuItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.ensureDoesntContain(t.id),m(w(n.prototype),"appendMenuItem",this).call(this,t,e)}},{key:"insertMenuItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.before,r=e.parent;if(this.ensureDoesntContain(t.id),void 0!==n){if(!this.contains(n))throw new Error("before(id=".concat(n.id,") is not in the context menu"));var i=n.parentNode;if(!(i instanceof I))throw new Error("Parent of before(id=".concat(n.id,") is not a submenu"));i.appendMenuItem(t,n)}else if(void 0!==r){if(!this.contains(r))throw new Error("parent(id=".concat(r.id,") is not a descendant of the context menu"));r.appendSubmenuItem(t)}else this.appendMenuItem(t)}},{key:"moveBefore",value:function(t,e){var n=t.parentElement;if(!this.contains(n))throw new Error("parent(id=".concat(n.id,") is not in the contex menu"));if(!this.contains(e))throw new Error("before(id=".concat(e.id,") is not in the context menu"));n.removeChild(t),this.insertMenuItem(t,{before:e})}},{key:"moveToSubmenu",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.parentElement;if(!(r instanceof I))throw new Error("current parent(id=".concat(r.id,") is not a submenu"));if(!this.contains(r))throw new Error("parent of the menu item(id=".concat(r.id,") is not in the context menu"));if(null!==e){if(!this.contains(e))throw new Error("parent(id=".concat(e.id,") is not in the context menu"));r._detachImmediateMenuItem(t),e.appendSubmenuItem(t)}else null!==n&&(t.selector=n.selector,t.coreAsWell=n.coreAsWell),r._detachImmediateMenuItem(t),this.appendMenuItem(t)}},{key:"ensureDoesntContain",value:function(t){var e=document.getElementById(t);if(void 0!==e&&this.contains(e))throw new Error("There is already an element with id=".concat(t," in the context menu"))}}],[{key:"define",value:function(){a("ctx-menu",n,"div")}}]),n}(I);function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t){var e=this;e.scratch("cycontextmenus")||e.scratch("cycontextmenus",{});var n,o,a=function(t){return e.scratch("cycontextmenus")[t]},l=function(t,n){return e.scratch("cycontextmenus")[t]=n},c=a("options"),h=a("cxtMenu"),p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=d(t);if(void 0!==e){var r=y(e);h.insertMenuItem(n,{parent:r})}else h.insertMenuItem(n)},f=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=0;n<t.length;n++)p(t[n],e)},d=function(t){var n=e.scratch("cycontextmenus");return new N(t,h.onMenuItemClick,n)},g=function(){a("active")&&(h.removeAllMenuItems(),e.off("tapstart",a("eventCyTapStart")),e.off(c.evtType,a("onCxttap")),e.off("viewport",a("onViewport")),document.removeEventListener("mouseup",a("hideOnNonCyClick")),h.parentNode.removeChild(h),h=void 0,l("cxtMenu",void 0),l("active",!1),l("anyVisibleChild",!1),l("onCxttap",void 0),l("onViewport",void 0),l("hideOnNonCyClick",void 0))},y=function(t){var e=document.getElementById(t);if(e instanceof N)return e;throw new Error("The item with id=".concat(t," is not a menu item"))};if("get"!==t){N.define(),I.define(),T.define(),c=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var i in e)n[i]instanceof Array?n[i]=n[i].concat(e[i]):n[i]=e[i];return n}(u,t),l("options",c),a("active")&&g(),l("active",!0),l("submenuIndicatorGen",function(t){var e=document.createElement("img");return e.src=t.src,e.width=t.width,e.height=t.height,e.classList.add("cy-context-menus-submenu-indicator"),e}.bind(void 0,c.submenuIndicator));var v=i(c.contextMenuClasses);l("cxtMenuClasses",v);var m=e.scratch("cycontextmenus");h=new T((function(){return l("cxtMenuPosition",void 0)}),m),l("cxtMenu",h),e.container().appendChild(h),l("cxtMenuItemClasses",i(c.menuItemClasses));var _=c.menuItems;f(_),o=function(t){l("currentCyEvent",t),function(t){var n,r=e.container(),i=a("cxtMenuPosition"),o=t.position||t.cyPosition;if(i!=o){h.hideMenuItems(),l("anyVisibleChild",!1),l("cxtMenuPosition",o);var s={top:(n=r.getBoundingClientRect()).top,left:n.left},u=t.renderedPosition||t.cyRenderedPosition,c=getComputedStyle(r)["border-width"],p=parseInt(c.replace("px",""))||0;p>0&&(s.top+=p,s.left+=p);var f=r.clientHeight,d=r.clientWidth,g=f/2,y=d/2;u.y>g&&u.x<=y?(h.style.left=u.x+"px",h.style.bottom=f-u.y+"px",h.style.right="auto",h.style.top="auto"):u.y>g&&u.x>y?(h.style.right=d-u.x+"px",h.style.bottom=f-u.y+"px",h.style.left="auto",h.style.top="auto"):u.y<=g&&u.x<=y?(h.style.left=u.x+"px",h.style.top=u.y+"px",h.style.right="auto",h.style.bottom="auto"):(h.style.right=d-u.x+"px",h.style.top=u.y+"px",h.style.left="auto",h.style.bottom="auto")}}(t);var n,r=t.target||t.cyTarget,i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(h.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;o instanceof N&&(r===e?o.coreAsWell:r.is(o.selector))&&o.show&&(h.display(),l("anyVisibleChild",!0),o.display())}}catch(t){i.e(t)}finally{i.f()}var u=Array.from(h.children).filter((function(t){if(t instanceof N)return t.isVisible()})),c=u.length;u.forEach((function(t,e){t instanceof N&&(e<c-1&&t.getHasTrailingDivider()?t.classList.add(s):t.getHasTrailingDivider()&&t.classList.remove(s))})),!a("anyVisibleChild")&&!function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||t.style&&t.style.display||getComputedStyle(t).display}(h)&&h.hide()},e.on(c.evtType,o),l("onCxttap",o),function(){var t=function(t){if(h.contains(t.originalEvent.target))return!1;h.hide(),l("cxtMenuPosition",void 0),l("currentCyEvent",void 0)};e.on("tapstart",t),l("eventCyTapStart",t);var n=function(){h.hide()};e.on("viewport",n),l("onViewport",n)}(),n=function(t){e.container().contains(t.target)||h.contains(t.target)||(h.hide(),l("cxtMenuPosition",void 0))},document.addEventListener("mouseup",n),l("hideOnNonCyClick",n),function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(e.s();!(t=e.n()).done;)t.value.addEventListener("contextmenu",(function(t){return t.preventDefault()}))}catch(t){e.e(t)}finally{e.f()}}()}return function(t){return{isActive:function(){return a("active")},appendMenuItem:function(e){return p(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0),t},appendMenuItems:function(e){return f(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0),t},removeMenuItem:function(e){var n=y(e);return h.removeMenuItem(n),t},setTrailingDivider:function(e,n){var r=y(e);return r.setHasTrailingDivider(n),n?r.classList.add(s):r.classList.remove(s),t},insertBeforeMenuItem:function(e,n){var r=d(e),i=y(n);return h.insertMenuItem(r,{before:i}),t},moveToSubmenu:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=y(e);if(null===n)h.moveToSubmenu(r);else if("string"==typeof n){var i=y(n.toString());h.moveToSubmenu(r,i)}else void 0!==n.coreAsWell||void 0!==n.selector?h.moveToSubmenu(r,null,n):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return t},moveBeforeOtherMenuItem:function(e,n){var r=y(e),i=y(n);return h.moveBefore(r,i),t},disableMenuItem:function(e){return y(e).disable(),t},enableMenuItem:function(e){return y(e).enable(),t},hideMenuItem:function(e){return y(e).hide(),t},showMenuItem:function(e){return y(e).display(),t},destroy:function(){return g(),t}}}(this)}},579:(t,e,n)=>{var r=n(621).contextMenus,i=function(t){t&&t("core","contextMenus",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(579)})()},5466:function(t,e,n){var r;r=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.filter((function(t){return null!=t})).forEach((function(e){Object.keys(e).forEach((function(n){return t[n]=e[n]}))})),t}},function(t,e,n){"use strict";var r=n(10),i=n(0);t.exports=function(t){return new r(i({cy:this},t))}},function(t,e,n){"use strict";t.exports={disableGestures:function(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var t=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,t),window.addEventListener("touchmove",this.preventDefault,t),window.addEventListener("wheel",this.preventDefault,t)}return this},resetGestures:function(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var t=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,t),window.removeEventListener("touchmove",this.preventDefault,t),window.removeEventListener("wheel",this.preventDefault,t)}return this},saveGestureState:function(){var t=this.cy;return this.lastPanningEnabled=t.panningEnabled(),this.lastZoomingEnabled=t.zoomingEnabled(),this.lastBoxSelectionEnabled=t.boxSelectionEnabled(),this}}},function(t,e,n){"use strict";t.exports={addCytoscapeListeners:function(){var t=this,e=this.cy,n=this.options;return this.addListener(e,"drag",(function(){return t.grabbingNode=!0})),this.addListener(e,"free",(function(){return t.grabbingNode=!1})),this.addListener(e,"tapstart","node",(function(e){var n=e.target;t.drawMode&&t.start(n)})),this.addListener(e,"tapdrag",(function(e){t.update(e.position)})),this.addListener(e,"tapdragover","node",(function(e){n.snap||t.preview(e.target)})),this.addListener(e,"tapdragout","node",(function(e){n.snap||t.unpreview(e.target)})),this.addListener(e,"tapend",(function(){t.stop()})),this}}},function(t,e,n){"use strict";t.exports={canConnect:function(t,e){return!t.same(e)},edgeParams:function(t,e){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},function(t,e,n){"use strict";t.exports={toggleDrawMode:function(t){var e=this.cy;return this.drawMode=null!=t?t:!this.drawMode,this.drawMode?(this.prevUngrabifyState=e.autoungrabify(),e.autoungrabify(!0),this.emit("drawon")):(e.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function(){return this.toggleDrawMode(!0)},disableDrawMode:function(){return this.toggleDrawMode(!1)}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0);t.exports={makeEdges:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.cy,o=(this.options,this.presumptiveTargets),a=this.previewEles,s=this.active,u=this.sourceNode,l=this.targetNode,c=e?"eh-preview":"",h=n.collection(),p=this.canConnect(l);if(s&&p){if(!l||0===l.size())return a.remove(),void this.emit("cancel",this.mp(),u,o);if(!e)return a.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),u,l,a);var f,d,g,y,v=n.add((f={group:"edges",data:{source:u.id(),target:l.id()}},d=this.edgeParams(l),g=c,i(y={},d,f),i(y.data,d.data,f.data),(void 0===(t=d.classes)?"undefined":r(t))===r("")?y.classes=d.classes+" "+g:function(t){return(void 0===t?"undefined":r(t))===r([])&&null!=t.length}(d.classes)?y.classes=d.classes.join(" ")+" "+g:y.classes=g,y));return h=h.merge(v),e?(this.previewEles=h,h.style("events","no")):(h.style("events",""),this.emit("complete",this.mp(),u,l,h)),this}},makePreview:function(){return this.makeEdges(!0),this},removePreview:function(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function(){var t=this,e=this.sourceNode,n=this.ghostNode,r=this.cy,o=this.mx,a=this.my,s=void 0,u=void 0;if(e)return n&&0!==n.length&&!n.removed()||(u=this.ghostEles=r.collection(),r.batch((function(){(n=t.ghostNode=r.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var o={};(s=r.add(i({},o,{group:"edges",data:i({},o.data,{source:e.id(),target:n.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})})),u.merge(n).merge(s)),n.position({x:o,y:a}),this}}},function(t,e,n){"use strict";t.exports={disableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(t,e,n){"use strict";t.exports={enable:function(){return this.enabled=!0,this.emit("enable"),this},disable:function(){return this.enabled=!1,this.emit("disable"),this}}},function(t,e,n){"use strict";var r=n(13),i=Math.sqrt(2);t.exports={start:function(t){var e=this;if(this.canStartOn(t)){this.active=!0,this.sourceNode=t,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var n=function(t){return t.id()};this.canConnect=r((function(t){return e.options.canConnect(e.sourceNode,t)}),n),this.edgeParams=r((function(t){return e.options.edgeParams(e.sourceNode,t)}),n),this.emit("start",this.hp(),t)}},update:function(t){if(this.active){var e=t;return this.mx=e.x,this.my=e.y,this.updateEdge(),this.throttledSnap(),this}},preview:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.options,i=this.sourceNode,o=this.ghostNode,a=this.ghostEles,s=this.presumptiveTargets,u=this.previewEles,l=this.active,c=i,h=t.same(o),p=!this.canConnect(t),f=t.same(this.targetNode);if(!l||h||p||f)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var d=function(){e.targetNode=t,s.merge(t),t.addClass("eh-presumptive-target"),t.addClass("eh-target"),e.emit("hoverover",e.mp(),c,t),t.addClass("eh-preview"),a.addClass("eh-preview-active"),i.addClass("eh-preview-active"),t.addClass("eh-preview-active"),e.makePreview(),e.emit("previewon",e.mp(),c,t,u)};return n&&r.hoverDelay>0?this.previewTimeout=setTimeout(d,r.hoverDelay):d(),!0},unpreview:function(t){if(this.active){var e=this.previewTimeout,n=this.sourceNode,r=this.previewEles,i=this.ghostEles,o=this.cy;clearTimeout(e),this.previewTimeout=null;var a=n;return t.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),i.removeClass("eh-preview-active"),n.removeClass("eh-preview-active"),this.targetNode=o.collection(),this.removePreview(a,t),this.emit("hoverout",this.mp(),a,t),this.emit("previewoff",this.mp(),a,t,r),this}},stop:function(){if(this.active){var t=this.sourceNode,e=this.targetNode,n=this.ghostEles,r=this.presumptiveTargets;return clearTimeout(this.previewTimeout),t.removeClass("eh-source eh-preview-active"),e.removeClass("eh-target eh-preview eh-hover eh-preview-active"),r.removeClass("eh-presumptive-target"),this.makeEdges(),n.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),t),this}},snap:function(){if(!this.active||!this.options.snap)return!1;var t=this.cy,e=this.targetNode,n=this.options.snapThreshold,r=this.mp(),o=this.previewEles,a=this.ghostNode,s=function(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o},u=function(t){return function(t){return e=t.position(),n=r,s(e.x,e.y,n.x,n.y);var e,n}(t)<=function(t){var e=function(t){return i*Math.max(t.outerWidth(),t.outerHeight())/2}(t),r=e+n;return r*r}(t)},l=function(t){var e=t.position(),n=t.outerWidth()/2,i=t.outerHeight()/2,o=e.x,a=e.y,u=r.x,l=r.y,c=o-n,h=o+n,p=a-i,f=a+i,d=c<=u&&u<=h,g=p<=l&&l<=f;if(d&&g)return 0;if(d){var y=l-p,v=l-f;return Math.min(y*y,v*v)}if(g){var m=u-c,_=u-h;return Math.min(m*m,_*_)}return u<c&&l<p?s(u,l,c,p):u>h&&l<p?s(u,l,h,p):s(u,l,u<c&&l>f?c:h,f)},c=function(t){var e=r,n=t.outerWidth()/2,i=t.outerHeight()/2,o=t.position(),a=o.x-n,s=o.x+n,u=o.y-i,l=o.y+i;return a<=e.x&&e.x<=s&&u<=e.y&&e.y<=l},h=t.nodes((function(t){return!function(t){return t.same(o)||t.same(a)}(t)&&u(t)})).sort((function(t,e){return l(t)-l(e)})),p=!1;e.nonempty()&&!u(e)&&this.unpreview(e);for(var f=0;f<h.length;f++){var d=h[f];if((!d.isParent()||!c(d))&&(!d.isChild()||c(d.parent()))&&(d.same(e)||this.preview(d,!1))){p=!0;break}}return p},canStartOn:function(t){var e,n=this.previewEles,r=this.ghostEles,i=this.enabled,o=this.active,a=this.grabbingNode;return i&&!o&&!a&&null!=t&&t.nonempty()&&!(function(t){return n.anySame(t)}(e=t)||function(t){return r.anySame(t)}(e))},canStartDrawModeOn:function(t){return this.canStartOn(t)&&this.drawMode},canStartNonDrawModeOn:function(t){return this.canStartOn(t)&&!this.drawMode}}},function(t,e,n){"use strict";var r=n(4),i=n(0),o=n(14),a=n(2),s=n(3),u=n(5),l=n(6),c=n(8),h=n(9),p=n(11),f=n(7);function d(t){var e=t.cy;this.cy=e,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=i({},r,t),this.saveGestureState(),this.addListeners(),this.throttledSnap=o(this.snap.bind(this),1e3/t.snapFrequency),this.preventDefault=function(t){return t.preventDefault()},this.canConnect=function(){return!1};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,a)}catch(t){}this.windowListenerOptions=!n||{capture:!0,passive:!1}}var g=d.prototype={};g.destroy=function(){this.removeListeners()},g.setOptions=function(t){i(this.options,t)},g.mp=function(){return{x:this.mx,y:this.my}},g.hp=function(){return{x:this.hx,y:this.hy}},g.clearCollections=function(){var t=this.cy;this.previewEles=t.collection(),this.ghostEles=t.collection(),this.ghostNode=t.collection(),this.sourceNode=t.collection(),this.targetNode=t.collection(),this.presumptiveTargets=t.collection()},[a,s,u,l,c,h,p,f].forEach((function(t){return i(g,t)})),t.exports=d},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e,n,i,o){return(void 0===n?"undefined":r(n))!==r("")&&(o=i=n,n=null),null==o&&(o=!1),{target:t,event:e,selector:n,callback:i,options:o}}function o(t){return t instanceof Element}t.exports={addListener:function(t,e,n,r,a){var s=i(t,e,n,r,a);return this.listeners.push(s),o(s.target)?s.target.addEventListener(s.event,s.callback,s.options):s.selector?s.target.addListener(s.event,s.selector,s.callback,s.options):s.target.addListener(s.event,s.callback,s.options),this},addListeners:function(){var t=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",(function(){return t.destroy()})),this},removeListener:function(t,e,n,r,a){for(var s=i(t,e,n,r,a),u=this.listeners.length-1;u>=0;u--){var l=this.listeners[u];if(!(s.target!==l.target||s.event!==l.event||null!=s.selector&&s.selector!==l.selector||null!=s.callback&&s.callback!==l.callback)){this.listeners.splice(u,1),o(s.target)?s.target.removeEventListener(s.event,s.callback,s.options):s.selector?s.target.removeListener(s.event,s.selector,s.callback,s.options):s.target.removeListener(s.event,s.callback,s.options);break}}return this},removeListeners:function(){for(var t=this.listeners.length-1;t>=0;t--){var e=this.listeners[t];this.removeListener(e.target,e.event,e.selector,e.callback,e.options)}return this},emit:function(t,e){for(var n=this.cy,r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n.emit({type:"eh"+t,position:e},i),this}}},function(t,e,n){"use strict";var r=n(1),i=function(t){t&&t("core","edgehandles",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},function(e,n){e.exports=t},function(t,n){t.exports=e}])},t.exports=r(n(773),n(3096))},4867:function(t,e,n){var r;r=function(t){return(()=>{"use strict";var e={658:t=>{t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach((function(e){Object.keys(e).forEach((function(n){return t[n]=e[n]}))})),t}},548:(t,e,n)=>{var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(140).layoutBase.LinkedList,o={getTopMostNodes:function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;var r=t.filter((function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0}));return r},connectComponents:function(t,e,n,r){var o=new i,a=new Set,s=[],u=void 0,l=void 0,c=void 0,h=!1,p=1,f=[],d=[],g=function(){var r=t.collection();d.push(r);var i=n[0],g=t.collection();g.merge(i).merge(i.descendants().intersection(e)),s.push(i),g.forEach((function(t){o.push(t),a.add(t),r.merge(t)}));for(var y=function(){i=o.shift();var l=t.collection();i.neighborhood().nodes().forEach((function(t){e.intersection(i.edgesWith(t)).length>0&&l.merge(t)}));for(var c=0;c<l.length;c++){var h=l[c];null==(u=n.intersection(h.union(h.ancestors())))||a.has(u[0])||u.union(u.descendants()).forEach((function(t){o.push(t),a.add(t),r.merge(t),n.has(t)&&s.push(t)}))}};0!=o.length;)y();if(r.forEach((function(t){e.intersection(t.connectedEdges()).forEach((function(t){r.has(t.source())&&r.has(t.target())&&r.merge(t)}))})),s.length==n.length&&(h=!0),!h||h&&p>1){l=s[0],c=l.connectedEdges().length,s.forEach((function(t){t.connectedEdges().length<c&&(c=t.connectedEdges().length,l=t)})),f.push(l.id());var v=t.collection();v.merge(s[0]),s.forEach((function(t){v.merge(t)})),s=[],n=n.difference(v),p++}};do{g()}while(!h);return r&&f.length>0&&r.set("dummy"+(r.size+1),f),d},relocateComponent:function(t,e,n){if(!n.fixedNodeConstraint){var i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;if("draft"==n.quality){var u=!0,l=!1,c=void 0;try{for(var h,p=e.nodeIndexes[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value,d=r(f,2),g=d[0],y=d[1],v=n.cy.getElementById(g);if(v){var m=v.boundingBox(),_=e.xCoords[y]-m.w/2,b=e.xCoords[y]+m.w/2,x=e.yCoords[y]-m.h/2,E=e.yCoords[y]+m.h/2;_<i&&(i=_),b>o&&(o=b),x<a&&(a=x),E>s&&(s=E)}}}catch(t){l=!0,c=t}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}var w=t.x-(o+i)/2,C=t.y-(s+a)/2;e.xCoords=e.xCoords.map((function(t){return t+w})),e.yCoords=e.yCoords.map((function(t){return t+C}))}else{Object.keys(e).forEach((function(t){var n=e[t],r=n.getRect().x,u=n.getRect().x+n.getRect().width,l=n.getRect().y,c=n.getRect().y+n.getRect().height;r<i&&(i=r),u>o&&(o=u),l<a&&(a=l),c>s&&(s=c)}));var N=t.x-(o+i)/2,I=t.y-(s+a)/2;Object.keys(e).forEach((function(t){var n=e[t];n.setCenter(n.getCenterX()+N,n.getCenterY()+I)}))}}},calcBoundingBox:function(t,e,n,r){for(var i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,u=void 0,l=void 0,c=void 0,h=void 0,p=t.descendants().not(":parent"),f=p.length,d=0;d<f;d++){var g=p[d];i>(u=e[r.get(g.id())]-g.width()/2)&&(i=u),o<(l=e[r.get(g.id())]+g.width()/2)&&(o=l),a>(c=n[r.get(g.id())]-g.height()/2)&&(a=c),s<(h=n[r.get(g.id())]+g.height()/2)&&(s=h)}var y={};return y.topLeftX=i,y.topLeftY=a,y.width=o-i,y.height=s-a,y},calcParentsWithoutChildren:function(t,e){var n=t.collection();return e.nodes(":parent").forEach((function(t){var e=!1;t.children().forEach((function(t){"none"!=t.css("display")&&(e=!0)})),e||n.merge(t)})),n}};t.exports=o},816:(t,e,n)=>{var r=n(548),i=n(140).CoSELayout,o=n(140).CoSENode,a=n(140).layoutBase.PointD,s=n(140).layoutBase.DimensionD,u=n(140).layoutBase.LayoutConstants,l=n(140).layoutBase.FDLayoutConstants,c=n(140).CoSEConstants;t.exports={coseLayout:function(t,e){var n=t.cy,h=t.eles,p=h.nodes(),f=h.edges(),d=void 0,g=void 0,y=void 0,v={};t.randomize&&(d=e.nodeIndexes,g=e.xCoords,y=e.yCoords);var m=function(t){return"function"==typeof t},_=function(t,e){return m(t)?t(e):t},b=r.calcParentsWithoutChildren(n,h);null!=t.nestingFactor&&(c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor),null!=t.gravity&&(c.DEFAULT_GRAVITY_STRENGTH=l.DEFAULT_GRAVITY_STRENGTH=t.gravity),null!=t.numIter&&(c.MAX_ITERATIONS=l.MAX_ITERATIONS=t.numIter),null!=t.gravityRange&&(c.DEFAULT_GRAVITY_RANGE_FACTOR=l.DEFAULT_GRAVITY_RANGE_FACTOR=t.gravityRange),null!=t.gravityCompound&&(c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.gravityCompound),null!=t.gravityRangeCompound&&(c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.gravityRangeCompound),null!=t.initialEnergyOnIncremental&&(c.DEFAULT_COOLING_FACTOR_INCREMENTAL=l.DEFAULT_COOLING_FACTOR_INCREMENTAL=t.initialEnergyOnIncremental),null!=t.tilingCompareBy&&(c.TILING_COMPARE_BY=t.tilingCompareBy),"proof"==t.quality?u.QUALITY=2:u.QUALITY=0,c.NODE_DIMENSIONS_INCLUDE_LABELS=l.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=t.nodeDimensionsIncludeLabels,c.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!t.randomize,c.ANIMATE=l.ANIMATE=u.ANIMATE=t.animate,c.TILE=t.tile,c.TILING_PADDING_VERTICAL="function"==typeof t.tilingPaddingVertical?t.tilingPaddingVertical.call():t.tilingPaddingVertical,c.TILING_PADDING_HORIZONTAL="function"==typeof t.tilingPaddingHorizontal?t.tilingPaddingHorizontal.call():t.tilingPaddingHorizontal,c.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!0,c.PURE_INCREMENTAL=!t.randomize,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=t.uniformNodeDimensions,"transformed"==t.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!1),"enforced"==t.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!1),"cose"==t.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!0),"all"==t.step&&(t.randomize?c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!0),t.fixedNodeConstraint||t.alignmentConstraint||t.relativePlacementConstraint?c.TREE_REDUCTION_ON_INCREMENTAL=!1:c.TREE_REDUCTION_ON_INCREMENTAL=!0;var x=new i,E=x.newGraphManager();return function t(e,n,i,u){for(var l=n.length,c=0;c<l;c++){var h=n[c],p=null;0==h.intersection(b).length&&(p=h.children());var f=void 0,m=h.layoutDimensions({nodeDimensionsIncludeLabels:u.nodeDimensionsIncludeLabels});if(null!=h.outerWidth()&&null!=h.outerHeight())if(u.randomize)if(h.isParent()){var x=r.calcBoundingBox(h,g,y,d);f=0==h.intersection(b).length?e.add(new o(i.graphManager,new a(x.topLeftX,x.topLeftY),new s(x.width,x.height))):e.add(new o(i.graphManager,new a(x.topLeftX,x.topLeftY),new s(parseFloat(m.w),parseFloat(m.h))))}else f=e.add(new o(i.graphManager,new a(g[d.get(h.id())]-m.w/2,y[d.get(h.id())]-m.h/2),new s(parseFloat(m.w),parseFloat(m.h))));else f=e.add(new o(i.graphManager,new a(h.position("x")-m.w/2,h.position("y")-m.h/2),new s(parseFloat(m.w),parseFloat(m.h))));else f=e.add(new o(this.graphManager));f.id=h.data("id"),f.nodeRepulsion=_(u.nodeRepulsion,h),f.paddingLeft=parseInt(h.css("padding")),f.paddingTop=parseInt(h.css("padding")),f.paddingRight=parseInt(h.css("padding")),f.paddingBottom=parseInt(h.css("padding")),u.nodeDimensionsIncludeLabels&&(f.labelWidth=h.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,f.labelHeight=h.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,f.labelPosVertical=h.css("text-valign"),f.labelPosHorizontal=h.css("text-halign")),v[h.data("id")]=f,isNaN(f.rect.x)&&(f.rect.x=0),isNaN(f.rect.y)&&(f.rect.y=0),null!=p&&p.length>0&&t(i.getGraphManager().add(i.newGraph(),f),p,i,u)}}(E.addRoot(),r.getTopMostNodes(p),x,t),function(e,n,r){for(var i=0,o=0,a=0;a<r.length;a++){var s=r[a],u=v[s.data("source")],h=v[s.data("target")];if(u&&h&&u!==h&&0==u.getEdgesBetween(h).length){var p=n.add(e.newEdge(),u,h);p.id=s.id(),p.idealLength=_(t.idealEdgeLength,s),p.edgeElasticity=_(t.edgeElasticity,s),i+=p.idealLength,o++}}null!=t.idealEdgeLength&&(o>0?c.DEFAULT_EDGE_LENGTH=l.DEFAULT_EDGE_LENGTH=i/o:m(t.idealEdgeLength)?c.DEFAULT_EDGE_LENGTH=l.DEFAULT_EDGE_LENGTH=50:c.DEFAULT_EDGE_LENGTH=l.DEFAULT_EDGE_LENGTH=t.idealEdgeLength,c.MIN_REPULSION_DIST=l.MIN_REPULSION_DIST=l.DEFAULT_EDGE_LENGTH/10,c.DEFAULT_RADIAL_SEPARATION=l.DEFAULT_EDGE_LENGTH)}(x,E,f),function(t,e){e.fixedNodeConstraint&&(t.constraints.fixedNodeConstraint=e.fixedNodeConstraint),e.alignmentConstraint&&(t.constraints.alignmentConstraint=e.alignmentConstraint),e.relativePlacementConstraint&&(t.constraints.relativePlacementConstraint=e.relativePlacementConstraint)}(x,t),x.runLayout(),v}}},212:(t,e,n)=>{var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(658),o=n(548),a=n(657).spectralLayout,s=n(816).coseLayout,u=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(t){return 4500},idealEdgeLength:function(t){return 50},edgeElasticity:function(t){return.45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=i({},u,e)}return r(t,[{key:"run",value:function(){var t=this.options,e=t.cy,n=t.eles,r=[],i=[],u=void 0,l=[];!t.fixedNodeConstraint||Array.isArray(t.fixedNodeConstraint)&&0!=t.fixedNodeConstraint.length||(t.fixedNodeConstraint=void 0),t.alignmentConstraint&&(!t.alignmentConstraint.vertical||Array.isArray(t.alignmentConstraint.vertical)&&0!=t.alignmentConstraint.vertical.length||(t.alignmentConstraint.vertical=void 0),!t.alignmentConstraint.horizontal||Array.isArray(t.alignmentConstraint.horizontal)&&0!=t.alignmentConstraint.horizontal.length||(t.alignmentConstraint.horizontal=void 0)),!t.relativePlacementConstraint||Array.isArray(t.relativePlacementConstraint)&&0!=t.relativePlacementConstraint.length||(t.relativePlacementConstraint=void 0),(t.fixedNodeConstraint||t.alignmentConstraint||t.relativePlacementConstraint)&&(t.tile=!1,t.packComponents=!1);var c=void 0,h=!1;if(e.layoutUtilities&&t.packComponents&&((c=e.layoutUtilities("get"))||(c=e.layoutUtilities()),h=!0),n.nodes().length>0)if(h){var p=o.getTopMostNodes(t.eles.nodes());if((u=o.connectComponents(e,t.eles,p)).forEach((function(t){var e=t.boundingBox();l.push({x:e.x1+e.w/2,y:e.y1+e.h/2})})),t.randomize&&u.forEach((function(e){t.eles=e,r.push(a(t))})),"default"==t.quality||"proof"==t.quality){var f=e.collection();if(t.tile){var d=new Map,g=0,y={nodeIndexes:d,xCoords:[],yCoords:[]},v=[];if(u.forEach((function(t,e){0==t.edges().length&&(t.nodes().forEach((function(e,n){f.merge(t.nodes()[n]),e.isParent()||(y.nodeIndexes.set(t.nodes()[n].id(),g++),y.xCoords.push(t.nodes()[0].position().x),y.yCoords.push(t.nodes()[0].position().y))})),v.push(e))})),f.length>1){var m=f.boundingBox();l.push({x:m.x1+m.w/2,y:m.y1+m.h/2}),u.push(f),r.push(y);for(var _=v.length-1;_>=0;_--)u.splice(v[_],1),r.splice(v[_],1),l.splice(v[_],1)}}u.forEach((function(e,n){t.eles=e,i.push(s(t,r[n])),o.relocateComponent(l[n],i[n],t)}))}else u.forEach((function(e,n){o.relocateComponent(l[n],r[n],t)}));var b=new Set;if(u.length>1){var x=[],E=n.filter((function(t){return"none"==t.css("display")}));u.forEach((function(e,n){var a=void 0;if("draft"==t.quality&&(a=r[n].nodeIndexes),e.nodes().not(E).length>0){var s={edges:[],nodes:[]},u=void 0;e.nodes().not(E).forEach((function(e){if("draft"==t.quality)if(e.isParent()){var l=o.calcBoundingBox(e,r[n].xCoords,r[n].yCoords,a);s.nodes.push({x:l.topLeftX,y:l.topLeftY,width:l.width,height:l.height})}else u=a.get(e.id()),s.nodes.push({x:r[n].xCoords[u]-e.boundingbox().w/2,y:r[n].yCoords[u]-e.boundingbox().h/2,width:e.boundingbox().w,height:e.boundingbox().h});else i[n][e.id()]&&s.nodes.push({x:i[n][e.id()].getLeft(),y:i[n][e.id()].getTop(),width:i[n][e.id()].getWidth(),height:i[n][e.id()].getHeight()})})),e.edges().forEach((function(e){var u=e.source(),l=e.target();if("none"!=u.css("display")&&"none"!=l.css("display"))if("draft"==t.quality){var c=a.get(u.id()),h=a.get(l.id()),p=[],f=[];if(u.isParent()){var d=o.calcBoundingBox(u,r[n].xCoords,r[n].yCoords,a);p.push(d.topLeftX+d.width/2),p.push(d.topLeftY+d.height/2)}else p.push(r[n].xCoords[c]),p.push(r[n].yCoords[c]);if(l.isParent()){var g=o.calcBoundingBox(l,r[n].xCoords,r[n].yCoords,a);f.push(g.topLeftX+g.width/2),f.push(g.topLeftY+g.height/2)}else f.push(r[n].xCoords[h]),f.push(r[n].yCoords[h]);s.edges.push({startX:p[0],startY:p[1],endX:f[0],endY:f[1]})}else i[n][u.id()]&&i[n][l.id()]&&s.edges.push({startX:i[n][u.id()].getCenterX(),startY:i[n][u.id()].getCenterY(),endX:i[n][l.id()].getCenterX(),endY:i[n][l.id()].getCenterY()})})),s.nodes.length>0&&(x.push(s),b.add(n))}}));var w=c.packComponents(x,t.randomize).shifts;if("draft"==t.quality)r.forEach((function(t,e){var n=t.xCoords.map((function(t){return t+w[e].dx})),r=t.yCoords.map((function(t){return t+w[e].dy}));t.xCoords=n,t.yCoords=r}));else{var C=0;b.forEach((function(t){Object.keys(i[t]).forEach((function(e){var n=i[t][e];n.setCenter(n.getCenterX()+w[C].dx,n.getCenterY()+w[C].dy)})),C++}))}}}else{var N=t.eles.boundingBox();if(l.push({x:N.x1+N.w/2,y:N.y1+N.h/2}),t.randomize){var I=a(t);r.push(I)}"default"==t.quality||"proof"==t.quality?(i.push(s(t,r[0])),o.relocateComponent(l[0],i[0],t)):o.relocateComponent(l[0],r[0],t)}var T=function(e,n){if("default"==t.quality||"proof"==t.quality){"number"==typeof e&&(e=n);var o=void 0,a=void 0,s=e.data("id");return i.forEach((function(t){s in t&&(o={x:t[s].getRect().getCenterX(),y:t[s].getRect().getCenterY()},a=t[s])})),t.nodeDimensionsIncludeLabels&&(a.labelWidth&&("left"==a.labelPosHorizontal?o.x+=a.labelWidth/2:"right"==a.labelPosHorizontal&&(o.x-=a.labelWidth/2)),a.labelHeight&&("top"==a.labelPosVertical?o.y+=a.labelHeight/2:"bottom"==a.labelPosVertical&&(o.y-=a.labelHeight/2))),null==o&&(o={x:e.position("x"),y:e.position("y")}),{x:o.x,y:o.y}}var u=void 0;return r.forEach((function(t){var n=t.nodeIndexes.get(e.id());null!=n&&(u={x:t.xCoords[n],y:t.yCoords[n]})})),null==u&&(u={x:e.position("x"),y:e.position("y")}),{x:u.x,y:u.y}};if("default"==t.quality||"proof"==t.quality||t.randomize){var S=o.calcParentsWithoutChildren(e,n),A=n.filter((function(t){return"none"==t.css("display")}));t.eles=n.not(A),n.nodes().not(":parent").not(A).layoutPositions(this,t,T),S.length>0&&S.forEach((function(t){t.position(T(t))}))}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),t}();t.exports=l},657:(t,e,n)=>{var r=n(548),i=n(140).layoutBase.Matrix,o=n(140).layoutBase.SVD;t.exports={spectralLayout:function(t){var e=t.cy,n=t.eles,a=n.nodes(),s=n.nodes(":parent"),u=new Map,l=new Map,c=new Map,h=[],p=[],f=[],d=[],g=[],y=[],v=[],m=[],_=void 0,b=1e8,x=1e-9,E=t.piTol,w=t.samplingType,C=t.nodeSeparation,N=void 0,I=function(t,e,n){for(var r=[],i=0,o=0,a=0,s=void 0,u=[],c=0,p=1,f=0;f<_;f++)u[f]=b;for(r[o]=t,u[t]=0;o>=i;){a=r[i++];for(var d=h[a],v=0;v<d.length;v++)u[s=l.get(d[v])]==b&&(u[s]=u[a]+1,r[++o]=s);y[a][e]=u[a]*C}if(n){for(var m=0;m<_;m++)y[m][e]<g[m]&&(g[m]=y[m][e]);for(var x=0;x<_;x++)g[x]>c&&(c=g[x],p=x)}return p};r.connectComponents(e,n,r.getTopMostNodes(a),u),s.forEach((function(t){r.connectComponents(e,n,r.getTopMostNodes(t.descendants().intersection(n)),u)}));for(var T=0,S=0;S<a.length;S++)a[S].isParent()||l.set(a[S].id(),T++);var A=!0,L=!1,D=void 0;try{for(var M,O=u.keys()[Symbol.iterator]();!(A=(M=O.next()).done);A=!0){var P=M.value;l.set(P,T++)}}catch(t){L=!0,D=t}finally{try{!A&&O.return&&O.return()}finally{if(L)throw D}}for(var R=0;R<l.size;R++)h[R]=[];s.forEach((function(t){for(var e=t.children().intersection(n);0==e.nodes(":childless").length;)e=e.nodes()[0].children().intersection(n);var r=0,i=e.nodes(":childless")[0].connectedEdges().length;e.nodes(":childless").forEach((function(t,e){t.connectedEdges().length<i&&(i=t.connectedEdges().length,r=e)})),c.set(t.id(),e.nodes(":childless")[r].id())})),a.forEach((function(t){var e;e=t.isParent()?l.get(c.get(t.id())):l.get(t.id()),t.neighborhood().nodes().forEach((function(r){n.intersection(t.edgesWith(r)).length>0&&(r.isParent()?h[e].push(c.get(r.id())):h[e].push(r.id()))}))}));var k=function(t){var n=l.get(t),r=void 0;u.get(t).forEach((function(i){r=e.getElementById(i).isParent()?c.get(i):i,h[n].push(r),h[l.get(r)].push(t)}))},F=!0,B=!1,z=void 0;try{for(var G,q=u.keys()[Symbol.iterator]();!(F=(G=q.next()).done);F=!0)k(G.value)}catch(t){B=!0,z=t}finally{try{!F&&q.return&&q.return()}finally{if(B)throw z}}var V=void 0;if((_=l.size)>2){N=_<t.sampleSize?_:t.sampleSize;for(var U=0;U<_;U++)y[U]=[];for(var j=0;j<N;j++)m[j]=[];return"draft"==t.quality||"all"==t.step?(function(t){var e=void 0;if(t){e=Math.floor(Math.random()*_);for(var n=0;n<_;n++)g[n]=b;for(var r=0;r<N;r++)d[r]=e,e=I(e,r,t)}else{!function(){for(var t=0,e=0,n=!1;e<N;){t=Math.floor(Math.random()*_),n=!1;for(var r=0;r<e;r++)if(d[r]==t){n=!0;break}n||(d[e]=t,e++)}}();for(var i=0;i<N;i++)I(d[i],i,t)}for(var o=0;o<_;o++)for(var a=0;a<N;a++)y[o][a]*=y[o][a];for(var s=0;s<N;s++)v[s]=[];for(var u=0;u<N;u++)for(var l=0;l<N;l++)v[u][l]=y[d[l]][u]}(w),function(){for(var t=o.svd(v),e=t.S,n=t.U,r=t.V,a=e[0]*e[0]*e[0],s=[],u=0;u<N;u++){s[u]=[];for(var l=0;l<N;l++)s[u][l]=0,u==l&&(s[u][l]=e[u]/(e[u]*e[u]+a/(e[u]*e[u])))}m=i.multMat(i.multMat(r,s),i.transpose(n))}(),function(){for(var t=void 0,e=void 0,n=[],r=[],o=[],a=[],s=0;s<_;s++)n[s]=Math.random(),r[s]=Math.random();n=i.normalize(n),r=i.normalize(r);for(var u=x,l=x,c=void 0;;){for(var h=0;h<_;h++)o[h]=n[h];if(n=i.multGamma(i.multL(i.multGamma(o),y,m)),t=i.dotProduct(o,n),n=i.normalize(n),u=i.dotProduct(o,n),(c=Math.abs(u/l))<=1+E&&c>=1)break;l=u}for(var d=0;d<_;d++)o[d]=n[d];for(l=x;;){for(var g=0;g<_;g++)a[g]=r[g];if(a=i.minusOp(a,i.multCons(o,i.dotProduct(o,a))),r=i.multGamma(i.multL(i.multGamma(a),y,m)),e=i.dotProduct(a,r),r=i.normalize(r),u=i.dotProduct(a,r),(c=Math.abs(u/l))<=1+E&&c>=1)break;l=u}for(var v=0;v<_;v++)a[v]=r[v];p=i.multCons(o,Math.sqrt(Math.abs(t))),f=i.multCons(a,Math.sqrt(Math.abs(e)))}(),V={nodeIndexes:l,xCoords:p,yCoords:f}):(l.forEach((function(t,n){p.push(e.getElementById(n).position("x")),f.push(e.getElementById(n).position("y"))})),V={nodeIndexes:l,xCoords:p,yCoords:f}),V}var Y=l.keys(),X=e.getElementById(Y.next().value),H=X.position(),W=X.outerWidth();if(p.push(H.x),f.push(H.y),2==_){var $=e.getElementById(Y.next().value).outerWidth();p.push(H.x+W/2+$/2+t.idealEdgeLength),f.push(H.y)}return{nodeIndexes:l,xCoords:p,yCoords:f}}}},579:(t,e,n)=>{var r=n(212),i=function(t){t&&t("layout","fcose",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},140:e=>{e.exports=t}},n={},r=function t(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}(579);return r})()},t.exports=r(n(4182))},9764:t=>{window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){class n{constructor(t,e){this.x=t,this.y=e}diff(t){return new n(t.x-this.x,t.y-this.y)}}class r{constructor(t,e,n,r){this.x1=t,this.x2=n,this.y1=e,this.y2=r}center(){return new n((this.x2-this.x1)/2,(this.y2-this.y1)/2)}}class i{constructor(t,e){this.occupied=t,this.visited=e}}t.exports={Grid:class{constructor(t,e,o){this.width=t,this.height=e,this.step=o,this.grid=Array.from({length:this.stepWidth},(t=>Array.from({length:this.stepHeight},(t=>new i(!1,!1))))),this.center=new n(Math.floor(this.stepWidth/2),Math.floor(this.stepHeight/2)),this.occupiedRectangle=new r(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),this.numberOfOccupiredCells=0}get stepWidth(){return Math.floor(this.width/this.step)+1}get stepHeight(){return Math.floor(this.height/this.step)+1}getDirectNeighbors(t,e){var n=[];if(0==t.length){for(var r=0;r<this.stepWidth;r++)for(var i=0;i<this.stepHeight;i++)this.grid[r][i].occupied&&(n=n.concat(this.getCellNeighbors(r,i)));var o=0,a=n.length-1;for(r=2;r<=e;r++){if(a>=o)for(i=o;i<=a;i++)n=n.concat(this.getCellNeighbors(n[i].x,n[i].y));o=a+1,a=n.length-1}}else t.forEach(function(t){n=n.concat(this.getCellNeighbors(t.x,t.y))}.bind(this));return n}getCellNeighbors(t,e){var n=[];return t-1>=0&&(this.grid[t-1][e].occupied||this.grid[t-1][e].visited||(n.push({x:t-1,y:e}),this.grid[t-1][e].visited=!0)),t+1<this.stepWidth&&(this.grid[t+1][e].occupied||this.grid[t+1][e].visited||(n.push({x:t+1,y:e}),this.grid[t+1][e].visited=!0)),e-1>=0&&(this.grid[t][e-1].occupied||this.grid[t][e-1].visited||(n.push({x:t,y:e-1}),this.grid[t][e-1].visited=!0)),e+1<this.stepHeight&&(this.grid[t][e+1].occupied||this.grid[t][e+1].visited||(n.push({x:t,y:e+1}),this.grid[t][e+1].visited=!0)),t-1>=0&&(this.grid[t-1][e].occupied||this.grid[t-1][e].visited||(n.push({x:t-1,y:e}),this.grid[t-1][e].visited=!0)),t-1>=0&&e-1>=0&&(this.grid[t-1][e-1].occupied||this.grid[t-1][e-1].visited||(n.push({x:t-1,y:e-1}),this.grid[t-1][e-1].visited=!0)),t+1<this.stepWidth&&e-1>=0&&(this.grid[t+1][e-1].occupied||this.grid[t+1][e-1].visited||(n.push({x:t+1,y:e-1}),this.grid[t+1][e-1].visited=!0)),t-1>=0&&e+1<this.stepHeight&&(this.grid[t-1][e+1].occupied||this.grid[t-1][e+1].visited||(n.push({x:t-1,y:e+1}),this.grid[t-1][e+1].visited=!0)),t+1<this.stepWidth&&e+1<this.stepHeight&&(this.grid[t+1][e+1].occupied||this.grid[t+1][e+1].visited||(n.push({x:t+1,y:e+1}),this.grid[t+1][e+1].visited=!0)),n}placePolyomino(t,e,n){t.location.x=e,t.location.y=n;for(let r=0;r<t.stepWidth;r++)for(let i=0;i<t.stepHeight;i++)t.grid[r][i]&&(this.grid[r-t.center.x+e][i-t.center.y+n].occupied=!0);this.numberOfOccupiredCells+=t.numberOfOccupiredCells,this.updateBounds(t);for(let t=0;t<this.stepWidth;t++)for(let e=0;e<this.stepHeight;e++)this.grid[t][e].visited=!1}updateBounds(t){let e=t.getBoundingRectangle();this.occupiedRectangle.x1=Math.min(this.occupiedRectangle.x1,e.x1),this.occupiedRectangle.x2=Math.max(this.occupiedRectangle.x2,e.x2),this.occupiedRectangle.y1=Math.min(this.occupiedRectangle.y1,e.y1),this.occupiedRectangle.y2=Math.max(this.occupiedRectangle.y2,e.y2)}tryPlacingPolyomino(t,e,n){for(var r=0;r<t.stepWidth;r++)for(var i=0;i<t.stepHeight;i++){if(r-t.center.x+e>=this.stepWidth||r-t.center.x+e<0||i-t.center.y+n>=this.stepHeight||i-t.center.y+n<0)return!1;if(t.grid[r][i]&&this.grid[r-t.center.x+e][i-t.center.y+n].occupied)return!1}return!0}calculateUtilityOfPlacing(t,e,n,r){var i,o,a,s={},u=this.occupiedRectangle.x1,l=this.occupiedRectangle.x2,c=this.occupiedRectangle.y1,h=this.occupiedRectangle.y2;e-t.center.x<u&&(u=e-t.center.x),n-t.center.y<c&&(c=n-t.center.y),t.stepWidth-1-t.center.x+e>l&&(l=t.stepWidth-1-t.center.x+e),t.stepHeight-1-t.center.y+n>h&&(h=t.stepHeight-1-t.center.y+n);var p=l-u+1,f=h-c+1;return i=p/f,o=(this.numberOfOccupiredCells+t.numberOfOccupiredCells)/(p*f),a=i>r?(this.numberOfOccupiredCells+t.numberOfOccupiredCells)/(p*(p/r)):(this.numberOfOccupiredCells+t.numberOfOccupiredCells)/(f*r*f),s.actualAspectRatio=i,s.fullness=o,s.adjustedFullness=a,s}},Polyomino:class{constructor(t,e,r,i,o,a){this.width=r,this.height=i,this.gridStep=o,this.grid=new Array(this.stepWidth);for(var s=0;s<this.stepWidth;s++){this.grid[s]=new Array(this.stepHeight);for(var u=0;u<this.stepHeight;u++)this.grid[s][u]=!1}this.index=a,this.x1=t,this.y1=e,this.location=new n(-1,-1),this.center=new n(Math.floor(this.stepWidth/2),Math.floor(this.stepHeight/2)),this.numberOfOccupiredCells=0}get stepWidth(){return Math.floor(this.width/this.gridStep)+1}get stepHeight(){return Math.floor(this.height/this.gridStep)+1}get x2(){return this.x1+this.width}get y2(){return this.y1+this.height}get gridStepCenter(){return this.center.diff(this.location)}getBoundingRectangle(){const t=this.location.x-this.center.x,e=this.location.y-this.center.y;return new r(t,e,t+this.stepWidth-1,e+this.stepHeight-1)}},BoundingRectangle:r,Point:n}},function(t,e,n){var r={},i=n(0);const{Point:o}=n(0);r.uniqueArray=function(t){var e={};return t.forEach((function(t){e[t+"::"+typeof t]=t})),Object.keys(e).map((function(t){return e[t]}))},r.LineSuperCover=function(t,e){for(var n=e.x-t.x,r=e.y-t.y,o=Math.floor(Math.abs(n)),a=Math.floor(Math.abs(r)),s=n>0?1:-1,u=r>0?1:-1,l=new i.Point(t.x,t.y),c=[new i.Point(l.x,l.y)],h=0,p=0;h<o||p<a;)(.5+h)/o==(.5+p)/a?(l.x+=s,l.y+=u,h++,p++):(.5+h)/o<(.5+p)/a?(l.x+=s,h++):(l.y+=u,p++),c.push(new i.Point(l.x,l.y));return c},r.getCenter=function(t){void 0===Array.prototype.flatMap&&(Array.prototype.flatMap=function(t){const e=(t,e)=>t.concat(e);return((t,n)=>this.map(t).reduce(e,[]))(t)});let e=t.flatMap((t=>t.nodes)).map((t=>({left:t.x,top:t.y,right:t.x+t.width-1,bottom:t.y+t.height-1}))).reduce(((t,e)=>({left:Math.min(e.left,t.left),right:Math.max(e.right,t.right),top:Math.min(e.top,t.top),bottom:Math.max(e.bottom,t.bottom)})),{left:Number.MAX_VALUE,right:-Number.MAX_VALUE,top:Number.MAX_VALUE,bottom:-Number.MAX_VALUE});return new o((e.left+e.right)/2,(e.top+e.bottom)/2)},t.exports=r},function(t,e,n){var r;!function(){"use strict";var i=function(t){if(t){var e={idealEdgeLength:50,offset:20,desiredAspectRatio:1,polyominoGridSizeFactor:1,utilityFunction:1,componentSpacing:80},r=n(3);t("core","layoutUtilities",(function(t){var n=this;if("get"===t)return i(n).instance;function i(t){return t.scratch("_layoutUtilities")||t.scratch("_layoutUtilities",{}),t.scratch("_layoutUtilities")}e=function t(e){e=e||{};for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)r.hasOwnProperty(i)&&(Array.isArray(r[i])?e[i]=r[i].slice():"object"==typeof r[i]?e[i]=t(e[i],r[i]):e[i]=r[i])}return e}({},e,t);var o=r(n,e);return i(n).instance=o,i(n).initialized||(i(n).initialized=!0),i(n).instance}))}};t.exports&&(t.exports=i),void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&i(cytoscape)}()},function(t,e,n){var r=n(1),i=n(0);const{Point:o,Polyomino:a}=n(0),{getCenter:s}=n(1),u=n(4);t.exports=function(t,e){var n={setOption:function(t,n){e[t]=n},placeHiddenNodes:function(t){t.forEach((function(t){t.neighborhood().nodes(":hidden").forEach((function(e){e.neighborhood().nodes(":visible").length>1?n.nodeWithMultipleNeighbors(e):n.nodeWithOneNeighbor(t,e)}))}))},placeNewNodes:function(t){for(var r=this.findComponents(t),i=[],o=0;o<r.length;o++){for(var a,s=!1,u=!1,l=[],c=[],h=0,p=0,f=!1,d=0;d<r[o].length;d++){var g=r[o][d].neighborhood().nodes().difference(t);c.push(!1),g.length>1&&!f?(u=!0,c[d]=!0,l=g,n.nodeWithMultipleNeighbors(r[o][d],l),h=r[o][d].position("x"),p=r[o][d].position("y"),f=!0):1!=g.length||f||(s=!0,a=g[0],c[d]=!0,n.nodeWithOneNeighbor(a,r[o][d],t),h=r[o][d].position("x"),p=r[o][d].position("y"),f=!0)}if(s||u){for(d=0;d<r[o].length;d++)if(0==c[d]){g=r[o][d].neighborhood().nodes();var y=[];r[o][d].neighborhood().nodes().difference(t).forEach((function(t){y.push(t)}));for(var v=0;v<g.length;v++)c[r[o].indexOf(g[v])]&&y.push(g[v]);if(y.length>1)n.nodeWithMultipleNeighbors(r[o][d],y);else if(1==y.length)n.nodeWithOneNeighbor(y[0],r[o][d]);else{var m=n.generateRandom(e.offset,2*e.offset,0),_=n.generateRandom(e.offset,2*e.offset,0);r[o][d].position("x",h+m),r[o][d].position("y",p+_)}c[d]=!0}}else i.push(r[o])}i.length>=1&&n.disconnectedNodes(i)},disconnectedNodes:function(r){var i=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE;t.nodes(":visible").forEach((function(t){var e=t.outerWidth()/2,n=t.outerHeight()/2;t.position("x")-e<i&&(i=t.position("x")-e),t.position("x")+e>o&&(o=t.position("x")+e),t.position("y")-n<a&&(a=t.position("y")-n),t.position("y")+n>s&&(s=t.position("y")+n)}));var u=a-s,l=o-i,c=Math.sqrt(l*l+u*u)/2,h=(i+o)/2,p=(a+s)/2,f=360/r.length,d=1;r.forEach((function(t){var r=n.generateRandom(c+6*e.offset,c+8*e.offset,1),i=f*d*Math.PI/180,o=h+r*Math.cos(i),a=p+r*Math.sin(i);if(1==t.length)t[0].position("x",o),t[0].position("y",a);else{for(var s=[],u=0;u<t.length;u++)s.push(!1);for(s[0]=!0,t[0].position("x",o),t[0].position("y",a),u=1;u<t.length;u++){for(var l=t[u].neighborhood().nodes(),g=[],y=0;y<l.length;y++)s[t.indexOf(l[y])]&&g.push(l[y]);if(g.length>1)n.nodeWithMultipleNeighbors(t[u],g);else if(1==g.length)n.nodeWithOneNeighbor(g[0],t[u]);else{var v=n.generateRandom(e.offset,2*e.offset,0),m=n.generateRandom(e.offset,2*e.offset,0);t[u].position("x",o+v),t[u].position("y",a+m)}s[u]=!0}}d++}))},findComponents:function(e){var n=[],r=t.nodes().difference(e);e.forEach((function(t){var i=t.neighborhood().nodes().difference(r),o=[];i.forEach((function(t){var n=e.indexOf(t);o.push(n)})),n.push(o)}));for(var i=[],o=0;o<e.length;o++)i.push(!1);var a=[];for(o=0;o<e.length;o++){var s=[];0==i[o]&&(this.DFSUtil(o,i,n,e,s),a.push(s))}return a},DFSUtil:function(t,e,n,r,i){e[t]=!0,i.push(r[t]);for(var o=0;o<n[t].length;o++)e[n[t][o]]||this.DFSUtil(n[t][o],e,n,r,i)},nodeWithOneNeighbor:function(t,r,i){var o,a,s=n.checkOccupiedQuadrants(t,r,i),u=[];for(var l in s)"free"===s[l]&&u.push(l);if(u.length>0)if(3===u.length)u.includes("first")&&u.includes("second")&&u.includes("third")?(o=-1,a=-1):u.includes("first")&&u.includes("second")&&u.includes("fourth")?(o=1,a=-1):u.includes("first")&&u.includes("third")&&u.includes("fourth")?(o=1,a=1):u.includes("second")&&u.includes("third")&&u.includes("fourth")&&(o=-1,a=1);else{var c=u[Math.floor(Math.random()*u.length)];"first"===c?(o=1,a=-1):"second"===c?(o=-1,a=-1):"third"===c?(o=-1,a=1):"fourth"===c&&(o=1,a=1)}else o=0,a=0;var h=n.generateRandom(e.idealEdgeLength-e.offset,e.idealEdgeLength+e.offset,o),p=n.generateRandom(e.idealEdgeLength-e.offset,e.idealEdgeLength+e.offset,a),f=t.position("x")+h,d=t.position("y")+p;r.position("x",f),r.position("y",d)},nodeWithMultipleNeighbors:function(t,r){null==r&&(r=t.neighborhood().nodes(":visible"));var i=0,o=0,a=0;r.forEach((function(t){i+=t.position("x"),o+=t.position("y"),a++})),i/=a,o/=a;var s=n.generateRandom(0,e.offset/2,0),u=n.generateRandom(0,e.offset/2,0);t.position("x",i+s),t.position("y",o+u)},generateRandom:function(t,e,n){var r=[-1,1];return 0===n&&(n=r[Math.floor(Math.random()*r.length)]),(Math.floor(Math.random()*(e-t+1))+t)*n},checkOccupiedQuadrants:function(t,e,n){var r=t.neighborhood().difference(e).difference(n).nodes(),i={first:"free",second:"free",third:"free",fourth:"free"};return r.forEach((function(e){"compartment"!=e.data("class")&&"complex"!=e.data("class")&&(e.position("x")<t.position("x")&&e.position("y")<t.position("y")?i.second="occupied":e.position("x")>t.position("x")&&e.position("y")<t.position("y")?i.first="occupied":e.position("x")<t.position("x")&&e.position("y")>t.position("y")?i.third="occupied":e.position("x")>t.position("x")&&e.position("y")>t.position("y")&&(i.fourth="occupied"))})),i},packComponents:function(t,n=!0){var o=e.componentSpacing;void 0!==o&&(n&&(o-=52),o=Math.max(1,o));let a=r.getCenter(t);var l;let c;if(n){var h=0,p=0;t.forEach((function(t){p+=t.nodes.length,t.nodes.forEach((function(t){h+=t.width+t.height}))})),h/=2*p,h=Math.floor(h*e.polyominoGridSizeFactor),t.forEach((function(t){t.nodes.forEach((function(t){t.x=t.x-o,t.y=t.y-o,t.width=t.width+2*o,t.height=t.height+2*o}))}));var f=0,d=0,g=[],y=Number.MAX_VALUE,v=-Number.MAX_VALUE,m=Number.MAX_VALUE,_=-Number.MAX_VALUE;t.forEach((function(t,e){var n=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE;t.nodes.forEach((function(t){t.x<=n&&(n=t.x),t.y<=a&&(a=t.y),t.x+t.width>=o&&(o=t.x+t.width),t.y+t.height>=s&&(s=t.y+t.height)})),t.edges.forEach((function(t){t.startX<=n&&(n=t.startX),t.startY<=a&&(a=t.startY),t.endX>=o&&(o=t.endX),t.endY>=s&&(s=t.endY)})),n<y&&(y=n),o>v&&(v=o),a<m&&(m=a),s>_&&(_=s);let u=o-n,l=s-a;f+=u,d+=l;var c=new i.Polyomino(n,a,u,l,h,e);t.nodes.forEach((function(t){for(var e=Math.floor((t.x-n)/h),r=Math.floor((t.y-a)/h),i=Math.floor((t.x+t.width-n)/h),o=Math.floor((t.y+t.height-a)/h),s=e;s<=i;s++)for(var u=r;u<=o;u++)c.grid[s][u]=!0})),t.edges.forEach((function(t){var e={},i={};e.x=(t.startX-n)/h,e.y=(t.startY-a)/h,i.x=(t.endX-n)/h,i.y=(t.endY-a)/h,r.LineSuperCover(e,i).forEach((function(t){var e=Math.floor(t.x),n=Math.floor(t.y);e>=0&&e<c.stepWidth&&n>=0&&n<c.stepHeight&&(c.grid[Math.floor(t.x)][Math.floor(t.y)]=!0)}))}));for(var p=0;p<c.stepWidth;p++)for(var b=0;b<c.stepHeight;b++)c.grid[p][b]&&c.numberOfOccupiredCells++;g.push(c)})),g.sort((function(t,e){var n=t.stepWidth*t.stepHeight,r=e.stepWidth*e.stepHeight;return n>r?-1:n<r?1:0})),c=new i.Grid(2*f+h,2*d+h,h),c.placePolyomino(g[0],c.center.x,c.center.y);for(var b=1;b<g.length;b++){for(var x=0,E=0,w=0,C=1e6,N=!1,I=[],T={};!N;)(I=c.getDirectNeighbors(I,Math.ceil(Math.max(g[b].stepWidth,g[b].stepHeight)/2))).forEach((function(t){if(c.tryPlacingPolyomino(g[b],t.x,t.y)){N=!0;var n=c.calculateUtilityOfPlacing(g[b],t.x,t.y,e.desiredAspectRatio),r=!1;if(1==e.utilityFunction)(n.adjustedFullness>E||n.adjustedFullness==E&&(n.fullness>x||n.fullness==x&&Math.abs(n.actualAspectRatio-e.desiredAspectRatio)<=C))&&(r=!0),r&&(E=n.adjustedFullness,C=Math.abs(n.actualAspectRatio-e.desiredAspectRatio),x=n.fullness,T.x=t.x,T.y=t.y);else if(2==e.utilityFunction){var i=Math.abs(n.actualAspectRatio-e.desiredAspectRatio),o=.5*n.fullness+(1-i/Math.max(n.actualAspectRatio,e.desiredAspectRatio)*.5);o>w&&(w=o,T.x=t.x,T.y=t.y)}}}));c.placePolyomino(g[b],T.x,T.y)}g.sort((function(t,e){return t.index<e.index?-1:t.index>e.index?1:0})),l={shifts:[]},g.forEach((function(t){var e=(t.location.x-t.center.x-c.occupiedRectangle.x1)*h-t.x1,n=(t.location.y-t.center.y-c.occupiedRectangle.y1)*h-t.y1;l.shifts.push({dx:e,dy:n})}))}else l=u.packComponents(t,{componentSpacing:o});let S=function(t,e){return t.forEach(((t,n)=>{t.nodes.forEach((t=>{t.x+=e[n].dx,t.y+=e[n].dy}))})),s(t)}(t,l.shifts).diff(a);for(let t of l.shifts)t.dx+=S.x,t.dy+=S.y;if(n)if(l.aspectRatio=Math.round((c.occupiedRectangle.x2-c.occupiedRectangle.x1+1)/(c.occupiedRectangle.y2-c.occupiedRectangle.y1+1)*100)/100,l.fullness=Math.round(c.numberOfOccupiredCells/((c.occupiedRectangle.x2-c.occupiedRectangle.x1+1)*(c.occupiedRectangle.y2-c.occupiedRectangle.y1+1))*100*100)/100,l.aspectRatio>e.desiredAspectRatio){var A=c.occupiedRectangle.x2-c.occupiedRectangle.x1+1;l.adjustedFullness=Math.round(c.numberOfOccupiredCells/(A*(A/e.desiredAspectRatio))*100*100)/100}else{var L=c.occupiedRectangle.y2-c.occupiedRectangle.y1+1;l.adjustedFullness=Math.round(c.numberOfOccupiredCells/(L*e.desiredAspectRatio*L)*100*100)/100}return l}};return n}},function(t,e,n){var r;window,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Pt:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function f(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var v=function(){};v.prototype.interfaces_=function(){return[]},v.prototype.getClass=function(){return v},v.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var m=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var x=function(){},E=function(){},w=function(){},C=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},N={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};C.prototype.setOrdinate=function(t,e){switch(t){case C.X:this.x=e;break;case C.Y:this.y=e;break;case C.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},C.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!v.equalsWithTolerance(this.x,e.x,n)&&!!v.equalsWithTolerance(this.y,e.y,n)}},C.prototype.getOrdinate=function(t){switch(t){case C.X:return this.x;case C.Y:return this.y;case C.Z:return this.z}throw new m("Invalid ordinate index: "+t)},C.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},C.prototype.equals=function(t){return t instanceof C&&this.equals2D(t)},C.prototype.equalInZ=function(t,e){return v.equalsWithTolerance(this.z,t.z,e)},C.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},C.prototype.clone=function(){},C.prototype.copy=function(){return new C(this)},C.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},C.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},C.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},C.prototype.hashCode=function(){var t=17;return 37*(t=37*t+C.hashCode(this.x))+C.hashCode(this.y)},C.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},C.prototype.interfaces_=function(){return[x,E,e]},C.prototype.getClass=function(){return C},C.hashCode=function(){if(1===arguments.length){var t=_.doubleToLongBits(arguments[0]);return Math.trunc((t^t)>>>32)}},N.DimensionalComparator.get=function(){return I},N.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},N.NULL_ORDINATE.get=function(){return _.NaN},N.X.get=function(){return 0},N.Y.get=function(){return 1},N.Z.get=function(){return 2},Object.defineProperties(C,N);var I=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};I.prototype.compare=function(t,e){var n=t,r=e,i=I.compare(n.x,r.x);if(0!==i)return i;var o=I.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:I.compare(n.z,r.z)},I.prototype.interfaces_=function(){return[w]},I.prototype.getClass=function(){return I},I.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var T=function(){};T.prototype.create=function(){},T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T};var S=function(){},A={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};S.prototype.interfaces_=function(){return[]},S.prototype.getClass=function(){return S},S.toLocationSymbol=function(t){switch(t){case S.EXTERIOR:return"e";case S.BOUNDARY:return"b";case S.INTERIOR:return"i";case S.NONE:return"-"}throw new m("Unknown location value: "+t)},A.INTERIOR.get=function(){return 0},A.BOUNDARY.get=function(){return 1},A.EXTERIOR.get=function(){return 2},A.NONE.get=function(){return-1},Object.defineProperties(S,A);var L=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},D=function(){},M={LOG_10:{configurable:!0}};D.prototype.interfaces_=function(){return[]},D.prototype.getClass=function(){return D},D.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/D.LOG_10},D.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},D.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},D.wrap=function(t,e){return t<0?e- -t%e:t%e},D.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},D.average=function(t,e){return(t+e)/2},M.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(D,M);var O=function(t){this.str=t};O.prototype.append=function(t){this.str+=t},O.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},O.prototype.toString=function(t){return this.str};var P=function(t){this.value=t};P.prototype.intValue=function(){return this.value},P.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},P.isNaN=function(t){return Number.isNaN(t)};var R=function(){};R.isWhitespace=function(t){return t<=32&&t>=0||127===t},R.toUpperCase=function(t){return t.toUpperCase()};var k=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};k.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},k.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=k.magnitude(n._hi),i=k.TEN.pow(r);(n=n.divide(i)).gt(k.TEN)?(n=n.divide(k.TEN),r+=1):n.lt(k.ONE)&&(n=n.multiply(k.TEN),r-=1);for(var o=r+1,a=new O,s=k.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(k.valueOf(l)).multiply(k.TEN),c&&n.selfAdd(k.TEN);var p=!0,f=k.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},k.prototype.sqr=function(){return this.multiply(this)},k.prototype.doubleValue=function(){return this._hi+this._lo},k.prototype.subtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},k.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},k.prototype.isZero=function(){return 0===this._hi&&0===this._lo},k.prototype.selfSubtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},k.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},k.prototype.min=function(t){return this.le(t)?this:t},k.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,r,i,o,a=arguments[0],s=arguments[1],u=null,l=null,c=null,h=null;return i=this._hi/a,h=(u=(c=k.SPLIT*i)-(u=c-i))*(l=(h=k.SPLIT*a)-(l=h-a))-(o=i*a)+u*(r=a-l)+(n=i-u)*l+n*r,h=i+(c=(this._hi-o-h+this._lo-i*s)/a),this._hi=h,this._lo=i-h+c,this}},k.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},k.prototype.divide=function(){if(arguments[0]instanceof k){var t,e,n,r,i=arguments[0],o=null,a=null,s=null,u=null;return t=(n=this._hi/i._hi)-(o=(s=k.SPLIT*n)-(o=s-n)),u=o*(a=(u=k.SPLIT*i._hi)-(a=u-i._hi))-(r=n*i._hi)+o*(e=i._hi-a)+t*a+t*e,s=(this._hi-r-u+this._lo-n*i._lo)/i._hi,new k(u=n+s,n-u+s)}if("number"==typeof arguments[0]){var l=arguments[0];return _.isNaN(l)?k.createNaN():k.copy(this).selfDivide(l,0)}},k.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},k.prototype.pow=function(t){if(0===t)return k.valueOf(1);var e=new k(this),n=k.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},k.prototype.ceil=function(){if(this.isNaN())return k.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new k(t,e)},k.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},k.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},k.prototype.setValue=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},k.prototype.max=function(t){return this.ge(t)?this:t},k.prototype.sqrt=function(){if(this.isZero())return k.valueOf(0);if(this.isNegative())return k.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=k.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},k.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,r,i,o,a=arguments[0],s=null;return s=(r=this._hi+a)-(i=r-this._hi),n=(o=(s=a-i+(this._hi-s))+this._lo)+(r-(e=r+o)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var u,l,c,h,p=arguments[0],f=arguments[1],d=null,g=null,y=null;c=this._hi+p,l=this._lo+f,g=c-(y=c-this._hi),d=l-(h=l-this._lo);var v=(u=c+(y=(g=p-y+(this._hi-g))+l))+(y=(d=f-h+(this._lo-d))+(y+(c-u))),m=y+(u-v);return this._hi=v,this._lo=m,this}},k.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,r,i=arguments[0],o=arguments[1],a=null,s=null,u=null,l=null;a=(u=k.SPLIT*this._hi)-this._hi,l=k.SPLIT*i,a=u-a,n=this._hi-a,s=l-i;var c=(u=this._hi*i)+(l=a*(s=l-s)-u+a*(r=i-s)+n*s+n*r+(this._hi*o+this._lo*i)),h=l+(a=u-c);return this._hi=c,this._lo=h,this}},k.prototype.selfSqr=function(){return this.selfMultiply(this)},k.prototype.floor=function(){if(this.isNaN())return k.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new k(t,e)},k.prototype.negate=function(){return this.isNaN()?this:new k(-this._hi,-this._lo)},k.prototype.clone=function(){},k.prototype.multiply=function(){if(arguments[0]instanceof k){var t=arguments[0];return t.isNaN()?k.createNaN():k.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?k.createNaN():k.copy(this).selfMultiply(e,0)}},k.prototype.isNaN=function(){return _.isNaN(this._hi)},k.prototype.intValue=function(){return Math.trunc(this._hi)},k.prototype.toString=function(){var t=k.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},k.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+k.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+k.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},k.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=k.SPLIT*n)-(i=a-n)),o=(s=k.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new k(u,n-u+a)},k.prototype.toSciNotation=function(){if(this.isZero())return k.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=k.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},k.prototype.abs=function(){return this.isNaN()?k.NaN:this.isNegative()?this.negate():new k(this)},k.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},k.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},k.prototype.add=function(){if(arguments[0]instanceof k){var t=arguments[0];return k.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return k.copy(this).selfAdd(e)}},k.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof k){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},k.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},k.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},k.prototype.trunc=function(){return this.isNaN()?k.NaN:this.isPositive()?this.floor():this.ceil()},k.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},k.prototype.interfaces_=function(){return[e,x,E]},k.prototype.getClass=function(){return k},k.sqr=function(t){return k.valueOf(t).selfMultiply(t)},k.valueOf=function(){return"string"==typeof arguments[0]?k.parse(arguments[0]):"number"==typeof arguments[0]?new k(arguments[0]):void 0},k.sqrt=function(t){return k.valueOf(t).sqrt()},k.parse=function(t){for(var e=0,n=t.length;R.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new k,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,R.isDigit(l)){var c=l-"0";o.selfMultiply(k.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=P.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var p=o,f=a-s-u;if(0===f)p=o;else if(f>0){var d=k.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=k.TEN.pow(-f);p=o.multiply(g)}return r?p.negate():p},k.createNaN=function(){return new k(_.NaN,_.NaN)},k.copy=function(t){return new k(t)},k.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},k.stringOfChar=function(t,e){for(var n=new O,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new k(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new k(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new k(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new k(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new k(_.NaN,_.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return k.valueOf(10)},F.ONE.get=function(){return k.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(k,F);var B=function(){},z={DP_SAFE_EPSILON:{configurable:!0}};B.prototype.interfaces_=function(){return[]},B.prototype.getClass=function(){return B},B.orientationIndex=function(t,e,n){var r=B.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=k.valueOf(e.x).selfAdd(-t.x),o=k.valueOf(e.y).selfAdd(-t.y),a=k.valueOf(n.x).selfAdd(-e.x),s=k.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},B.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},B.intersection=function(t,e,n,r){var i=k.valueOf(r.y).selfSubtract(n.y).selfMultiply(k.valueOf(e.x).selfSubtract(t.x)),o=k.valueOf(r.x).selfSubtract(n.x).selfMultiply(k.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=k.valueOf(r.x).selfSubtract(n.x).selfMultiply(k.valueOf(t.y).selfSubtract(n.y)),u=k.valueOf(r.y).selfSubtract(n.y).selfMultiply(k.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=k.valueOf(t.x).selfAdd(k.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=k.valueOf(e.x).selfSubtract(t.x).selfMultiply(k.valueOf(t.y).selfSubtract(n.y)),p=k.valueOf(e.y).selfSubtract(t.y).selfMultiply(k.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(a).doubleValue(),d=k.valueOf(n.y).selfAdd(k.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new C(c,d)},B.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return B.signum(a);r=i+o}else{if(!(i<0))return B.signum(a);if(o>=0)return B.signum(a);r=-i-o}var s=B.DP_SAFE_EPSILON*r;return a>=s||-a>=s?B.signum(a):2},B.signum=function(t){return t>0?1:t<0?-1:0},z.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(B,z);var G=function(){},q={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};q.X.get=function(){return 0},q.Y.get=function(){return 1},q.Z.get=function(){return 2},q.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[E]},G.prototype.getClass=function(){return G},Object.defineProperties(G,q);var V=function(){},U=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(V),j=function(){};j.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},j.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof C&&arguments[1]instanceof C){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,y=p.x-h.x,v=h.x*p.y-p.x*h.y,m=f.y-d.y,_=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=y*b-_*v,this.y=m*v-g*b,this.w=g*_-m*y}};Y.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new U;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new U;return t},Y.prototype.getCoordinate=function(){var t=new C;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,h=(o*l-u*a)/c,p=(s*a-i*l)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(p)||_.isInfinite(p))throw new U;return new C(h,p)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof C){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},H={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new X(e,r,n,i)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof C){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof C){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},X.prototype.centre=function(){return this.isNull()?null:new C((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+C.hashCode(this._minx))+C.hashCode(this._maxx))+C.hashCode(this._miny))+C.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[x,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<s))}},H.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,H);var W={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},$=function(t){this.geometryFactory=t||new ve};$.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=W.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=W.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},$.prototype.write=function(t){return this.extractGeometry(t)},$.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(W.spaces);return this.geometryFactory.createPoint(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(W.spaces),r.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(W.spaces),r.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(W.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(W.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(W.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(W.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Q=function(t){this.parser=new $(t)};Q.prototype.write=function(t){return this.parser.write(t)},Q.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var J=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(J),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t;if(1===arguments.length)et.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,n;if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new C,this._intPt[1]=new C,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new O;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Q.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Q.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,X.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Y.intersection(t,n,r,i)}catch(a){if(!(a instanceof U))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new C(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=B.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);j.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&j.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new C(t),o=new C(e),a=new C(n),s=new C(r),u=new C;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=X.intersects(e,n,r),a=X.intersects(e,n,i),s=X.intersects(r,i,e),u=X.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>l?o:l)+(s<h?s:h))/2,d=((a>c?a:c)+(u<p?u:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!X.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new C(r):0===a?this._intPt[0]=new C(i):0===s?this._intPt[0]=new C(e):0===u&&(this._intPt[0]=new C(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==S.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?S.BOUNDARY:this._crossingCount%2==1?S.INTERIOR:S.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof C&&L(arguments[1],G)){for(var t=arguments[1],e=new at(arguments[0]),n=new C,r=new C,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof C&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var u=o[s],l=o[s-1];if(a.countSegment(u,l),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return B.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(L(arguments[0],G)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new C,l=new C,c=new C;a.getCoordinate(0,l),a.getCoordinate(1,c);var h=l.x;c.x-=h;for(var p=0,f=1;f<s-1;f++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(f+1,c),c.x-=h,p+=l.x*(u.y-c.y);return p/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(X.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?D.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==S.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new C;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=st.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[E,x,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(ct,ht);var pt=function(){};pt.interfaces_=function(){return[lt]},pt.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return vt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>0},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var wt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Ct(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Et),Ct=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),Nt=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof C&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<s.length;l++)this.add(s[l],u);else for(var c=s.length-1;c>=0;c--)this.add(s[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof C){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],v=arguments[3],m=1;y>v&&(m=-1);for(var _=y;_!==v;_+=m)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new C(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(wt),It=function(){},Tt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Tt.ForwardComparator.get=function(){return St},Tt.BidirectionalComparator.get=function(){return At},Tt.coordArrayType.get=function(){return new Array(0).fill(null)},It.prototype.interfaces_=function(){return[]},It.prototype.getClass=function(){return It},It.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},It.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(It.indexOf(r,e)<0)return r}return null},It.scroll=function(t,e){var n=It.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);j.arraycopy(t,n,r,0,t.length-n),j.arraycopy(t,0,r,t.length-n,n),j.arraycopy(r,0,t,0,t.length)},It.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},It.intersection=function(t,e){for(var n=new Nt,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},It.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},It.removeRepeatedPoints=function(t){return It.hasRepeatedPoints(t)?new Nt(t,!1).toCoordinateArray():t},It.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},It.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},It.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new C(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new C(r[i+u])},It.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},It.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},It.toCoordinateArray=function(t){return t.toArray(It.coordArrayType)},It.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},It.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},It.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},It.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},It.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},It.extract=function(t,e,n){e=D.clamp(e,0,t.length);var r=(n=D.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(It,Tt);var St=function(){};St.prototype.compare=function(t,e){return It.compare(t,e)},St.prototype.interfaces_=function(){return[w]},St.prototype.getClass=function(){return St};var At=function(){};At.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=It.compare(n,r);return It.isEqualReversed(n,r)?0:i},At.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=It.increasingDirection(n),o=It.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},At.prototype.interfaces_=function(){return[w]},At.prototype.getClass=function(){return At};var Lt=function(){};Lt.prototype.get=function(){},Lt.prototype.put=function(){},Lt.prototype.size=function(){},Lt.prototype.values=function(){},Lt.prototype.entrySet=function(){};var Dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Lt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Mt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Ot(this)},e}(o),Ot=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(xt),Pt=0;(h.prototype=new Dt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Pt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Pt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===l(s(s(t)))){var e=c(s(s(t)));1===a(e)?(u(s(t),Pt),u(e,Pt),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),Pt),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=l(s(s(t)));1===a(n)?(u(s(t),Pt),u(n,Pt),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),Pt),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Pt},h.prototype.values=function(){var t=new wt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Mt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Rt=function(){};Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt},p.prototype=new o,(f.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new kt(this)};var kt=function(t){this.treeSet_=t,this.position_=0};kt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},kt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},kt.prototype.remove=function(){throw new i};var Ft=function(){};Ft.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ft.asList=function(t){for(var e=new wt,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Bt=function(){},zt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};zt.P.get=function(){return 0},zt.L.get=function(){return 1},zt.A.get=function(){return 2},zt.FALSE.get=function(){return-1},zt.TRUE.get=function(){return-2},zt.DONTCARE.get=function(){return-3},zt.SYM_FALSE.get=function(){return"F"},zt.SYM_TRUE.get=function(){return"T"},zt.SYM_DONTCARE.get=function(){return"*"},zt.SYM_P.get=function(){return"0"},zt.SYM_L.get=function(){return"1"},zt.SYM_A.get=function(){return"2"},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt},Bt.toDimensionSymbol=function(t){switch(t){case Bt.FALSE:return Bt.SYM_FALSE;case Bt.TRUE:return Bt.SYM_TRUE;case Bt.DONTCARE:return Bt.SYM_DONTCARE;case Bt.P:return Bt.SYM_P;case Bt.L:return Bt.SYM_L;case Bt.A:return Bt.SYM_A}throw new m("Unknown dimension value: "+t)},Bt.toDimensionValue=function(t){switch(R.toUpperCase(t)){case Bt.SYM_FALSE:return Bt.FALSE;case Bt.SYM_TRUE:return Bt.TRUE;case Bt.SYM_DONTCARE:return Bt.DONTCARE;case Bt.SYM_P:return Bt.P;case Bt.SYM_L:return Bt.L;case Bt.SYM_A:return Bt.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(Bt,zt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var qt=function(){};qt.prototype.filter=function(t,e){},qt.prototype.isDone=function(){},qt.prototype.isGeometryChanged=function(){},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt};var Vt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Bt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Bt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(Ft.asList(this._geometries)),n=new f(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),l=i.getGeometryN(s),c=u.compareToSameClass(l,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(L(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(L(arguments[0],qt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(L(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(L(arguments[0],lt)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Ut=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Bt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new jt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Rt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Vt),jt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};jt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},jt.prototype.getBoundary=function(){return this._geom instanceof $t?this.boundaryLineString(this._geom):this._geom instanceof Ut?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},jt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},jt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},jt.prototype.computeBoundaryCoordinates=function(t){var e=new wt;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return It.toCoordinateArray(e)},jt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.getBoundary=function(){return 1===arguments.length?new jt(arguments[0]).getBoundary():2===arguments.length?new jt(arguments[0],arguments[1]).getBoundary():void 0};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Xt=function(){},Ht={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[1],i="",o=new function(){}(new function(){}(Xt.getStackTrace(arguments[0]))),a=0;a<r;a++)try{i+=o.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return i}},Xt.split=function(t,e){for(var n=e.length,r=new wt,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Ht.NEWLINE.get=function(){return j.getProperty("line.separator")},Ht.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Ht);var Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Wt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Wt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_.isNaN(a)&&_.isNaN(s)))return!1}return!0},Wt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Wt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Wt.copy(e,i-1,r,o,1);return r},Wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Wt.swap(t,r,e-r)},Wt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Wt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Wt.copyCoord(t,e+o,n,r+o)},Wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new O;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Xt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Wt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Wt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Wt.createClosedRing(t,e,n+1)},Wt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Wt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Wt.copy(e,0,r,o,1);return r};var $t=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Wt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Bt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(L(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(L(arguments[0],qt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],Gt)||L(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new jt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Rt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(L(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(L(arguments[0],qt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],Gt)||L(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var Jt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new m("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new m("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o==(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);j.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=It.minCoordinate(e.getCoordinates());It.scroll(r,i),j.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&It.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),c=0;c<u&&c<l;){var h=this.getInteriorRingN(c),p=i.getInteriorRingN(c),f=h.compareToSameClass(p,r);if(0!==f)return f;c++}return c<u?1:c<l?-1:0}},e.prototype.apply=function(t){if(L(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(L(t,qt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(L(t,Gt))t.filter(this);else if(L(t,lt)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Vt),ee=function(t){function e(e,n){e instanceof C&&n instanceof ve&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Bt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}($t),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new wt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Vt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Vt?this.editGeometryCollection(t,e):t instanceof Jt?this.editPolygon(t,e):t instanceof Kt||t instanceof $t?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new wt,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ut?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new wt,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof $t?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof $t?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new C}else if(L(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new C}},le={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new m("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return _.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new C(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new O(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[G,e]},ue.prototype.getClass=function(){return ue},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,le);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ue(arguments[0]);if(L(arguments[0],G))return new ue(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ue(t):new ue(t,e)}},ce.prototype.interfaces_=function(){return[T,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new wt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Mt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Lt),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new P(n).compareTo(new P(r))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof C){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,x]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,ye),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var ve=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?L(arguments[0],T)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};ve.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new C(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new C(t.getMinX(),t.getMinY()),new C(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new C(t.getMinX(),t.getMinY()),new C(t.getMinX(),t.getMaxY()),new C(t.getMaxX(),t.getMaxY()),new C(t.getMaxX(),t.getMinY()),new C(t.getMinX(),t.getMinY())]),null)},ve.prototype.createLineString=function(t){return t?t instanceof Array?new $t(this.getCoordinateSequenceFactory().create(t),this):L(t,G)?new $t(t,this):void 0:new $t(this.getCoordinateSequenceFactory().create([]),this)},ve.prototype.createMultiLineString=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},ve.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ve.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Jt)return this.createMultiPolygon(ve.toPolygonArray(t));if(s instanceof $t)return this.createMultiLineString(ve.toLineStringArray(t));if(s instanceof Kt)return this.createMultiPoint(ve.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ve.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ve.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(L(arguments[0],G))return new Kt(arguments[0],this)}},ve.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ve.prototype.createPolygon=function(){if(0===arguments.length)return new Jt(null,null,this);if(1===arguments.length){if(L(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Jt(arguments[0],arguments[1],this)},ve.prototype.getSRID=function(){return this._SRID},ve.prototype.createGeometryCollection=function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0},ve.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ve.prototype.getPrecisionModel=function(){return this._precisionModel},ve.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(L(arguments[0],G))return new ee(arguments[0],this)}},ve.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ve.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(L(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Wt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ve.prototype.interfaces_=function(){return[e]},ve.prototype.getClass=function(){return ve},ve.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ve.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ve,me);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new ve};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?xe[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xe[n].apply(this,[e.geometries]):xe[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Ee[e])throw new Error("Geometry is not supported");return Ee[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xe[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new C(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new C(t[0],t[1]),new C(t[2],t[1]),new C(t[2],t[3]),new C(t[0],t[3]),new C(t[0],t[1])])},Point:function(t){var e=new C(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=xe.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xe.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Ee.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ee.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Ee.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ee[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},we=function(t){this.geometryFactory=t||new ve,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};we.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},we.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ce=function(){this.parser=new be(this.geometryFactory)};Ce.prototype.write=function(t){return this.parser.write(t)};var Ne=function(){},Ie={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne},Ne.opposite=function(t){return t===Ne.LEFT?Ne.RIGHT:t===Ne.RIGHT?Ne.LEFT:t},Ie.ON.get=function(){return 0},Ie.LEFT.get=function(){return 1},Ie.RIGHT.get=function(){return 2},Object.defineProperties(Ne,Ie),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new Et).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Te=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Te.prototype.getCoordinate=function(){return this._minCoord},Te.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Te.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Te.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ne.LEFT;return n[e].y<n[e+1].y&&(r=Ne.RIGHT),r},Te.prototype.getEdge=function(){return this._orientedDe},Te.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Te.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Te.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ne.LEFT&&(this._orientedDe=this._minDe.getSym())},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Se=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new C(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(J),Ae=function(){this.array_=[]};Ae.prototype.addLast=function(t){this.array_.push(t)},Ae.prototype.removeFirst=function(){return this.array_.shift()},Ae.prototype.isEmpty=function(){return 0===this.array_.length};var Le=function(){this._finder=null,this._dirEdgeList=new wt,this._nodes=new wt,this._rightMostCoord=null,this._env=null,this._finder=new Te};Le.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Le.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Le.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Se("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Le.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ne.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Le.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Le.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ne.RIGHT)>=1&&e.getDepth(Ne.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Le.prototype.computeDepths=function(t){var e=new Mt,n=new Ae,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Le.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Le.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Le.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Le.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ne.LEFT,t.getDepth(Ne.RIGHT)),e.setDepth(Ne.RIGHT,t.getDepth(Ne.LEFT))},Le.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Le.prototype.getNodes=function(){return this._nodes},Le.prototype.getDirectedEdges=function(){return this._dirEdgeList},Le.prototype.interfaces_=function(){return[x]},Le.prototype.getClass=function(){return Le};var De=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ne.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ne.ON]=o,this.location[Ne.LEFT]=a,this.location[Ne.RIGHT]=s}};De.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},De.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==S.NONE)return!1;return!0},De.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===S.NONE&&(this.location[e]=t)},De.prototype.isLine=function(){return 1===this.location.length},De.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ne.ON]=this.location[Ne.ON],e[Ne.LEFT]=S.NONE,e[Ne.RIGHT]=S.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===S.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},De.prototype.getLocations=function(){return this.location},De.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ne.LEFT];this.location[Ne.LEFT]=this.location[Ne.RIGHT],this.location[Ne.RIGHT]=t},De.prototype.toString=function(){var t=new O;return this.location.length>1&&t.append(S.toLocationSymbol(this.location[Ne.LEFT])),t.append(S.toLocationSymbol(this.location[Ne.ON])),this.location.length>1&&t.append(S.toLocationSymbol(this.location[Ne.RIGHT])),t.toString()},De.prototype.setLocations=function(t,e,n){this.location[Ne.ON]=t,this.location[Ne.LEFT]=e,this.location[Ne.RIGHT]=n},De.prototype.get=function(t){return t<this.location.length?this.location[t]:S.NONE},De.prototype.isArea=function(){return this.location.length>1},De.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===S.NONE)return!0;return!1},De.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ne.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},De.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(S.NONE)},De.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},De.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Me=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new De(e),this.elt[1]=new De(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new De(n.elt[0]),this.elt[1]=new De(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new De(S.NONE),this.elt[1]=new De(S.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new De(o,a,s),this.elt[1]=new De(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new De(S.NONE,S.NONE,S.NONE),this.elt[1]=new De(S.NONE,S.NONE,S.NONE),this.elt[u].setLocations(l,c,h)}};Me.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Me.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Me.prototype.isNull=function(t){return this.elt[t].isNull()},Me.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Me.prototype.isLine=function(t){return this.elt[t].isLine()},Me.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new De(t.elt[e]):this.elt[e].merge(t.elt[e])},Me.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Me.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ne.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Me.prototype.toString=function(){var t=new O;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Me.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Me.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Me.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ne.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Me.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Me.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Me.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new De(this.elt[t].location[0]))},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.toLineLabel=function(t){for(var e=new Me(S.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Oe=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new wt,this._pts=new wt,this._label=new Me(S.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new wt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Oe.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Oe.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Oe.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Se("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Se("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Oe.prototype.getLinearRing=function(){return this._ring},Oe.prototype.getCoordinate=function(t){return this._pts.get(t)},Oe.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Oe.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Oe.prototype.isHole=function(){return this._isHole},Oe.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Oe.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Oe.prototype.addHole=function(t){this._holes.add(t)},Oe.prototype.isShell=function(){return null===this._shell},Oe.prototype.getLabel=function(){return this._label},Oe.prototype.getEdges=function(){return this._edges},Oe.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Oe.prototype.getShell=function(){return this._shell},Oe.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ne.RIGHT);if(n===S.NONE)return null;if(this._label.getLocation(e)===S.NONE)return this._label.setLocation(e,n),null}},Oe.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Oe.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Pe=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oe),Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new wt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Pe(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oe),ke=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};ke.prototype.setVisited=function(t){this._isVisited=t},ke.prototype.setInResult=function(t){this._isInResult=t},ke.prototype.isCovered=function(){return this._isCovered},ke.prototype.isCoveredSet=function(){return this._isCoveredSet},ke.prototype.setLabel=function(t){this._label=t},ke.prototype.getLabel=function(){return this._label},ke.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ke.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ke.prototype.isInResult=function(){return this._isInResult},ke.prototype.isVisited=function(){return this._isVisited},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Me(0,S.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=S.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==S.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Me(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Me)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===S.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=S.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;if(e===S.BOUNDARY)n=S.INTERIOR;else n=S.BOUNDARY;this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ke),Be=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Be.prototype.find=function(t){return this.nodeMap.get(t)},Be.prototype.addNode=function(){if(arguments[0]instanceof C){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Be.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Be.prototype.iterator=function(){return this.nodeMap.values().iterator()},Be.prototype.values=function(){return this.nodeMap.values()},Be.prototype.getBoundaryNodes=function(t){for(var e=new wt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===S.BOUNDARY&&e.add(r)}return e},Be.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be};var ze=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.isNorthern=function(t){return t===ze.NE||t===ze.NW},ze.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ze.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ze.isInHalfPlane=function(t,e){return e===ze.SE?t===ze.SE||t===ze.SW:t===e||t===e+1},ze.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ze.NE:ze.SE:e>=0?ze.NW:ze.SW}if(arguments[0]instanceof C&&arguments[1]instanceof C){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new m("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ze.NE:ze.SE:r.y>=n.y?ze.NW:ze.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(ze,Ge);var qe=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};qe.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},qe.prototype.getDy=function(){return this._dy},qe.prototype.getCoordinate=function(){return this._p0},qe.prototype.setNode=function(t){this._node=t},qe.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},qe.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},qe.prototype.getDirectedCoordinate=function(){return this._p1},qe.prototype.getDx=function(){return this._dx},qe.prototype.getLabel=function(){return this._label},qe.prototype.getEdge=function(){return this._edge},qe.prototype.getQuadrant=function(){return this._quadrant},qe.prototype.getNode=function(){return this._node},qe.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},qe.prototype.computeLabel=function(t){},qe.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ze.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},qe.prototype.interfaces_=function(){return[x]},qe.prototype.getClass=function(){return qe};var Ve=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Me(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Se("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ne.LEFT)===S.INTERIOR&&this._label.getLocation(e,Ne.RIGHT)===S.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ne.LEFT]+"/"+this._depth[Ne.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,S.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,S.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ne.LEFT&&(r=-1);var i=Ne.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===S.EXTERIOR&&e===S.INTERIOR?1:t===S.INTERIOR&&e===S.EXTERIOR?-1:0},e}(qe),Ue=function(){};Ue.prototype.createNode=function(t){return new Fe(t,null)},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var je=function(){if(this._edges=new wt,this._nodes=null,this._edgeEndList=new wt,0===arguments.length)this._nodes=new Be(new Ue);else if(1===arguments.length){var t=arguments[0];this._nodes=new Be(t)}};je.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},je.prototype.find=function(t){return this._nodes.find(t)},je.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof C){var e=arguments[0];return this._nodes.addNode(e)}},je.prototype.getNodeIterator=function(){return this._nodes.iterator()},je.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},je.prototype.debugPrintln=function(t){j.out.println(t)},je.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===S.BOUNDARY},je.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},je.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&ze.quadrant(t,e)===ze.quadrant(n,r)},je.prototype.getEdgeEnds=function(){return this._edgeEndList},je.prototype.debugPrint=function(t){j.out.print(t)},je.prototype.getEdgeIterator=function(){return this._edges.iterator()},je.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},je.prototype.insertEdge=function(t){this._edges.add(t)},je.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},je.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ve(n,!0),i=new Ve(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},je.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},je.prototype.getNodes=function(){return this._nodes.values()},je.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je},je.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new wt;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ye.prototype.computePolygons=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Se("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new wt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Re(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&st.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];je.linkResultDirectedEdges(arguments[1]);var n=this.buildMaximalEdgeRings(e),r=new wt,i=this.buildMinimalEdgeRings(n,this._shellList,r);this.sortShellsAndHoles(i,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var He=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};He.prototype.getItem=function(){return this._item},He.prototype.getBounds=function(){return this._bounds},He.prototype.interfaces_=function(){return[Xe,e]},He.prototype.getClass=function(){return He};var We=function(){this._size=null,this._items=null,this._size=0,this._items=new wt,this._items.add(null)};We.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},We.prototype.size=function(){return this._size},We.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},We.prototype.clear=function(){this._size=0,this._items.clear()},We.prototype.isEmpty=function(){return 0===this._size},We.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var $e=function(){};$e.prototype.visitItem=function(t){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ke=function(){if(this._childBoundables=new wt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Qe={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[Xe,e]},Ke.prototype.getClass=function(){return Ke},Qe.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Qe);var Je=function(){};Je.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Je.min=function(t){return Je.sort(t),t.get(0)},Je.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Je.singletonList=function(t){var e=new wt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new wt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof He&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof He&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new wt:t}if(1===arguments.length){for(var e=arguments[0],n=new wt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof He?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new He(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new wt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ke?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof He),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new wt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(L(arguments[2],$e)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Ke?this.query(i,u,o):u instanceof He?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(L(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var l=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),l)&&(f instanceof Ke?this.query(l,f,c):f instanceof He?c.add(f.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ke&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new wt;n.add(this.createNode(e));var r=new wt(t);Je.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new wt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new wt;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(L(arguments[2],$e)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(L(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new wt(t);Je.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(L(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&L(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=null,c=new We;for(c.add(s);!c.isEmpty()&&u>0;){var h=c.poll(),p=h.getDistance();if(p>=u)break;h.isLeaves()?(u=p,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],d=new He(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,f);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Ze,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new C(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ln.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},ln.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[x]},ln.prototype.getClass=function(){return ln};var cn=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new Nt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new wt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new P(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new C(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new C(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new P(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new C(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new C(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new ln(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new J("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new J("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof C&&arguments[1]instanceof C){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new m("Cannot compute the octant for two identical points "+i);return hn.octant(a,s)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new C(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new wt;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new C,this.p1=new C;else if(1===arguments.length){var t=arguments[0];this.p0=new C(t.p0),this.p1=new C(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new C(e,n),this.p1=new C(r,i)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof C){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof C){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new C(t);var e=this.projectionFactor(t),n=new C;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof U))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new C(n-u,r+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof C){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new C;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[x,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new C((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var vn=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new gn,this._overlapSeg2=new gn};vn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var mn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};mn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},mn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mn.prototype.setId=function(t){this._id=t},mn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env},mn.prototype.getEndIndex=function(){return this._end},mn.prototype.getStartIndex=function(){return this._start},mn.prototype.getContext=function(){return this._context},mn.prototype.getId=function(){return this._id},mn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new wt;n.add(new P(e));do{var r=_n.findChainEnd(t,e);n.add(new P(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ze.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||ze.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length)return _n.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new wt,r=_n.getChainStartIndices(t),i=0;i<r.length-1;i++){var o=new mn(t,r[i],r[i+1],e);n.add(o)}return n}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var En=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new wt,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new wn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return wn},Object.defineProperties(e,n),e}(xn),wn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vn),Cn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Nn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cn.prototype.getEndCapStyle=function(){return this._endCapStyle},Cn.prototype.isSingleSided=function(){return this._isSingleSided},Cn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cn.JOIN_ROUND&&(this._quadrantSegments=Cn.DEFAULT_QUADRANT_SEGMENTS)},Cn.prototype.getJoinStyle=function(){return this._joinStyle},Cn.prototype.setJoinStyle=function(t){this._joinStyle=t},Cn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cn.prototype.getMitreLimit=function(){return this._mitreLimit},Cn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cn.prototype.setSingleSided=function(t){this._isSingleSided=t},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Nn.CAP_ROUND.get=function(){return 1},Nn.CAP_FLAT.get=function(){return 2},Nn.CAP_SQUARE.get=function(){return 3},Nn.JOIN_ROUND.get=function(){return 1},Nn.JOIN_MITRE.get=function(){return 2},Nn.JOIN_BEVEL.get=function(){return 3},Nn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Nn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Nn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cn,Nn);var In=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Tn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};In.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},In.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=In.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},In.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},In.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/In.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},In.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},In.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},In.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===In.DELETE;)e++;return e},In.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},In.prototype.collapseLine=function(){for(var t=new Nt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==In.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.simplify=function(t,e){return new In(t).simplify(e)},Tn.INIT.get=function(){return 0},Tn.DELETE.get=function(){return 1},Tn.KEEP.get=function(){return 1},Tn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(In,Tn);var Sn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new wt},An={COORDINATE_ARRAY_TYPE:{configurable:!0}};Sn.prototype.getCoordinates=function(){return this._ptList.toArray(Sn.COORDINATE_ARRAY_TYPE)},Sn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Sn.prototype.addPt=function(t){var e=new C(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Sn.prototype.revere=function(){},Sn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Sn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Sn.prototype.toString=function(){return(new ve).createLineString(this.getCoordinates()).toString()},Sn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new C(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Sn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},An.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Sn,An);var Ln=function(){},Dn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.toDegrees=function(t){return 180*t/Math.PI},Ln.normalize=function(t){for(;t>Math.PI;)t-=Ln.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ln.PI_TIMES_2;return t},Ln.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Ln.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Ln.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Ln.interiorAngle=function(t,e,n){var r=Ln.angle(e,t),i=Ln.angle(e,n);return Math.abs(i-r)},Ln.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ln.PI_TIMES_2;t>=Ln.PI_TIMES_2&&(t=0)}else{for(;t>=Ln.PI_TIMES_2;)t-=Ln.PI_TIMES_2;t<0&&(t=0)}return t},Ln.angleBetween=function(t,e,n){var r=Ln.angle(e,t),i=Ln.angle(e,n);return Ln.diff(r,i)},Ln.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Ln.toRadians=function(t){return t*Math.PI/180},Ln.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ln.COUNTERCLOCKWISE:n<0?Ln.CLOCKWISE:Ln.NONE},Ln.angleBetweenOriented=function(t,e,n){var r=Ln.angle(e,t),i=Ln.angle(e,n)-r;return i<=-Math.PI?i+Ln.PI_TIMES_2:i>Math.PI?i-Ln.PI_TIMES_2:i},Dn.PI_TIMES_2.get=function(){return 2*Math.PI},Dn.PI_OVER_2.get=function(){return Math.PI/2},Dn.PI_OVER_4.get=function(){return Math.PI/4},Dn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Dn.CLOCKWISE.get=function(){return st.CLOCKWISE},Dn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Ln,Dn);var Mn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Cn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},On={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Mn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ne.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ne.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Mn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Ne.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Ne.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Cn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Cn.CAP_SQUARE:var u=new C;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new C(r.p1.x+u.x,r.p1.y+u.y),c=new C(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Mn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Mn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof U))throw t;o=new C(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Mn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===st.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Mn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Mn.prototype.createSquare=function(t){this._segList.addPt(new C(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new C(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Mn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Mn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Mn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Mn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Mn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Ln.angle(i,this._seg0.p0),a=Ln.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Ln.normalize(o+a),u=Ln.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),h=i.x+l*Math.cos(u),p=i.y+l*Math.sin(u),f=new C(h,p),d=new gn(i,f),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Ne.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Mn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ne.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Mn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new C;l<a;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Mn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new C((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new C((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Mn.prototype.createCircle=function(t){var e=new C(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Mn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Mn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Sn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Mn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Mn.prototype.closeRing=function(){this._segList.closeRing()},Mn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},On.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},On.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},On.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},On.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Mn,On);var Pn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Pn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&It.reverse(o),o},Pn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=In.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ne.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=In.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ne.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},Pn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ne.RIGHT&&(r=-r);var i=In.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Pn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=In.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ne.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=In.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ne.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Pn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:e.createCircle(t);break;case Cn.CAP_SQUARE:e.createSquare(t)}},Pn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Pn.prototype.getBufferParameters=function(){return this._bufParams},Pn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Pn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Pn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Pn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=In.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ne.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=In.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ne.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},Pn.prototype.getSegGen=function(t){return new Mn(this._precisionModel,this._bufParams,t)},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new C(t[n]);return e};var Rn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new st;var t=arguments[0];this._subgraphs=t},kn={DepthSegment:{configurable:!0}};Rn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new wt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(L(arguments[2],Et)&&arguments[0]instanceof C&&arguments[1]instanceof Ve){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var c=a.getDepth(Ne.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(Ne.RIGHT));var h=new Fn(this._seg,c);s.add(h)}}else if(L(arguments[2],Et)&&arguments[0]instanceof C&&L(arguments[1],Et))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(p,g,f)}},Rn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Je.min(e)._leftDepth},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},kn.DepthSegment.get=function(){return Fn},Object.defineProperties(Rn,kn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[x]},Fn.prototype.getClass=function(){return Fn};var Bn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Bn.prototype.area=function(){return Bn.area(this.p0,this.p1,this.p2)},Bn.prototype.signedArea=function(){return Bn.signedArea(this.p0,this.p1,this.p2)},Bn.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return Bn.interpolateZ(t,this.p0,this.p1,this.p2)},Bn.prototype.longestSideLength=function(){return Bn.longestSideLength(this.p0,this.p1,this.p2)},Bn.prototype.isAcute=function(){return Bn.isAcute(this.p0,this.p1,this.p2)},Bn.prototype.circumcentre=function(){return Bn.circumcentre(this.p0,this.p1,this.p2)},Bn.prototype.area3D=function(){return Bn.area3D(this.p0,this.p1,this.p2)},Bn.prototype.centroid=function(){return Bn.centroid(this.p0,this.p1,this.p2)},Bn.prototype.inCentre=function(){return Bn.inCentre(this.p0,this.p1,this.p2)},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Bn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Bn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Bn.det=function(t,e,n,r){return t*r-e*n},Bn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,h=t.x-i,p=t.y-o,f=(l*h-s*p)/c,d=(-u*h+a*p)/c;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},Bn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Bn.isAcute=function(t,e,n){return!!Ln.isAcute(t,e,n)&&!!Ln.isAcute(e,n,t)&&!!Ln.isAcute(n,t,e)},Bn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*Bn.det(o,a,s,u),c=Bn.det(a,o*o+a*a,u,s*s+u*u),h=Bn.det(o,o*o+a*a,s,s*s+u*u);return new C(r-c/l,i+h/l)},Bn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Y(t.x+n/2,t.y+r/2,1),o=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(i,o)},Bn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new C(t.x+i*o,t.y+i*a)},Bn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,p=l*l+c*c+h*h;return Math.sqrt(p)/2},Bn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new C(r,i)},Bn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new C(s,u)};var zn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new wt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};zn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)},zn.prototype.addPolygon=function(t){var e=this._distance,n=Ne.LEFT;this._distance<0&&(e=-this._distance,n=Ne.RIGHT);var r=t.getExteriorRing(),i=It.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,S.EXTERIOR,S.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=It.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ne.opposite(n),S.INTERIOR,S.EXTERIOR)}},zn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Bn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},zn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=It.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)},zn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Me(0,S.BOUNDARY,e,n));this._curveList.add(r)},zn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ne.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},zn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Jt?this.addPolygon(t):t instanceof $t?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof Ut||t instanceof ne||t instanceof Vt)&&this.addCollection(t)},zn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},zn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var qn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};qn.prototype.next=function(){if(this._atStart)return this._atStart=!1,qn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Vt?(this._subcollectionIterator=new qn(t),this._subcollectionIterator.next()):t},qn.prototype.remove=function(){throw new Error(this.getClass().getName())},qn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},qn.prototype.interfaces_=function(){return[xt]},qn.prototype.getClass=function(){return qn},qn.isAtomic=function(t){return!(t instanceof Vt)};var Vn=function(){this._geom=null;var t=arguments[0];this._geom=t};Vn.prototype.locate=function(t){return Vn.locate(t,this._geom)},Vn.prototype.interfaces_=function(){return[Gn]},Vn.prototype.getClass=function(){return Vn},Vn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Vn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Vn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Vn.isPointInRing(t,i))return!1}return!0},Vn.containsPoint=function(t,e){if(e instanceof Jt)return Vn.containsPointInPolygon(t,e);if(e instanceof Vt)for(var n=new qn(e);n.hasNext();){var r=n.next();if(r!==e&&Vn.containsPoint(t,r))return!0}return!1},Vn.locate=function(t,e){return e.isEmpty()?S.EXTERIOR:Vn.containsPoint(t,e)?S.INTERIOR:S.EXTERIOR};var Un=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[S.NONE,S.NONE]};Un.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Un.prototype.propagateSideLabels=function(t){for(var e=S.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ne.LEFT)!==S.NONE&&(e=r.getLocation(t,Ne.LEFT))}if(e===S.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ne.ON)===S.NONE&&s.setLocation(t,Ne.ON,i),s.isArea(t)){var u=s.getLocation(t,Ne.LEFT),l=s.getLocation(t,Ne.RIGHT);if(l!==S.NONE){if(l!==i)throw new Se("side location conflict",a.getCoordinate());u===S.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Ne.LEFT)===S.NONE,"found single null side"),s.setLocation(t,Ne.RIGHT,i),s.setLocation(t,Ne.LEFT,i)}}},Un.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Un.prototype.print=function(t){j.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Un.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Un.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ne.LEFT);et.isTrue(r!==S.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ne.LEFT),u=a.getLocation(t,Ne.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Un.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Un.prototype.iterator=function(){return this.getEdges().iterator()},Un.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new wt(this._edgeMap.values())),this._edgeList},Un.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===S.NONE&&(this._ptInAreaLocation[t]=Vn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Un.prototype.toString=function(){var t=new O;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Un.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Un.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===S.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=S.NONE;if(e[u])l=S.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},Un.prototype.getDegree=function(){return this._edgeMap.size()},Un.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var jn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Se("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ze.isNorthern(i)&&ze.isNorthern(o)?n:ze.isNorthern(i)||ze.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){j.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new wt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ne.LEFT),r=t.getDepth(Ne.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Se("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Ne.RIGHT,a),a=u.getDepth(Ne.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=S.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=S.INTERIOR;break}if(r.isInResult()){t=S.EXTERIOR;break}}}if(t===S.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===S.INTERIOR):(a.isInResult()&&(i=S.EXTERIOR),s.isInResult()&&(i=S.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Me(S.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==S.INTERIOR&&o!==S.BOUNDARY||this._label.setLocation(i,S.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Un),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new jn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ue),Xn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xn.prototype.compareTo=function(t){var e=t;return Xn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Xn.prototype.interfaces_=function(){return[x]},Xn.prototype.getClass=function(){return Xn},Xn.orientation=function(t){return 1===It.increasingDirection(t)},Xn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===a,p=(l+=o)===s;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Hn=function(){this._edges=new wt,this._ocaMap=new h};Hn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Hn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Hn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Hn.prototype.iterator=function(){return this._edges.iterator()},Hn.prototype.getEdges=function(){return this._edges},Hn.prototype.get=function(t){return this._edges.get(t)},Hn.prototype.findEqualEdge=function(t){var e=new Xn(t.getCoordinates());return this._ocaMap.get(e)},Hn.prototype.add=function(t){this._edges.add(t);var e=new Xn(t.getCoordinates());this._ocaMap.put(e,t)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Wn=function(){};Wn.prototype.processIntersections=function(t,e,n,r){},Wn.prototype.isDone=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var $n=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};$n.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if($n.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},$n.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$n.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$n.prototype.getLineIntersector=function(){return this._li},$n.prototype.hasProperIntersection=function(){return this._hasProper},$n.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$n.prototype.hasIntersection=function(){return this._hasIntersection},$n.prototype.isDone=function(){return!1},$n.prototype.hasInteriorIntersection=function(){return this._hasInterior},$n.prototype.interfaces_=function(){return[Wn]},$n.prototype.getClass=function(){return $n},$n.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new C(t),this.segmentIndex=e,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zn.prototype.interfaces_=function(){return[x]},Zn.prototype.getClass=function(){return Zn};var Kn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new C(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Me(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new Zn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Qn=function(){};Qn.prototype.getChainStartIndices=function(t){var e=0,n=new wt;n.add(new P(e));do{var r=this.findChainEnd(t,e);n.add(new P(r)),e=r}while(e<t.length-1);return Qn.toIntArray(n)},Qn.prototype.findChainEnd=function(t,e){for(var n=ze.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&ze.quadrant(t[r-1],t[r])===n;)r++;return r-1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Jn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qn;this.startIndex=e.getChainStartIndices(this.pts)};Jn.prototype.getCoordinates=function(){return this.pts},Jn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Jn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Jn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],p=a.pts[s],f=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,l),g<u&&this.computeIntersectsForChain(i,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},Jn.prototype.getStartIndexes=function(){return this.startIndex},Jn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ne.RIGHT]-this._depth[t][Ne.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?S.EXTERIOR:S.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==S.EXTERIOR&&r!==S.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===S.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===S.EXTERIOR?0:t===S.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Me.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Jn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new C(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new O;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ne.ON),e.getLocation(1,Ne.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ne.LEFT),e.getLocation(1,Ne.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ne.RIGHT),e.getLocation(1,Ne.RIGHT),2))},e}(ke),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new wt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Rn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new wt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Le;i.create(r),e.add(i)}}return Je.sort(e,Je.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new En,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new $n(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Pn(n,this._bufParams),i=new zn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new je(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ye(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Me(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ne.LEFT),n=t.getLocation(0,Ne.RIGHT);return e===S.INTERIOR&&n===S.EXTERIOR?1:e===S.EXTERIOR&&n===S.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ve,n=new wt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&j.out.println(n)}},ir.prototype.scale=function(){if(L(arguments[0],bt)){for(var t=arguments[0],e=new wt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new C(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return It.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new J("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],y=p.getCoordinates()[f],v=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,v)))throw new J("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+v)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new J("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new ve},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new C(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new C,this._p1Scaled=new C),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new C(this._maxx,this._maxy),this._corner[1]=new C(this._minx,this._maxy),this._corner[2]=new C(this._minx,this._miny),this._corner[3]=new C(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var lr=function(){this.tempEnv1=new X,this.selectedSegment=new gn};lr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[$e]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},hr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(cr,hr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lr),fr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new wt};fr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},fr.prototype.isDone=function(){return!1},fr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fr.prototype.interfaces_=function(){return[Wn]},fr.prototype.getClass=function(){return fr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof V))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new fr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new En,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new fe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Se))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new fe(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof J))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Cn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new gr(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=D.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return Cn.CAP_ROUND},yr.CAP_BUTT.get=function(){return Cn.CAP_FLAT},yr.CAP_FLAT.get=function(){return Cn.CAP_FLAT},yr.CAP_SQUARE.get=function(){return Cn.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,yr);var vr=function(){this._pt=[new C,new C],this._distance=_.NaN,this._isNull=!0};vr.prototype.getCoordinates=function(){return this._pt},vr.prototype.getCoordinate=function(t){return this._pt[t]},vr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},vr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},vr.prototype.getDistance=function(){return this._distance},vr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr};var mr=function(){};mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.computeDistance=function(){if(arguments[2]instanceof vr&&arguments[0]instanceof $t&&arguments[1]instanceof C)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof vr&&arguments[0]instanceof Jt&&arguments[1]instanceof C){var a=arguments[0],s=arguments[1],u=arguments[2];mr.computeDistance(a.getExteriorRing(),s,u);for(var l=0;l<a.getNumInteriorRing();l++)mr.computeDistance(a.getInteriorRingN(l),s,u)}else if(arguments[2]instanceof vr&&arguments[0]instanceof ct&&arguments[1]instanceof C){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof $t)mr.computeDistance(c,h,p);else if(c instanceof Jt)mr.computeDistance(c,h,p);else if(c instanceof Vt)for(var f=c,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);mr.computeDistance(g,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof vr&&arguments[0]instanceof gn&&arguments[1]instanceof C){var y=arguments[1],v=arguments[2],m=arguments[0].closestPoint(y);v.setMinimum(m,y)}};var _r=function(t){this._maxPtDist=new vr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new Er(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return xr},br.MaxMidpointDistanceFilter.get=function(){return Er},Object.defineProperties(_r,br);var xr=function(t){this._maxPtDist=new vr,this._minPtDist=new vr,this._geom=t||null};xr.prototype.filter=function(t){this._minPtDist.initialize(),mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[ft]},xr.prototype.getClass=function(){return xr};var Er=function(t){this._maxPtDist=new vr,this._minPtDist=new vr,this._geom=t||null};Er.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new C((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),mr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Er.prototype.isDone=function(){return!1},Er.prototype.isGeometryChanged=function(){return!1},Er.prototype.getMaxPointDistance=function(){return this._maxPtDist},Er.prototype.interfaces_=function(){return[qt]},Er.prototype.getClass=function(){return Er};var wr=function(t){this._comps=t||null};wr.prototype.filter=function(t){t instanceof Jt&&this._comps.add(t)},wr.prototype.interfaces_=function(){return[Gt]},wr.prototype.getClass=function(){return wr},wr.getPolygons=function(){if(1===arguments.length)return wr.getPolygons(arguments[0],new wt);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof Jt?e.add(t):t instanceof Vt&&t.apply(new wr(e)),e}};var Cr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Cr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof $t&&this._lines.add(t)},Cr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Cr.prototype.interfaces_=function(){return[lt]},Cr.prototype.getClass=function(){return Cr},Cr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Cr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Cr.getLines(e,n))}},Cr.getLines=function(){if(1===arguments.length)return Cr.getLines(arguments[0],!1);if(2===arguments.length){if(L(arguments[0],bt)&&L(arguments[1],bt)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();Cr.getLines(n,t)}return t}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=new wt;return r.apply(new Cr(o,i)),o}if(arguments[0]instanceof ct&&L(arguments[1],bt)){var a=arguments[0],s=arguments[1];return a instanceof $t?s.add(a):a.apply(new Cr(s)),s}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&L(arguments[0],bt)&&L(arguments[1],bt)){for(var u=arguments[1],l=arguments[2],c=arguments[0].iterator();c.hasNext();){var h=c.next();Cr.getLines(h,u,l)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&L(arguments[1],bt)){var p=arguments[1],f=arguments[2];return arguments[0].apply(new Cr(p,f)),p}}};var Nr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};Nr.prototype.locateInternal=function(){if(arguments[0]instanceof C&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return S.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===S.EXTERIOR)return S.EXTERIOR;if(r===S.BOUNDARY)return S.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===S.INTERIOR)return S.EXTERIOR;if(a===S.BOUNDARY)return S.BOUNDARY}return S.INTERIOR}if(arguments[0]instanceof C&&arguments[1]instanceof $t){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return S.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?st.isOnLine(s,l)?S.INTERIOR:S.EXTERIOR:S.BOUNDARY}if(arguments[0]instanceof C&&arguments[1]instanceof Kt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?S.INTERIOR:S.EXTERIOR}},Nr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):S.EXTERIOR},Nr.prototype.intersects=function(t,e){return this.locate(t,e)!==S.EXTERIOR},Nr.prototype.updateLocationInfo=function(t){t===S.INTERIOR&&(this._isIn=!0),t===S.BOUNDARY&&this._numBoundaries++},Nr.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Jt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ut)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Vt)for(var u=new qn(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Nr.prototype.locate=function(t,e){return e.isEmpty()?S.EXTERIOR:e instanceof $t||e instanceof Jt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?S.BOUNDARY:this._numBoundaries>0||this._isIn?S.INTERIOR:S.EXTERIOR)},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr};var Ir=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Tr={INSIDE_AREA:{configurable:!0}};Ir.prototype.isInsideArea=function(){return this._segIndex===Ir.INSIDE_AREA},Ir.prototype.getCoordinate=function(){return this._pt},Ir.prototype.getGeometryComponent=function(){return this._component},Ir.prototype.getSegmentIndex=function(){return this._segIndex},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Tr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ir,Tr);var Sr=function(t){this._pts=t||null};Sr.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Sr.prototype.interfaces_=function(){return[Gt]},Sr.prototype.getClass=function(){return Sr},Sr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Je.singletonList(t):Sr.getPoints(t,new wt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof Vt&&e.apply(new Sr(n)),n}};var Ar=function(){this._locations=null;var t=arguments[0];this._locations=t};Ar.prototype.filter=function(t){(t instanceof Kt||t instanceof $t||t instanceof Jt)&&this._locations.add(new Ir(t,0,t.getCoordinate()))},Ar.prototype.interfaces_=function(){return[Gt]},Ar.prototype.getClass=function(){return Ar},Ar.getLocations=function(t){var e=new wt;return t.apply(new Ar(e)),e};var Lr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Nr,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Lr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=wr.getPolygons(this._geom[e]);if(i.size()>0){var o=Ar.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&L(arguments[0],Et)&&L(arguments[1],Et)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ir&&arguments[1]instanceof Jt){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(S.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new Ir(f,g),null}},Lr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Lr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Cr.getLines(this._geom[0]),n=Cr.getLines(this._geom[1]),r=Sr.getPoints(this._geom[0]),i=Sr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Lr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Lr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Lr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Lr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof $t&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Ir(t,o,s),n[1]=new Ir(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof $t&&arguments[1]instanceof $t){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=l.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=st.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(h[f],h[f+1]),v=new gn(p[d],p[d+1]),m=y.closestPoints(v);c[0]=new Ir(u,f,m[0]),c[1]=new Ir(l,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Lr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Ir(i,0,i.getCoordinate()),n[1]=new Ir(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Lr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Lr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.distance=function(t,e){return new Lr(t,e).distance()},Lr.isWithinDistance=function(t,e,n){return new Lr(t,e,n).distance()<=n},Lr.nearestPoints=function(t,e){return new Lr(t,e).nearestPoints()};var Dr=function(){this._pt=[new C,new C],this._distance=_.NaN,this._isNull=!0};Dr.prototype.getCoordinates=function(){return this._pt},Dr.prototype.getCoordinate=function(t){return this._pt[t]},Dr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Dr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Dr.prototype.toString=function(){return Q.toLineString(this._pt[0],this._pt[1])},Dr.prototype.getDistance=function(){return this._distance},Dr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr};var Mr=function(){};Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.computeDistance=function(){if(arguments[2]instanceof Dr&&arguments[0]instanceof $t&&arguments[1]instanceof C)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Dr&&arguments[0]instanceof Jt&&arguments[1]instanceof C){var s=arguments[0],u=arguments[1],l=arguments[2];Mr.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Mr.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Dr&&arguments[0]instanceof ct&&arguments[1]instanceof C){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof $t)Mr.computeDistance(h,p,f);else if(h instanceof Jt)Mr.computeDistance(h,p,f);else if(h instanceof Vt)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Mr.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Dr&&arguments[0]instanceof gn&&arguments[1]instanceof C){var v=arguments[1],m=arguments[2],_=arguments[0].closestPoint(v);m.setMinimum(_,v)}};var Or=function(){this._g0=null,this._g1=null,this._ptDist=new Dr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Pr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Or.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Or.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Or.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Or.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Or.prototype.computeOrientedDistance=function(t,e,n){var r=new Rr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new kr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Or.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.distance=function(){if(2===arguments.length)return new Or(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Or(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Pr.MaxPointDistanceFilter.get=function(){return Rr},Pr.MaxDensifiedByFractionDistanceFilter.get=function(){return kr},Object.defineProperties(Or,Pr);var Rr=function(){this._maxPtDist=new Dr,this._minPtDist=new Dr,this._euclideanDist=new Mr,this._geom=null;var t=arguments[0];this._geom=t};Rr.prototype.filter=function(t){this._minPtDist.initialize(),Mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rr.prototype.interfaces_=function(){return[ft]},Rr.prototype.getClass=function(){return Rr};var kr=function(){this._maxPtDist=new Dr,this._minPtDist=new Dr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};kr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,l=new C(s,u);this._minPtDist.initialize(),Mr.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},kr.prototype.isDone=function(){return!1},kr.prototype.isGeometryChanged=function(){return!1},kr.prototype.getMaxPointDistance=function(){return this._maxPtDist},kr.prototype.interfaces_=function(){return[qt]},kr.prototype.getClass=function(){return kr};var Fr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Br={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(t,e,n){var r=new Or(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Q.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&j.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Jt||this._input instanceof ne||this._input instanceof Vt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(t,e,n){var r=new Lr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Q.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(t){for(var e=new wt,n=new Cr(e),r=wr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},Br.VERBOSE.get=function(){return!1},Br.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,Br);var zr=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zr.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},zr.prototype.checkDistance=function(){var t=new Fr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zr.prototype.checkPolygonal=function(){this._result instanceof Jt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zr.prototype.getErrorIndicator=function(){return this._errorIndicator},zr.prototype.getErrorLocation=function(){return this._errorLocation},zr.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zr.prototype.report=function(t){if(!zr.VERBOSE)return null;j.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zr.prototype.getErrorMessage=function(){return this._errorMsg},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.isValidMsg=function(t,e,n){var r=new zr(t,e,n);return r.isValid()?null:r.getErrorMessage()},zr.isValid=function(t,e,n){return!!new zr(t,e,n).isValid()},Gr.VERBOSE.get=function(){return!1},Gr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zr,Gr);var qr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};qr.prototype.getCoordinates=function(){return this._pts},qr.prototype.size=function(){return this._pts.length},qr.prototype.getCoordinate=function(t){return this._pts[t]},qr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},qr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},qr.prototype.setData=function(t){this._data=t},qr.prototype.getData=function(){return this._data},qr.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},qr.prototype.interfaces_=function(){return[pn]},qr.prototype.getClass=function(){return qr};var Vr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new wt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Vr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Vr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Vr.prototype.getIntersectionSegments=function(){return this._intSegments},Vr.prototype.count=function(){return this._intersectionCount},Vr.prototype.getIntersections=function(){return this._intersections},Vr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Vr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Vr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Vr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Vr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Vr.prototype.interfaces_=function(){return[Wn]},Vr.prototype.getClass=function(){return Vr},Vr.createAllIntersectionsFinder=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e},Vr.createAnyIntersectionFinder=function(t){return new Vr(t)},Vr.createIntersectionCounter=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ur=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ur.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ur.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ur.prototype.isValid=function(){return this.execute(),this._isValid},Ur.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ur.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Vr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new En;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ur.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Se(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ur.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Q.toLineString(t[0],t[1])+" and "+Q.toLineString(t[2],t[3])},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.computeIntersections=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var jr=function t(){this._nv=null;var e=arguments[0];this._nv=new Ur(t.toSegmentStrings(e))};jr.prototype.checkValid=function(){this._nv.checkValid()},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.toSegmentStrings=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new qr(r.getCoordinates(),r))}return e},jr.checkValid=function(t){new jr(t).checkValid()};var Yr=function(t){this._mapOp=t};Yr.prototype.map=function(t){for(var e=new wt,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ve.toGeometryArray(e))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.map=function(t,e){return new Yr(e).map(t)};var Xr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new wt,this._resultLineList=new wt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Xr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ii.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Xr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Xr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Xr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ii.isResultOfOp(r,e)&&e===Ii.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Hr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new wt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Hr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Hr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ii.INTERSECTION)){var r=n.getLabel();Ii.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Hr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Wr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Wr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Wr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new wt,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new wt;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Wr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Wr.prototype.getInputGeometry=function(){return this._inputGeom},Wr.prototype.transformMultiLineString=function(t,e){for(var n=new wt,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Wr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Wr.prototype.transformMultiPoint=function(t,e){for(var n=new wt,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformMultiPolygon=function(t,e){for(var n=new wt,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.copy=function(t){return t.copy()},Wr.prototype.transformGeometryCollection=function(t,e){for(var n=new wt,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ve.toGeometryArray(n)):this._factory.buildGeometry(n)},Wr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof $t)return this.transformLineString(t,null);if(t instanceof Ut)return this.transformMultiLineString(t,null);if(t instanceof Jt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Vt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Wr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var $r=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof $t&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};$r.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new C(o)),0===r&&this._isClosed&&t.set(t.size()-1,new C(o)))}},$r.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},$r.prototype.snapTo=function(t){var e=new Nt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$r.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new C(i),!1)}},$r.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},$r.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zr=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};Zr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Qr(e,n).transform(this._srcGeom)},Zr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Qr(t,n,!0).transform(this._srcGeom),i=r;return e&&L(i,Qt)&&(i=r.buffer(0)),i},Zr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zr.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zr.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zr(t);r[0]=i.snapTo(e,n);var o=new Zr(e);return r[1]=o.snapTo(r[0],n),r},Zr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zr.computeOverlaySnapTolerance(i),Zr.computeOverlaySnapTolerance(o))}},Zr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zr.SNAP_PRECISION_FACTOR},Zr.snapToSelf=function(t,e,n){return new Zr(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zr,Kr);var Qr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new $r(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wr),Jr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Jr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Jr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Jr.signExpBits(this._commonBits),this._isFirst=!1,null):Jr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Jr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Jr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Jr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Jr.signExpBits=function(t){return t>>52},Jr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Jr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Jr.getBit(t,r)!==Jr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new C(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Jr,this._commonBitsY=new Jr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new C(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ft]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[qt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Zr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ii.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||j.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ii.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ii.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ii.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ii.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ii.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof J))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof J?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ii.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ii.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ii.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ii.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[x]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var li=function(){};li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new wt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Je.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&L(arguments[0],Et)&&L(arguments[1],Et)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&L(arguments[0],Et)&&arguments[1]instanceof ci){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),pi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},fi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return Q.toLineString(new C(this._min,0),new C(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},fi.NodeComparator.get=function(){return di},Object.defineProperties(pi,fi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[w]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),vi=function(){this._leaves=new wt,this._root=null,this._level=0};vi.prototype.buildTree=function(){Je.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new wt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},vi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},vi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},vi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},vi.prototype.printNode=function(t){j.out.println(Q.toLineString(new C(t._min,this._level),new C(t._max,this._level)))},vi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},vi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var mi=function(){this._items=new wt};mi.prototype.visitItem=function(t){this._items.add(t)},mi.prototype.getItems=function(){return this._items},mi.prototype.interfaces_=function(){return[$e]},mi.prototype.getClass=function(){return mi};var _i=function(){this._index=null;var t=arguments[0];if(!L(t,Qt))throw new m("Argument must be Polygonal");this._index=new Ei(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new xi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[Gn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return xi},bi.IntervalIndexedGeometry.get=function(){return Ei},Object.defineProperties(_i,bi);var xi=function(){this._counter=null;var t=arguments[0];this._counter=t};xi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xi.prototype.interfaces_=function(){return[$e]},xi.prototype.getClass=function(){return xi};var Ei=function(){this._index=new vi;var t=arguments[0];this.init(t)};Ei.prototype.init=function(t){for(var e=Cr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Ei.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Ei.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var wi=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Nr,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Ne.ON)===S.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof Jt||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,S.INTERIOR)}else if(arguments[0]instanceof C){var e=arguments[0];this.insertPoint(this._argIndex,e,S.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,S.INTERIOR,S.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],S.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],S.BOUNDARY)},e.prototype.addLineString=function(t){var e=It.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Me(this._argIndex,S.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===S.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=It.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Me(this._argIndex,S.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],S.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Me(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Jt)this.addPolygon(e);else if(e instanceof $t)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Ut)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Vt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return L(this._parentGeom,Qt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?S.BOUNDARY:S.INTERIOR},e}(je),Ci=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new wi(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wi(0,e,r),this._arg[1]=new wi(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wi(0,i,a),this._arg[1]=new wi(1,o,a)}};Ci.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ci.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var Ni=function(){};Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.map=function(){if(arguments[0]instanceof ct&&L(arguments[1],Ni.MapOp)){for(var t=arguments[0],e=arguments[1],n=new wt,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(L(arguments[0],bt)&&L(arguments[1],Ni.MapOp)){for(var o=arguments[0],a=arguments[1],s=new wt,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},Ni.MapOp=function(){};var Ii=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Nr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Hn,this._resultPolyList=new wt,this._resultLineList=new wt,this._resultPointList=new wt,this._graph=new je(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new wt;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==S.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new wt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new wt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),jr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Xr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Hr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ne.RIGHT),i.getLocation(1,Ne.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ne.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ne.LEFT,r.getLocation(i,Ne.LEFT)),et.isTrue(!r.isNull(i,Ne.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ne.RIGHT,r.getLocation(i,Ne.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ci);Ii.overlayOp=function(t,e,n){return new Ii(t,e).getResultGeometry(n)},Ii.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ii.createEmptyResult(Ii.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yr.map(t,{interfaces_:function(){return[Ni.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.INTERSECTION)},Ii.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ii.createEmptyResult(Ii.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.SYMDIFFERENCE)},Ii.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ii.INTERSECTION:o=Math.min(r,i);break;case Ii.UNION:o=Math.max(r,i);break;case Ii.DIFFERENCE:o=r;break;case Ii.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ii.createEmptyResult=function(t,e,n,r){var i=null;switch(Ii.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ii.difference=function(t,e){return t.isEmpty()?Ii.createEmptyResult(Ii.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.DIFFERENCE))},Ii.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ii.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===S.BOUNDARY&&(i=S.INTERIOR),o===S.BOUNDARY&&(o=S.INTERIOR),arguments[2]){case Ii.INTERSECTION:return i===S.INTERIOR&&o===S.INTERIOR;case Ii.UNION:return i===S.INTERIOR||o===S.INTERIOR;case Ii.DIFFERENCE:return i===S.INTERIOR&&o!==S.INTERIOR;case Ii.SYMDIFFERENCE:return i===S.INTERIOR&&o!==S.INTERIOR||i!==S.INTERIOR&&o===S.INTERIOR}return!1}},Ii.INTERSECTION=1,Ii.UNION=2,Ii.DIFFERENCE=3,Ii.SYMDIFFERENCE=4;var Ti=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Nr,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ti.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ti.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?S.BOUNDARY:this._ptLocator.locate(t,this._g)},Ti.prototype.extractLinework=function(t){var e=new Si;t.apply(e);var n=e.getLinework(),r=ve.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Si=function(){this._linework=null,this._linework=new wt};Si.prototype.getLinework=function(){return this._linework},Si.prototype.filter=function(t){if(t instanceof Jt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Si.prototype.interfaces_=function(){return[Gt]},Si.prototype.getClass=function(){return Si};var Ai=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ai.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ai.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ai.prototype.getPoints=function(t){for(var e=new wt,n=Cr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ai.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new C(l-u,c+s);r.add(h)}if(this._doRight){var p=new C(l+u,c-s);r.add(p)}},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var Li=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new wt;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ti(this._geom[0],this._boundaryDistanceTolerance),new Ti(this._geom[1],this._boundaryDistanceTolerance),new Ti(this._geom[2],this._boundaryDistanceTolerance)]},Di={TOLERANCE:{configurable:!0}};Li.prototype.reportResult=function(t,e,n){j.out.println("Overlay result invalid - A:"+S.toLocationSymbol(e[0])+" B:"+S.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+S.toLocationSymbol(e[2]))},Li.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Li.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Li.hasLocation(this._location,S.BOUNDARY)||this.isValidResult(r,this._location)}},Li.prototype.addTestPts=function(t){var e=new Ai(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Li.prototype.isValidResult=function(t,e){var n=Ii.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===S.INTERIOR);return r||this.reportResult(t,e,n),r},Li.prototype.getInvalidLocation=function(){return this._invalidLocation},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Li.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zr.computeSizeBasedSnapTolerance(t),Zr.computeSizeBasedSnapTolerance(e))},Li.isValid=function(t,e,n,r){return new Li(t,e,r).isValid(n)},Di.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Li,Di);var Mi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Mi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Mi.prototype.combine=function(){for(var t=new wt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.combine=function(){return 1===arguments.length?new Mi(arguments[0]).combine():2===arguments.length?new Mi(Mi.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Mi(Mi.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Mi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new wt;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new wt;return a.add(r),a.add(i),a.add(o),a}};var Oi=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new wt)},Pi={STRTREE_NODE_CAPACITY:{configurable:!0}};Oi.prototype.reduceToGeometries=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var r=n.next(),i=null;L(r,Et)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Oi.prototype.extractByEnvelope=function(t,e,n){for(var r=new wt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Oi.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Mi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Oi.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Oi.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Oi.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Oi.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Oi.getGeometry(e,n),Oi.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Oi.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Oi.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Oi.prototype.unionActual=function(t,e){return Oi.restrictToPolygons(t.union(e))},Oi.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Oi.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new wt,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Mi.combine(r)},Oi.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.restrictToPolygons=function(t){if(L(t,Qt))return t;var e=wr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ve.toPolygonArray(e))},Oi.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Oi.union=function(t){return new Oi(t).union()},Pi.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Oi,Pi);var Ri=function(){};Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ii.createEmptyResult(Ii.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.UNION)},t.GeoJSONReader=we,t.GeoJSONWriter=Ce,t.OverlayOp=Ii,t.UnionOp=Ri,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";n.r(e),n.d(e,"DistanceDetectionType",(function(){return J})),n.d(e,"DEFAULT_OPTIONS",(function(){return tt})),n.d(e,"packComponents",(function(){return et})),n.d(e,"getFrame",(function(){return rt})),n.d(e,"constructEdges",(function(){return it}));var r,i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}!function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.STRAIGHT=2]="STRAIGHT"}(r||(r={}));var u,l=function(t){return t.x*t.x+t.y*t.y},c=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.pow(n,2)+Math.pow(r,2)},h=function(t,e){var n=e.y-t.y,r=e.x-t.x;return Math.atan2(n,r)},p=function(t){return Math.abs((t.maxX-t.minX)*(t.maxY-t.minY))},f=function(t){return t.reduce((function(t,e){return{minX:Math.min(t.minX,e.minX),maxX:Math.max(t.maxX,e.maxX),minY:Math.min(t.minY,e.minY),maxY:Math.max(t.maxY,e.maxY)}}),{minX:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER})},d=function(){function t(t){var e,n;this.mPoints=t,this.mBase={x:0,y:0},this.mVerticeCenter={x:0,y:0};try{for(var r=o(this.mPoints),i=r.next();!i.done;i=r.next()){var a=i.value;this.mVerticeCenter.x+=a.x,this.mVerticeCenter.y+=a.y}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}this.mVerticeCenter.x/=this.mPoints.length,this.mVerticeCenter.y/=this.mPoints.length,this.mVerticesBbox=null}return t.fromGraph=function(t){var e,n,r=[];try{for(var i=o(t.nodes),a=i.next();!a.done;a=i.next()){var s=a.value;r.push(s.min,s.max)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this.fromPoints(r)},t.fromPoints=function(e){return new t(this.convexHull(e))},t.fromPointsUnsafe=function(e){return new t(e)},t.prototype.withBase=function(t){return 0==this.base.x&&0==this.base.y?t:{x:t.x+this.base.x,y:t.y+this.base.y}},t.prototype.move=function(t){this.mBase.x+=t.x,this.mBase.y+=t.y},Object.defineProperty(t.prototype,"points",{get:function(){return 0==this.base.x&&0==this.base.y?this.mPoints:this.mPoints.map(this.withBase.bind(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointCount",{get:function(){return this.mPoints.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"base",{get:function(){return this.mBase},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.base.x+this.mVerticeCenter.x,y:this.base.y+this.mVerticeCenter.y}},enumerable:!1,configurable:!0}),t.prototype.negative=function(){return new t(this.points.map((function(t){return{x:-t.x,y:-t.y}})))},t.prototype.getSafeIndex=function(t){return(t%(e=this.points.length)+e)%e;var e},t.prototype.getPoint=function(t){return this.withBase(this.points[this.getSafeIndex(t)])},t.prototype.getPrevPoint=function(t){return this.withBase(this.getPoint(t-1))},t.prototype.getNextPoint=function(t){return this.withBase(this.getPoint(t+1))},Object.defineProperty(t.prototype,"boundingBox",{get:function(){var t,e;if(null===this.mVerticesBbox){var n={minX:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER};try{for(var r=o(this.mPoints),i=r.next();!i.done;i=r.next()){var a=i.value;a.x<n.minX&&(n.minX=a.x),a.x>n.maxX&&(n.maxX=a.x),a.y<n.minY&&(n.minY=a.y),a.y>n.maxY&&(n.maxY=a.y)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.mVerticesBbox=n}var s=this.mBase;return{minX:this.mVerticesBbox.minX+s.x,maxX:this.mVerticesBbox.maxX+s.x,minY:this.mVerticesBbox.minY+s.y,maxY:this.mVerticesBbox.maxY+s.y}},enumerable:!1,configurable:!0}),t.convexHull=function(e){var n,i,a=[],s=t.topLeft(e);a.push(s),e.splice(e.findIndex((function(t){return t===s})),1),e.sort((function(t,e){return h(s,t)-h(s,e)}));var u,l,c,p,f=this.removeDuplicates(e,s);try{for(var d=o(f),g=d.next();!g.done;g=d.next()){for(var y=g.value;a.length>1&&(u=a[a.length-2],l=a[a.length-1],c=y,void 0,((p=l.x*c.y-l.y*c.x-u.x*c.y+u.x*l.y+u.y*c.x-u.y*l.x)<0?r.LEFT:p>0?r.RIGHT:r.STRAIGHT)===r.LEFT);)a.pop();a.push(y)}}catch(t){n={error:t}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return a},t.removeDuplicates=function(t,e){for(var n=[],r=0;r<t.length;){for(var i=t[r],o=r+1;o<t.length&&h(e,i)-h(e,t[o])==0;)c(e,t[o])>c(e,i)&&(i=t[o]),o+=1;n.push(i),r=o}return n},t.topLeft=function(t){return t.reduce((function(t,e){return t.y<e.y||t.y==e.y&&t.x<=e.x?t:e}),{x:Number.MAX_VALUE,y:Number.MAX_VALUE})},t}();!function(t){t[t.BruteForce=0]="BruteForce",t[t.Linear=1]="Linear",t[t.Logarithmic=2]="Logarithmic"}(u||(u={}));var g=function(t,e,n){void 0===n&&(n=u.BruteForce);var r=e.negative();if(n===u.BruteForce){var i=function(t,e){var n,r,i,a,s=[];try{for(var u=o(t.points),l=u.next();!l.done;l=u.next()){var c=l.value;try{for(var h=(i=void 0,o(e.points)),p=h.next();!p.done;p=h.next()){var f=p.value,d={x:c.x+f.x,y:c.y+f.y};s.push(d)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return s}(t,r),a=d.fromPoints(i);return a.points.map((function(t,e){var n=function(t,e){var n=e.x-t.from.x,r=e.y-t.from.y,i=t.to.x-t.from.x,o=t.to.y-t.from.y,a=i*i+o*o,s=-1;return 0!==a&&(s=(n*i+r*o)/a),s<0?[{x:t.from.x,y:t.from.y},e]:s>1?[{x:t.to.x,y:t.to.y},e]:[{x:t.from.x+s*i,y:t.from.y+s*o},e]}({from:t,to:a.getNextPoint(e)},{x:0,y:0}),r=l(n[0]),i=Math.sqrt(r);return{distance:r,unitVector:{x:(n[1].x-n[0].x)/i,y:(n[1].y-n[0].y)/i}}})).reduce((function(t,e){return e.distance<t.distance?e:t}))}throw new Error("Strategy "+n+" has not implemented yet")};function y(t,e,n){if(!m(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!v(t))throw new Error("bbox must only contain numbers")}))}(r),i&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function v(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function m(t){return!!t&&t.constructor===Object}var _=function(t){return[t.x,t.y]},b=function(t){var e,n=t.points;return function(t,e,n){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var i=t[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!v(i[0][0])||!v(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return y({type:"Polygon",coordinates:t},e,n)}([(e=s(n,[n[0]]),e.map(_))])},x=n(0);function E(t,e,n){if(null!==t)for(var r,i,o,a,s,u,l,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,v=0;v<y;v++){s=(c=!!(l=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<s;m++){var _=0,b=0;if(null!==(a=c?l.geometries[m]:l)){u=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(u,p,v,_,b),p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,v,_,b),p++,"MultiPoint"===x&&_++;"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],p,v,_,b),p++;"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===x&&(b=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],p,v,_,b),p++;b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)E(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}var w=function(t,e){if(!m(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return E(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t};function C(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return function t(e){if(e.length>1&&v(e[0])&&v(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}(e),e;throw new Error("No valid coordinates")}function N(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function I(t){var e,n,r,i,o,a=C(t);if(2===a.length&&(e=a[0],n=a[1],e[0]!==n[0]||e[1]!==n[1]))return a;var s=[],u=a.length-1;s.push(a[0]);for(var l=1;l<u;l++)r=a[l-1],i=a[l],T(r,o=a[l+1],i)||s.push(i);return s.push(o),s}function T(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],l=s-o,c=u-a;return 0==(r-o)*c-(i-a)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=u:u<=i&&i<=a)}var S,A=function(t,e){var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=function(t,e){if(!t)throw new Error("geojson is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("geojson is invalid")}(t),i=[];switch(r){case"LineString":i=I(t);break;case"MultiLineString":case"Polygon":C(t).forEach((function(t){i.push(I(t))}));break;case"MultiPolygon":C(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(I(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var o={};C(t).forEach((function(t){var e=t.join("-");o.hasOwnProperty(e)||(i.push(t),o[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):y({type:r,coordinates:i},t.properties,t.bbox,t.id)},L=function(t,e){var n=N(t),r=N(e);if(A(w(r,{precision:4})).coordinates[0].length<4)return null;if(A(w(n,{precision:4})).coordinates[0].length<4)return null;var i=new x.GeoJSONReader,o=i.read(w(n)),a=i.read(w(r)),s=x.OverlayOp.intersection(o,a);return s.isEmpty()?null:y((new x.GeoJSONWriter).write(s))};!function(t){t[t.Normal=0]="Normal",t[t.Intersection=1]="Intersection"}(S||(S={}));var D=function(t,e){var n=e.componentSpacing,r=Math.pow(e.componentSpacing,2),i=n,s=function(t){return function(e,n){var r=g(e,n),o=r.distance,a=r.unitVector,s=t(o),u=Math.abs(s)<i?s:i*Math.sign(s);return{x:a.x*u,y:a.y*u}}},u=s((function(t){return 3*Math.log2(Math.sqrt(t)/n)})),c=s((function(t){return-(r/t-1)})),h=function(n,r,i){var o=a([t.nodes[n],t.nodes[r]],2),s=o[0],u=o[1];if(null===L(b(s),b(u)))return{force:i(s,u),type:S.Normal};var l,c,h=e.componentSpacing,p=(l={from:s.center,to:u.center},c=Math.sqrt(function(t){var e=t.to.x-t.from.x,n=t.to.y-t.from.y;return e*e+n*n}(l)),{x:(l.to.x-l.from.x)/c,y:(l.to.y-l.from.y)/c});return{force:{x:-p.x*h,y:-p.y*h},type:S.Intersection}},p=e.type===J.GRID_SQUARE?e.detection.move:function(e,n){t.nodes[e].move(n)},f=Array.from({length:t.nodes.length},(function(){return{x:0,y:0}})),d=Array.from({length:t.nodes.length},(function(){return{x:0,y:0}})),y=function(){var n=function(t){return 0!==d[t].x||0!==d[t].y};!function(t,e,n){var r,i,s,l;try{for(var c=o(t.edges.entries()),p=c.next();!p.done;p=c.next()){var f=a(p.value,2),d=f[0],g=f[1];try{for(var y=(s=void 0,o(g)),v=y.next();!v.done;v=y.next()){var m=v.value,_=h(d,m,u),b=_.force,x=_.type===S.Normal?e:n;x[d].x+=b.x,x[d].y+=b.y,x[m].x-=b.x,x[m].y-=b.y}}catch(t){s={error:t}}finally{try{v&&!v.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}}catch(t){r={error:t}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}(t,f,d),function(t,n,r){if(e.type!==J.BASIC)throw new Error("Not implemented");for(var i=t.nodes.length,o=0;o<i;++o)for(var a=function(e){if(void 0!==t.edges[o].find((function(t){return t===e}))){var i=h(o,e,c),a=i.force,s=i.type===S.Normal?n:r;s[o].x+=a.x,s[o].y+=a.y,s[e].x-=a.x,s[e].y-=a.y}},s=o+1;s<i;++s)a(s)}(t,f,d);for(var r=0,i=0;i<t.nodes.length;++i){var s=n(i)?d[i]:f[i];p(i,s),r+=l(s),f[i].x=0,f[i].y=0,d[i].x=0,d[i].y=0}return r/t.nodes.length};if(void 0!==e.step)for(var v=e.step,m=0;m<v;++m)y();else{var _=0;for(m=0;m<100;m+=1)y(),(_+=1)>=5&&(t.edges=it(t.nodes),_=0)}};const M=Math.pow(2,-52),O=new Uint32Array(512);class P{static from(t,e=V,n=U){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new P(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let e=0;e<o;e++){const n=t[2*e],r=t[2*e+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[e]=e}const c=(a+u)/2,h=(s+l)/2;let p,f,d,g=1/0;for(let e=0;e<o;e++){const n=R(c,h,t[2*e],t[2*e+1]);n<g&&(p=e,g=n)}const y=t[2*p],v=t[2*p+1];g=1/0;for(let e=0;e<o;e++){if(e===p)continue;const n=R(y,v,t[2*e],t[2*e+1]);n<g&&n>0&&(f=e,g=n)}let m=t[2*f],_=t[2*f+1],b=1/0;for(let e=0;e<o;e++){if(e===p||e===f)continue;const n=z(y,v,m,_,t[2*e],t[2*e+1]);n<b&&(d=e,b=n)}let x=t[2*d],E=t[2*d+1];if(b===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];G(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(F(y,v,m,_,x,E)){const t=f,e=m,n=_;f=d,m=x,_=E,d=t,x=e,E=n}const w=function(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,h=u*u+l*l,p=.5/(a*l-s*u);return{x:t+(l*c-s*h)*p,y:e+(a*h-u*c)*p}}(y,v,m,_,x,E);this._cx=w.x,this._cy=w.y;for(let e=0;e<o;e++)this._dists[e]=R(t[2*e],t[2*e+1],w.x,w.y);G(this._ids,this._dists,0,o-1),this._hullStart=p;let C=3;n[p]=e[d]=f,n[f]=e[p]=d,n[d]=e[f]=p,r[p]=0,r[f]=1,r[d]=2,i.fill(-1),i[this._hashKey(y,v)]=p,i[this._hashKey(m,_)]=f,i[this._hashKey(x,E)]=d,this.trianglesLen=0,this._addTriangle(p,f,d,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=t[2*u],c=t[2*u+1];if(s>0&&Math.abs(l-o)<=M&&Math.abs(c-a)<=M)continue;if(o=l,a=c,u===p||u===f||u===d)continue;let h=0;for(let t=0,e=this._hashKey(l,c);t<this._hashSize&&(h=i[(e+t)%this._hashSize],-1===h||h===n[h]);t++);h=e[h];let g,y=h;for(;g=n[y],!F(l,c,t[2*y],t[2*y+1],t[2*g],t[2*g+1]);)if(y=g,y===h){y=-1;break}if(-1===y)continue;let v=this._addTriangle(y,u,n[y],-1,-1,r[y]);r[u]=this._legalize(v+2),r[y]=v,C++;let m=n[y];for(;g=n[m],F(l,c,t[2*m],t[2*m+1],t[2*g],t[2*g+1]);)v=this._addTriangle(m,u,g,r[u],-1,r[m]),r[u]=this._legalize(v+2),n[m]=m,C--,m=g;if(y===h)for(;g=e[y],F(l,c,t[2*g],t[2*g+1],t[2*y],t[2*y+1]);)v=this._addTriangle(g,u,y,-1,r[y],r[g]),this._legalize(v+2),r[g]=v,n[y]=y,C--,y=g;this._hullStart=e[u]=y,n[y]=e[m]=u,n[u]=m,i[this._hashKey(l,c)]=u,i[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(C);for(let t=0,e=this._hullStart;t<C;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=O[--i];continue}const u=a-a%3,l=s+(t+1)%3,c=u+(a+2)%3,h=e[o],p=e[t],f=e[l],d=e[c];if(B(r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*f],r[2*f+1],r[2*d],r[2*d+1])){e[t]=d,e[a]=h;const r=n[c];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===c){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<O.length&&(O[i++]=s)}else{if(0===i)break;t=O[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function R(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function k(t,e,n,r,i,o){const a=(r-e)*(i-t),s=(n-t)*(o-e);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function F(t,e,n,r,i,o){return(k(i,o,t,e,n,r)||k(t,e,n,r,i,o)||k(n,r,i,o,t,e))<0}function B(t,e,n,r,i,o,a,s){const u=t-a,l=e-s,c=n-a,h=r-s,p=i-a,f=o-s,d=c*c+h*h,g=p*p+f*f;return u*(h*g-d*f)-l*(c*g-d*p)+(u*u+l*l)*(c*f-h*p)<0}function z(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,h=u*u+l*l,p=.5/(a*l-s*u),f=(l*c-s*h)*p,d=(a*h-u*c)*p;return f*f+d*d}function G(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let a=i-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=n+1,o=r;q(t,n+r>>1,i),e[t[n]]>e[t[r]]&&q(t,n,r),e[t[i]]>e[t[r]]&&q(t,i,r),e[t[n]]>e[t[i]]&&q(t,n,i);const a=t[i],s=e[a];for(;;){do{i++}while(e[t[i]]<s);do{o--}while(e[t[o]]>s);if(o<i)break;q(t,i,o)}t[n+1]=t[o],t[o]=a,r-i+1>=o-n?(G(t,e,i,r),G(t,e,n,o-1)):(G(t,e,n,o-1),G(t,e,i,r))}}function q(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function V(t){return t[0]}function U(t){return t[1]}class j{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-i)>1e-6)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class Y{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class X{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let e,r,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],u=2*n[o+1],l=2*n[o+2],c=t[s],h=t[s+1],p=t[u],f=t[u+1],d=t[l],g=t[l+1],y=p-c,v=f-h,m=d-c,_=g-h,b=y*y+v*v,x=m*m+_*_,E=2*(y*_-v*m);if(E)if(Math.abs(E)<1e-8)e=(c+d)/2,r=(h+g)/2;else{const t=1/E;e=c+(_*b-v*x)*t,r=h+(y*x-m*b)*t}else e=(c+d)/2-1e8*_,r=(h+g)/2+1e8*m;i[a]=e,i[a+1]=r}let o,a,s,u=e[e.length-1],l=4*u,c=t[2*u],h=t[2*u+1];r.fill(0);for(let n=0;n<e.length;++n)u=e[n],o=l,a=c,s=h,l=4*u,c=t[2*u],h=t[2*u+1],r[o+2]=r[l]=s-h,r[o+3]=r[l+1]=c-a}render(t){const e=null==t?t=new j:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,t)}let s,u=i[i.length-1];for(let e=0;e<i.length;++e){s=u,u=i[e];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],h=4*s,p=this._project(l,c,a[h+2],a[h+3]);p&&this._renderSegment(l,c,p[0],p[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new j:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new j:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new Y;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[r]==t[o]&&e[r+1]==t[o+1]&&e[(r+2)%i]==t[(o+a-2)%a]&&e[(r+3)%i]==t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let r,i,o,a,s,u=null,l=e[n-2],c=e[n-1],h=this._regioncode(l,c);for(let p=0;p<n;p+=2)if(r=l,i=c,l=e[p],c=e[p+1],o=h,h=this._regioncode(l,c),0===o&&0===h)a=s,s=0,u?u.push(l,c):u=[l,c];else{let e,n,p,f,d;if(0===o){if(null===(e=this._clipSegment(r,i,l,c,o,h)))continue;[n,p,f,d]=e}else{if(null===(e=this._clipSegment(l,c,r,i,h,o)))continue;[f,d,n,p]=e,a=s,s=this._edgecode(n,p),a&&s&&this._edge(t,a,s,u,u.length),u?u.push(n,p):u=[n,p]}a=s,s=this._edgecode(f,d),a&&s&&this._edge(t,a,s,u,u.length),u?u.push(f,d):u=[f,d]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(t,a,s,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,e,n,r,i,o){for(;;){if(0===i&&0===o)return[t,e,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=t+(n-t)*(this.ymax-e)/(r-e),s=this.ymax):4&u?(a=t+(n-t)*(this.ymin-e)/(r-e),s=this.ymin):2&u?(s=e+(r-e)*(this.xmax-t)/(n-t),a=this.xmax):(s=e+(r-e)*(this.xmin-t)/(n-t),a=this.xmin),i?(t=a,e=s,i=this._regioncode(t,e)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let e,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)e=i,i=this._edgecode(s[n],s[n+1]),e&&i&&(n=this._edge(t,e,i,s,n),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const e=(t+2)%r.length,n=(t+4)%r.length;(r[t]===r[e]&&r[e]===r[n]||r[t+1]===r[e+1]&&r[e+1]===r[n+1])&&(r.splice(e,2),t-=2)}return i}_project(t,e,n,r){let i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const H=2*Math.PI,W=Math.pow;function $(t){return t[0]}function Z(t){return t[1]}function K(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Q{static from(t,e=$,n=Z,r){return new Q("length"in t?function(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=e.call(r,i,a,t),o[2*a+1]=n.call(r,i,a,t)}return o}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new P(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],o=2*e[t+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=K(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new P(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=r.length;t<e;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(t){return new X(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==l&&(yield e))}}while(u!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let l=t,c=W(e-u[2*t],2)+W(n-u[2*t+1],2);const h=r[t];let p=h;do{let r=s[p];const h=W(e-u[2*r],2)+W(n-u[2*r+1],2);if(h<c&&(c=h,l=r),p=p%3==2?p-2:p+1,s[p]!==t)break;if(p=a[p],-1===p){if(p=i[(o[t]+1)%i.length],p!==r&&W(e-u[2*p],2)+W(n-u[2*p+1],2)<c)return p;break}}while(p!==h);return l}render(t){const e=null==t?t=new j:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,o=r.length;e<o;++e){const o=r[e];if(o<e)continue;const a=2*i[e],s=2*i[o];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=null==t?t=new j:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];t.moveTo(i+e,o),t.arc(i,o,e,0,H)}return n&&n.value()}renderHull(t){const e=null==t?t=new j:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<o;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new Y;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new j:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new Y;return this.renderTriangle(t,e),e.value()}}var J;!function(t){t.BASIC="BASIC",t.GRID_SQUARE="GRID_SQUARE"}(J||(J={}));var tt={type:J.BASIC,componentSpacing:50},et=function(t,e){void 0===e&&(e=tt),e!==tt&&(e=i(i({},tt),e));var n=i(i({},e),{componentSpacing:void 0!==e.componentSpacing?e.componentSpacing:ot(t)}),r=t.map((function(t){return nt(t)})),o={nodes:r,edges:it(r)};return D(o,n),{shifts:o.nodes.map((function(t){var e=t.base;return{dx:e.x,dy:e.y}})),fullness:at(r)}},nt=function(t){var e,n,r=[];try{for(var i=o(t.nodes),a=i.next();!a.done;a=i.next()){var s=a.value;r.push({x:s.x,y:s.y}),r.push({x:s.x+s.width,y:s.y}),r.push({x:s.x,y:s.y+s.height}),r.push({x:s.x+s.width,y:s.y+s.height})}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return d.fromPoints(r)},rt=function(t){var e,n,r={minX:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER};try{for(var i=o(t),a=i.next();!a.done;a=i.next()){var s=a.value.boundingBox;s.minX<r.minX&&(r.minX=s.minX),s.maxX>r.maxX&&(r.maxX=s.maxX),s.minY<r.minY&&(r.minY=s.minY),s.maxY>r.maxY&&(r.maxY=s.maxY)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},it=function(t){for(var e,n,r=Array.from({length:t.length},(function(){return[]})),i=(f(t.map((function(t){return t.boundingBox}))),function(t,e){for(var n,r,i=e.map(_),a=Array.from({length:e.length},(function(){return[]})),s=Q.from(i).voronoi([Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER]),u=0;u<e.length;++u)try{for(var l=(n=void 0,o(s.neighbors(u))),c=l.next();!c.done;c=l.next()){var h=c.value;a[u].push(h)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return a}(0,t.map((function(t){return t.center})))),a=0;a<i.length;++a)try{for(var s=(e=void 0,o(i[a])),u=s.next();!u.done;u=s.next()){var l=u.value;l>a&&r[a].push(l)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r},ot=function(t){var e,n,r=0,i=0;try{for(var a=o(t),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.edges.length>0){i+=1;var l=u.edges[0];r+=Math.sqrt(c({x:l.startX,y:l.startY},{x:l.endX,y:l.endY}))}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r/i*1.5},at=function(t){var e=t.map((function(t){return t.boundingBox})),n=f(e);return e.map((function(t){return p(t)})).reduce((function(t,e){return t+e}))/p(n)*100}}])},t.exports=r()}])},9058:(t,e,n)=>{"use strict";var r=n(3279),i=n(4485),o=n(7361),a=n(6968),s=n(84);function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=u(r),c=u(i),h=u(o),p=u(a),f=u(s);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var x="undefined"==typeof window?null:window,E=x?x.navigator:null;x&&x.document;var w=d(""),C=d({}),N=d((function(){})),I="undefined"==typeof HTMLElement?"undefined":d(HTMLElement),T=function(t){return t&&t.instanceString&&A(t.instanceString)?t.instanceString():null},S=function(t){return null!=t&&d(t)==w},A=function(t){return null!=t&&d(t)===N},L=function(t){return!P(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},D=function(t){return null!=t&&d(t)===C&&!L(t)&&t.constructor===Object},M=function(t){return null!=t&&d(t)===d(1)&&!isNaN(t)},O=function(t){return"undefined"===I?void 0:null!=t&&t instanceof HTMLElement},P=function(t){return R(t)||k(t)},R=function(t){return"collection"===T(t)&&t._private.single},k=function(t){return"collection"===T(t)&&!t._private.single},F=function(t){return"core"===T(t)},B=function(t){return"stylesheet"===T(t)},z=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},G=function(t){return function(t){return null!=t&&d(t)===C}(t)&&A(t.then)},q=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r,i=arguments,o=e.apply(this,i),a=n.cache;return(r=a[o])||(r=a[o]=t.apply(this,i)),r};return n.cache={},n},V=q((function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))})),U=q((function(t){return t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}))})),j=q((function(t,e){return t+e[0].toUpperCase()+e.substring(1)}),(function(t,e){return t+"$"+e})),Y=function(t){return z(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},X="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",H="rgb[a]?\\(("+X+"[%]?)\\s*,\\s*("+X+"[%]?)\\s*,\\s*("+X+"[%]?)(?:\\s*,\\s*("+X+"))?\\)",W="rgb[a]?\\((?:"+X+"[%]?)\\s*,\\s*(?:"+X+"[%]?)\\s*,\\s*(?:"+X+"[%]?)(?:\\s*,\\s*(?:"+X+"))?\\)",$="hsl[a]?\\(("+X+")\\s*,\\s*("+X+"[%])\\s*,\\s*("+X+"[%])(?:\\s*,\\s*("+X+"))?\\)",Z="hsl[a]?\\((?:"+X+")\\s*,\\s*(?:"+X+"[%])\\s*,\\s*(?:"+X+"[%])(?:\\s*,\\s*(?:"+X+"))?\\)",K=function(t,e){return t<e?-1:t>e?1:0},Q=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},J={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},tt=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(D(o))throw Error("Tried to set map with object key");i<n.length-1?(null==e[o]&&(e[o]={}),e=e[o]):e[o]=t.value}},et=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(D(o))throw Error("Tried to get map with object key");if(null==(e=e[o]))return e}return e},nt=x?x.performance:null,rt=nt&&nt.now?function(){return nt.now()}:function(){return Date.now()},it=function(){if(x){if(x.requestAnimationFrame)return function(t){x.requestAnimationFrame(t)};if(x.mozRequestAnimationFrame)return function(t){x.mozRequestAnimationFrame(t)};if(x.webkitRequestAnimationFrame)return function(t){x.webkitRequestAnimationFrame(t)};if(x.msRequestAnimationFrame)return function(t){x.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout((function(){t(rt())}),1e3/60)}}(),ot=function(t){return it(t)},at=rt,st=9261,ut=5381,lt=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;!(e=t.next()).done;)n=65599*n+e.value|0;return n},ct=function(t){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:st)+t|0},ht=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;return(e<<5)+e+t|0},pt=function(t){return 2097152*t[0]+t[1]},ft=function(t,e){return[ct(t[0],e[0]),ht(t[1],e[1])]},dt=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return lt({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},gt=function(){return yt(arguments)},yt=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?dt(r):dt(r,e)}return e},vt=!0,mt=null!=console.warn,_t=null!=console.trace,bt=Number.MAX_SAFE_INTEGER||9007199254740991,xt=function(){return!0},Et=function(){return!1},wt=function(){return 0},Ct=function(){},Nt=function(t){throw new Error(t)},It=function(t){if(void 0===t)return vt;vt=!!t},Tt=function(t){It()&&(mt?console.warn(t):(console.log(t),_t&&console.trace()))},St=function(t){return null==t?t:L(t)?t.slice():D(t)?function(t){return Q({},t)}(t):t},At=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},Lt={},Dt=function(){return Lt},Mt=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=null==n?void 0:n[o];r[o]=void 0===a?t[o]:a}return r}},Ot=function(t,e,n){for(var r=t.length-1;r>=0&&(t[r]!==e||(t.splice(r,1),!n));r--);},Pt=function(t){t.splice(0,t.length)},Rt=function(t,e,n){return n&&(e=j(n,e)),t[e]},kt=function(t,e,n,r){n&&(e=j(n,e)),t[e]=r},Ft="undefined"!=typeof Map?Map:function(){function t(){g(this,t),this._obj={}}return v(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),Bt=function(){function t(e){if(g(this,t),this._obj=Object.create(null),this.size=0,null!=e){var n;n=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var r=0;r<n.length;r++)this.add(n[r])}}return v(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter((function(e){return t.has(e)}))}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),zt="undefined"!==("undefined"==typeof Set?"undefined":d(Set))?Set:Bt,Gt=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==e&&F(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===r:!!e.pannable,active:!1,classes:new zt,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:e.parent&&e.parent.isNode()?e.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var o=e.renderedPosition,a=t.pan(),s=t.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var u=[];L(e.classes)?u=e.classes:S(e.classes)&&(u=e.classes.split(/\s+/));for(var l=0,c=u.length;l<c;l++){var h=u[l];h&&""!==h&&i.classes.add(h)}this.createEmitter();var p=e.style||e.css;p&&(Tt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p)),(void 0===n||n)&&this.restore()}else Nt("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else Nt("An element must have a core reference and parameters set")},qt=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;D(e)&&!P(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||A(n)?r:n,n=A(n)?n:function(){};for(var o,a=this._private.cy,s=e=S(e)?this.filter(e):e,u=[],l=[],c={},h={},p={},f=0,d=this.byGroup(),g=d.nodes,y=d.edges,v=0;v<s.length;v++){var m=s[v],_=m.id();m.isNode()&&(u.unshift(m),t.bfs&&(p[_]=!0,l.push(m)),h[_]=0)}for(var b=function(){var e=t.bfs?u.shift():u.pop(),i=e.id();if(t.dfs){if(p[i])return"continue";p[i]=!0,l.push(e)}var a,s=h[i],d=c[i],v=null!=d?d.source():null,m=null!=d?d.target():null,_=null==d?void 0:e.same(v)?m[0]:v[0];if(!0===(a=n(e,d,_,f++,s)))return o=e,"break";if(!1===a)return"break";for(var b=e.connectedEdges().filter((function(t){return(!r||t.source().same(e))&&y.has(t)})),x=0;x<b.length;x++){var E=b[x],w=E.connectedNodes().filter((function(t){return!t.same(e)&&g.has(t)})),C=w.id();0===w.length||p[C]||(w=w[0],u.push(w),t.bfs&&(p[C]=!0,l.push(w)),c[C]=E,h[C]=h[i]+1)}};0!==u.length;){var x=b();if("continue"!==x&&"break"===x)break}for(var E=a.collection(),w=0;w<l.length;w++){var C=l[w],N=c[C.id()];null!=N&&E.push(N),E.push(C)}return{path:a.collection(E),found:a.collection(o)}}},Vt={breadthFirstSearch:qt({bfs:!0}),depthFirstSearch:qt({dfs:!0})};Vt.bfs=Vt.breadthFirstSearch,Vt.dfs=Vt.depthFirstSearch;var Ut=Mt({root:null,weight:function(t){return 1},directed:!1}),jt={dijkstra:function(t){if(!D(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=Ut(t),r=n.root,i=n.weight,o=n.directed,a=this,s=i,u=S(r)?this.filter(r)[0]:r[0],l={},h={},p={},f=this.byGroup(),d=f.nodes,g=f.edges;g.unmergeBy((function(t){return t.isLoop()}));for(var y=function(t){return l[t.id()]},v=function(t,e){l[t.id()]=e,m.updateItem(t)},m=new c.default((function(t,e){return y(t)-y(e)})),_=0;_<d.length;_++){var b=d[_];l[b.id()]=b.same(u)?0:1/0,m.push(b)}for(var x=function(t,e){for(var n,r=(o?t.edgesTo(e):t.edgesWith(e)).intersect(g),i=1/0,a=0;a<r.length;a++){var u=r[a],l=s(u);(l<i||!n)&&(i=l,n=u)}return{edge:n,dist:i}};m.size()>0;){var E=m.pop(),w=y(E),C=E.id();if(p[C]=w,w!==1/0)for(var N=E.neighborhood().intersect(d),I=0;I<N.length;I++){var T=N[I],A=T.id(),L=x(E,T),M=w+L.dist;M<y(T)&&(v(T,M),h[A]={node:E,edge:L.edge})}}return{distanceTo:function(t){var e=S(t)?d.filter(t)[0]:t[0];return p[e.id()]},pathTo:function(t){var e=S(t)?d.filter(t)[0]:t[0],n=[],r=e,i=r.id();if(e.length>0)for(n.unshift(e);h[i];){var o=h[i];n.unshift(o.edge),n.unshift(o.node),i=(r=o.node).id()}return a.spawn(n)}}}},Yt={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,o=new Array(i),a=n,s=function(t){for(var e=0;e<o.length;e++)if(o[e].has(t))return e},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var l=r.sort((function(e,n){return t(e)-t(n)})),c=0;c<l.length;c++){var h=l[c],p=h.source()[0],f=h.target()[0],d=s(p),g=s(f),y=o[d],v=o[g];d!==g&&(a.merge(h),y.merge(v),o.splice(g,1))}return a}},Xt=Mt({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),Ht={aStar:function(t){var e=this.cy(),n=Xt(t),r=n.root,i=n.goal,o=n.heuristic,a=n.directed,s=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var u,l,h=r.id(),p=i.id(),f={},d={},g={},y=new c.default((function(t,e){return d[t.id()]-d[e.id()]})),v=new zt,m={},_={},b=function(t,e){y.push(t),v.add(e)};b(r,h),f[h]=0,d[h]=o(r);for(var x,E=0;y.size()>0;){if(l=(u=y.pop()).id(),v.delete(l),E++,l===p){for(var w=[],C=i,N=p,I=_[N];w.unshift(C),null!=I&&w.unshift(I),null!=(C=m[N]);)I=_[N=C.id()];return{found:!0,distance:f[l],path:this.spawn(w),steps:E}}g[l]=!0;for(var T=u._private.edges,S=0;S<T.length;S++){var A=T[S];if(this.hasElementWithId(A.id())&&(!a||A.data("source")===l)){var L=A.source(),D=A.target(),M=L.id()!==l?L:D,O=M.id();if(this.hasElementWithId(O)&&!g[O]){var P=f[l]+s(A);x=O,v.has(x)?P<f[O]&&(f[O]=P,d[O]=P+o(M),m[O]=u,_[O]=A):(f[O]=P,d[O]=P+o(M),b(M,O),m[O]=u,_[O]=A)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},Wt=Mt({weight:function(t){return 1},directed:!1}),$t={floydWarshall:function(t){for(var e=this.cy(),n=Wt(t),r=n.weight,i=n.directed,o=r,a=this.byGroup(),s=a.nodes,u=a.edges,l=s.length,c=l*l,h=function(t){return s.indexOf(t)},p=function(t){return s[t]},f=new Array(c),d=0;d<c;d++){var g=d%l,y=(d-g)/l;f[d]=y===g?0:1/0}for(var v=new Array(c),m=new Array(c),_=0;_<u.length;_++){var b=u[_],x=b.source()[0],E=b.target()[0];if(x!==E){var w=h(x),C=h(E),N=w*l+C,I=o(b);if(f[N]>I&&(f[N]=I,v[N]=C,m[N]=b),!i){var T=C*l+w;!i&&f[T]>I&&(f[T]=I,v[T]=w,m[T]=b)}}}for(var A=0;A<l;A++)for(var L=0;L<l;L++)for(var D=L*l+A,M=0;M<l;M++){var O=L*l+M,P=A*l+M;f[D]+f[P]<f[O]&&(f[O]=f[D]+f[P],v[O]=v[D])}var R=function(t){return h(function(t){return(S(t)?e.filter(t):t)[0]}(t))},k={distance:function(t,e){var n=R(t),r=R(e);return f[n*l+r]},path:function(t,n){var r=R(t),i=R(n),o=p(r);if(r===i)return o.collection();if(null==v[r*l+i])return e.collection();var a,s=e.collection(),u=r;for(s.merge(o);r!==i;)u=r,r=v[r*l+i],a=m[u*l+r],s.merge(a),s.merge(p(r));return s}};return k}},Zt=Mt({weight:function(t){return 1},directed:!1,root:null}),Kt={bellmanFord:function(t){var e=this,n=Zt(t),r=n.weight,i=n.directed,o=n.root,a=r,s=this,u=this.cy(),l=this.byGroup(),c=l.edges,h=l.nodes,p=h.length,f=new Ft,d=!1,g=[];o=u.collection(o)[0],c.unmergeBy((function(t){return t.isLoop()}));for(var y=c.length,v=function(t){var e=f.get(t.id());return e||(e={},f.set(t.id(),e)),e},m=function(t){return(S(t)?u.$(t):t)[0]},_=0;_<p;_++){var b=h[_],x=v(b);b.same(o)?x.dist=0:x.dist=1/0,x.pred=null,x.edge=null}for(var E=!1,w=function(t,e,n,r,i,o){var a=r.dist+o;a<i.dist&&!n.same(r.edge)&&(i.dist=a,i.pred=t,i.edge=n,E=!0)},C=1;C<p;C++){E=!1;for(var N=0;N<y;N++){var I=c[N],T=I.source(),A=I.target(),L=a(I),D=v(T),M=v(A);w(T,0,I,D,M,L),i||w(A,0,I,M,D,L)}if(!E)break}if(E)for(var O=[],P=0;P<y;P++){var R=c[P],k=R.source(),F=R.target(),B=a(R),z=v(k).dist,G=v(F).dist;if(z+B<G||!i&&G+B<z){if(d||(Tt("Graph contains a negative weight cycle for Bellman-Ford"),d=!0),!1===t.findNegativeWeightCycles)break;var q=[];z+B<G&&q.push(k),!i&&G+B<z&&q.push(F);for(var V=q.length,U=0;U<V;U++){var j=q[U],Y=[j];Y.push(v(j).edge);for(var X=v(j).pred;-1===Y.indexOf(X);)Y.push(X),Y.push(v(X).edge),X=v(X).pred;for(var H=(Y=Y.slice(Y.indexOf(X)))[0].id(),W=0,$=2;$<Y.length;$+=2)Y[$].id()<H&&(H=Y[$].id(),W=$);(Y=Y.slice(W).concat(Y.slice(0,W))).push(Y[0]);var Z=Y.map((function(t){return t.id()})).join(",");-1===O.indexOf(Z)&&(g.push(s.spawn(Y)),O.push(Z))}}}return{distanceTo:function(t){return v(m(t)).dist},pathTo:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=[],i=m(t);;){if(null==i)return e.spawn();var a=v(i),u=a.edge,l=a.pred;if(r.unshift(i[0]),i.same(n)&&r.length>0)break;null!=u&&r.unshift(u),i=l}return s.spawn(r)},hasNegativeWeightCycle:d,negativeWeightCycles:g}}},Qt=Math.sqrt(2),Jt=function(t,e,n){0===n.length&&Nt("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],i=r[1],o=r[2],a=e[i],s=e[o],u=n,l=u.length-1;l>=0;l--){var c=u[l],h=c[1],p=c[2];(e[h]===a&&e[p]===s||e[h]===s&&e[p]===a)&&u.splice(l,1)}for(var f=0;f<u.length;f++){var d=u[f];d[1]===s?(u[f]=d.slice(),u[f][1]=a):d[2]===s&&(u[f]=d.slice(),u[f][2]=a)}for(var g=0;g<e.length;g++)e[g]===s&&(e[g]=a);return u},te=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=Jt(i,t,e),n--}return e},ee={kargerStein:function(){var t=this,e=this.byGroup(),n=e.nodes,r=e.edges;r.unmergeBy((function(t){return t.isLoop()}));var i=n.length,o=r.length,a=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/Qt);if(!(i<2)){for(var u=[],l=0;l<o;l++){var c=r[l];u.push([l,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,p=[],f=new Array(i),d=new Array(i),g=new Array(i),y=function(t,e){for(var n=0;n<i;n++)e[n]=t[n]},v=0;v<=a;v++){for(var m=0;m<i;m++)d[m]=m;var _=te(d,u.slice(),i,s),b=_.slice();y(d,g);var x=te(d,_,s,2),E=te(g,b,s,2);x.length<=E.length&&x.length<h?(h=x.length,p=x,y(d,f)):E.length<=x.length&&E.length<h&&(h=E.length,p=E,y(g,f))}for(var w=this.spawn(p.map((function(t){return r[t[0]]}))),C=this.spawn(),N=this.spawn(),I=f[0],T=0;T<f.length;T++){var S=f[T],A=n[T];S===I?C.merge(A):N.merge(A)}var L=function(e){var n=t.spawn();return e.forEach((function(e){n.merge(e),e.connectedEdges().forEach((function(e){t.contains(e)&&!w.contains(e)&&n.merge(e)}))})),n},D=[L(C),L(N)];return{cut:w,components:D,partition1:C,partition2:N}}Nt("At least 2 nodes are required for Karger-Stein algorithm")}},ne=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},re=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},ie=function(t){return{x:t[0],y:t[1]}},oe=function(t,e){return Math.atan2(e,t)-Math.PI/2},ae=Math.log2||function(t){return Math.log(t)/Math.log(2)},se=function(t){return t>0?1:t<0?-1:0},ue=function(t,e){return Math.sqrt(le(t,e))},le=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},ce=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},he=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},pe=function(t,e,n,r){return{x:he(t.x,e.x,n.x,r),y:he(t.y,e.y,n.y,r)}},fe=function(t,e,n){return Math.max(t,Math.min(n,e))},de=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},ge=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},ye=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},ve=function(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===o.length)e=n=r=i=o[0];else if(2===o.length)e=r=o[0],i=n=o[1];else if(4===o.length){var a=_(o,4);e=a[0],n=a[1],r=a[2],i=a[3]}return t.x1-=i,t.x2+=n,t.y1-=e,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},me=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},_e=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},be=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},xe=function(t,e){return be(t,e.x1,e.y1)&&be(t,e.x2,e.y2)},Ee=function(t,e,n,r,i,o,a){var s,u=Ge(i,o),l=i/2,c=o/2,h=r-c-a;if((s=Pe(t,e,n,r,n-l+u-a,h,n+l-u+a,h,!1)).length>0)return s;var p=n+l+a;if((s=Pe(t,e,n,r,p,r-c+u-a,p,r+c-u+a,!1)).length>0)return s;var f=r+c+a;if((s=Pe(t,e,n,r,n-l+u-a,f,n+l-u+a,f,!1)).length>0)return s;var d,g=n-l-a;if((s=Pe(t,e,n,r,g,r-c+u-a,g,r+c-u+a,!1)).length>0)return s;var y=n-l+u,v=r-c+u;if((d=Me(t,e,n,r,y,v,u+a)).length>0&&d[0]<=y&&d[1]<=v)return[d[0],d[1]];var m=n+l-u,_=r-c+u;if((d=Me(t,e,n,r,m,_,u+a)).length>0&&d[0]>=m&&d[1]<=_)return[d[0],d[1]];var b=n+l-u,x=r+c-u;if((d=Me(t,e,n,r,b,x,u+a)).length>0&&d[0]>=b&&d[1]>=x)return[d[0],d[1]];var E=n-l+u,w=r+c-u;return(d=Me(t,e,n,r,E,w,u+a)).length>0&&d[0]<=E&&d[1]>=w?[d[0],d[1]]:[]},we=function(t,e,n,r,i,o,a){var s=a,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return u-s<=t&&t<=l+s&&c-s<=e&&e<=h+s},Ce=function(t,e,n,r,i,o,a,s,u){var l=Math.min(n,a,i)-u,c=Math.max(n,a,i)+u,h=Math.min(r,s,o)-u,p=Math.max(r,s,o)+u;return!(t<l||t>c||e<h||e>p)},Ne=function(t,e,n,r,i,o,a,s){var u,l,c,h,p,f,d,g,y,v,m,_,b,x=[];l=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,h=1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,0===(u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s)&&(u=1e-5),g=-27*(h/=u)+(l/=u)*(9*(c/=u)-l*l*2),f=(d=(3*c-l*l)/9)*d*d+(g/=54)*g,(p=x)[1]=0,_=l/3,f>0?(v=(v=g+Math.sqrt(f))<0?-Math.pow(-v,1/3):Math.pow(v,1/3),m=(m=g-Math.sqrt(f))<0?-Math.pow(-m,1/3):Math.pow(m,1/3),p[0]=-_+v+m,_+=(v+m)/2,p[4]=p[2]=-_,_=Math.sqrt(3)*(-m+v)/2,p[3]=_,p[5]=-_):(p[5]=p[3]=0,0===f?(b=g<0?-Math.pow(-g,1/3):Math.pow(g,1/3),p[0]=2*b-_,p[4]=p[2]=-(b+_)):(y=(d=-d)*d*d,y=Math.acos(g/Math.sqrt(y)),b=2*Math.sqrt(d),p[0]=-_+b*Math.cos(y/3),p[2]=-_+b*Math.cos((y+2*Math.PI)/3),p[4]=-_+b*Math.cos((y+4*Math.PI)/3)));for(var E=[],w=0;w<6;w+=2)Math.abs(x[w+1])<1e-7&&x[w]>=0&&x[w]<=1&&E.push(x[w]);E.push(1),E.push(0);for(var C,N,I,T=-1,S=0;S<E.length;S++)C=Math.pow(1-E[S],2)*n+2*(1-E[S])*E[S]*i+E[S]*E[S]*a,N=Math.pow(1-E[S],2)*r+2*(1-E[S])*E[S]*o+E[S]*E[S]*s,I=Math.pow(C-t,2)+Math.pow(N-e,2),T>=0?I<T&&(T=I):T=I;return T},Ie=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return c<0?l:h>u?(t-i)*(t-i)+(e-o)*(e-o):l-h},Te=function(t,e,n){for(var r,i,o,a,s=0,u=0;u<n.length/2;u++)if(r=n[2*u],i=n[2*u+1],u+1<n.length/2?(o=n[2*(u+1)],a=n[2*(u+1)+1]):(o=n[2*(u+1-n.length/2)],a=n[2*(u+1-n.length/2)+1]),r==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;(t-r)/(o-r)*(a-i)+i>e&&s++}return s%2!=0},Se=function(t,e,n,r,i,o,a,s,u){var l,c=new Array(n.length);null!=s[0]?(l=Math.atan(s[1]/s[0]),s[0]<0?l+=Math.PI/2:l=-l-Math.PI/2):l=s;for(var h,p=Math.cos(-l),f=Math.sin(-l),d=0;d<c.length/2;d++)c[2*d]=o/2*(n[2*d]*p-n[2*d+1]*f),c[2*d+1]=a/2*(n[2*d+1]*p+n[2*d]*f),c[2*d]+=r,c[2*d+1]+=i;if(u>0){var g=Le(c,-u);h=Ae(g)}else h=c;return Te(t,e,h)},Ae=function(t){for(var e,n,r,i,o,a,s,u,l=new Array(t.length/2),c=0;c<t.length/4;c++){e=t[4*c],n=t[4*c+1],r=t[4*c+2],i=t[4*c+3],c<t.length/4-1?(o=t[4*(c+1)],a=t[4*(c+1)+1],s=t[4*(c+1)+2],u=t[4*(c+1)+3]):(o=t[0],a=t[1],s=t[2],u=t[3]);var h=Pe(e,n,r,i,o,a,s,u,!0);l[2*c]=h[0],l[2*c+1]=h[1]}return l},Le=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){n=t[2*s],r=t[2*s+1],s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var u=o-r,l=-(i-n),c=Math.sqrt(u*u+l*l),h=u/c,p=l/c;a[4*s]=n+h*e,a[4*s+1]=r+p*e,a[4*s+2]=i+h*e,a[4*s+3]=o+p*e}return a},De=function(t,e,n,r,i,o,a){return t-=i,e-=o,(t/=n/2+a)*t+(e/=r/2+a)*e<=1},Me=function(t,e,n,r,i,o,a){var s=[n-t,r-e],u=[t-i,e-o],l=s[0]*s[0]+s[1]*s[1],c=2*(u[0]*s[0]+u[1]*s[1]),h=c*c-4*l*(u[0]*u[0]+u[1]*u[1]-a*a);if(h<0)return[];var p=(-c+Math.sqrt(h))/(2*l),f=(-c-Math.sqrt(h))/(2*l),d=Math.min(p,f),g=Math.max(p,f),y=[];if(d>=0&&d<=1&&y.push(d),g>=0&&g<=1&&y.push(g),0===y.length)return[];var v=y[0]*s[0]+t,m=y[0]*s[1]+e;return y.length>1?y[0]==y[1]?[v,m]:[v,m,y[1]*s[0]+t,y[1]*s[1]+e]:[v,m]},Oe=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},Pe=function(t,e,n,r,i,o,a,s,u){var l=t-i,c=n-t,h=a-i,p=e-o,f=r-e,d=s-o,g=h*p-d*l,y=c*p-f*l,v=d*c-h*f;if(0!==v){var m=g/v,_=y/v,b=-.001;return b<=m&&m<=1.001&&b<=_&&_<=1.001||u?[t+m*c,e+m*f]:[]}return 0===g||0===y?Oe(t,n,a)===a?[a,s]:Oe(t,n,i)===i?[i,o]:Oe(i,a,n)===n?[n,r]:[]:[]},Re=function(t,e,n,r,i,o,a,s){var u,l,c,h,p,f,d=[],g=new Array(n.length),y=!0;if(null==o&&(y=!1),y){for(var v=0;v<g.length/2;v++)g[2*v]=n[2*v]*o+r,g[2*v+1]=n[2*v+1]*a+i;if(s>0){var m=Le(g,-s);l=Ae(m)}else l=g}else l=n;for(var _=0;_<l.length/2;_++)c=l[2*_],h=l[2*_+1],_<l.length/2-1?(p=l[2*(_+1)],f=l[2*(_+1)+1]):(p=l[0],f=l[1]),0!==(u=Pe(t,e,r,i,c,h,p,f)).length&&d.push(u[0],u[1]);return d},ke=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},Fe=function(t,e){var n=ze(t,e);return Be(n)},Be=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,u=0;u<r;u++)e=t[2*u],n=t[2*u+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var l=2/(a-i),c=2/(s-o),h=0;h<r;h++)e=t[2*h]=t[2*h]*l,n=t[2*h+1]=t[2*h+1]*c,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var p=0;p<r;p++)n=t[2*p+1]=t[2*p+1]+(-1-o);return t},ze=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),a=0;a<t;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},Ge=function(t,e){return Math.min(t/4,e/4,8)},qe=function(t,e){return Math.min(t/10,e/10,8)},Ve=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Ue=Mt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),je={pageRank:function(t){for(var e=Ue(t),n=e.dampingFactor,r=e.precision,i=e.iterations,o=e.weight,a=this._private.cy,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,h=c*c,p=l.length,f=new Array(h),d=new Array(c),g=(1-n)/c,y=0;y<c;y++){for(var v=0;v<c;v++)f[y*c+v]=0;d[y]=0}for(var m=0;m<p;m++){var _=l[m],b=_.data("source"),x=_.data("target");if(b!==x){var E=u.indexOfId(b),w=u.indexOfId(x),C=o(_);f[w*c+E]+=C,d[E]+=C}}for(var N=1/c+g,I=0;I<c;I++)if(0===d[I])for(var T=0;T<c;T++)f[T*c+I]=N;else for(var S=0;S<c;S++){var A=S*c+I;f[A]=f[A]/d[I]+g}for(var L,D=new Array(c),M=new Array(c),O=0;O<c;O++)D[O]=1;for(var P=0;P<i;P++){for(var R=0;R<c;R++)M[R]=0;for(var k=0;k<c;k++)for(var F=0;F<c;F++){var B=k*c+F;M[k]+=f[B]*D[F]}ce(M),L=D,D=M,M=L;for(var z=0,G=0;G<c;G++){var q=L[G]-D[G];z+=q*q}if(z<r)break}return{rank:function(t){return t=a.collection(t)[0],D[u.indexOf(t)]}}}},Ye=Mt({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Xe={degreeCentralityNormalized:function(t){t=Ye(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},o={},a=0,s=0,u=0;u<r;u++){var l=n[u],c=l.id();t.root=l;var h=this.degreeCentrality(t);a<h.indegree&&(a=h.indegree),s<h.outdegree&&(s=h.outdegree),i[c]=h.indegree,o[c]=h.outdegree}return{indegree:function(t){return 0==a?0:(S(t)&&(t=e.filter(t)),i[t.id()]/a)},outdegree:function(t){return 0===s?0:(S(t)&&(t=e.filter(t)),o[t.id()]/s)}}}for(var p={},f=0,d=0;d<r;d++){var g=n[d];t.root=g;var y=this.degreeCentrality(t);f<y.degree&&(f=y.degree),p[g.id()]=y.degree}return{degree:function(t){return 0===f?0:(S(t)&&(t=e.filter(t)),p[t.id()]/f)}}},degreeCentrality:function(t){t=Ye(t);var e=this.cy(),n=this,r=t,i=r.root,o=r.weight,a=r.directed,s=r.alpha;if(i=e.collection(i)[0],a){for(var u=i.connectedEdges(),l=u.filter((function(t){return t.target().same(i)&&n.has(t)})),c=u.filter((function(t){return t.source().same(i)&&n.has(t)})),h=l.length,p=c.length,f=0,d=0,g=0;g<l.length;g++)f+=o(l[g]);for(var y=0;y<c.length;y++)d+=o(c[y]);return{indegree:Math.pow(h,1-s)*Math.pow(f,s),outdegree:Math.pow(p,1-s)*Math.pow(d,s)}}for(var v=i.connectedEdges().intersection(n),m=v.length,_=0,b=0;b<v.length;b++)_+=o(v[b]);return{degree:Math.pow(m,1-s)*Math.pow(_,s)}}};Xe.dc=Xe.degreeCentrality,Xe.dcn=Xe.degreeCentralityNormalised=Xe.degreeCentralityNormalized;var He=Mt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),We={closenessCentralityNormalized:function(t){for(var e=He(t),n=e.harmonic,r=e.weight,i=e.directed,o=this.cy(),a={},s=0,u=this.nodes(),l=this.floydWarshall({weight:r,directed:i}),c=0;c<u.length;c++){for(var h=0,p=u[c],f=0;f<u.length;f++)if(c!==f){var d=l.distance(p,u[f]);h+=n?1/d:d}n||(h=1/h),s<h&&(s=h),a[p.id()]=h}return{closeness:function(t){return 0==s?0:(t=S(t)?o.filter(t)[0].id():t.id(),a[t]/s)}}},closenessCentrality:function(t){var e=He(t),n=e.root,r=e.weight,i=e.directed,o=e.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++){var c=u[l];if(!c.same(n)){var h=a.distanceTo(c);s+=o?1/h:h}}return o?s:1/s}};We.cc=We.closenessCentrality,We.ccn=We.closenessCentralityNormalised=We.closenessCentralityNormalized;var $e=Mt({weight:null,directed:!1}),Ze={betweennessCentrality:function(t){for(var e=$e(t),n=e.directed,r=e.weight,i=null!=r,o=this.cy(),a=this.nodes(),s={},u={},l=0,h=function(t,e){u[t]=e,e>l&&(l=e)},p=function(t){return u[t]},f=0;f<a.length;f++){var d=a[f],g=d.id();s[g]=n?d.outgoers().nodes():d.openNeighborhood().nodes(),h(g,0)}for(var y=function(t){for(var e=a[t].id(),n=[],u={},l={},f={},d=new c.default((function(t,e){return f[t]-f[e]})),g=0;g<a.length;g++){var y=a[g].id();u[y]=[],l[y]=0,f[y]=1/0}for(l[e]=1,f[e]=0,d.push(e);!d.empty();){var v=d.pop();if(n.push(v),i)for(var m=0;m<s[v].length;m++){var _,b=s[v][m],x=o.getElementById(v);_=x.edgesTo(b).length>0?x.edgesTo(b)[0]:b.edgesTo(x)[0];var E=r(_);b=b.id(),f[b]>f[v]+E&&(f[b]=f[v]+E,d.nodes.indexOf(b)<0?d.push(b):d.updateItem(b),l[b]=0,u[b]=[]),f[b]==f[v]+E&&(l[b]=l[b]+l[v],u[b].push(v))}else for(var w=0;w<s[v].length;w++){var C=s[v][w].id();f[C]==1/0&&(d.push(C),f[C]=f[v]+1),f[C]==f[v]+1&&(l[C]=l[C]+l[v],u[C].push(v))}}for(var N={},I=0;I<a.length;I++)N[a[I].id()]=0;for(;n.length>0;){for(var T=n.pop(),S=0;S<u[T].length;S++){var A=u[T][S];N[A]=N[A]+l[A]/l[T]*(1+N[T])}T!=a[t].id()&&h(T,p(T)+N[T])}},v=0;v<a.length;v++)y(v);var m={betweenness:function(t){var e=o.collection(t).id();return p(e)},betweennessNormalized:function(t){if(0==l)return 0;var e=o.collection(t).id();return p(e)/l}};return m.betweennessNormalised=m.betweennessNormalized,m}};Ze.bc=Ze.betweennessCentrality;var Ke=Mt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Qe=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},Je=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var o=0;o<e;o++)t[o*e+r]=t[o*e+r]/n}},tn=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var s=0;s<n;s++)r[i*n+s]+=t[i*n+a]*e[a*n+s]}return r},en=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=tn(t,r,e);return t},nn=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return Je(r,e),r},rn=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},on=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},an=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=function(t){return Ke(t)}(t),o={},a=0;a<e.length;a++)o[e[a].id()]=a;for(var s,u=e.length,l=u*u,c=new Array(l),h=0;h<l;h++)c[h]=0;for(var p=0;p<n.length;p++){var f=n[p],d=o[f.source().id()],g=o[f.target().id()],y=Qe(f,i.attributes);c[d*u+g]+=y,c[g*u+d]+=y}!function(t,e,n){for(var r=0;r<e;r++)t[r*e+r]=n}(c,u,i.multFactor),Je(c,u);for(var v=!0,m=0;v&&m<i.maxIterations;)v=!1,s=en(c,u,i.expandFactor),c=nn(s,u,i.inflateFactor),rn(c,s,l,4)||(v=!0),m++;var _=function(t,e,n,r){for(var i=[],o=0;o<e;o++){for(var a=[],s=0;s<e;s++)Math.round(1e3*t[o*e+s])/1e3>0&&a.push(n[s]);0!==a.length&&i.push(r.collection(a))}return i}(c,u,e,r);return _=function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)e!=n&&on(t[e],t[n])&&t.splice(n,1);return t}(_),_},sn={markovClustering:an,mcl:an},un=function(t){return t},ln=function(t,e){return Math.abs(e-t)},cn=function(t,e,n){return t+ln(e,n)},hn=function(t,e,n){return t+Math.pow(n-e,2)},pn=function(t){return Math.sqrt(t)},fn=function(t,e,n){return Math.max(t,ln(e,n))},dn=function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:un,a=r,s=0;s<t;s++)a=i(a,e(s),n(s));return o(a)},gn={euclidean:function(t,e,n){return t>=2?dn(t,e,n,0,hn,pn):dn(t,e,n,0,cn)},squaredEuclidean:function(t,e,n){return dn(t,e,n,0,hn)},manhattan:function(t,e,n){return dn(t,e,n,0,cn)},max:function(t,e,n){return dn(t,e,n,-1/0,fn)}};function yn(t,e,n,r,i,o){var a;return a=A(t)?t:gn[t]||gn.euclidean,0===e&&A(t)?a(i,o):a(e,n,r,i,o)}gn["squared-euclidean"]=gn.squaredEuclidean,gn.squaredeuclidean=gn.squaredEuclidean;var vn=Mt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),mn=function(t){return vn(t)},_n=function(t,e,n,r,i){var o="kMedoids"!==i?function(t){return n[t]}:function(t){return r[t](n)},a=n,s=e;return yn(t,r.length,o,(function(t){return r[t](e)}),a,s)},bn=function(t,e,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(e),s=null,u=0;u<r;u++)i[u]=t.min(n[u]).value,o[u]=t.max(n[u]).value;for(var l=0;l<e;l++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(o[c]-i[c])+i[c];a[l]=s}return a},xn=function(t,e,n,r,i){for(var o=1/0,a=0,s=0;s<e.length;s++){var u=_n(n,t,e[s],r,i);u<o&&(o=u,a=s)}return a},En=function(t,e,n){for(var r=[],i=null,o=0;o<e.length;o++)n[(i=e[o]).id()]===t&&r.push(i);return r},wn=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},Cn=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},Nn=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];Cn(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var o=0;o<e;o++)n[o]=t[Math.floor(Math.random()*t.length)];return n},In=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=_n("manhattan",e[i],t,n,"kMedoids");return r},Tn=function(t,e,n,r,i){for(var o,a,s=0;s<e.length;s++)for(var u=0;u<t.length;u++)r[s][u]=Math.pow(n[s][u],i.m);for(var l=0;l<t.length;l++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var h=0;h<e.length;h++)o+=r[h][l]*i.attributes[c](e[h]),a+=r[h][l];t[l][c]=o/a}},Sn=function(t,e,n,r,i){for(var o=0;o<t.length;o++)e[o]=t[o].slice();for(var a,s,u,l=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<r.length;h++){a=0;for(var p=0;p<n.length;p++)s=_n(i.distance,r[h],n[c],i.attributes,"cmeans"),u=_n(i.distance,r[h],n[p],i.attributes,"cmeans"),a+=Math.pow(s/u,l);t[h][c]=1/a}},An=function(t){var e,n,r,i,o,a=this.cy(),s=this.nodes(),u=mn(t);i=new Array(s.length);for(var l=0;l<s.length;l++)i[l]=new Array(u.k);r=new Array(s.length);for(var c=0;c<s.length;c++)r[c]=new Array(u.k);for(var h=0;h<s.length;h++){for(var p=0,f=0;f<u.k;f++)r[h][f]=Math.random(),p+=r[h][f];for(var d=0;d<u.k;d++)r[h][d]=r[h][d]/p}n=new Array(u.k);for(var g=0;g<u.k;g++)n[g]=new Array(u.attributes.length);o=new Array(s.length);for(var y=0;y<s.length;y++)o[y]=new Array(u.k);for(var v=!0,m=0;v&&m<u.maxIterations;)v=!1,Tn(n,s,r,o,u),Sn(r,i,n,s,u),wn(r,i,u.sensitivityThreshold)||(v=!0),m++;return e=function(t,e,n,r){for(var i,o,a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var u=0;u<e.length;u++){i=-1/0,o=-1;for(var l=0;l<e[0].length;l++)e[u][l]>i&&(i=e[u][l],o=l);a[o].push(t[u])}for(var c=0;c<a.length;c++)a[c]=r.collection(a[c]);return a}(s,r,u,a),{clusters:e,degreeOfMembership:r}},Ln={kMeans:function(t){var e,n=this.cy(),r=this.nodes(),i=null,o=mn(t),a=new Array(o.k),s={};o.testMode?"number"==typeof o.testCentroids?(o.testCentroids,e=bn(r,o.k,o.attributes)):e="object"===d(o.testCentroids)?o.testCentroids:bn(r,o.k,o.attributes):e=bn(r,o.k,o.attributes);for(var u,l,c,h=!0,p=0;h&&p<o.maxIterations;){for(var f=0;f<r.length;f++)s[(i=r[f]).id()]=xn(i,e,o.distance,o.attributes,"kMeans");h=!1;for(var g=0;g<o.k;g++){var y=En(g,r,s);if(0!==y.length){for(var v=o.attributes.length,m=e[g],_=new Array(v),b=new Array(v),x=0;x<v;x++){b[x]=0;for(var E=0;E<y.length;E++)i=y[E],b[x]+=o.attributes[x](i);_[x]=b[x]/y.length,u=_[x],l=m[x],c=o.sensitivityThreshold,Math.abs(l-u)<=c||(h=!0)}e[g]=_,a[g]=n.collection(y)}}p++}return a},kMedoids:function(t){var e,n,r=this.cy(),i=this.nodes(),o=null,a=mn(t),s=new Array(a.k),u={},l=new Array(a.k);a.testMode?"number"==typeof a.testCentroids||(e="object"===d(a.testCentroids)?a.testCentroids:Nn(i,a.k)):e=Nn(i,a.k);for(var c=!0,h=0;c&&h<a.maxIterations;){for(var p=0;p<i.length;p++)u[(o=i[p]).id()]=xn(o,e,a.distance,a.attributes,"kMedoids");c=!1;for(var f=0;f<e.length;f++){var g=En(f,i,u);if(0!==g.length){l[f]=In(e[f],g,a.attributes);for(var y=0;y<g.length;y++)(n=In(g[y],g,a.attributes))<l[f]&&(l[f]=n,e[f]=g[y],c=!0);s[f]=r.collection(g)}}h++}return s},fuzzyCMeans:An,fcm:An},Dn=Mt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Mn={single:"min",complete:"max"},On=function(t,e,n,r,i){for(var o,a=0,s=1/0,u=i.attributes,l=function(t,e){return yn(i.distance,u.length,(function(e){return u[e](t)}),(function(t){return u[t](e)}),t,e)},c=0;c<t.length;c++){var h=t[c].key,p=n[h][r[h]];p<s&&(a=h,s=p)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var f,d=e[a],g=e[r[a]];f="dendrogram"===i.mode?{left:d,right:g,key:d.key}:{value:d.value.concat(g.value),key:d.key},t[d.index]=f,t.splice(g.index,1),e[d.key]=f;for(var y=0;y<t.length;y++){var v=t[y];d.key===v.key?o=1/0:"min"===i.linkage?(o=n[d.key][v.key],n[d.key][v.key]>n[g.key][v.key]&&(o=n[g.key][v.key])):"max"===i.linkage?(o=n[d.key][v.key],n[d.key][v.key]<n[g.key][v.key]&&(o=n[g.key][v.key])):o="mean"===i.linkage?(n[d.key][v.key]*d.size+n[g.key][v.key]*g.size)/(d.size+g.size):"dendrogram"===i.mode?l(v.value,d.value):l(v.value[0],d.value[0]),n[d.key][v.key]=n[v.key][d.key]=o}for(var m=0;m<t.length;m++){var _=t[m].key;if(r[_]===d.key||r[_]===g.key){for(var b=_,x=0;x<t.length;x++){var E=t[x].key;n[_][E]<n[_][b]&&(b=E)}r[_]=b}t[m].index=m}return d.key=g.key=d.index=g.index=null,!0},Pn=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},Rn=function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}return e.value?e.value.id():void 0},kn=function t(e,n,r){if(!e)return[];var i=[],o=[],a=[];return 0===n?(e.left&&Pn(e.left,i),e.right&&Pn(e.right,o),a=i.concat(o),[r.collection(a)]):1===n?e.value?[r.collection(e.value)]:(e.left&&Pn(e.left,i),e.right&&Pn(e.right,o),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(o=t(e.right,n-1,r)),i.concat(o))},Fn=function(t){for(var e=this.cy(),n=this.nodes(),r=function(t){var e=Dn(t),n=Mn[e.linkage];return null!=n&&(e.linkage=n),e}(t),i=r.attributes,o=function(t,e){return yn(r.distance,i.length,(function(e){return i[e](t)}),(function(t){return i[t](e)}),t,e)},a=[],s=[],u=[],l=[],c=0;c<n.length;c++){var h={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};a[c]=h,l[c]=h,s[c]=[],u[c]=0}for(var p=0;p<a.length;p++)for(var f=0;f<=p;f++){var d;d="dendrogram"===r.mode?p===f?1/0:o(a[p].value,a[f].value):p===f?1/0:o(a[p].value[0],a[f].value[0]),s[p][f]=d,s[f][p]=d,d<s[p][u[p]]&&(u[p]=f)}for(var g,y=On(a,l,s,u,r);y;)y=On(a,l,s,u,r);return"dendrogram"===r.mode?(g=kn(a[0],r.dendrogramDepth,e),r.addDendrogram&&Rn(a[0],e)):(g=new Array(a.length),a.forEach((function(t,n){t.key=t.index=null,g[n]=e.collection(t.value)}))),g},Bn={hierarchicalClustering:Fn,hca:Fn},zn=Mt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Gn=function(t,e,n,r){var i=function(t,e){return r[e](t)};return-yn(t,r.length,(function(t){return i(e,t)}),(function(t){return i(n,t)}),e,n)},qn=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var o=-1,a=-1/0,s=0;s<n.length;s++){var u=n[s];e[i*t+u]>a&&(o=u,a=e[i*t+u])}o>0&&r.push(o)}for(var l=0;l<n.length;l++)r[n[l]]=n[l];return r},Vn=function(t){for(var e,n,r,i,o,a,s=this.cy(),u=this.nodes(),l=function(t){var e=t.damping,n=t.preference;.5<=e&&e<1||Nt("Damping must range on [0.5, 1).  Got: ".concat(e));var r=["median","mean","min","max"];return r.some((function(t){return t===n}))||M(n)||Nt("Preference must be one of [".concat(r.map((function(t){return"'".concat(t,"'")})).join(", "),"] or a number.  Got: ").concat(n)),zn(t)}(t),c={},h=0;h<u.length;h++)c[u[h].id()]=h;n=(e=u.length)*e,r=new Array(n);for(var p=0;p<n;p++)r[p]=-1/0;for(var f=0;f<e;f++)for(var d=0;d<e;d++)f!==d&&(r[f*e+d]=Gn(l.distance,u[f],u[d],l.attributes));i=function(t,e){var n;return n="median"===e?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<t.length&&t.splice(n,t.length-n),e>0&&t.splice(0,e)):t=t.slice(e,n);for(var o=0,a=t.length-1;a>=0;a--){var s=t[a];i?isFinite(s)||(t[a]=-1/0,o++):t.splice(a,1)}r&&t.sort((function(t,e){return t-e}));var u=t.length,l=Math.floor(u/2);return u%2!=0?t[l+1+o]:(t[l-1+o]+t[l+o])/2}(t):"mean"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=0,i=0,o=e;o<n;o++){var a=t[o];isFinite(a)&&(r+=a,i++)}return r/i}(t):"min"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=1/0,i=e;i<n;i++){var o=t[i];isFinite(o)&&(r=Math.min(o,r))}return r}(t):"max"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=-1/0,i=e;i<n;i++){var o=t[i];isFinite(o)&&(r=Math.max(o,r))}return r}(t):e,n}(r,l.preference);for(var g=0;g<e;g++)r[g*e+g]=i;o=new Array(n);for(var y=0;y<n;y++)o[y]=0;a=new Array(n);for(var v=0;v<n;v++)a[v]=0;for(var m=new Array(e),_=new Array(e),b=new Array(e),x=0;x<e;x++)m[x]=0,_[x]=0,b[x]=0;for(var E,w=new Array(e*l.minIterations),C=0;C<w.length;C++)w[C]=0;for(E=0;E<l.maxIterations;E++){for(var N=0;N<e;N++){for(var I=-1/0,T=-1/0,S=-1,A=0,L=0;L<e;L++)m[L]=o[N*e+L],(A=a[N*e+L]+r[N*e+L])>=I?(T=I,I=A,S=L):A>T&&(T=A);for(var D=0;D<e;D++)o[N*e+D]=(1-l.damping)*(r[N*e+D]-I)+l.damping*m[D];o[N*e+S]=(1-l.damping)*(r[N*e+S]-T)+l.damping*m[S]}for(var O=0;O<e;O++){for(var P=0,R=0;R<e;R++)m[R]=a[R*e+O],_[R]=Math.max(0,o[R*e+O]),P+=_[R];P-=_[O],_[O]=o[O*e+O],P+=_[O];for(var k=0;k<e;k++)a[k*e+O]=(1-l.damping)*Math.min(0,P-_[k])+l.damping*m[k];a[O*e+O]=(1-l.damping)*(P-_[O])+l.damping*m[O]}for(var F=0,B=0;B<e;B++){var z=a[B*e+B]+o[B*e+B]>0?1:0;w[E%l.minIterations*e+B]=z,F+=z}if(F>0&&(E>=l.minIterations-1||E==l.maxIterations-1)){for(var G=0,q=0;q<e;q++){b[q]=0;for(var V=0;V<l.minIterations;V++)b[q]+=w[V*e+q];0!==b[q]&&b[q]!==l.minIterations||G++}if(G===e)break}}for(var U=function(t,e,n){for(var r=[],i=0;i<t;i++)e[i*t+i]+n[i*t+i]>0&&r.push(i);return r}(e,o,a),j=function(t,e,n){for(var r=qn(t,e,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var s=-1,u=-1/0,l=0;l<o.length;l++){for(var c=0,h=0;h<o.length;h++)c+=e[o[h]*t+o[l]];c>u&&(s=l,u=c)}n[i]=o[s]}return qn(t,e,n)}(e,r,U),Y={},X=0;X<U.length;X++)Y[U[X]]=[];for(var H=0;H<u.length;H++){var W=j[c[u[H].id()]];null!=W&&Y[W].push(u[H])}for(var $=new Array(U.length),Z=0;Z<U.length;Z++)$[Z]=s.collection(Y[U[Z]]);return $},Un={affinityPropagation:Vn,ap:Vn},jn=Mt({root:void 0,directed:!1}),Yn=function(){var t=this,e={},n=0,r=0,i=[],o=[],a={},s=function s(u,l,c){u===c&&(r+=1),e[l]={id:n,low:n++,cutVertex:!1};var h,p,f,d,g=t.getElementById(l).connectedEdges().intersection(t);0===g.size()?i.push(t.spawn(t.getElementById(l))):g.forEach((function(n){h=n.source().id(),p=n.target().id(),(f=h===l?p:h)!==c&&(d=n.id(),a[d]||(a[d]=!0,o.push({x:l,y:f,edge:n})),f in e?e[l].low=Math.min(e[l].low,e[f].id):(s(u,f,l),e[l].low=Math.min(e[l].low,e[f].low),e[l].id<=e[f].low&&(e[l].cutVertex=!0,function(n,r){for(var a=o.length-1,s=[],u=t.spawn();o[a].x!=n||o[a].y!=r;)s.push(o.pop().edge),a--;s.push(o.pop().edge),s.forEach((function(n){var r=n.connectedNodes().intersection(t);u.merge(n),r.forEach((function(n){var r=n.id(),i=n.connectedEdges().intersection(t);u.merge(n),e[r].cutVertex?u.merge(i.filter((function(t){return t.isLoop()}))):u.merge(i)}))})),i.push(u)}(l,f))))}))};t.forEach((function(t){if(t.isNode()){var n=t.id();n in e||(r=0,s(n,n),e[n].cutVertex=r>1)}}));var u=Object.keys(e).filter((function(t){return e[t].cutVertex})).map((function(e){return t.getElementById(e)}));return{cut:t.spawn(u),components:i}},Xn=function(){var t=this,e={},n=0,r=[],i=[],o=t.spawn(t),a=function a(s){if(i.push(s),e[s]={index:n,low:n++,explored:!1},t.getElementById(s).connectedEdges().intersection(t).forEach((function(t){var n=t.target().id();n!==s&&(n in e||a(n),e[n].explored||(e[s].low=Math.min(e[s].low,e[n].low)))})),e[s].index===e[s].low){for(var u=t.spawn();;){var l=i.pop();if(u.merge(t.getElementById(l)),e[l].low=e[s].index,e[l].explored=!0,l===s)break}var c=u.edgesWith(u),h=u.merge(c);r.push(h),o=o.difference(h)}};return t.forEach((function(t){if(t.isNode()){var n=t.id();n in e||a(n)}})),{cut:o,components:r}},Hn={};[Vt,jt,Yt,Ht,$t,Kt,ee,je,Xe,We,Ze,sn,Ln,Bn,Un,{hierholzer:function(t){if(!D(t)){var e=arguments;t={root:e[0],directed:e[1]}}var n,r,i,o=jn(t),a=o.root,s=o.directed,u=this,l=!1;a&&(i=S(a)?this.filter(a)[0].id():a[0].id());var c={},h={};s?u.forEach((function(t){var e=t.id();if(t.isNode()){var i=t.indegree(!0),o=t.outdegree(!0),a=i-o,s=o-i;1==a?n?l=!0:n=e:1==s?r?l=!0:r=e:(s>1||a>1)&&(l=!0),c[e]=[],t.outgoers().forEach((function(t){t.isEdge()&&c[e].push(t.id())}))}else h[e]=[void 0,t.target().id()]})):u.forEach((function(t){var e=t.id();t.isNode()?(t.degree(!0)%2&&(n?r?l=!0:r=e:n=e),c[e]=[],t.connectedEdges().forEach((function(t){return c[e].push(t.id())}))):h[e]=[t.source().id(),t.target().id()]}));var p={found:!1,trail:void 0};if(l)return p;if(r&&n)if(s){if(i&&r!=i)return p;i=r}else{if(i&&r!=i&&n!=i)return p;i||(i=r)}else i||(i=u[0].id());var f=function(t){for(var e,n,r,i=t,o=[t];c[i].length;)e=c[i].shift(),n=h[e][0],i!=(r=h[e][1])?(c[r]=c[r].filter((function(t){return t!=e})),i=r):s||i==n||(c[n]=c[n].filter((function(t){return t!=e})),i=n),o.unshift(e),o.unshift(i);return o},d=[],g=[];for(g=f(i);1!=g.length;)0==c[g[0]].length?(d.unshift(u.getElementById(g.shift())),d.unshift(u.getElementById(g.shift()))):g=f(g.shift()).concat(g);for(var y in d.unshift(u.getElementById(g.shift())),c)if(c[y].length)return p;return p.found=!0,p.trail=this.spawn(d,!0),p}},{hopcroftTarjanBiconnected:Yn,htbc:Yn,htb:Yn,hopcroftTarjanBiconnectedComponents:Yn},{tarjanStronglyConnected:Xn,tsc:Xn,tscc:Xn,tarjanStronglyConnectedComponents:Xn}].forEach((function(t){Q(Hn,t)}));var Wn=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Wn.prototype={fulfill:function(t){return $n(this,1,"fulfillValue",t)},reject:function(t){return $n(this,2,"rejectReason",t)},then:function(t,e){var n=this,r=new Wn;return n.onFulfilled.push(Qn(t,r,"fulfill")),n.onRejected.push(Qn(e,r,"reject")),Zn(n),r.proxy}};var $n=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,Zn(t)),t},Zn=function(t){1===t.state?Kn(t,"onFulfilled",t.fulfillValue):2===t.state&&Kn(t,"onRejected",t.rejectReason)},Kn=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},Qn=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}Jn(e,i)}}},Jn=function t(e,n){if(e!==n&&e.proxy!==n){var r;if("object"===d(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(t){return void e.reject(t)}if("function"!=typeof r)e.fulfill(n);else{var i=!1;try{r.call(n,(function(r){i||(i=!0,r===n?e.reject(new TypeError("circular thenable chain")):t(e,r))}),(function(t){i||(i=!0,e.reject(t))}))}catch(t){i||e.reject(t)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};Wn.all=function(t){return new Wn((function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then((function(t){o(e,t)}),(function(t){n(t)})):o(e,r)}(a)}))},Wn.resolve=function(t){return new Wn((function(e,n){e(t)}))},Wn.reject=function(t){return new Wn((function(e,n){n(t)}))};var tr="undefined"!=typeof Promise?Promise:Wn,er=function(t,e,n){var r=F(t),i=!r,o=this._private=Q({duration:1e3},e,n);if(o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&A(o.complete)&&o.completes.push(o.complete),i){var a=t.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(r){var s=t.pan();o.startPan={x:s.x,y:s.y},o.startZoom=t.zoom()}this.length=1,this[0]=this},nr=er.prototype;Q(nr,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),P(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e,n=this._private;return e="frame"===t?n.frames:n.completes,new tr((function(t,n){e.push((function(){t()}))}))}}),nr.complete=nr.completed,nr.run=nr.play,nr.running=nr.playing;var rr={animated:function(){return function(){var t=this,e=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return!1;var n=e[0];return n?n._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=this,e=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return this;for(var n=0;n<e.length;n++)e[n]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this,a=!r,s=!a;if(!o.styleEnabled())return this;var u=o.style();if(t=Q({},t,e),0===Object.keys(t).length)return new er(i[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(s&&(t.style=u.getPropsList(t.style||t.css),t.css=void 0),s&&null!=t.renderedPosition){var l=t.renderedPosition,c=o.pan(),h=o.zoom();t.position=re(l,h,c)}if(a&&null!=t.panBy){var p=t.panBy,f=o.pan();t.pan={x:f.x+p.x,y:f.y+p.y}}var d=t.center||t.centre;if(a&&null!=d){var g=o.getCenterPan(d.eles,t.zoom);null!=g&&(t.pan=g)}if(a&&null!=t.fit){var y=t.fit,v=o.getFitViewport(y.eles||y.boundingBox,y.padding);null!=v&&(t.pan=v.pan,t.zoom=v.zoom)}if(a&&D(t.zoom)){var m=o.getZoomedViewport(t.zoom);null!=m?(m.zoomed&&(t.zoom=m.zoom),m.panned&&(t.pan=m.pan)):t.zoom=null}return new er(i[0],t)}},animate:function(){return function(t,e){var n=this,r=void 0!==n.length?n:[n];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=Q({},t,e));for(var i=0;i<r.length;i++){var o=r[i],a=o.animated()&&(void 0===t.queue||t.queue);o.animation(t,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=this,r=void 0!==n.length?n:[n],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<r.length;o++){for(var a=r[o]._private,s=a.animation.current,u=0;u<s.length;u++){var l=s[u]._private;e&&(l.duration=0)}t&&(a.animation.queue=[]),e||(a.animation.current=[])}return i.notify("draw"),this}}},ir={data:function(t){return t=Q({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,i=this,o=void 0!==i.length,a=o?i:[i],s=o?i[0]:i;if(S(e)){var u,l=-1!==e.indexOf(".")&&f.default(e);if(r.allowGetting&&void 0===n)return s&&(r.beforeGet(s),u=l&&void 0===s._private[r.field][e]?h.default(s._private[r.field],l):s._private[r.field][e]),u;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var c=m({},e,n);r.beforeSet(i,c);for(var d=0,g=a.length;d<g;d++){var y=a[d];r.canSet(y)&&(l&&void 0===s._private[r.field][e]?p.default(y._private[r.field],l,n):y._private[r.field][e]=n)}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&D(e)){var v,_,b=e,x=Object.keys(b);r.beforeSet(i,b);for(var E=0;E<x.length;E++)if(_=b[v=x[E]],!r.immutableKeys[v])for(var w=0;w<a.length;w++){var C=a[w];r.canSet(C)&&(C._private[r.field][v]=_)}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&A(e)){var N=e;i.on(r.bindingEvent,N)}else if(r.allowGetting&&void 0===e){var I;return s&&(r.beforeGet(s),I=s._private[r.field]),I}return i}},removeData:function(t){return t=Q({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=this,i=void 0!==r.length?r:[r];if(S(e)){for(var o=e.split(/\s+/),a=o.length,s=0;s<a;s++){var u=o[s];if(!z(u)&&!n.immutableKeys[u])for(var l=0,c=i.length;l<c;l++)i[l]._private[n.field][u]=void 0}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===e){for(var h=0,p=i.length;h<p;h++)for(var f=i[h]._private[n.field],d=Object.keys(f),g=0;g<d.length;g++){var y=d[g];!n.immutableKeys[y]&&(f[y]=void 0)}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}}},or={eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new tr((function(t,e){var i=r.concat([function(e){n.off.apply(n,o),t(e)}]),o=i.concat([]);n.on.apply(n,i)}))}}},ar={};[rr,ir,or].forEach((function(t){Q(ar,t)}));var sr={animate:ar.animate(),animation:ar.animation(),animated:ar.animated(),clearQueue:ar.clearQueue(),delay:ar.delay(),delayAnimation:ar.delayAnimation(),stop:ar.stop()},ur={classes:function(t){var e=this;if(void 0===t){var n=[];return e[0]._private.classes.forEach((function(t){return n.push(t)})),n}L(t)||(t=(t||"").match(/\S+/g)||[]);for(var r=[],i=new zt(t),o=0;o<e.length;o++){for(var a=e[o],s=a._private,u=s.classes,l=!1,c=0;c<t.length;c++){var h=t[c];if(!u.has(h)){l=!0;break}}l||(l=u.size!==t.length),l&&(s.classes=i,r.push(a))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),e},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){L(t)||(t=t.match(/\S+/g)||[]);for(var n=this,r=void 0===e,i=[],o=0,a=n.length;o<a;o++)for(var s=n[o],u=s._private.classes,l=!1,c=0;c<t.length;c++){var h=t[c],p=u.has(h),f=!1;e||r&&!p?(u.add(h),f=!0):(!e||r&&p)&&(u.delete(h),f=!0),!l&&f&&(i.push(s),l=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout((function(){n.removeClass(t)}),e),n}};ur.className=ur.classNames=ur.classes;var lr={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:X,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};lr.variable="(?:[\\w-.]|(?:\\\\"+lr.metaChar+"))+",lr.className="(?:[\\w-]|(?:\\\\"+lr.metaChar+"))+",lr.value=lr.string+"|"+lr.number,lr.id=lr.variable,function(){var t,e,n;for(t=lr.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],lr.comparatorOp+="|@"+e;for(t=lr.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(lr.comparatorOp+="|\\!"+e)}();var cr=20,hr=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort((function(t,e){return function(t,e){return-1*K(t,e)}(t.selector,e.selector)})),pr=function(){for(var t,e={},n=0;n<hr.length;n++)e[(t=hr[n]).selector]=t.matches;return e}(),fr="("+hr.map((function(t){return t.selector})).join("|")+")",dr=function(t){return t.replace(new RegExp("\\\\("+lr.metaChar+")","g"),(function(t,e){return e}))},gr=function(t,e,n){t[t.length-1]=n},yr=[{name:"group",query:!0,regex:"("+lr.group+")",populate:function(t,e,n){var r=_(n,1)[0];e.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:fr,populate:function(t,e,n){var r=_(n,1)[0];e.checks.push({type:7,value:r})}},{name:"id",query:!0,regex:"\\#("+lr.id+")",populate:function(t,e,n){var r=_(n,1)[0];e.checks.push({type:8,value:dr(r)})}},{name:"className",query:!0,regex:"\\.("+lr.className+")",populate:function(t,e,n){var r=_(n,1)[0];e.checks.push({type:9,value:dr(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+lr.variable+")\\s*\\]",populate:function(t,e,n){var r=_(n,1)[0];e.checks.push({type:4,field:dr(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+lr.variable+")\\s*("+lr.comparatorOp+")\\s*("+lr.value+")\\s*\\]",populate:function(t,e,n){var r=_(n,3),i=r[0],o=r[1],a=r[2];a=null!=new RegExp("^"+lr.string+"$").exec(a)?a.substring(1,a.length-1):parseFloat(a),e.checks.push({type:3,field:dr(i),operator:o,value:a})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+lr.boolOp+")\\s*("+lr.variable+")\\s*\\]",populate:function(t,e,n){var r=_(n,2),i=r[0],o=r[1];e.checks.push({type:5,field:dr(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+lr.meta+")\\s*("+lr.comparatorOp+")\\s*("+lr.number+")\\s*\\]\\]",populate:function(t,e,n){var r=_(n,3),i=r[0],o=r[1],a=r[2];e.checks.push({type:6,field:dr(i),operator:o,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:lr.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,o=t[t.length-1];return null!=n&&(o.subject=n,t.currentSubject=null),o.edgeCount=r,o.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:lr.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r=e,i={checks:[]};return n.checks.push({type:11,source:r,target:i}),gr(t,0,n),t.edgeCount++,i}var o={checks:[]},a=e,s={checks:[]};return o.checks.push({type:12,source:a,target:s}),gr(t,0,o),t.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:lr.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r=e,i={checks:[]};return n.checks.push({type:10,nodes:[r,i]}),gr(t,0,n),t.edgeCount++,i}var o={checks:[]},a=e,s={checks:[]};return o.checks.push({type:14,node:a,neighbor:s}),gr(t,0,o),s}},{name:"child",separator:!0,regex:lr.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]},i=t[t.length-1];return n.checks.push({type:15,parent:i,child:r}),gr(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var o={checks:[]},a=t[t.length-1],s={checks:[]},u={checks:[]},l={checks:[]},c={checks:[]};return o.checks.push({type:19,left:a,right:s,subject:u}),u.checks=e.checks,e.checks=[{type:cr}],c.checks.push({type:cr}),s.checks.push({type:17,parent:c,child:l}),gr(t,0,o),t.currentSubject=u,t.compoundCount++,l}var h={checks:[]},p={checks:[]},f=[{type:17,parent:h,child:p}];return h.checks=e.checks,e.checks=f,t.compoundCount++,p}},{name:"descendant",separator:!0,regex:lr.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]},i=t[t.length-1];return n.checks.push({type:16,ancestor:i,descendant:r}),gr(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var o={checks:[]},a=t[t.length-1],s={checks:[]},u={checks:[]},l={checks:[]},c={checks:[]};return o.checks.push({type:19,left:a,right:s,subject:u}),u.checks=e.checks,e.checks=[{type:cr}],c.checks.push({type:cr}),s.checks.push({type:18,ancestor:c,descendant:l}),gr(t,0,o),t.currentSubject=u,t.compoundCount++,l}var h={checks:[]},p={checks:[]},f=[{type:18,ancestor:h,descendant:p}];return h.checks=e.checks,e.checks=f,t.compoundCount++,p}},{name:"subject",modifier:!0,regex:lr.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return Tt("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];yr.forEach((function(t){return t.regexObj=new RegExp("^"+t.regex)}));var vr=function(t){for(var e,n,r,i=0;i<yr.length;i++){var o=yr[i],a=o.name,s=t.match(o.regexObj);if(null!=s){n=s,e=o,r=a;var u=s[0];t=t.substring(u.length);break}}return{expr:e,match:n,name:r,remaining:t}},mr={parse:function(t){var e=this,n=e.inputText=t,r=e[0]={checks:[]};for(e.length=1,n=function(t){var e=t.match(/^\s+/);if(e){var n=e[0];t=t.substring(n.length)}return t}(n);;){var i=vr(n);if(null==i.expr)return Tt("The selector `"+t+"`is invalid"),!1;var o=i.match.slice(1),a=i.expr.populate(e,r,o);if(!1===a)return!1;if(null!=a&&(r=a),(n=i.remaining).match(/^\s*$/))break}var s=e[e.length-1];null!=e.currentSubject&&(s.subject=e.currentSubject),s.edgeCount=e.edgeCount,s.compoundCount=e.compoundCount;for(var u=0;u<e.length;u++){var l=e[u];if(l.compoundCount>0&&l.edgeCount>0)return Tt("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return Tt("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&Tt("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return null==t?"":t},e=function(e){return S(e)?'"'+e+'"':t(e)},n=function(t){return" "+t+" "},r=function(i,o){return i.checks.reduce((function(a,s,u){return a+(o===i&&0===u?"$":"")+function(i,o){var a=i.type,s=i.value;switch(a){case 0:var u=t(s);return u.substring(0,u.length-1);case 3:var l=i.field,c=i.operator;return"["+l+n(t(c))+e(s)+"]";case 5:var h=i.operator,p=i.field;return"["+t(h)+p+"]";case 4:return"["+i.field+"]";case 6:var f=i.operator;return"[["+i.field+n(t(f))+e(s)+"]]";case 7:return s;case 8:return"#"+s;case 9:return"."+s;case 17:case 15:return r(i.parent,o)+n(">")+r(i.child,o);case 18:case 16:return r(i.ancestor,o)+" "+r(i.descendant,o);case 19:var d=r(i.left,o),g=r(i.subject,o),y=r(i.right,o);return d+(d.length>0?" ":"")+g+y;case cr:return""}}(s,o)}),"")},i="",o=0;o<this.length;o++){var a=this[o];i+=r(a,a.subject),this.length>1&&o<this.length-1&&(i+=", ")}return this.toStringCache=i,i}},_r=function(t,e,n){var r,i,o,a=S(t),s=M(t),u=S(n),l=!1,c=!1,h=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),c=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),l=!0),(a||u||l)&&(i=a||s?""+t:"",o=""+n),l&&(t=i=i.toLowerCase(),n=o=o.toLowerCase()),e){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=t===n;break;case">":h=!0,r=t>n;break;case">=":h=!0,r=t>=n;break;case"<":h=!0,r=t<n;break;case"<=":h=!0,r=t<=n;break;default:r=!1}return!c||null==t&&h||(r=!r),r},br=function(t,e){return t.data(e)},xr=[],Er=function(t,e){return t.checks.every((function(t){return xr[t.type](t,e)}))};xr[0]=function(t,e){var n=t.value;return"*"===n||n===e.group()},xr[7]=function(t,e){return function(t,e){return pr[t](e)}(t.value,e)},xr[8]=function(t,e){var n=t.value;return e.id()===n},xr[9]=function(t,e){var n=t.value;return e.hasClass(n)},xr[6]=function(t,e){var n=t.field,r=t.operator,i=t.value;return _r(function(t,e){return t[e]()}(e,n),r,i)},xr[3]=function(t,e){var n=t.field,r=t.operator,i=t.value;return _r(br(e,n),r,i)},xr[5]=function(t,e){var n=t.field,r=t.operator;return function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(br(e,n),r)},xr[4]=function(t,e){var n=t.field;return t.operator,void 0!==br(e,n)},xr[10]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return Er(n,i)&&Er(r,o)||Er(r,i)&&Er(n,o)},xr[14]=function(t,e){return Er(t.node,e)&&e.neighborhood().some((function(e){return e.isNode()&&Er(t.neighbor,e)}))},xr[11]=function(t,e){return Er(t.source,e.source())&&Er(t.target,e.target())},xr[12]=function(t,e){return Er(t.source,e)&&e.outgoers().some((function(e){return e.isNode()&&Er(t.target,e)}))},xr[13]=function(t,e){return Er(t.target,e)&&e.incomers().some((function(e){return e.isNode()&&Er(t.source,e)}))},xr[15]=function(t,e){return Er(t.child,e)&&Er(t.parent,e.parent())},xr[17]=function(t,e){return Er(t.parent,e)&&e.children().some((function(e){return Er(t.child,e)}))},xr[16]=function(t,e){return Er(t.descendant,e)&&e.ancestors().some((function(e){return Er(t.ancestor,e)}))},xr[18]=function(t,e){return Er(t.ancestor,e)&&e.descendants().some((function(e){return Er(t.descendant,e)}))},xr[19]=function(t,e){return Er(t.subject,e)&&Er(t.left,e)&&Er(t.right,e)},xr[20]=function(){return!0},xr[1]=function(t,e){return t.value.has(e)},xr[2]=function(t,e){return(0,t.value)(e)};var wr={matches:function(t){for(var e=0;e<this.length;e++){var n=this[e];if(Er(n,t))return!0}return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&8===e[0].checks[0].type)return t.getElementById(e[0].checks[0].value).collection();var n=function(t){for(var n=0;n<e.length;n++){var r=e[n];if(Er(r,t))return!0}return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}},Cr=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||S(t)&&t.match(/^\s*$/)||(P(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):A(t)?this.addQuery({checks:[{type:2,value:t}]}):S(t)?this.parse(t)||(this.invalid=!0):Nt("A selector must be created from a string; found "))},Nr=Cr.prototype;[mr,wr].forEach((function(t){return Q(Nr,t)})),Nr.text=function(){return this.inputText},Nr.size=function(){return this.length},Nr.eq=function(t){return this[t]},Nr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},Nr.addQuery=function(t){this[this.length++]=t},Nr.selector=Nr.toString;var Ir={allAre:function(t){var e=new Cr(t);return this.every((function(t){return e.matches(t)}))},is:function(t){var e=new Cr(t);return this.some((function(t){return e.matches(t)}))},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every((function(e){return t.hasElementWithId(e.id())})))},anySame:function(t){return t=this.cy().collection(t),this.some((function(e){return t.hasElementWithId(e.id())}))},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every((function(t){return e.hasElementWithId(t.id())}))},contains:function(t){t=this.cy().collection(t);var e=this;return t.every((function(t){return e.hasElementWithId(t.id())}))}};Ir.allAreNeighbours=Ir.allAreNeighbors,Ir.has=Ir.contains,Ir.equal=Ir.equals=Ir.same;var Tr,Sr,Ar=function(t,e){return function(n,r,i,o){var a,s=n,u=this;if(null==s?a="":P(s)&&1===s.length&&(a=s.id()),1===u.length&&a){var l=u[0]._private,c=l.traversalCache=l.traversalCache||{},h=c[e]=c[e]||[],p=dt(a);return h[p]||(h[p]=t.call(u,n,r,i,o))}return t.call(u,n,r,i,o)}},Lr={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,!0).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}n=n.parent()}return this.spawn(e,!0).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter((function(t){return t.isOrphan()})).filter(t)},nonorphans:function(t){return this.stdFilter((function(t){return t.isChild()})).filter(t)},children:Ar((function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,!0).filter(t)}),"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(e,!0).filter(t)}};function Dr(t,e,n,r){for(var i=[],o=new zt,a=t.cy().hasCompoundNodes(),s=0;s<t.length;s++){var u=t[s];n?i.push(u):a&&r(i,o,u)}for(;i.length>0;){var l=i.shift();e(l),o.add(l.id()),a&&r(i,o,l)}return t}function Mr(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}function Or(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function Pr(t,e,n){Or(t,e,n),Mr(t,e,n)}Lr.forEachDown=function(t){return Dr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Mr)},Lr.forEachUp=function(t){return Dr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Or)},Lr.forEachUpAndDown=function(t){return Dr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Pr)},Lr.ancestors=Lr.parents,(Tr=Sr={data:ar.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ar.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ar.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ar.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ar.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ar.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=Tr.data,Tr.removeAttr=Tr.removeData;var Rr,kr,Fr=Sr,Br={};function zr(t){return function(e){var n=this;if(void 0===e&&(e=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(r+=t(i,s))}return r}}}function Gr(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][t](n);void 0===a||void 0!==r&&!e(a,r)||(r=a)}return r}}Q(Br,{degree:zr((function(t,e){return e.source().same(e.target())?2:1})),indegree:zr((function(t,e){return e.target().same(t)?1:0})),outdegree:zr((function(t,e){return e.source().same(t)?1:0}))}),Q(Br,{minDegree:Gr("degree",(function(t,e){return t<e})),maxDegree:Gr("degree",(function(t,e){return t>e})),minIndegree:Gr("indegree",(function(t,e){return t<e})),maxIndegree:Gr("indegree",(function(t,e){return t>e})),minOutdegree:Gr("outdegree",(function(t,e){return t<e})),maxOutdegree:Gr("outdegree",(function(t,e){return t>e}))}),Q(Br,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var qr=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var o=i._private.position,a={x:null!=e.x?e.x-o.x:0,y:null!=e.y?e.y-o.y:0};!i.isParent()||0===a.x&&0===a.y||i.children().shift(a,n),i.dirtyBoundingBoxCache()}}},Vr={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){qr(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};Rr=kr={position:ar.data(Vr),silentPosition:ar.data(Q({},Vr,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){qr(t,e,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,e){if(D(t))e?this.silentPosition(t):this.position(t);else if(A(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o,a=this[i];(o=n(a,i))&&(e?a.silentPosition(o):a.position(o))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(D(t)?(r={x:M(t.x)?t.x:0,y:M(t.y)?t.y:0},n=e):S(t)&&M(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o];if(!(i.hasCompoundNodes()&&a.isChild()&&a.ancestors().anySame(this))){var s=a.position(),u={x:s.x+r.x,y:s.y+r.y};n?a.silentPosition(u):a.position(u)}}i.endBatch()}return this},silentShift:function(t,e){return D(t)?this.shift(t,!0):S(t)&&M(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=D(t)?t:void 0,s=void 0!==a||void 0!==e&&S(t);if(n&&n.isNode()){if(!s){var u=n.position();return a=ne(u,i,o),void 0===t?a:a[t]}for(var l=0;l<this.length;l++){var c=this[l];void 0!==e?c.position(t,(e-o[t])/i):void 0!==a&&c.position(re(a,i,o))}}else if(!s)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=D(t)?t:void 0,o=void 0!==i||void 0!==e&&S(t),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var s=n.position(),u=a?n.parent():null,l=u&&u.length>0,c=l;l&&(u=u[0]);var h=c?u.position():{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===t?i:i[t]}for(var p=0;p<this.length;p++){var f=this[p],d=a?f.parent():null,g=d&&d.length>0,y=g;g&&(d=d[0]);var v=y?d.position():{x:0,y:0};void 0!==e?f.position(t,e+v[t]):void 0!==i&&f.position({x:i.x+v.x,y:i.y+v.y})}}else if(!o)return;return this}},Rr.modelPosition=Rr.point=Rr.position,Rr.modelPositions=Rr.points=Rr.positions,Rr.renderedPoint=Rr.renderedPosition,Rr.relativePoint=Rr.relativePosition;var Ur,jr,Yr=kr;Ur=jr={},jr.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},jr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp((function(e){if(e.isParent()){var n=e._private;n.compoundBoundsClean=!1,n.bbCache=null,t||e.emitAndNotify("bounds")}})),this):this},jr.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(t){if(t.isParent()){var e=t._private,n=t.children(),r="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},o=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),a=e.position;0!==o.w&&0!==o.h||((o={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=a.x-o.w/2,o.x2=a.x+o.w/2,o.y1=a.y-o.h/2,o.y2=a.y+o.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var u=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(u=100*u/i.width.val);var l=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(l=100*l/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var h=v(i.width.val-o.w,s,u),p=h.biasDiff,f=h.biasComplementDiff,d=v(i.height.val-o.h,l,c),g=d.biasDiff,y=d.biasComplementDiff;e.autoPadding=function(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}(o.w,o.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(o.w,i.width.val),a.x=(-p+o.x1+o.x2+f)/2,e.autoHeight=Math.max(o.h,i.height.val),a.y=(-g+o.y1+o.y2+y)/2}function v(t,e,n){var r=0,i=0,o=e+n;return t>0&&o>0&&(r=e/o*t,i=n/o*t),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean&&!t||(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var Xr=function(t){return t===1/0||t===-1/0?0:t},Hr=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Wr=function(t,e){return null==e?t:Hr(t,e.x1,e.y1,e.x2,e.y2)},$r=function(t,e,n){return Rt(t,e,n)},Zr=function(t,e,n){if(!e.cy().headless()){var r,i,o=e._private,a=o.rstyle,s=a.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=a.srcX,i=a.srcY):"target"===n?(r=a.tgtX,i=a.tgtY):(r=a.midX,i=a.midY);var u=o.arrowBounds=o.arrowBounds||{},l=u[n]=u[n]||{};l.x1=r-s,l.y1=i-s,l.x2=r+s,l.y2=i+s,l.w=l.x2-l.x1,l.h=l.y2-l.y1,ye(l,1),Hr(t,l.x1,l.y1,l.x2,l.y2)}}},Kr=function(t,e,n){if(!e.cy().headless()){var r;r=n?n+"-":"";var i=e._private,o=i.rstyle;if(e.pstyle(r+"label").strValue){var a,s,u,l,c=e.pstyle("text-halign"),h=e.pstyle("text-valign"),p=$r(o,"labelWidth",n),f=$r(o,"labelHeight",n),d=$r(o,"labelX",n),g=$r(o,"labelY",n),y=e.pstyle(r+"text-margin-x").pfValue,v=e.pstyle(r+"text-margin-y").pfValue,m=e.isEdge(),_=e.pstyle(r+"text-rotation"),b=e.pstyle("text-outline-width").pfValue,x=e.pstyle("text-border-width").pfValue/2,E=e.pstyle("text-background-padding").pfValue,w=f,C=p,N=C/2,I=w/2;if(m)a=d-N,s=d+N,u=g-I,l=g+I;else{switch(c.value){case"left":a=d-C,s=d;break;case"center":a=d-N,s=d+N;break;case"right":a=d,s=d+C}switch(h.value){case"top":u=g-w,l=g;break;case"center":u=g-I,l=g+I;break;case"bottom":u=g,l=g+w}}a+=y-Math.max(b,x)-E-2,s+=y+Math.max(b,x)+E+2,u+=v-Math.max(b,x)-E-2,l+=v+Math.max(b,x)+E+2;var T=n||"main",S=i.labelBounds,A=S[T]=S[T]||{};A.x1=a,A.y1=u,A.x2=s,A.y2=l,A.w=s-a,A.h=l-u;var L=m&&"autorotate"===_.strValue,D=null!=_.pfValue&&0!==_.pfValue;if(L||D){var M=L?$r(i.rstyle,"labelAngle",n):_.pfValue,O=Math.cos(M),P=Math.sin(M),R=(a+s)/2,k=(u+l)/2;if(!m){switch(c.value){case"left":R=s;break;case"right":R=a}switch(h.value){case"top":k=l;break;case"bottom":k=u}}var F=function(t,e){return{x:(t-=R)*O-(e-=k)*P+R,y:t*P+e*O+k}},B=F(a,u),z=F(a,l),G=F(s,u),q=F(s,l);a=Math.min(B.x,z.x,G.x,q.x),s=Math.max(B.x,z.x,G.x,q.x),u=Math.min(B.y,z.y,G.y,q.y),l=Math.max(B.y,z.y,G.y,q.y)}var V=T+"Rot",U=S[V]=S[V]||{};U.x1=a,U.y1=u,U.x2=s,U.y2=l,U.w=s-a,U.h=l-u,Hr(t,a,u,s,l),Hr(i.labelBounds.all,a,u,s,l)}return t}},Qr=function(t){var e=0,n=function(t){return(t?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),r+=n(t.includeLabels),r+=n(t.includeMainLabels),r+=n(t.includeSourceLabels),(r+=n(t.includeTargetLabels))+n(t.includeOverlays)},Jr=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(t){return Math.round(t)};return function(t,e){var n={value:0,done:!1},r=0,i=t.length;return lt({next:function(){return r<i?n.value=t[r++]:n.done=!0,n}},void 0)}([r(e.x),r(e.y),r(n.x),r(n.y)])}return 0},ti=function(t,e){var n,r=t._private,i=t.isEdge(),o=(null==e?ni:Qr(e))===ni,a=Jr(t),s=r.bbCachePosKey===a,u=e.useCache&&s,l=function(t){return null==t._private.bbCache||t._private.styleDirty};if(!u||l(t)||i&&l(t.source())||l(t.target())?(s||t.recalculateRenderedStyle(u),n=function(t,e){var n,r,i,o,a,s,u,l=t._private.cy,c=l.styleEnabled(),h=l.headless(),p=de(),f=t._private,d=t.isNode(),g=t.isEdge(),y=f.rstyle,v=d&&c?t.pstyle("bounds-expansion").pfValue:[0],m=function(t){return"none"!==t.pstyle("display").value},_=!c||m(t)&&(!g||m(t.source())&&m(t.target()));if(_){var b=0;c&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(b=t.pstyle("overlay-padding").value);var x=0;c&&e.includeUnderlays&&0!==t.pstyle("underlay-opacity").value&&(x=t.pstyle("underlay-padding").value);var E=Math.max(b,x),w=0;if(c&&(w=t.pstyle("width").pfValue/2),d&&e.includeNodes){var C=t.position();a=C.x,s=C.y;var N=t.outerWidth()/2,I=t.outerHeight()/2;Hr(p,n=a-N,i=s-I,r=a+N,o=s+I)}else if(g&&e.includeEdges)if(c&&!h){var T=t.pstyle("curve-style").strValue;if(n=Math.min(y.srcX,y.midX,y.tgtX),r=Math.max(y.srcX,y.midX,y.tgtX),i=Math.min(y.srcY,y.midY,y.tgtY),o=Math.max(y.srcY,y.midY,y.tgtY),Hr(p,n-=w,i-=w,r+=w,o+=w),"haystack"===T){var S=y.haystackPts;if(S&&2===S.length){if(n=S[0].x,i=S[0].y,n>(r=S[1].x)){var A=n;n=r,r=A}if(i>(o=S[1].y)){var L=i;i=o,o=L}Hr(p,n-w,i-w,r+w,o+w)}}else if("bezier"===T||"unbundled-bezier"===T||"segments"===T||"taxi"===T){var D;switch(T){case"bezier":case"unbundled-bezier":D=y.bezierPts;break;case"segments":case"taxi":D=y.linePts}if(null!=D)for(var M=0;M<D.length;M++){var O=D[M];n=O.x-w,r=O.x+w,i=O.y-w,o=O.y+w,Hr(p,n,i,r,o)}}}else{var P=t.source().position(),R=t.target().position();if((n=P.x)>(r=R.x)){var k=n;n=r,r=k}if((i=P.y)>(o=R.y)){var F=i;i=o,o=F}Hr(p,n-=w,i-=w,r+=w,o+=w)}if(c&&e.includeEdges&&g&&(Zr(p,t,"mid-source"),Zr(p,t,"mid-target"),Zr(p,t,"source"),Zr(p,t,"target")),c&&"yes"===t.pstyle("ghost").value){var B=t.pstyle("ghost-offset-x").pfValue,z=t.pstyle("ghost-offset-y").pfValue;Hr(p,p.x1+B,p.y1+z,p.x2+B,p.y2+z)}var G=f.bodyBounds=f.bodyBounds||{};me(G,p),ve(G,v),ye(G,1),c&&(n=p.x1,r=p.x2,i=p.y1,o=p.y2,Hr(p,n-E,i-E,r+E,o+E));var q=f.overlayBounds=f.overlayBounds||{};me(q,p),ve(q,v),ye(q,1);var V=f.labelBounds=f.labelBounds||{};null!=V.all?((u=V.all).x1=1/0,u.y1=1/0,u.x2=-1/0,u.y2=-1/0,u.w=0,u.h=0):V.all=de(),c&&e.includeLabels&&(e.includeMainLabels&&Kr(p,t,null),g&&(e.includeSourceLabels&&Kr(p,t,"source"),e.includeTargetLabels&&Kr(p,t,"target")))}return p.x1=Xr(p.x1),p.y1=Xr(p.y1),p.x2=Xr(p.x2),p.y2=Xr(p.y2),p.w=Xr(p.x2-p.x1),p.h=Xr(p.y2-p.y1),p.w>0&&p.h>0&&_&&(ve(p,v),ye(p,1)),p}(t,ei),r.bbCache=n,r.bbCachePosKey=a):n=r.bbCache,!o){var c=t.isNode();n=de(),(e.includeNodes&&c||e.includeEdges&&!c)&&(e.includeOverlays?Wr(n,r.overlayBounds):Wr(n,r.bodyBounds)),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?Wr(n,r.labelBounds.all):(e.includeMainLabels&&Wr(n,r.labelBounds.mainRot),e.includeSourceLabels&&Wr(n,r.labelBounds.sourceRot),e.includeTargetLabels&&Wr(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},ei={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},ni=Qr(ei),ri=Mt(ei);jr.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=de();var n=ri(t=t||ei),r=this;if(r.cy().styleEnabled())for(var i=0;i<r.length;i++){var o=r[i],a=o._private,s=Jr(o),u=a.bbCachePosKey===s,l=n.useCache&&u&&!a.styleDirty;o.recalculateRenderedStyle(l)}this.updateCompoundBounds(!t.useCache);for(var c=0;c<r.length;c++){var h=r[c];Wr(e,ti(h,n))}}else t=void 0===t?ei:ri(t),e=ti(this[0],t);return e.x1=Xr(e.x1),e.y1=Xr(e.y1),e.x2=Xr(e.x2),e.y2=Xr(e.y2),e.w=Xr(e.x2-e.x1),e.h=Xr(e.y2-e.y1),e},jr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},jr.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter((function(t){return t.isParent()})),e=e.not(i)),D(t)){var o=t;t=function(){return o}}n.startBatch(),e.forEach((function(e,n){return e._private.bbAtOldPos=t(e,n)})).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var a=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return e.silentPositions((function(t){return t._private.bbAtOldPos})),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),a},Ur.boundingbox=Ur.bb=Ur.boundingBox,Ur.renderedBoundingbox=Ur.renderedBoundingBox;var ii,oi,ai=jr;ii=oi={};var si=function(t){t.uppercaseName=Y(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=Y(t.outerName),ii[t.name]=function(){var e=this[0],n=e._private,r=n.cy._private.styleEnabled;if(e){if(r){if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var i=e.pstyle(t.name);return"label"===i.strValue?(e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0):i.pfValue}return 1}},ii["outer"+t.uppercaseName]=function(){var e=this[0],n=e._private.cy._private.styleEnabled;if(e)return n?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},ii["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},ii["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};si({name:"width"}),si({name:"height"}),oi.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},oi.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},oi.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var ui=oi,li={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},ci=Object.keys(li).reduce((function(t,e){var n=li[e],r=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(e);return t[e]=function(){return function(t,e){if(t.isEdge())return e(t)}(this,n.get)},n.mult?t[r]=function(){return function(t,e){if(t.isEdge()){var n=t.cy(),r=n.pan(),i=n.zoom();return e(t).map((function(t){return ne(t,i,r)}))}}(this,n.get)}:t[r]=function(){return function(t,e){if(t.isEdge()){var n=t.cy();return ne(e(t),n.zoom(),n.pan())}}(this,n.get)},t}),{}),hi=Q({},Yr,ai,ui,ci),pi=function(t,e){this.recycle(t,e)};function fi(){return!1}function di(){return!0}pi.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=fi,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?di:fi):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=di;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=di;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=di,this.stopPropagation()},isDefaultPrevented:fi,isPropagationStopped:fi,isImmediatePropagationStopped:fi};var gi=/^([^.]+)(\.(?:[^.]+))?$/,yi={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},vi=Object.keys(yi),mi={};function _i(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi,e=arguments.length>1?arguments[1]:void 0,n=0;n<vi.length;n++){var r=vi[n];this[r]=t[r]||yi[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var bi=_i.prototype,xi=function(t,e,n,r,i,o,a){A(r)&&(i=r,r=null),a&&(o=null==o?a:Q({},o,a));for(var s=L(n)?n:n.split(/\s+/),u=0;u<s.length;u++){var l=s[u];if(!z(l)){var c=l.match(gi);if(c&&!1===e(t,l,c[1],c[2]?c[2]:null,r,i,o))break}}},Ei=function(t,e){return t.addEventFields(t.context,e),new pi(e.type,e)};bi.on=bi.addListener=function(t,e,n,r,i){return xi(this,(function(t,e,n,r,i,o,a){A(o)&&t.listeners.push({event:e,callback:o,type:n,namespace:r,qualifier:i,conf:a})}),t,e,n,r,i),this},bi.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},bi.removeListener=bi.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var o=this.listeners,a=function(a){var s=o[a];xi(i,(function(e,n,r,i,u,l){if((s.type===r||"*"===t)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!u||e.qualifierCompare(s.qualifier,u))&&(!l||s.callback===l))return o.splice(a,1),!1}),t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this},bi.removeAllListeners=function(){return this.removeListener("*")},bi.emit=bi.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,L(e)||(e=[e]),function(t,e,n){if("event"!==T(n))if(D(n))e(t,Ei(t,n));else for(var r=L(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!z(o)){var a=o.match(gi);if(a){var s=a[1],u=a[2]?a[2]:null;e(t,Ei(t,{type:s,namespace:u,target:t.context}))}}}else e(t,n)}(this,(function(t,o){null!=n&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],i=r.length);for(var a=function(n){var i=r[n];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||".*"===i.namespace)&&t.eventMatches(t.context,i,o)){var a=[o];null!=e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}}(a,e),t.beforeEmit(t.context,i,o),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter((function(t){return t!==i})));var s=t.callbackContext(t.context,i,o),u=i.callback.apply(s,a);t.afterEmit(t.context,i,o),!1===u&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a(s);t.bubble(t.context)&&!o.isPropagationStopped()&&t.parent(t.context).emit(o,e)}),t),this.emitting--,this};var wi={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&R(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},Ci=function(t){return S(t)?new Cr(t):t},Ni={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new _i(wi,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=Ci(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=Ci(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,e,n){for(var r=Ci(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=Ci(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};ar.eventAliasesOn(Ni);var Ii={nodes:function(t){return this.filter((function(t){return t.isNode()})).filter(t)},edges:function(t){return this.filter((function(t){return t.isEdge()})).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.push(r):e.push(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(S(t)||P(t))return new Cr(t).filter(this);if(A(t)){for(var n=this.spawn(),r=this,i=0;i<r.length;i++){var o=r[i];(e?t.apply(e,[o,i,r]):t(o,i,r))&&n.push(o)}return n}return this.spawn()},not:function(t){if(t){S(t)&&(t=this.filter(t));for(var e=this.spawn(),n=0;n<this.length;n++){var r=this[n];t.has(r)||e.push(r)}return e}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(S(t)){var e=t;return this.filter(e)}for(var n=this.spawn(),r=t,i=this.length<t.length,o=i?this:r,a=i?r:this,s=0;s<o.length;s++){var u=o[s];a.has(u)&&n.push(u)}return n},xor:function(t){var e=this._private.cy;S(t)&&(t=e.$(t));var n=this.spawn(),r=t,i=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],o=i._private.data.id;e.hasElementWithId(o)||n.push(i)}};return i(this,r),i(r,this),n},diff:function(t){var e=this._private.cy;S(t)&&(t=e.$(t));var n=this.spawn(),r=this.spawn(),i=this.spawn(),o=t,a=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r],a=o._private.data.id;e.hasElementWithId(a)?i.merge(o):n.push(o)}};return a(this,o,n),a(o,this,r),{left:n,right:r,both:i}},add:function(t){var e=this._private.cy;if(!t)return this;if(S(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<t.length;i++){var o=t[i];!this.has(o)&&r.push(o)}return r},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&S(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,o=0;o<t.length;o++){var a=t[o],s=a._private.data.id;if(!i.has(s)){var u=this.length++;this[u]=a,i.set(s,{ele:a,index:u})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;this[t]=void 0,n.delete(e);var r=t===this.length-1;if(this.length>1&&!r){var i=this.length-1,o=this[i],a=o._private.data.id;this[i]=void 0,this[t]=o,n.set(a,{ele:o,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var e=this._private,n=t._private.data.id,r=e.map.get(n);if(!r)return this;var i=r.index;return this.unmergeAt(i),this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&S(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=e?t.apply(e,[o,i,r]):t(o,i,r);n.push(a)}return n},reduce:function(t,e){for(var n=e,r=this,i=0;i<r.length;i++)n=t(n,r[i],i,r);return n},max:function(t,e){for(var n,r=-1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s>r&&(r=s,n=a)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s<r&&(r=s,n=a)}return{value:r,ele:n}}},Ti=Ii;Ti.u=Ti["|"]=Ti["+"]=Ti.union=Ti.or=Ti.add,Ti["\\"]=Ti["!"]=Ti["-"]=Ti.difference=Ti.relativeComplement=Ti.subtract=Ti.not,Ti.n=Ti["&"]=Ti["."]=Ti.and=Ti.intersection=Ti.intersect,Ti["^"]=Ti["(+)"]=Ti["(-)"]=Ti.symmetricDifference=Ti.symdiff=Ti.xor,Ti.fnFilter=Ti.filterFn=Ti.stdFilter=Ti.filter,Ti.complement=Ti.abscomp=Ti.absoluteComplement;var Si,Ai=function(t,e){var n=t.cy().hasCompoundNodes();function r(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?bt:0}var i=r(t)-r(e);if(0!==i)return i;function o(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var a=o(t)-o(e);if(0!==a)return a;var s=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==s?s:t.poolIndex()-e.poolIndex()},Li={forEach:function(t,e){if(A(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!A(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(Ai)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:bt-1}var r=e.source,i=e.target,o=r.zDepth(),a=i.zDepth();return Math.max(o,a,0)}}};Li.each=Li.forEach,Si="undefined",("undefined"==typeof Symbol?"undefined":d(Symbol))!=Si&&d(Symbol.iterator)!=Si&&(Li[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},n=0,r=this.length;return m({next:function(){return n<r?e.value=t[n++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,(function(){return this}))});var Di=Mt({nodeDimensionsIncludeLabels:!1}),Mi={layoutDimensions:function(t){var e;if(t=Di(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();e={w:n.w,h:n.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return 0!==e.w&&0!==e.h||(e.w=e.h=1),e},layoutPositions:function(t,e,n){var r=this.nodes().filter((function(t){return!t.isParent()})),i=this.cy(),o=e.eles,a=function(t){return t.id()},s=q(n,a);t.emit({type:"layoutstart",layout:t}),t.animations=[];var u=e.spacingFactor&&1!==e.spacingFactor,l=function(){if(!u)return null;for(var t=de(),e=0;e<r.length;e++){var n=r[e],i=s(n,e);ge(t,i.x,i.y)}return t}(),c=q((function(t,n){var r,i,o,a,c,h=s(t,n);return u&&(r=Math.abs(e.spacingFactor),o=h,a=(i=l).x1+i.w/2,c=i.y1+i.h/2,h={x:a+(o.x-a)*r,y:c+(o.y-c)*r}),null!=e.transform&&(h=e.transform(t,h)),h}),a);if(e.animate){for(var h=0;h<r.length;h++){var p=r[h],f=c(p,h);if(null==e.animateFilter||e.animateFilter(p,h)){var d=p.animation({position:f,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(d)}else p.position(f)}if(e.fit){var g=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(g)}else if(void 0!==e.zoom&&void 0!==e.pan){var y=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(y)}t.animations.forEach((function(t){return t.play()})),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),tr.all(t.animations.map((function(t){return t.promise()}))).then((function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})}))}else r.positions(c),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(Q({},t,{eles:this}))}};function Oi(t,e,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[t])?r:r=o[t]=e(n)}function Pi(t,e){return t=dt(t),function(n){return Oi(t,e,n)}}function Ri(t,e){t=dt(t);var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return Oi(t,n,e)}}Mi.createLayout=Mi.makeLayout=Mi.layout;var ki={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(t){return t._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach((function(t){n(t),t.connectedEdges().forEach(n)})),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),e.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=n;return t?r.emitAndNotify("style"):r.emit("style"),n.forEach((function(t){return t._private.styleDirty=!0})),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var e=0;e<this.length;e++){var n=this[e];n._private.styleDirty&&(n._private.styleDirty=!1,t.style().apply(n))}},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(D(t)){var i=t;r.applyBypass(this,i,!1),this.emitAndNotify("style")}else if(S(t)){if(void 0===e){var o=this[0];return o?r.getStylePropertyValue(o,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var a=this[0];return a?r.getRawStyle(a):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style(),r=this;if(void 0===t)for(var i=0;i<r.length;i++){var o=r[i];n.removeAllBypasses(o,!1)}else{t=t.split(/\s+/);for(var a=0;a<r.length;a++){var s=r[a];n.removeBypasses(s,t,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++)i*=o[a].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Fi(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function Bi(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],o=t.hasCompoundNodes();if(i){var a=i._private;if(!e(i))return!1;if(i.isNode())return!o||Fi(i,r);var s=a.source,u=a.target;return n(s)&&(!o||Fi(s,n))&&(s===u||n(u)&&(!o||Fi(u,n)))}}}var zi=Pi("eleTakesUpSpace",(function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())}));ki.takesUpSpace=Ri("takesUpSpace",Bi({ok:zi}));var Gi=Pi("eleInteractive",(function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&zi(t)})),qi=Pi("parentInteractive",(function(t){return"visible"===t.pstyle("visibility").value&&zi(t)}));ki.interactive=Ri("interactive",Bi({ok:Gi,parentOk:qi,edgeOkViaNode:zi})),ki.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Vi=Pi("eleVisible",(function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&zi(t)})),Ui=zi;ki.visible=Ri("visible",Bi({ok:Vi,edgeOkViaNode:Ui})),ki.hidden=function(){var t=this[0];if(t)return!t.visible()},ki.isBundledBezier=Ri("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()})),ki.bypass=ki.css=ki.style,ki.renderedCss=ki.renderedStyle,ki.removeBypass=ki.removeCss=ki.removeStyle,ki.pstyle=ki.parsedStyle;var ji={};function Yi(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length&&A(e[0])){var o=e[0];this.on(t.event,o)}else if(0===e.length||1===e.length&&L(e[0])){for(var a=1===e.length?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(u);if(void 0!==h&&(l=h,!h))return this}l&&(u._private[t.field]=t.value,c&&n.push(u))}var p=this.spawn(n);p.updateStyle(),p.emit(t.event),a&&p.emit(a)}return this}}function Xi(t){ji[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},ji[t.on]=Yi({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),ji[t.off]=Yi({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Xi({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Xi({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Xi({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Xi({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),ji.deselect=ji.unselect,ji.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Xi({field:"active",on:"activate",off:"unactivate"}),Xi({field:"pannable",on:"panify",off:"unpanify"}),ji.inactive=function(){var t=this[0];if(t)return!t._private.active};var Hi={},Wi=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var u=a[s],l=u.source(),c=u.target();if(t.noIncomingEdges&&c===i&&l!==i||t.noOutgoingEdges&&l===i&&c!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,!0).filter(e)}},$i=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target();t.outgoing&&u===i?(n.push(s),n.push(l)):t.incoming&&l===i&&(n.push(s),n.push(u))}}return this.spawn(n,!0).filter(e)}},Zi=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return this.spawn(r,!0).filter(e)}};function Ki(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,!0).filter(e)}}function Qi(t){return function(e){var n=[],r=this._private.cy,i=t||{};S(e)&&(e=r.$(e));for(var o=0;o<e.length;o++)for(var a=e[o]._private.edges,s=0;s<a.length;s++){var u=a[s],l=u._private.data,c=this.hasElementWithId(l.source)&&e.hasElementWithId(l.target),h=e.hasElementWithId(l.source)&&this.hasElementWithId(l.target);if(c||h){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!h)continue}n.push(u)}}return this.spawn(n,!0)}}function Ji(t){return t=Q({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,u=s._private.data.id,l=a.data.target,c=s._private.edges,h=0;h<c.length;h++){var p=c[h],f=p._private.data,d=f.target,g=f.source,y=d===l&&g===u,v=u===d&&l===g;(i.codirected&&y||!i.codirected&&(y||v))&&n.push(p)}return this.spawn(n,!0).filter(e)}}Hi.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},Q(Hi,{roots:Wi({noIncomingEdges:!0}),leaves:Wi({noOutgoingEdges:!0}),outgoers:Ar($i({outgoing:!0}),"outgoers"),successors:Zi({outgoing:!0}),incomers:Ar($i({incoming:!0}),"incomers"),predecessors:Zi({incoming:!0})}),Q(Hi,{neighborhood:Ar((function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)}),"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),Hi.neighbourhood=Hi.neighborhood,Hi.closedNeighbourhood=Hi.closedNeighborhood,Hi.openNeighbourhood=Hi.openNeighborhood,Q(Hi,{source:Ar((function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e}),"source"),target:Ar((function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e}),"target"),sources:Ki({attr:"source"}),targets:Ki({attr:"target"})}),Q(Hi,{edgesWith:Ar(Qi(),"edgesWith"),edgesTo:Ar(Qi({thisIsSrc:!0}),"edgesTo")}),Q(Hi,{connectedEdges:Ar((function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++){var a=i[o];e.push(a)}}return this.spawn(e,!0).filter(t)}),"connectedEdges"),connectedNodes:Ar((function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,!0).filter(t)}),"connectedNodes"),parallelEdges:Ar(Ji(),"parallelEdges"),codirectedEdges:Ar(Ji({codirected:!0}),"codirectedEdges")}),Q(Hi,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),o=[];null!=t&&i.empty()&&(i=t.sources());var a=function(t,e){r.merge(t),i.unmerge(t),e.merge(t)};if(i.empty())return e.spawn();var s=function(){var t=n.collection();o.push(t);var r=i[0];a(r,t),e.bfs({directed:!1,roots:r,visit:function(e){return a(e,t)}}),t.forEach((function(n){n.connectedEdges().forEach((function(n){e.has(n)&&t.has(n.source())&&t.has(n.target())&&t.merge(n)}))}))};do{s()}while(i.length>0);return o},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),Hi.componentsOf=Hi.components;var to=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t){var i=new Ft,o=!1;if(e){if(e.length>0&&D(e[0])&&!R(e[0])){o=!0;for(var a=[],s=new zt,u=0,l=e.length;u<l;u++){var c=e[u];null==c.data&&(c.data={});var h=c.data;if(null==h.id)h.id=At();else if(t.hasElementWithId(h.id)||s.has(h.id))continue;var p=new Gt(t,c,!1);a.push(p),s.add(h.id)}e=a}}else e=[];this.length=0;for(var f=0,d=e.length;f<d;f++){var g=e[f][0];if(null!=g){var y=g._private.data.id;n&&i.has(y)||(n&&i.set(y,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(t){this.lazyMap=t},rebuildMap:function(){for(var t=this.lazyMap=new Ft,e=this.eles,n=0;n<e.length;n++){var r=e[n];t.set(r.id(),{index:n,ele:r})}}},n&&(this._private.map=i),o&&!r&&this.restore()}else Nt("A collection must have a reference to the core")},eo=Gt.prototype=to.prototype=Object.create(Array.prototype);eo.instanceString=function(){return"collection"},eo.spawn=function(t,e){return new to(this.cy(),t,e)},eo.spawnSelf=function(){return this.spawn(this)},eo.cy=function(){return this._private.cy},eo.renderer=function(){return this._private.cy.renderer()},eo.element=function(){return this[0]},eo.collection=function(){return k(this)?this:new to(this._private.cy,[this])},eo.unique=function(){return new to(this._private.cy,this,!0)},eo.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)},eo.getElementById=function(t){t=""+t;var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new to(e)},eo.$id=eo.getElementById,eo.poolIndex=function(){var t=this._private.cy._private.elements,e=this[0]._private.data.id;return t._private.map.get(e).index},eo.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index},eo.indexOfId=function(t){return t=""+t,this._private.map.get(t).index},eo.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(D(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,u=t.data.target;null!=s&&s!=i.source&&(a.source=""+s,o=!0),null!=u&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l="parent"in t.data,c=t.data.parent;!l||null==c&&null==i.parent||c==i.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var h=function(n,i,o){var a=t[n];null!=a&&a!==r[n]&&(a?e[i]():e[o]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var p={data:St(r.data),position:St(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:""},f=0;return r.classes.forEach((function(t){return p.classes+=0==f++?t:" "+t})),p}}},eo.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},eo.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new Gt(t,r,!1);e.push(i)}return new to(t,e)},eo.copy=eo.clone,eo.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,o=i.cy(),a=o._private,s=[],u=[],l=0,c=i.length;l<c;l++){var h=i[l];r&&!h.removed()||(h.isNode()?s.push(h):u.push(h))}t=s.concat(u);var p=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var f=t[e],d=f._private,g=d.data;if(f.clearTraversalCache(),r||d.removed)if(void 0===g.id)g.id=At();else if(M(g.id))g.id=""+g.id;else{if(z(g.id)||!S(g.id)){Nt("Can not create element with invalid string ID `"+g.id+"`"),p();continue}if(o.hasElementWithId(g.id)){Nt("Can not create second element with ID `"+g.id+"`"),p();continue}}var y=g.id;if(f.isNode()){var v=d.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(f.isEdge()){for(var m=f,_=["source","target"],b=_.length,x=!1,E=0;E<b;E++){var w=_[E],C=g[w];M(C)&&(C=g[w]=""+g[w]),null==C||""===C?(Nt("Can not create edge `"+y+"` with unspecified "+w),x=!0):o.hasElementWithId(C)||(Nt("Can not create edge `"+y+"` with nonexistant "+w+" `"+C+"`"),x=!0)}if(x){p();continue}var N=o.getElementById(g.source),I=o.getElementById(g.target);N.same(I)?N._private.edges.push(m):(N._private.edges.push(m),I._private.edges.push(m)),m._private.source=N,m._private.target=I}d.map=new Ft,d.map.set(y,{ele:f,index:0}),d.removed=!1,r&&o.addToPool(f)}for(var T=0;T<s.length;T++){var A=s[T],L=A._private.data;M(L.parent)&&(L.parent=""+L.parent);var D=L.parent;if(null!=D||A._private.parent){var O=A._private.parent?o.collection().merge(A._private.parent):o.getElementById(D);if(O.empty())L.parent=void 0;else if(O[0].removed())Tt("Node added with missing parent, reference to parent removed"),L.parent=void 0,A._private.parent=null;else{for(var P=!1,R=O;!R.empty();){if(A.same(R)){P=!0,L.parent=void 0;break}R=R.parent()}P||(O[0]._private.children.push(A),A._private.parent=O[0],a.hasCompoundNodes=!0)}}}if(t.length>0){for(var k=t.length===i.length?i:new to(o,t),F=0;F<k.length;F++){var B=k[F];B.isNode()||(B.parallelEdges().clearTraversalCache(),B.source().clearTraversalCache(),B.target().clearTraversalCache())}(a.hasCompoundNodes?o.collection().merge(k).merge(k.connectedNodes()).merge(k.parent()):k).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?k.emitAndNotify("add"):r&&k.emit("add")}return i},eo.removed=function(){var t=this[0];return t&&t._private.removed},eo.inside=function(){var t=this[0];return t&&!t._private.removed},eo.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},o=n._private.cy;function a(t){var n=i[t.id()];e&&t.removed()||n||(i[t.id()]=!0,t.isNode()?(r.push(t),function(t){for(var e=t._private.edges,n=0;n<e.length;n++)a(e[n])}(t),function(t){for(var e=t._private.children,n=0;n<e.length;n++)a(e[n])}(t)):r.unshift(t))}for(var s=0,u=n.length;s<u;s++)a(n[s]);function l(t,e){var n=t._private.edges;Ot(n,e),t.clearTraversalCache()}function c(t){t.clearTraversalCache()}var h=[];function p(t,e){e=e[0];var n=(t=t[0])._private.children,r=t.id();Ot(n,e),e._private.parent=null,h.ids[r]||(h.ids[r]=!0,h.push(t))}h.ids={},n.dirtyCompoundBoundsCache(),e&&o.removeFromPool(r);for(var f=0;f<r.length;f++){var d=r[f];if(d.isEdge()){var g=d.source()[0],y=d.target()[0];l(g,d),l(y,d);for(var v=d.parallelEdges(),m=0;m<v.length;m++){var _=v[m];c(_),_.isBundledBezier()&&_.dirtyBoundingBoxCache()}}else{var b=d.parent();0!==b.length&&p(b,d)}e&&(d._private.removed=!0)}var x=o._private.elements;o._private.hasCompoundNodes=!1;for(var E=0;E<x.length;E++)if(x[E].isParent()){o._private.hasCompoundNodes=!0;break}var w=new to(this.cy(),r);w.size()>0&&(t?w.emitAndNotify("remove"):e&&w.emit("remove"));for(var C=0;C<h.length;C++){var N=h[C];e&&N.removed()||N.updateStyle()}return w},eo.move=function(t){var e=this._private.cy,n=this,r=!1,i=!1,o=function(t){return null==t?t:""+t};if(void 0!==t.source||void 0!==t.target){var a=o(t.source),s=o(t.target),u=null!=a&&e.hasElementWithId(a),l=null!=s&&e.hasElementWithId(s);(u||l)&&(e.batch((function(){n.remove(r,i),n.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var e=n[t],o=e._private.data;e.isEdge()&&(u&&(o.source=a),l&&(o.target=s))}n.restore(r,i)})),n.emitAndNotify("move"))}else if(void 0!==t.parent){var c=o(t.parent);if(null===c||e.hasElementWithId(c)){var h=null===c?void 0:c;e.batch((function(){var t=n.remove(r,i);t.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var o=n[e],a=o._private.data;o.isNode()&&(a.parent=h)}t.restore(r,i)})),n.emitAndNotify("move")}}return this},[Hn,sr,ur,Ir,Lr,Fr,Br,hi,Ni,Ii,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},Li,Mi,ki,ji,Hi].forEach((function(t){Q(eo,t)}));var no={add:function(t){var e,n=this;if(P(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],o=0;o<r.length;o++){var a=r[o];i.push(a.json())}e=new to(n,i)}}else if(L(t))e=new to(n,t);else if(D(t)&&(L(t.nodes)||L(t.edges))){for(var s=t,u=[],l=["nodes","edges"],c=0,h=l.length;c<h;c++){var p=l[c],f=s[p];if(L(f))for(var d=0,g=f.length;d<g;d++){var y=Q({group:p},f[d]);u.push(y)}}e=new to(n,u)}else e=new Gt(n,t).collection();return e},remove:function(t){if(P(t));else if(S(t)){var e=t;t=this.$(e)}return t.remove()}};function ro(t,e,n,r){var i=.1,o="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var a=0;a<4;++a)if("number"!=typeof arguments[a]||isNaN(arguments[a])||!isFinite(arguments[a]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var s=o?new Float32Array(11):new Array(11);function u(t,e){return 1-3*e+3*t}function l(t,e){return 3*e-6*t}function c(t){return 3*t}function h(t,e,n){return((u(e,n)*t+l(e,n))*t+c(e))*t}function p(t,e,n){return 3*u(e,n)*t*t+2*l(e,n)*t+c(e)}var f=!1;var d=function(o){return f||(f=!0,t===e&&n===r||function(){for(var e=0;e<11;++e)s[e]=h(e*i,t,n)}()),t===e&&n===r?o:0===o?0:1===o?1:h(function(e){for(var r=0,o=1;10!==o&&s[o]<=e;++o)r+=i;--o;var a=r+(e-s[o])/(s[o+1]-s[o])*i,u=p(a,t,n);return u>=.001?function(e,r){for(var i=0;i<4;++i){var o=p(r,t,n);if(0===o)return r;r-=(h(r,t,n)-e)/o}return r}(e,a):0===u?a:function(e,r,i){var o,a,s=0;do{(o=h(a=r+(i-r)/2,t,n)-e)>0?i=a:r=a}while(Math.abs(o)>1e-7&&++s<10);return a}(e,r,r+i)}(o),e,r)};d.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var g="generateBezier("+[t,e,n,r]+")";return d.toString=function(){return g},d}var io=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function t(e,r,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0,h=1e-4;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,u.tension=e,u.friction=r,a=(o=null!==i)?(c=t(e,r))/i*.016:.016;s=n(s||u,a),l.push(1+s.x),c+=16,Math.abs(s.x)>h&&Math.abs(s.v)>h;);return o?function(t){return l[t*(l.length-1)|0]}:c}}(),oo=function(t,e,n,r){var i=ro(t,e,n,r);return function(t,e,n){return t+(e-t)*i(n)}},ao={linear:function(t,e,n){return t+(e-t)*n},ease:oo(.25,.1,.25,1),"ease-in":oo(.42,0,1,1),"ease-out":oo(0,0,.58,1),"ease-in-out":oo(.42,0,.58,1),"ease-in-sine":oo(.47,0,.745,.715),"ease-out-sine":oo(.39,.575,.565,1),"ease-in-out-sine":oo(.445,.05,.55,.95),"ease-in-quad":oo(.55,.085,.68,.53),"ease-out-quad":oo(.25,.46,.45,.94),"ease-in-out-quad":oo(.455,.03,.515,.955),"ease-in-cubic":oo(.55,.055,.675,.19),"ease-out-cubic":oo(.215,.61,.355,1),"ease-in-out-cubic":oo(.645,.045,.355,1),"ease-in-quart":oo(.895,.03,.685,.22),"ease-out-quart":oo(.165,.84,.44,1),"ease-in-out-quart":oo(.77,0,.175,1),"ease-in-quint":oo(.755,.05,.855,.06),"ease-out-quint":oo(.23,1,.32,1),"ease-in-out-quint":oo(.86,0,.07,1),"ease-in-expo":oo(.95,.05,.795,.035),"ease-out-expo":oo(.19,1,.22,1),"ease-in-out-expo":oo(1,0,0,1),"ease-in-circ":oo(.6,.04,.98,.335),"ease-out-circ":oo(.075,.82,.165,1),"ease-in-out-circ":oo(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return ao.linear;var r=io(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":oo};function so(t,e,n,r,i){if(1===r)return n;if(e===n)return n;var o=i(e,n,r);return null==t||((t.roundValue||t.color)&&(o=Math.round(o)),void 0!==t.min&&(o=Math.max(o,t.min)),void 0!==t.max&&(o=Math.min(o,t.max))),o}function uo(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function lo(t,e,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var a=uo(t,i),s=uo(e,i);if(M(a)&&M(s))return so(o,a,s,n,r);if(L(a)&&L(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],h=s[l];if(null!=c&&null!=h){var p=so(o,c,h,n,r);u.push(p)}else u.push(h)}return u}}function co(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,u=a.startTime,l=(r?t:t.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=ao.linear;else{var c,h,p;c=S(s)?l.parse("transition-timing-function",s).value:s,S(c)?(h=c,p=[]):(h=c[1],p=c.slice(2).map((function(t){return+t}))),p.length>0?("spring"===h&&p.push(a.duration),a.easingImpl=ao[h].apply(null,p)):a.easingImpl=ao[h]}var f,d=a.easingImpl;if(f=0===a.duration?1:(n-u)/a.duration,a.applying&&(f=a.progress),f<0?f=0:f>1&&(f=1),null==a.delay){var g=a.startPosition,y=a.position;if(y&&i&&!t.locked()){var v={};ho(g.x,y.x)&&(v.x=lo(g.x,y.x,f,d)),ho(g.y,y.y)&&(v.y=lo(g.y,y.y,f,d)),t.position(v)}var m=a.startPan,_=a.pan,b=o.pan,x=null!=_&&r;x&&(ho(m.x,_.x)&&(b.x=lo(m.x,_.x,f,d)),ho(m.y,_.y)&&(b.y=lo(m.y,_.y,f,d)),t.emit("pan"));var E=a.startZoom,w=a.zoom,C=null!=w&&r;C&&(ho(E,w)&&(o.zoom=fe(o.minZoom,lo(E,w,f,d),o.maxZoom)),t.emit("zoom")),(x||C)&&t.emit("viewport");var N=a.style;if(N&&N.length>0&&i){for(var I=0;I<N.length;I++){var T=N[I],A=T.name,L=T,D=a.startStyle[A],M=lo(D,L,f,d,l.properties[D.name]);l.overrideBypass(t,A,M)}t.emit("style")}}return a.progress=f,f}function ho(t,e){return!!(null!=t&&null!=e&&(M(t)&&M(e)||t&&e))}function po(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function fo(t,e){var n=e._private.aniEles,r=[];function i(e,n){var i=e._private,o=i.animation.current,a=i.animation.queue,s=!1;if(0===o.length){var u=a.shift();u&&o.push(u)}for(var l=function(t){for(var e=t.length-1;e>=0;e--)(0,t[e])();t.splice(0,t.length)},c=o.length-1;c>=0;c--){var h=o[c],p=h._private;p.stopped?(o.splice(c,1),p.hooked=!1,p.playing=!1,p.started=!1,l(p.frames)):(p.playing||p.applying)&&(p.playing&&p.applying&&(p.applying=!1),p.started||po(0,h,t),co(e,h,t,n),p.applying&&(p.applying=!1),l(p.frames),null!=p.step&&p.step(t),h.completed()&&(o.splice(c,1),p.hooked=!1,p.playing=!1,p.started=!1,l(p.completes)),s=!0)}return n||0!==o.length||0!==a.length||r.push(e),s}for(var o=!1,a=0;a<n.length;a++){var s=i(n[a]);o=o||s}var u=i(e,!0);(o||u)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var go={animate:ar.animate(),animation:ar.animation(),animated:ar.animated(),clearQueue:ar.clearQueue(),delay:ar.delay(),delayAnimation:ar.delayAnimation(),stop:ar.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender((function(e,n){fo(n,t)}),e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&ot((function(n){fo(n,t),e()}))}()}}},yo={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&R(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},vo=function(t){return S(t)?new Cr(t):t},mo={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new _i(yo,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,vo(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,vo(e),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,n){return this.emitter().one(t,vo(e),n),this},once:function(t,e,n){return this.emitter().one(t,vo(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};ar.eventAliasesOn(mo);var _o={png:function(t){return t=t||{},this._private.renderer.png(t)},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};_o.jpeg=_o.jpg;var bo={layout:function(t){var e=this;if(null!=t)if(null!=t.name){var n,r=t.name,i=e.extension("layout",r);if(null!=i)return n=S(t.eles)?e.$(t.eles):null!=t.eles?t.eles:e.$(),new i(Q({},t,{cy:e,eles:n}));Nt("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Nt("A `name` must be specified to make a layout");else Nt("Layout options must be specified to make a layout")}};bo.createLayout=bo.makeLayout=bo.layout;var xo={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach((function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)}))}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch((function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}}))}},Eo=Mt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),wo={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this,n=e.extension("renderer",t.name);if(null!=n){void 0!==t.wheelSensitivity&&Tt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=Eo(t);r.cy=e,e._private.renderer=new n(r),this.notify("init")}else Nt("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var t=this;t.notify("destroy");var e=t.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach((function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]}))},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};wo.invalidateDimensions=wo.resize;var Co={collection:function(t,e){return S(t)?this.$(t):P(t)?t.collection():L(t)?(e||(e={}),new to(this,t,e.unique,e.removed)):new to(this)},nodes:function(t){var e=this.$((function(t){return t.isNode()}));return t?e.filter(t):e},edges:function(t){var e=this.$((function(t){return t.isEdge()}));return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};Co.elements=Co.filter=Co.$;var No={},Io="t";No.apply=function(t){for(var e=this,n=e._private.cy.collection(),r=0;r<t.length;r++){var i=t[r],o=e.getContextMeta(i);if(!o.empty){var a=e.getContextStyle(o),s=e.applyContextStyle(o,a,i);i._private.appliedInitStyle?e.updateTransitions(i,s.diffProps):i._private.appliedInitStyle=!0,e.updateStyleHints(i)&&n.push(i)}}return n},No.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c=t[u]===Io,h=e[u]===Io,p=c!==h,f=l.mappedProperties.length>0;if(p||h&&f){var d=void 0;p&&f||p?d=l.properties:f&&(d=l.mappedProperties);for(var g=0;g<d.length;g++){for(var y=d[g],v=y.name,m=!1,_=u+1;_<n.length;_++){var b=n[_];if(e[_]===Io&&(m=null!=b.properties[y.name]))break}s[v]||m||(s[v]=!0,a.push(v))}}}return r[i]=a,a},No.getContextMeta=function(t){for(var e,n=this,r="",i=t._private.styleCxtKey||"",o=0;o<n.length;o++){var a=n[o];r+=a.selector&&a.selector.matches(t)?Io:"f"}return e=n.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:e,empty:0===e.length}},No.getContextStyle=function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var o=this[i];if(e[i]===Io)for(var a=0;a<o.properties.length;a++){var s=o.properties[a];r[s.name]=s}}return n[e]=r,r},No.applyContextStyle=function(t,e,n){for(var r=t.diffPropNames,i={},o=this.types,a=0;a<r.length;a++){var s=r[a],u=e[s],l=n.pstyle(s);if(!u){if(!l)continue;u=l.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(l!==u){if(u.mapped===o.fn&&null!=l&&null!=l.mapping&&l.mapping.value===u.value){var c=l.mapping;if((c.fnValue=u.value(n))===c.prevFnValue)continue}var h=i[s]={prev:l};this.applyParsedProperty(n,u),h.next=n.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},No.updateStyleHints=function(t){var e=t._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function(t,e,r){return n.getPropertiesHash(t,e,r)},a=e.styleKey;if(t.removed())return!1;var s="nodes"===e.group,u=t._private.style;r=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[st,ut]}for(var h,p=function(t,n){return e.styleKeys[n][0]=ct(t,e.styleKeys[n][0])},f=function(t,n){return e.styleKeys[n][1]=ht(t,e.styleKeys[n][1])},d=function(t,e){p(t,e),f(t,e)},g=function(t,e){for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);p(r,e),f(r,e)}},y=0;y<r.length;y++){var v=r[y],m=u[v];if(null!=m){var _=this.properties[v],b=_.type,x=_.groupKey,E=void 0;null!=_.hashOverride?E=_.hashOverride(t,m):null!=m.pfValue&&(E=m.pfValue);var w=null==_.enums?m.value:null,C=null!=E,N=C||null!=w,I=m.units;b.number&&N&&!b.multiple?(d(-128<(h=C?E:w)&&h<128&&Math.floor(h)!==h?2e9-(1024*h|0):h,x),C||null==I||g(I,x)):g(m.strValue,x)}}for(var T=[st,ut],S=0;S<i.length;S++){var A=i[S],L=e.styleKeys[A];T[0]=ct(L[0],T[0]),T[1]=ht(L[1],T[1])}e.styleKey=2097152*T[0]+T[1];var D=e.styleKeys;e.labelDimsKey=pt(D.labelDimensions);var M=o(t,["label"],D.labelDimensions);if(e.labelKey=pt(M),e.labelStyleKey=pt(ft(D.commonLabel,M)),!s){var O=o(t,["source-label"],D.labelDimensions);e.sourceLabelKey=pt(O),e.sourceLabelStyleKey=pt(ft(D.commonLabel,O));var P=o(t,["target-label"],D.labelDimensions);e.targetLabelKey=pt(P),e.targetLabelStyleKey=pt(ft(D.commonLabel,P))}if(s){var R=e.styleKeys,k=R.nodeBody,F=R.nodeBorder,B=R.backgroundImage,z=R.compound,G=R.pie,q=[k,F,B,z,G].filter((function(t){return null!=t})).reduce(ft,[st,ut]);e.nodeKey=pt(q),e.hasPie=null!=G&&G[0]!==st&&G[1]!==ut}return a!==e.styleKey},No.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},No.applyParsedProperty=function(t,e){var n,r=this,i=e,o=t._private.style,a=r.types,s=r.properties[i.name].type,u=i.bypass,l=o[i.name],c=l&&l.bypass,h=t._private,p="mapping",f=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},d=function(){var e=f(l),n=f(i);r.checkTriggers(t,i.name,e,n)};if(i&&"pie"===i.name.substr(0,3)&&Tt("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",u)),i.delete)return o[i.name]=void 0,d(),!0;if(i.deleteBypassed)return l?!!l.bypass&&(l.bypassed=void 0,d(),!0):(d(),!0);if(i.deleteBypass)return l?!!l.bypass&&(o[i.name]=l.bypassed,d(),!0):(d(),!0);var g=function(){Tt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:for(var y,v=i.field.split("."),m=h.data,_=0;_<v.length&&m;_++)m=m[v[_]];if(null==m)return g(),!1;if(!M(m))return Tt("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+m+"` for `"+t.id()+"` is non-numeric)"),!1;var b=i.fieldMax-i.fieldMin;if((y=0===b?0:(m-i.fieldMin)/b)<0?y=0:y>1&&(y=1),s.color){var x=i.valueMin[0],E=i.valueMax[0],w=i.valueMin[1],C=i.valueMax[1],N=i.valueMin[2],I=i.valueMax[2],T=null==i.valueMin[3]?1:i.valueMin[3],S=null==i.valueMax[3]?1:i.valueMax[3],A=[Math.round(x+(E-x)*y),Math.round(w+(C-w)*y),Math.round(N+(I-N)*y),Math.round(T+(S-T)*y)];n={bypass:i.bypass,name:i.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else{if(!s.number)return!1;var L=i.valueMin+(i.valueMax-i.valueMin)*y;n=this.parse(i.name,L,i.bypass,p)}if(!n)return g(),!1;n.mapping=i,i=n;break;case a.data:for(var D=i.field.split("."),O=h.data,P=0;P<D.length&&O;P++)O=O[D[P]];if(null!=O&&(n=this.parse(i.name,O,i.bypass,p)),!n)return g(),!1;n.mapping=i,i=n;break;case a.fn:var R=i.value,k=null!=i.fnValue?i.fnValue:R(t);if(i.prevFnValue=k,null==k)return Tt("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,k,i.bypass,p)))return Tt("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=St(i),i=n;break;case void 0:break;default:return!1}return u?(i.bypassed=c?l.bypassed:l,o[i.name]=i):c?l.bypassed=i:o[i.name]=i,d(),!0},No.cleanElements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];null!=u&&(u.bypass?u.bypassed=null:i[s]=null)}else r._private.style={}}},No.update=function(){this._private.cy.mutableElements().updateStyle()},No.updateTransitions=function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],h=t.pstyle(c),p=e[c];if(p){var f=p.prev,d=null!=p.next?p.next:h,g=!1,y=void 0,v=1e-6;f&&(M(f.pfValue)&&M(d.pfValue)?(g=d.pfValue-f.pfValue,y=f.pfValue+v*g):M(f.value)&&M(d.value)?(g=d.value-f.value,y=f.value+v*g):L(f.value)&&L(d.value)&&(g=f.value[0]!==d.value[0]||f.value[1]!==d.value[1]||f.value[2]!==d.value[2],y=f.strValue),g&&(s[c]=d.strValue,this.applyBypass(t,c,y),u=!0))}}if(!u)return;r.transitioning=!0,new tr((function(e){a>0?t.delayAnimation(a).play().promise().then(e):e()})).then((function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1}))}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},No.checkTrigger=function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);null!=s&&s(n,r)&&o(a)},No.checkZOrderTrigger=function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,(function(t){return t.triggersZOrder}),(function(){i._private.cy.notify("zorder",t)}))},No.checkBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,(function(t){return t.triggersBounds}),(function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),!i.triggersBoundsOfParallelBeziers||("curve-style"!==e||"bezier"!==n&&"bezier"!==r)&&("display"!==e||"none"!==n&&"none"!==r)||t.parallelEdges().forEach((function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()}))}))},No.checkTriggers=function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)};var To={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var o=0;o<this.properties.length;o++){var a=this.properties[o].name,s=this.parse(a,n,!0);s&&i.push(s)}}else if(S(e)){var u=this.parse(e,n,!0);u&&i.push(u)}else{if(!D(e))return!1;var l=e;r=n;for(var c=Object.keys(l),h=0;h<c.length;h++){var p=c[h],f=l[p];if(void 0===f&&(f=l[U(p)]),void 0!==f){var d=this.parse(p,f,!0);d&&i.push(d)}}}if(0===i.length)return!1;for(var g=!1,y=0;y<t.length;y++){for(var v=t[y],m={},_=void 0,b=0;b<i.length;b++){var x=i[b];if(r){var E=v.pstyle(x.name);_=m[x.name]={prev:E}}g=this.applyParsedProperty(v,St(x))||g,r&&(_.next=v.pstyle(x.name))}g&&this.updateStyleHints(v),r&&this.updateTransitions(v,m,!0)}return g},overrideBypass:function(t,e,n){e=V(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),o.strValue=s?"rgb("+n.join(",")+")":u?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,l,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},a=0;a<e.length;a++){var s=e[a],u=this.properties[s],l=i.pstyle(u.name);if(l&&l.bypass){var c=this.parse(s,"",!0),h=o[u.name]={prev:l};this.applyParsedProperty(i,c),h.next=i.pstyle(u.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}}},So={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(x&&e&&x.getComputedStyle)return x.getComputedStyle(e).getPropertyValue(t)}},Ao={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){var n=this;if(t=t[0]){for(var r={},i=0;i<n.properties.length;i++){var o=n.properties[i],a=n.getStylePropertyValue(t,o.name,e);null!=a&&(r[o.name]=a,r[U(o.name)]=a)}return r}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,o=t.pstyle(r.name);if(o){var a=o.value,s=o.units,u=o.strValue;if(n&&i.number&&null!=a&&M(a)){var l=t.cy().zoom(),c=function(t){return t*l},h=function(t,e){return c(t)+e},p=L(a);return(p?s.every((function(t){return null!=t})):null!=s)?p?a.map((function(t,e){return h(t,s[e])})).join(" "):h(a,s):p?a.map((function(t){return S(t)?t:""+c(t)})).join(" "):""+c(a)}if(null!=u)return u}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,o=t.pstyle(i);void 0!==o&&(o=D(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(n[i]=o)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a],u=r[a]||r[V(a)],l=this.parse(u.name,s);l&&e.push(l)}return e},getNonDefaultPropertiesHash:function(t,e,n){var r,i,o,a,s,u,l=n.slice();for(s=0;s<e.length;s++)if(r=e[s],null!=(i=t.pstyle(r,!1)))if(null!=i.pfValue)l[0]=ct(a,l[0]),l[1]=ht(a,l[1]);else for(o=i.strValue,u=0;u<o.length;u++)a=o.charCodeAt(u),l[0]=ct(a,l[0]),l[1]=ht(a,l[1]);return l}};Ao.getPropertiesHash=Ao.getNonDefaultPropertiesHash;var Lo={appendFromJson:function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e},fromJson:function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}},Do={appendFromString:function(t){var e,n,r,i=this,o=""+t;function a(){o=o.length>e.length?o.substr(e.length):""}function s(){n=n.length>r.length?n.substr(r.length):""}for(o=o.replace(/[/][*](\s|.)+?[*][/]/g,"");!o.match(/^\s*$/);){var u=o.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){Tt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+o);break}e=u[0];var l=u[1];if("core"!==l&&new Cr(l).invalid)Tt("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),a();else{var c=u[2],h=!1;n=c;for(var p=[];!n.match(/^\s*$/);){var f=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!f){Tt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),h=!0;break}r=f[0];var d=f[1],g=f[2];this.properties[d]?i.parse(d,g)?(p.push({name:d,val:g}),s()):(Tt("Skipping property: Invalid property definition in: "+r),s()):(Tt("Skipping property: Invalid property name in: "+r),s())}if(h){a();break}i.selector(l);for(var y=0;y<p.length;y++){var v=p[y];i.css(v.name,v.val)}a()}}return i},fromString:function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e}},Mo={};!function(){var t=X,e=W,n=Z,r=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(r){var i=t+"|\\w+|"+e+"|"+n+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"},o=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Mo.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:r("data")},layoutData:{mapping:!0,regex:r("layoutData")},scratch:{mapping:!0,regex:r("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return S(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(t){var e=t.length;return 1===e||2===e||4===e}}};var a={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||0==t&&0!=e||0!=t&&0==e},any:function(t,e){return t!=e},emptyNonEmpty:function(t,e){var n=z(t),r=z(e);return n&&!r||!n&&r}},s=Mo.types,u=[{name:"label",type:s.text,triggersBounds:a.any,triggersZOrder:a.emptyNonEmpty},{name:"text-rotation",type:s.textRotation,triggersBounds:a.any},{name:"text-margin-x",type:s.bidirectionalSize,triggersBounds:a.any},{name:"text-margin-y",type:s.bidirectionalSize,triggersBounds:a.any}],l=[{name:"source-label",type:s.text,triggersBounds:a.any},{name:"source-text-rotation",type:s.textRotation,triggersBounds:a.any},{name:"source-text-margin-x",type:s.bidirectionalSize,triggersBounds:a.any},{name:"source-text-margin-y",type:s.bidirectionalSize,triggersBounds:a.any},{name:"source-text-offset",type:s.size,triggersBounds:a.any}],c=[{name:"target-label",type:s.text,triggersBounds:a.any},{name:"target-text-rotation",type:s.textRotation,triggersBounds:a.any},{name:"target-text-margin-x",type:s.bidirectionalSize,triggersBounds:a.any},{name:"target-text-margin-y",type:s.bidirectionalSize,triggersBounds:a.any},{name:"target-text-offset",type:s.size,triggersBounds:a.any}],h=[{name:"font-family",type:s.fontFamily,triggersBounds:a.any},{name:"font-style",type:s.fontStyle,triggersBounds:a.any},{name:"font-weight",type:s.fontWeight,triggersBounds:a.any},{name:"font-size",type:s.size,triggersBounds:a.any},{name:"text-transform",type:s.textTransform,triggersBounds:a.any},{name:"text-wrap",type:s.textWrap,triggersBounds:a.any},{name:"text-overflow-wrap",type:s.textOverflowWrap,triggersBounds:a.any},{name:"text-max-width",type:s.size,triggersBounds:a.any},{name:"text-outline-width",type:s.size,triggersBounds:a.any},{name:"line-height",type:s.positiveNumber,triggersBounds:a.any}],p=[{name:"text-valign",type:s.valign,triggersBounds:a.any},{name:"text-halign",type:s.halign,triggersBounds:a.any},{name:"color",type:s.color},{name:"text-outline-color",type:s.color},{name:"text-outline-opacity",type:s.zeroOneNumber},{name:"text-background-color",type:s.color},{name:"text-background-opacity",type:s.zeroOneNumber},{name:"text-background-padding",type:s.size,triggersBounds:a.any},{name:"text-border-opacity",type:s.zeroOneNumber},{name:"text-border-color",type:s.color},{name:"text-border-width",type:s.size,triggersBounds:a.any},{name:"text-border-style",type:s.borderStyle,triggersBounds:a.any},{name:"text-background-shape",type:s.textBackgroundShape,triggersBounds:a.any},{name:"text-justification",type:s.justification}],f=[{name:"events",type:s.bool},{name:"text-events",type:s.bool}],d=[{name:"display",type:s.display,triggersZOrder:a.any,triggersBounds:a.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:s.visibility,triggersZOrder:a.any},{name:"opacity",type:s.zeroOneNumber,triggersZOrder:a.zeroNonZero},{name:"text-opacity",type:s.zeroOneNumber},{name:"min-zoomed-font-size",type:s.size},{name:"z-compound-depth",type:s.zCompoundDepth,triggersZOrder:a.any},{name:"z-index-compare",type:s.zIndexCompare,triggersZOrder:a.any},{name:"z-index",type:s.nonNegativeInt,triggersZOrder:a.any}],g=[{name:"overlay-padding",type:s.size,triggersBounds:a.any},{name:"overlay-color",type:s.color},{name:"overlay-opacity",type:s.zeroOneNumber,triggersBounds:a.zeroNonZero},{name:"overlay-shape",type:s.overlayShape,triggersBounds:a.any}],y=[{name:"underlay-padding",type:s.size,triggersBounds:a.any},{name:"underlay-color",type:s.color},{name:"underlay-opacity",type:s.zeroOneNumber,triggersBounds:a.zeroNonZero},{name:"underlay-shape",type:s.overlayShape,triggersBounds:a.any}],v=[{name:"transition-property",type:s.propList},{name:"transition-duration",type:s.time},{name:"transition-delay",type:s.time},{name:"transition-timing-function",type:s.easing}],m=function(t,e){return"label"===e.value?-t.poolIndex():e.pfValue},_=[{name:"height",type:s.nodeSize,triggersBounds:a.any,hashOverride:m},{name:"width",type:s.nodeSize,triggersBounds:a.any,hashOverride:m},{name:"shape",type:s.nodeShape,triggersBounds:a.any},{name:"shape-polygon-points",type:s.polygonPointList,triggersBounds:a.any},{name:"background-color",type:s.color},{name:"background-fill",type:s.fill},{name:"background-opacity",type:s.zeroOneNumber},{name:"background-blacken",type:s.nOneOneNumber},{name:"background-gradient-stop-colors",type:s.colors},{name:"background-gradient-stop-positions",type:s.percentages},{name:"background-gradient-direction",type:s.gradientDirection},{name:"padding",type:s.sizeMaybePercent,triggersBounds:a.any},{name:"padding-relative-to",type:s.paddingRelativeTo,triggersBounds:a.any},{name:"bounds-expansion",type:s.boundsExpansion,triggersBounds:a.any}],b=[{name:"border-color",type:s.color},{name:"border-opacity",type:s.zeroOneNumber},{name:"border-width",type:s.size,triggersBounds:a.any},{name:"border-style",type:s.borderStyle}],x=[{name:"background-image",type:s.urls},{name:"background-image-crossorigin",type:s.bgCrossOrigin},{name:"background-image-opacity",type:s.zeroOneNumbers},{name:"background-image-containment",type:s.bgContainment},{name:"background-image-smoothing",type:s.bools},{name:"background-position-x",type:s.bgPos},{name:"background-position-y",type:s.bgPos},{name:"background-width-relative-to",type:s.bgRelativeTo},{name:"background-height-relative-to",type:s.bgRelativeTo},{name:"background-repeat",type:s.bgRepeat},{name:"background-fit",type:s.bgFit},{name:"background-clip",type:s.bgClip},{name:"background-width",type:s.bgWH},{name:"background-height",type:s.bgWH},{name:"background-offset-x",type:s.bgPos},{name:"background-offset-y",type:s.bgPos}],E=[{name:"position",type:s.position,triggersBounds:a.any},{name:"compound-sizing-wrt-labels",type:s.compoundIncludeLabels,triggersBounds:a.any},{name:"min-width",type:s.size,triggersBounds:a.any},{name:"min-width-bias-left",type:s.sizeMaybePercent,triggersBounds:a.any},{name:"min-width-bias-right",type:s.sizeMaybePercent,triggersBounds:a.any},{name:"min-height",type:s.size,triggersBounds:a.any},{name:"min-height-bias-top",type:s.sizeMaybePercent,triggersBounds:a.any},{name:"min-height-bias-bottom",type:s.sizeMaybePercent,triggersBounds:a.any}],w=[{name:"line-style",type:s.lineStyle},{name:"line-color",type:s.color},{name:"line-fill",type:s.fill},{name:"line-cap",type:s.lineCap},{name:"line-opacity",type:s.zeroOneNumber},{name:"line-dash-pattern",type:s.numbers},{name:"line-dash-offset",type:s.number},{name:"line-gradient-stop-colors",type:s.colors},{name:"line-gradient-stop-positions",type:s.percentages},{name:"curve-style",type:s.curveStyle,triggersBounds:a.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:s.zeroOneNumber,triggersBounds:a.any},{name:"source-endpoint",type:s.edgeEndpoint,triggersBounds:a.any},{name:"target-endpoint",type:s.edgeEndpoint,triggersBounds:a.any},{name:"control-point-step-size",type:s.size,triggersBounds:a.any},{name:"control-point-distances",type:s.bidirectionalSizes,triggersBounds:a.any},{name:"control-point-weights",type:s.numbers,triggersBounds:a.any},{name:"segment-distances",type:s.bidirectionalSizes,triggersBounds:a.any},{name:"segment-weights",type:s.numbers,triggersBounds:a.any},{name:"taxi-turn",type:s.bidirectionalSizeMaybePercent,triggersBounds:a.any},{name:"taxi-turn-min-distance",type:s.size,triggersBounds:a.any},{name:"taxi-direction",type:s.axisDirection,triggersBounds:a.any},{name:"edge-distances",type:s.edgeDistances,triggersBounds:a.any},{name:"arrow-scale",type:s.positiveNumber,triggersBounds:a.any},{name:"loop-direction",type:s.angle,triggersBounds:a.any},{name:"loop-sweep",type:s.angle,triggersBounds:a.any},{name:"source-distance-from-node",type:s.size,triggersBounds:a.any},{name:"target-distance-from-node",type:s.size,triggersBounds:a.any}],C=[{name:"ghost",type:s.bool,triggersBounds:a.any},{name:"ghost-offset-x",type:s.bidirectionalSize,triggersBounds:a.any},{name:"ghost-offset-y",type:s.bidirectionalSize,triggersBounds:a.any},{name:"ghost-opacity",type:s.zeroOneNumber}],N=[{name:"selection-box-color",type:s.color},{name:"selection-box-opacity",type:s.zeroOneNumber},{name:"selection-box-border-color",type:s.color},{name:"selection-box-border-width",type:s.size},{name:"active-bg-color",type:s.color},{name:"active-bg-opacity",type:s.zeroOneNumber},{name:"active-bg-size",type:s.size},{name:"outside-texture-bg-color",type:s.color},{name:"outside-texture-bg-opacity",type:s.zeroOneNumber}],I=[];Mo.pieBackgroundN=16,I.push({name:"pie-size",type:s.sizeMaybePercent});for(var T=1;T<=Mo.pieBackgroundN;T++)I.push({name:"pie-"+T+"-background-color",type:s.color}),I.push({name:"pie-"+T+"-background-size",type:s.percent}),I.push({name:"pie-"+T+"-background-opacity",type:s.zeroOneNumber});var A=[],L=Mo.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:s.arrowShape,triggersBounds:a.any},{name:"arrow-color",type:s.color},{name:"arrow-fill",type:s.arrowFill}].forEach((function(t){L.forEach((function(e){var n=e+"-"+t.name,r=t.type,i=t.triggersBounds;A.push({name:n,type:r,triggersBounds:i})}))}),{});var D=Mo.properties=[].concat(f,v,d,g,y,C,p,h,u,l,c,_,b,x,I,E,w,A,N),M=Mo.propertyGroups={behavior:f,transition:v,visibility:d,overlay:g,underlay:y,ghost:C,commonLabel:p,labelDimensions:h,mainLabel:u,sourceLabel:l,targetLabel:c,nodeBody:_,nodeBorder:b,backgroundImage:x,pie:I,compound:E,edgeLine:w,edgeArrow:A,core:N},O=Mo.propertyGroupNames={};(Mo.propertyGroupKeys=Object.keys(M)).forEach((function(t){O[t]=M[t].map((function(t){return t.name})),M[t].forEach((function(e){return e.groupKey=t}))}));var P=Mo.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Mo.propertyNames=D.map((function(t){return t.name}));for(var R=0;R<D.length;R++){var k=D[R];D[k.name]=k}for(var F=0;F<P.length;F++){var B=P[F],G=D[B.pointsTo],q={name:B.name,alias:!0,pointsTo:G};D.push(q),D[B.name]=q}}(),Mo.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},Mo.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=Q({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(t,e){for(var n=1;n<=Mo.pieBackgroundN;n++){var r=e.name.replace("{{i}}",n),i=e.value;t[r]=i}return t}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce((function(t,e){return Mo.arrowPrefixes.forEach((function(n){var r=n+"-"+e.name,i=e.value;t[r]=i})),t}),{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);n[o]=s}}return t.defaultProperties=n,t.defaultProperties},Mo.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Oo={parse:function(t,e,n,r){var i=this;if(A(e))return i.parseImplWarn(t,e,n,r);var o,a=gt(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),s=i.propCache=i.propCache||[];return(o=s[a])||(o=s[a]=i.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(o=St(o))&&(o.value=St(o.value)),o},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||Tt("The style property `".concat(t,": ").concat(e,"` is invalid")),!i||"width"!==i.name&&"height"!==i.name||"label"!==e||Tt("The style value of `label` is deprecated for `"+i.name+"`"),i}};Oo.parseImpl=function(t,e,n,r){var i=this;t=V(t);var o=i.properties[t],a=e,s=i.types;if(!o)return null;if(void 0===e)return null;o.alias&&(o=o.pointsTo,t=o.name);var u=S(e);u&&(e=e.trim());var l,c,h=o.type;if(!h)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(A(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:n};if(!u||r||e.length<7||"a"!==e[1]);else{if(e.length>=7&&"d"===e[0]&&(l=new RegExp(s.data.regex).exec(e))){if(n)return!1;var p=s.data;return{name:t,value:l,strValue:""+e,mapped:p,field:l[1],bypass:n}}if(e.length>=10&&"m"===e[0]&&(c=new RegExp(s.mapData.regex).exec(e))){if(n)return!1;if(h.multiple)return!1;var f=s.mapData;if(!h.color&&!h.number)return!1;var d=this.parse(t,c[4]);if(!d||d.mapped)return!1;var g=this.parse(t,c[5]);if(!g||g.mapped)return!1;if(d.pfValue===g.pfValue||d.strValue===g.strValue)return Tt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(h.color){var y=d.value,v=g.value;if(!(y[0]!==v[0]||y[1]!==v[1]||y[2]!==v[2]||y[3]!==v[3]&&(null!=y[3]&&1!==y[3]||null!=v[3]&&1!==v[3])))return!1}return{name:t,value:c,strValue:""+e,mapped:f,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:d.value,valueMax:g.value,bypass:n}}}if(h.multiple&&"multiple"!==r){var m;if(m=u?e.split(/\s+/):L(e)?e:[e],h.evenMultiple&&m.length%2!=0)return null;for(var _=[],b=[],x=[],E="",w=!1,C=0;C<m.length;C++){var N=i.parse(t,m[C],n,"multiple");w=w||S(N.value),_.push(N.value),x.push(null!=N.pfValue?N.pfValue:N.value),b.push(N.units),E+=(C>0?" ":"")+N.strValue}return h.validate&&!h.validate(_,b)?null:h.singleEnum&&w?1===_.length&&S(_[0])?{name:t,value:_[0],strValue:_[0],bypass:n}:null:{name:t,value:_,pfValue:x,strValue:E,bypass:n,units:b}}var I,T,D,O=function(){for(var r=0;r<h.enums.length;r++)if(h.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(h.number){var P,R="px";if(h.units&&(P=h.units),h.implicitUnits&&(R=h.implicitUnits),!h.unitless)if(u){var k="px|em"+(h.allowPercent?"|\\%":"");P&&(k=P);var F=e.match("^("+X+")("+k+")?$");F&&(e=F[1],P=F[2]||R)}else P&&!h.implicitUnits||(P=R);if(e=parseFloat(e),isNaN(e)&&void 0===h.enums)return null;if(isNaN(e)&&void 0!==h.enums)return e=a,O();if(h.integer&&(!M(T=e)||Math.floor(T)!==T))return null;if(void 0!==h.min&&(e<h.min||h.strictMin&&e===h.min)||void 0!==h.max&&(e>h.max||h.strictMax&&e===h.max))return null;var B={name:t,value:e,strValue:""+e+(P||""),units:P,bypass:n};return h.unitless||"px"!==P&&"em"!==P?B.pfValue=e:B.pfValue="px"!==P&&P?this.getEmSizeInPixels()*e:e,"ms"!==P&&"s"!==P||(B.pfValue="ms"===P?e:1e3*e),"deg"!==P&&"rad"!==P||(B.pfValue="rad"===P?e:(I=e,Math.PI*I/180)),"%"===P&&(B.pfValue=e/100),B}if(h.propList){var z=[],G=""+e;if("none"===G);else{for(var q=G.split(/\s*,\s*|\s+/),U=0;U<q.length;U++){var j=q[U].trim();i.properties[j]?z.push(j):Tt("`"+j+"` is not a valid property name")}if(0===z.length)return null}return{name:t,value:z,strValue:0===z.length?"none":z.join(" "),bypass:n}}if(h.color){var Y=(L(D=e)?D:null)||function(t){return J[t.toLowerCase()]}(D)||function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,r,i=16;return 4===t.length?(e=parseInt(t[1]+t[1],i),n=parseInt(t[2]+t[2],i),r=parseInt(t[3]+t[3],i)):(e=parseInt(t[1]+t[2],i),n=parseInt(t[3]+t[4],i),r=parseInt(t[5]+t[6],i)),[e,n,r]}}(D)||function(t){var e,n=new RegExp("^"+H+"$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var u=n[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;e.push(u)}}return e}(D)||function(t){var e,n,r,i,o,a,s,u;function l(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var c=new RegExp("^"+$+"$").exec(t);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)a=s=u=Math.round(255*i);else{var h=i<.5?i*(1+r):i+r-i*r,p=2*i-h;a=Math.round(255*l(p,h,n+1/3)),s=Math.round(255*l(p,h,n)),u=Math.round(255*l(p,h,n-1/3))}e=[a,s,u,o]}return e}(D);return Y?{name:t,value:Y,pfValue:Y,strValue:"rgb("+Y[0]+","+Y[1]+","+Y[2]+")",bypass:n}:null}if(h.regex||h.regexes){if(h.enums){var W=O();if(W)return W}for(var Z=h.regexes?h.regexes:[h.regex],K=0;K<Z.length;K++){var Q=new RegExp(Z[K]).exec(e);if(Q)return{name:t,value:h.singleRegexMatchValue?Q[1]:Q,strValue:""+e,bypass:n}}return null}return h.string?{name:t,value:""+e,strValue:""+e,bypass:n}:h.enums?O():null};var Po=function t(e){if(!(this instanceof t))return new t(e);F(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):Nt("A style must have a core reference")},Ro=Po.prototype;Ro.instanceString=function(){return"style"},Ro.clear=function(){for(var t=this._private,e=t.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0),e.forEach((function(t){var e=t[0]._private;e.styleDirty=!0,e.appliedInitStyle=!1})),this},Ro.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Ro.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},Ro.selector=function(t){var e="core"===t?null:new Cr(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},Ro.css=function(){var t=arguments;if(1===t.length)for(var e=t[0],n=0;n<this.properties.length;n++){var r=this.properties[n],i=e[r.name];void 0===i&&(i=e[U(r.name)]),void 0!==i&&this.cssRule(r.name,i)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},Ro.style=Ro.css,Ro.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},Ro.append=function(t){return B(t)?t.appendToStyle(this):L(t)?this.appendFromJson(t):S(t)&&this.appendFromString(t),this},Po.fromJson=function(t,e){var n=new Po(t);return n.fromJson(e),n},Po.fromString=function(t,e){return new Po(t).fromString(e)},[No,To,So,Ao,Lo,Do,Mo,Oo].forEach((function(t){Q(Ro,t)})),Po.types=Ro.types,Po.properties=Ro.properties,Po.propertyGroups=Ro.propertyGroups,Po.propertyGroupNames=Ro.propertyGroupNames,Po.propertyGroupKeys=Ro.propertyGroupKeys;var ko={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return B(t)?e.style=t.generateStyle(this):L(t)?e.style=Po.fromJson(this,t):S(t)?e.style=Po.fromString(this,t):e.style=Po(this),e.style},updateStyle:function(){this.mutableElements().updateStyle()}},Fo={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,o=arguments,a=this._private.pan;switch(o.length){case 0:return a;case 1:if(S(o[0]))return a[t=o[0]];if(D(o[0])){if(!this._private.panningEnabled)return this;r=(n=o[0]).x,i=n.y,M(r)&&(a.x=r),M(i)&&(a.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=o[1],"x"!==(t=o[0])&&"y"!==t||!M(e)||(a[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:D(t)&&(o=(i=s[0]).x,a=i.y,M(o)&&(u.x+=o),M(a)&&(u.y+=a),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!M(r)||(u[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){if(M(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n,r;if(S(t)){var i=t;t=this.$(i)}else if(D(r=t)&&M(r.x1)&&M(r.x2)&&M(r.y1)&&M(r.y2)){var o=t;(n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else P(t)||(t=this.mutableElements());if(!P(t)||!t.empty()){n=n||t.boundingBox();var a,s=this.width(),u=this.height();if(e=M(e)?e:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:a=(a=(a=Math.min((s-2*e)/n.w,(u-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:a)<this._private.minZoom?this._private.minZoom:a,pan:{x:(s-a*(n.x1+n.x2))/2,y:(u-a*(n.y1+n.y2))/2}}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return M(t)&&M(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):M(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:M(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,o=r.zoom,a=!1;if(r.zoomingEnabled||(a=!0),M(t)?n=t:D(t)&&(n=t.level,null!=t.position?e=ne(t.position,o,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(a=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,a||!M(n)||n===o||null!=e&&(!M(e.x)||!M(e.y)))return null;if(null!=e){var s=i,u=o,l=n;return{zoomed:!0,panned:!0,zoom:l,pan:{x:-l/u*(e.x-s.x)+e.x,y:-l/u*(e.y-s.y)+e.y}}}return{zoomed:!0,panned:!1,zoom:n,pan:i}},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!t)return this;if(M(t.zoom)||(n=!1),D(t.pan)||(r=!1),!n&&!r)return this;if(n){var s=t.zoom;s<e.minZoom||s>e.maxZoom||!e.zoomingEnabled?o=!0:(e.zoom=s,i.push("zoom"))}if(r&&(!o||!t.cancelOnFailedZoom)&&e.panningEnabled){var u=t.pan;M(u.x)&&(e.pan.x=u.x,a=!1),M(u.y)&&(e.pan.y=u.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(S(t)){var n=t;t=this.mutableElements().filter(n)}else P(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),o=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(o-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(t=x.getComputedStyle(r),e=function(e){return parseFloat(t.getPropertyValue(e))},{width:r.clientWidth-e("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};Fo.centre=Fo.center,Fo.autolockNodes=Fo.autolock,Fo.autoungrabifyNodes=Fo.autoungrabify;var Bo={data:ar.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ar.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ar.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ar.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Bo.attr=Bo.data,Bo.removeAttr=Bo.removeData;var zo=function(t){var e=this,n=(t=Q({},t)).container;n&&!O(n)&&O(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var o=void 0!==x&&void 0!==n&&!t.headless,a=t;a.layout=Q({name:o?"grid":"null"},a.layout),a.renderer=Q({name:o?"canvas":"null"},a.renderer);var s=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},u=this._private={container:n,ready:!1,options:a,elements:new to(this),listeners:[],aniEles:new to(this),data:a.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,a.zoomingEnabled),userZoomingEnabled:s(!0,a.userZoomingEnabled),panningEnabled:s(!0,a.panningEnabled),userPanningEnabled:s(!0,a.userPanningEnabled),boxSelectionEnabled:s(!0,a.boxSelectionEnabled),autolock:s(!1,a.autolock,a.autolockNodes),autoungrabify:s(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:s(!1,a.autounselectify),styleEnabled:void 0===a.styleEnabled?o:a.styleEnabled,zoom:M(a.zoom)?a.zoom:1,pan:{x:D(a.pan)&&M(a.pan.x)?a.pan.x:0,y:D(a.pan)&&M(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:s(250,a.multiClickDebounceTime)};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom}),u.styleEnabled&&e.setStyle([]);var l=Q({},a,a.renderer);e.initRenderer(l),function(t,e){if(t.some(G))return tr.all(t).then(e);e(t)}([a.style,a.elements],(function(t){var n=t[0],o=t[1];u.styleEnabled&&e.style().append(n),function(t,n,r){e.notifications(!1);var i=e.mutableElements();i.length>0&&i.remove(),null!=t&&(D(t)||L(t))&&e.add(t),e.one("layoutready",(function(t){e.notifications(!0),e.emit(t),e.one("load",n),e.emitAndNotify("load")})).one("layoutstop",(function(){e.one("done",r),e.emit("done")}));var o=Q({},e._private.options.layout);o.eles=e.elements(),e.layout(o).run()}(o,(function(){e.startAnimationLoop(),u.ready=!0,A(a.ready)&&e.on("ready",a.ready);for(var t=0;t<i.length;t++){var n=i[t];e.on("ready",n)}r&&(r.readies=[]),e.emit("ready")}),a.done)}))},Go=zo.prototype;Q(Go,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t){if(null!=t){var e=this,n=e._private,r=n.options;return!O(t)&&O(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),n.container=t,n.styleEnabled=!0,e.invalidateSize(),e.initRenderer(Q({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),e.startAnimationLoop(),e.style(r.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return St(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(D(t)){if(e.startBatch(),t.elements){var i={},o=function(t,n){for(var r=[],o=[],a=0;a<t.length;a++){var s=t[a];if(s.data.id){var u=""+s.data.id,l=e.getElementById(u);i[u]=!0,0!==l.length?o.push({ele:l,json:s}):n?(s.group=n,r.push(s)):r.push(s)}else Tt("cy.json() cannot handle elements without an ID attribute")}e.add(r);for(var c=0;c<o.length;c++){var h=o[c],p=h.ele,f=h.json;p.json(f)}};if(L(t.elements))o(t.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var u=a[s],l=t.elements[u];L(l)&&o(l,u)}var c=e.collection();r.filter((function(t){return!i[t.id()]})).forEach((function(t){t.isParent()?c.merge(t):t.remove()})),c.forEach((function(t){return t.children().move({parent:null})})),c.forEach((function(t){return function(t){return e.getElementById(t.id())}(t).remove()}))}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<h.length;p++){var f=h[p];null!=t[f]&&e[f](t[f])}return e.endBatch(),this}var d={};t?d.elements=this.elements().map((function(t){return t.json()})):(d.elements={},r.forEach((function(t){var e=t.group();d.elements[e]||(d.elements[e]=[]),d.elements[e].push(t.json())}))),this._private.styleEnabled&&(d.style=e.style().json()),d.data=St(e.data());var g=n.options;return d.zoomingEnabled=n.zoomingEnabled,d.userZoomingEnabled=n.userZoomingEnabled,d.zoom=n.zoom,d.minZoom=n.minZoom,d.maxZoom=n.maxZoom,d.panningEnabled=n.panningEnabled,d.userPanningEnabled=n.userPanningEnabled,d.pan=St(n.pan),d.boxSelectionEnabled=n.boxSelectionEnabled,d.renderer=St(g.renderer),d.hideEdgesOnViewport=g.hideEdgesOnViewport,d.textureOnViewport=g.textureOnViewport,d.wheelSensitivity=g.wheelSensitivity,d.motionBlur=g.motionBlur,d.multiClickDebounceTime=g.multiClickDebounceTime,d}}),Go.$id=Go.getElementById,[no,go,mo,_o,bo,xo,wo,Co,ko,Fo,Bo].forEach((function(t){Q(Go,t)}));var qo={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},Vo={maximal:!1,acyclic:!1},Uo=function(t){return t.scratch("breadthfirst")},jo=function(t,e){return t.scratch("breadthfirst",e)};function Yo(t){this.options=Q({},qo,Vo,t)}Yo.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().filter((function(t){return!t.isParent()})),a=i,s=n.directed,u=n.acyclic||n.maximal||n.maximalAdjustments>0,l=de(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(P(n.roots))t=n.roots;else if(L(n.roots)){for(var c=[],h=0;h<n.roots.length;h++){var p=n.roots[h],f=r.getElementById(p);c.push(f)}t=r.collection(c)}else if(S(n.roots))t=r.$(n.roots);else if(s)t=o.roots();else{var d=i.components();t=r.collection();for(var g=function(e){var n=d[e],r=n.maxDegree(!1),i=n.filter((function(t){return t.degree(!1)===r}));t=t.add(i)},y=0;y<d.length;y++)g(y)}var v=[],m={},_=function(t,e){null==v[e]&&(v[e]=[]);var n=v[e].length;v[e].push(t),jo(t,{index:n,depth:e})};a.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=t[0],a=o.id();_(o,i),m[a]=!0}});for(var b=[],x=0;x<o.length;x++){var E=o[x];m[E.id()]||b.push(E)}var w=function(t){for(var e=v[t],n=0;n<e.length;n++){var r=e[n];null!=r?jo(r,{depth:t,index:n}):(e.splice(n,1),n--)}},C=function(){for(var t=0;t<v.length;t++)w(t)},N=function(t,e){for(var r=Uo(t),o=t.incomers().filter((function(t){return t.isNode()&&i.has(t)})),a=-1,s=t.id(),u=0;u<o.length;u++){var l=o[u],c=Uo(l);a=Math.max(a,c.depth)}if(r.depth<=a){if(!n.acyclic&&e[s])return null;var h=a+1;return function(t,e){var n=Uo(t),r=n.depth,i=n.index;v[r][i]=null,_(t,e)}(t,h),e[s]=h,!0}return!1};if(s&&u){var I=[],T={},A=function(t){return I.push(t)};for(o.forEach((function(t){return I.push(t)}));I.length>0;){var D=I.shift(),M=N(D,T);if(M)D.outgoers().filter((function(t){return t.isNode()&&i.has(t)})).forEach(A);else if(null===M){Tt("Detected double maximal shift for node `"+D.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}C();var O=0;if(n.avoidOverlap)for(var R=0;R<o.length;R++){var k=o[R].layoutDimensions(n),F=k.w,B=k.h;O=Math.max(O,F,B)}var z={},G=function(t){if(z[t.id()])return z[t.id()];for(var e=Uo(t).depth,n=t.neighborhood(),r=0,i=0,a=0;a<n.length;a++){var s=n[a];if(!s.isEdge()&&!s.isParent()&&o.has(s)){var u=Uo(s);if(null!=u){var l=u.index,c=u.depth;if(null!=l&&null!=c){var h=v[c].length;c<e&&(r+=l/h,i++)}}}}return r/=i=Math.max(1,i),0===i&&(r=0),z[t.id()]=r,r},q=function(t,e){var n=G(t)-G(e);return 0===n?K(t.id(),e.id()):n};void 0!==n.depthSort&&(q=n.depthSort);for(var V=0;V<v.length;V++)v[V].sort(q),w(V);for(var U=[],j=0;j<b.length;j++)U.push(b[j]);v.unshift(U),C();for(var Y=0,X=0;X<v.length;X++)Y=Math.max(v[X].length,Y);var H=l.x1+l.w/2,W=l.x1+l.h/2,$=v.reduce((function(t,e){return Math.max(t,e.length)}),0);return i.nodes().layoutPositions(this,n,(function(t){var e=Uo(t),r=e.depth,i=e.index,o=v[r].length,a=Math.max(l.w/((n.grid?$:o)+1),O),s=Math.max(l.h/(v.length+1),O),u=Math.min(l.w/2/v.length,l.h/2/v.length);if(u=Math.max(u,O),n.circle){var c=u*r+u-(v.length>0&&v[0].length<=3?u/2:0),h=2*Math.PI/v[r].length*i;return 0===r&&1===v[0].length&&(c=1),{x:H+c*Math.cos(h),y:W+c*Math.sin(h)}}return{x:H+(i+1-(o+1)/2)*a,y:(r+1)*s}})),this};var Xo={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ho(t){this.options=Q({},Xo,t)}Ho.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,o=r.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a,s=de(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u=s.x1+s.w/2,l=s.y1+s.h/2,c=(void 0===e.sweep?2*Math.PI-2*Math.PI/o.length:e.sweep)/Math.max(1,o.length-1),h=0,p=0;p<o.length;p++){var f=o[p].layoutDimensions(e),d=f.w,g=f.h;h=Math.max(h,d,g)}if(a=M(e.radius)?e.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&e.avoidOverlap){h*=1.75;var y=Math.cos(c)-Math.cos(0),v=Math.sin(c)-Math.sin(0),m=Math.sqrt(h*h/(y*y+v*v));a=Math.max(m,a)}return r.nodes().layoutPositions(this,e,(function(t,n){var r=e.startAngle+n*c*(i?1:-1),o=a*Math.cos(r),s=a*Math.sin(r);return{x:u+o,y:l+s}})),this};var Wo,$o={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Zo(t){this.options=Q({},$o,t)}Zo.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,o=i.nodes().not(":parent"),a=de(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s=a.x1+a.w/2,u=a.y1+a.h/2,l=[],c=0,h=0;h<o.length;h++){var p,f=o[h];p=e.concentric(f),l.push({value:p,node:f}),f._private.scratch.concentric=p}o.updateStyle();for(var d=0;d<o.length;d++){var g=o[d].layoutDimensions(e);c=Math.max(c,g.w,g.h)}l.sort((function(t,e){return e.value-t.value}));for(var y=e.levelWidth(o),v=[[]],m=v[0],_=0;_<l.length;_++){var b=l[_];m.length>0&&Math.abs(m[0].value-b.value)>=y&&(m=[],v.push(m)),m.push(b)}var x=c+e.minNodeSpacing;if(!e.avoidOverlap){var E=v.length>0&&v[0].length>1,w=(Math.min(a.w,a.h)/2-x)/(v.length+E?1:0);x=Math.min(x,w)}for(var C=0,N=0;N<v.length;N++){var I=v[N],T=void 0===e.sweep?2*Math.PI-2*Math.PI/I.length:e.sweep,S=I.dTheta=T/Math.max(1,I.length-1);if(I.length>1&&e.avoidOverlap){var A=Math.cos(S)-Math.cos(0),L=Math.sin(S)-Math.sin(0),D=Math.sqrt(x*x/(A*A+L*L));C=Math.max(D,C)}I.r=C,C+=x}if(e.equidistant){for(var M=0,O=0,P=0;P<v.length;P++){var R=v[P].r-O;M=Math.max(M,R)}O=0;for(var k=0;k<v.length;k++){var F=v[k];0===k&&(O=F.r),F.r=O,O+=M}}for(var B={},z=0;z<v.length;z++)for(var G=v[z],q=G.dTheta,V=G.r,U=0;U<G.length;U++){var j=G[U],Y=e.startAngle+(n?1:-1)*q*U,X={x:s+V*Math.cos(Y),y:u+V*Math.sin(Y)};B[j.node.id()]=X}return i.nodes().layoutPositions(this,e,(function(t){var e=t.id();return B[e]})),this};var Ko={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Qo(t){this.options=Q({},Ko,t),this.options.layout=this}Qo.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),Wo=!0===t.debug;var r=Jo(e,n,t);Wo&&(void 0)(r),t.randomize&&na(r);var i=at(),o=function(){ia(r,e,t),!0===t.fit&&e.fit(t.padding)},a=function(e){return!(n.stopped||e>=t.numIter||(oa(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},s=function(){if(!0===t.animate||!1===t.animate)o(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var e=t.eles.nodes(),i=ra(r,t,e);e.layoutPositions(n,t,i)}},u=0,l=!0;if(!0===t.animate)!function e(){for(var n=0;l&&n<t.refresh;)l=a(u),u++,n++;l?(at()-i>=t.animationThreshold&&o(),ot(e)):(va(r,t),s())}();else{for(;l;)l=a(u),u++;va(r,t),s()}return this},Qo.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Qo.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Jo=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o=de(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),a={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},s=n.eles.components(),u={},l=0;l<s.length;l++)for(var c=s[l],h=0;h<c.length;h++)u[c[h].id()]=l;for(l=0;l<a.nodeSize;l++){var p=(v=i[l]).layoutDimensions(n);(P={}).isLocked=v.locked(),P.id=v.data("id"),P.parentId=v.data("parent"),P.cmptId=u[v.id()],P.children=[],P.positionX=v.position("x"),P.positionY=v.position("y"),P.offsetX=0,P.offsetY=0,P.height=p.w,P.width=p.h,P.maxX=P.positionX+P.width/2,P.minX=P.positionX-P.width/2,P.maxY=P.positionY+P.height/2,P.minY=P.positionY-P.height/2,P.padLeft=parseFloat(v.style("padding")),P.padRight=parseFloat(v.style("padding")),P.padTop=parseFloat(v.style("padding")),P.padBottom=parseFloat(v.style("padding")),P.nodeRepulsion=A(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,a.layoutNodes.push(P),a.idToIndex[P.id]=l}var f=[],d=0,g=-1,y=[];for(l=0;l<a.nodeSize;l++){var v,m=(v=a.layoutNodes[l]).parentId;null!=m?a.layoutNodes[a.idToIndex[m]].children.push(v.id):(f[++g]=v.id,y.push(v.id))}for(a.graphSet.push(y);d<=g;){var _=f[d++],b=a.idToIndex[_],x=a.layoutNodes[b].children;if(x.length>0)for(a.graphSet.push(x),l=0;l<x.length;l++)f[++g]=x[l]}for(l=0;l<a.graphSet.length;l++){var E=a.graphSet[l];for(h=0;h<E.length;h++){var w=a.idToIndex[E[h]];a.indexToGraph[w]=l}}for(l=0;l<a.edgeSize;l++){var C=r[l],N={};N.id=C.data("id"),N.sourceId=C.data("source"),N.targetId=C.data("target");var I=A(n.idealEdgeLength)?n.idealEdgeLength(C):n.idealEdgeLength,T=A(n.edgeElasticity)?n.edgeElasticity(C):n.edgeElasticity,S=a.idToIndex[N.sourceId],L=a.idToIndex[N.targetId];if(a.indexToGraph[S]!=a.indexToGraph[L]){for(var D=ta(N.sourceId,N.targetId,a),M=a.graphSet[D],O=0,P=a.layoutNodes[S];-1===M.indexOf(P.id);)P=a.layoutNodes[a.idToIndex[P.parentId]],O++;for(P=a.layoutNodes[L];-1===M.indexOf(P.id);)P=a.layoutNodes[a.idToIndex[P.parentId]],O++;I*=O*n.nestingFactor}N.idealLength=I,N.elasticity=T,a.layoutEdges.push(N)}return a},ta=function(t,e,n){var r=ea(t,e,0,n);return 2>r.count?0:r.graph},ea=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var u=o[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(0!==c.length){var h=t(e,n,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==h.count){if(1!==h.count)return h;if(2==++a)break}}}return{count:a,graph:r}},na=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},ra=function(t,e,n){var r=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(n.forEach((function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,o){var a=t.layoutNodes[t.idToIndex[n.data("id")]];if(e.boundingBox){var s=(a.positionX-i.x1)/i.w,u=(a.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+u*r.h}}return{x:a.positionX,y:a.positionY}}},ia=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=ra(t,n,i);i.positions(o),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},oa=function(t,e,n){aa(t,e),ha(t),pa(t,e),fa(t),da(t)},aa=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=t.layoutNodes[t.idToIndex[r[o]]],s=o+1;s<i;s++){var u=t.layoutNodes[t.idToIndex[r[s]]];ua(a,u,t,e)}},sa=function(t){return-t+2*t*Math.random()},ua=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,o=e.positionY-t.positionY;0===i&&0===o&&(i=sa(1),o=sa(1));var a=la(t,e,i,o);if(a>0)var s=(l=r.nodeOverlap*a)*i/(g=Math.sqrt(i*i+o*o)),u=l*o/g;else{var l,c=ca(t,i,o),h=ca(e,-1*i,-1*o),p=h.x-c.x,f=h.y-c.y,d=p*p+f*f,g=Math.sqrt(d);s=(l=(t.nodeRepulsion+e.nodeRepulsion)/d)*p/g,u=l*f/g}t.isLocked||(t.offsetX-=s,t.offsetY-=u),e.isLocked||(e.offsetX+=s,e.offsetY+=u)}},la=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},ca=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,u=o/a,l={};return 0===e&&0<n||0===e&&0>n?(l.x=r,l.y=i+o/2,l):0<e&&-1*u<=s&&s<=u?(l.x=r+a/2,l.y=i+a*n/2/e,l):0>e&&-1*u<=s&&s<=u?(l.x=r-a/2,l.y=i-a*n/2/e,l):0<n&&(s<=-1*u||s>=u)?(l.x=r+o*e/2/n,l.y=i+o/2,l):0>n&&(s<=-1*u||s>=u)?(l.x=r-o*e/2/n,l.y=i-o/2,l):l},ha=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.idToIndex[r.sourceId],o=t.layoutNodes[i],a=t.idToIndex[r.targetId],s=t.layoutNodes[a],u=s.positionX-o.positionX,l=s.positionY-o.positionY;if(0!==u||0!==l){var c=ca(o,u,l),h=ca(s,-1*u,-1*l),p=h.x-c.x,f=h.y-c.y,d=Math.sqrt(p*p+f*f),g=Math.pow(r.idealLength-d,2)/r.elasticity;if(0!==d)var y=g*p/d,v=g*f/d;else y=0,v=0;o.isLocked||(o.offsetX+=y,o.offsetY+=v),s.isLocked||(s.offsetX-=y,s.offsetY-=v)}}},pa=function(t,e){if(0!==e.gravity)for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,a=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[r[0]]],u=t.layoutNodes[t.idToIndex[s.parentId]];o=u.positionX,a=u.positionY}for(var l=0;l<i;l++){var c=t.layoutNodes[t.idToIndex[r[l]]];if(!c.isLocked){var h=o-c.positionX,p=a-c.positionY,f=Math.sqrt(h*h+p*p);if(f>1){var d=e.gravity*h/f,g=e.gravity*p/f;c.offsetX+=d,c.offsetY+=g}}}}},fa=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.idToIndex[o],s=t.layoutNodes[a],u=s.children;if(0<u.length&&!s.isLocked){for(var l=s.offsetX,c=s.offsetY,h=0;h<u.length;h++){var p=t.layoutNodes[t.idToIndex[u[h]]];p.offsetX+=l,p.offsetY+=c,n[++i]=u[h]}s.offsetX=0,s.offsetY=0}}},da=function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=ga(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,ya(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},ga=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},ya=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o?t(i,n):void 0}},va=function(t,e){for(var n=t.layoutNodes,r=[],i=0;i<n.length;i++){var o=n[i],a=o.cmptId;(r[a]=r[a]||[]).push(o)}var s=0;for(i=0;i<r.length;i++)if(g=r[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var u=0;u<g.length;u++){var l=g[u];g.x1=Math.min(g.x1,l.positionX-l.width/2),g.x2=Math.max(g.x2,l.positionX+l.width/2),g.y1=Math.min(g.y1,l.positionY-l.height/2),g.y2=Math.max(g.y2,l.positionY+l.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,s+=g.w*g.h}r.sort((function(t,e){return e.w*e.h-t.w*t.h}));var c=0,h=0,p=0,f=0,d=Math.sqrt(s)*t.clientWidth/t.clientHeight;for(i=0;i<r.length;i++){var g;if(g=r[i]){for(u=0;u<g.length;u++)(l=g[u]).isLocked||(l.positionX+=c-g.x1,l.positionY+=h-g.y1);c+=g.w+e.componentSpacing,p+=g.w+e.componentSpacing,f=Math.max(f,g.h),p>d&&(h+=f+e.componentSpacing,c=0,p=0,f=0)}}},ma={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function _a(t){this.options=Q({},ma,t)}_a.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=de(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)r.nodes().layoutPositions(this,e,(function(t){return{x:o.x1,y:o.y1}}));else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(t){if(null==t)return Math.min(u,l);Math.min(u,l)==u?u=t:l=t},h=function(t){if(null==t)return Math.max(u,l);Math.max(u,l)==u?u=t:l=t},p=e.rows,f=null!=e.cols?e.cols:e.columns;if(null!=p&&null!=f)u=p,l=f;else if(null!=p&&null==f)u=p,l=Math.ceil(a/u);else if(null==p&&null!=f)l=f,u=Math.ceil(a/l);else if(l*u>a){var d=c(),g=h();(d-1)*g>=a?c(d-1):(g-1)*d>=a&&h(g-1)}else for(;l*u<a;){var y=c(),v=h();(v+1)*y>=a?h(v+1):c(y+1)}var m=o.w/l,_=o.h/u;if(e.condense&&(m=0,_=0),e.avoidOverlap)for(var b=0;b<i.length;b++){var x=i[b],E=x._private.position;null!=E.x&&null!=E.y||(E.x=0,E.y=0);var w=x.layoutDimensions(e),C=e.avoidOverlapPadding,N=w.w+C,I=w.h+C;m=Math.max(m,N),_=Math.max(_,I)}for(var T={},S=function(t,e){return!!T["c-"+t+"-"+e]},A=function(t,e){T["c-"+t+"-"+e]=!0},L=0,D=0,M=function(){++D>=l&&(D=0,L++)},O={},P=0;P<i.length;P++){var R=i[P],k=e.position(R);if(k&&(void 0!==k.row||void 0!==k.col)){var F={row:k.row,col:k.col};if(void 0===F.col)for(F.col=0;S(F.row,F.col);)F.col++;else if(void 0===F.row)for(F.row=0;S(F.row,F.col);)F.row++;O[R.id()]=F,A(F.row,F.col)}}i.layoutPositions(this,e,(function(t,e){var n,r;if(t.locked()||t.isParent())return!1;var i=O[t.id()];if(i)n=i.col*m+m/2+o.x1,r=i.row*_+_/2+o.y1;else{for(;S(L,D);)M();n=D*m+m/2+o.x1,r=L*_+_/2+o.y1,A(L,D),M()}return{x:n,y:r}}))}return this};var ba={ready:function(){},stop:function(){}};function xa(t){this.options=Q({},ba,t)}xa.prototype.run=function(){var t=this.options,e=t.eles,n=this;return t.cy,n.emit("layoutstart"),e.nodes().positions((function(){return{x:0,y:0}})),n.one("layoutready",t.ready),n.emit("layoutready"),n.one("layoutstop",t.stop),n.emit("layoutstop"),this},xa.prototype.stop=function(){return this};var Ea={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function wa(t){this.options=Q({},Ea,t)}wa.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=A(t.positions);return e.layoutPositions(this,t,(function(e,r){var i=function(e){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(e.position());if(n)return t.positions(e);var r=t.positions[e._private.data.id];return null==r?null:r}(e);return!e.locked()&&null!=i&&i})),this};var Ca={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Na(t){this.options=Q({},Ca,t)}Na.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=de(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.nodes().layoutPositions(this,t,(function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}})),this};var Ia=[{name:"breadthfirst",impl:Yo},{name:"circle",impl:Ho},{name:"concentric",impl:Zo},{name:"cose",impl:Qo},{name:"grid",impl:_a},{name:"null",impl:xa},{name:"preset",impl:wa},{name:"random",impl:Na}];function Ta(t){this.options=t,this.notifications=0}var Sa=function(){},Aa=function(){throw new Error("A headless instance can not render images")};Ta.prototype={recalculateRenderedStyle:Sa,notify:function(){this.notifications++},init:Sa,isHeadless:function(){return!0},png:Aa,jpg:Aa};var La={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o,a){var s=i.x-n/2-a,u=i.x+n/2+a,l=i.y-n/2-a,c=i.y+n/2+a;return s<=t&&t<=u&&l<=e&&e<=c},r=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=(t*Math.sin(r)+e*Math.cos(r))*n;return{x:o*n+i.x,y:a+i.y}},i=function(t,e,n,i){for(var o=[],a=0;a<t.length;a+=2){var s=t[a],u=t[a+1];o.push(r(s,u,e,n,i))}return o},o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},a=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},s=function(r,s){S(s)&&(s=t[s]),t[r]=Q({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,r,a,s){var u=o(i(this.points,n+2*s,r,a));return Te(t,e,u)},roughCollide:n,draw:function(t,n,r,o){var a=i(this.points,n,r,o);e.arrowShapeImpl("polygon")(t,a)},spacing:function(t){return 0},gap:a},s)};s("none",{collide:Et,roughCollide:Et,draw:Ct,spacing:wt,gap:wt}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,o,a,s){var u=i(this.points,n,o,a),l=this.controlPoint,c=r(l[0],l[1],n,o,a);e.arrowShapeImpl(this.name)(t,u,c)},gap:function(t){return.8*a(t)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,r,a,s,u){var l=o(i(this.points,n+2*u,r,a)),c=o(i(this.pointsTee,n+2*u,r,a));return Te(t,e,l)||Te(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),u=i(this.pointsTee,n,r,o);e.arrowShapeImpl(this.name)(t,s,u)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(t,e,n,r,a,s,u){var l=a,c=Math.pow(l.x-t,2)+Math.pow(l.y-e,2)<=Math.pow((n+2*u)*this.radius,2),h=o(i(this.points,n+2*u,r,a));return Te(t,e,h)||c},draw:function(t,n,r,o,a){var s=i(this.pointsTr,n,r,o);e.arrowShapeImpl(this.name)(t,s,o.x,o.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(t,e,n,r,a,s,u){var l=o(i(this.points,n+2*u,r,a)),c=o(i(this.crossLinePts(n,s),n+2*u,r,a));return Te(t,e,l)||Te(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),u=i(this.crossLinePts(n,a),n,r,o);e.arrowShapeImpl(this.name)(t,s,u)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*a(t)}}),s("circle",{radius:.15,collide:function(t,e,n,r,i,o,a){var s=i;return Math.pow(s.x-t,2)+Math.pow(s.y-e,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(t,n,r,i,o){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},Da={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),u=n.zoom();return[((t-i)/a-s.x)/u,((e-o)/a-s.y)/u]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=x.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i=r("padding-left"),o=r("padding-right"),a=r("padding-top"),s=r("padding-bottom"),u=r("border-left-width"),l=r("border-right-width"),c=r("border-top-width"),h=(r("border-bottom-width"),t.clientWidth),p=t.clientHeight,f=i+o,d=a+s,g=u+l,y=e.width/(h+g),v=h-f,m=p-d,_=e.left+i+u,b=e.top+a+c;return this.containerBB=[_,b,v,m,y]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,o,a=this,s=this,u=s.getCachedZSortedEles(),l=[],c=s.cy.zoom(),h=s.cy.hasCompoundNodes(),p=(r?24:8)/c,f=(r?8:2)/c,d=(r?8:2)/c,g=1/0;function y(t,e){if(t.isNode()){if(o)return;o=t,l.push(t)}if(t.isEdge()&&(null==e||e<g))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var n=0;n<l.length;n++)if(l[n].isEdge()){l[n]=t,i=t,g=null!=e?e:g;break}}else l.push(t),i=t,g=null!=e?e:g}function v(n){var r=n.outerWidth()+2*f,i=n.outerHeight()+2*f,o=r/2,u=i/2,l=n.position();if(l.x-o<=t&&t<=l.x+o&&l.y-u<=e&&e<=l.y+u&&s.nodeShapes[a.getNodeShape(n)].checkPoint(t,e,0,r,i,l.x,l.y))return y(n,0),!0}function m(n){var r,i=n._private,o=i.rscratch,u=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,f=u/2+p,d=f*f,g=2*f,m=i.source,_=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var b=o.allpts,x=0;x+3<b.length;x+=2)if(we(t,e,b[x],b[x+1],b[x+2],b[x+3],g)&&d>(r=Ie(t,e,b[x],b[x+1],b[x+2],b[x+3])))return y(n,r),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for(b=o.allpts,x=0;x+5<o.allpts.length;x+=4)if(Ce(t,e,b[x],b[x+1],b[x+2],b[x+3],b[x+4],b[x+5],g)&&d>(r=Ne(t,e,b[x],b[x+1],b[x+2],b[x+3],b[x+4],b[x+5])))return y(n,r),!0;m=m||i.source,_=_||i.target;var E=a.getArrowWidth(u,c),w=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(x=0;x<w.length;x++){var C=w[x],N=s.arrowShapes[n.pstyle(C.name+"-arrow-shape").value],I=n.pstyle("width").pfValue;if(N.roughCollide(t,e,E,C.angle,{x:C.x,y:C.y},I,p)&&N.collide(t,e,E,C.angle,{x:C.x,y:C.y},I,p))return y(n),!0}h&&l.length>0&&(v(m),v(_))}function _(t,e,n){return Rt(t,e,n)}function b(n,r){var i,o=n._private,a=d;i=r?r+"-":"",n.boundingBox();var s=o.labelBounds[r||"main"],u=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&u){var l=_(o.rscratch,"labelX",r),c=_(o.rscratch,"labelY",r),h=_(o.rscratch,"labelAngle",r),p=n.pstyle(i+"text-margin-x").pfValue,f=n.pstyle(i+"text-margin-y").pfValue,g=s.x1-a-p,v=s.x2+a-p,m=s.y1-a-f,b=s.y2+a-f;if(h){var x=Math.cos(h),E=Math.sin(h),w=function(t,e){return{x:(t-=l)*x-(e-=c)*E+l,y:t*E+e*x+c}},C=w(g,m),N=w(g,b),I=w(v,m),T=w(v,b),S=[C.x+p,C.y+f,I.x+p,I.y+f,T.x+p,T.y+f,N.x+p,N.y+f];if(Te(t,e,S))return y(n),!0}else if(be(s,t,e))return y(n),!0}}n&&(u=u.interactive);for(var x=u.length-1;x>=0;x--){var E=u[x];E.isNode()?v(E)||b(E):m(E)||b(E)||b(E,"source")||b(E,"target")}return l},getAllInBox:function(t,e,n,r){for(var i,o,a=this.getCachedZSortedEles().interactive,s=[],u=Math.min(t,n),l=Math.max(t,n),c=Math.min(e,r),h=Math.max(e,r),p=de({x1:t=u,y1:e=c,x2:n=l,y2:r=h}),f=0;f<a.length;f++){var d=a[f];if(d.isNode()){var g=d,y=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});_e(p,y)&&!xe(y,p)&&s.push(g)}else{var v=d,m=v._private,_=m.rscratch;if(null!=_.startX&&null!=_.startY&&!be(p,_.startX,_.startY))continue;if(null!=_.endX&&null!=_.endY&&!be(p,_.endX,_.endY))continue;if("bezier"===_.edgeType||"multibezier"===_.edgeType||"self"===_.edgeType||"compound"===_.edgeType||"segments"===_.edgeType||"haystack"===_.edgeType){for(var b=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,x=!0,E=0;E<b.length;E++)if(i=p,o=b[E],!be(i,o.x,o.y)){x=!1;break}x&&s.push(v)}else"haystack"!==_.edgeType&&"straight"!==_.edgeType||s.push(v)}}return s}},Ma={calculateArrowAngles:function(t){var e,n,r,i,o,a,s=t._private.rscratch,u="haystack"===s.edgeType,l="bezier"===s.edgeType,c="multibezier"===s.edgeType,h="segments"===s.edgeType,p="compound"===s.edgeType,f="self"===s.edgeType;if(u?(r=s.haystackPts[0],i=s.haystackPts[1],o=s.haystackPts[2],a=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,o=s.arrowEndX,a=s.arrowEndY),g=s.midX,y=s.midY,h)e=r-s.segpts[0],n=i-s.segpts[1];else if(c||p||f||l){var d=s.allpts;e=r-he(d[0],d[2],d[4],.1),n=i-he(d[1],d[3],d[5],.1)}else e=r-g,n=i-y;s.srcArrowAngle=oe(e,n);var g=s.midX,y=s.midY;if(u&&(g=(r+o)/2,y=(i+a)/2),e=o-r,n=a-i,h)if((d=s.allpts).length/2%2==0){var v=(m=d.length/2)-2;e=d[m]-d[v],n=d[m+1]-d[v+1]}else{v=(m=d.length/2-1)-2;var m,_=m+2;e=d[m]-d[v],n=d[m+1]-d[v+1]}else if(c||p||f){var b,x,E,w;d=s.allpts;if(s.ctrlpts.length/2%2==0){var C=2+(N=2+(I=d.length/2-1));b=he(d[I],d[N],d[C],0),x=he(d[I+1],d[N+1],d[C+1],0),E=he(d[I],d[N],d[C],1e-4),w=he(d[I+1],d[N+1],d[C+1],1e-4)}else{var N,I;C=2+(N=d.length/2-1),b=he(d[I=N-2],d[N],d[C],.4999),x=he(d[I+1],d[N+1],d[C+1],.4999),E=he(d[I],d[N],d[C],.5),w=he(d[I+1],d[N+1],d[C+1],.5)}e=E-b,n=w-x}if(s.midtgtArrowAngle=oe(e,n),s.midDispX=e,s.midDispY=n,e*=-1,n*=-1,h&&((d=s.allpts).length/2%2==0||(e=-(d[_=2+(m=d.length/2-1)]-d[m]),n=-(d[_+1]-d[m+1]))),s.midsrcArrowAngle=oe(e,n),h)e=o-s.segpts[s.segpts.length-2],n=a-s.segpts[s.segpts.length-1];else if(c||p||f||l){var T=(d=s.allpts).length;e=o-he(d[T-6],d[T-4],d[T-2],.9),n=a-he(d[T-5],d[T-3],d[T-1],.9)}else e=o-g,n=a-y;s.tgtArrowAngle=oe(e,n)}};Ma.getArrowWidth=Ma.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var Oa={};function Pa(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}Oa.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,u=a.position(),l=s.position(),c=a.width(),h=s.width(),p=a.height(),f=s.height(),d=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*d+u.x,i.source.y*p*d+u.y,i.target.x*h*d+l.x,i.target.y*f*d+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},Oa.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,o=e.vectorNormInverse,a=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),u=t.pstyle("segment-distances"),l=Math.min(s.pfValue.length,u.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<l;c++){var h=s.pfValue[c],p=u.pfValue[c],f=1-h,d=h,g="node-position"===a?r:i,y={x:g.x1*f+g.x2*d,y:g.y1*f+g.y2*d};n.segpts.push(y.x+o.x*p,y.y+o.y*p)}},Oa.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var p=n,f=h;r&&(p=0,f=u);var d=l-Math.PI/2,g=d-c/2,y=d+c/2,v=String(l+"_"+c);p=void 0===o[v]?o[v]=0:++o[v],i.ctrlpts=[a.x+1.4*Math.cos(g)*f*(p/3+1),a.y+1.4*Math.sin(g)*f*(p/3+1),a.x+1.4*Math.cos(y)*f*(p/3+1),a.y+1.4*Math.sin(y)*f*(p/3+1)]},Oa.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,p=t.pstyle("control-point-distances"),f=p?p.pfValue[0]:void 0,d=n,g=h;r&&(d=0,g=f);var y={x:o.x-s/2,y:o.y-u/2},v={x:a.x-l/2,y:a.y-c/2},m={x:Math.min(y.x,v.x),y:Math.min(y.y,v.y)},_=Math.max(.5,Math.log(.01*s)),b=Math.max(.5,Math.log(.01*l));i.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*g*(d/3+1)*_,m.x-(1+Math.pow(50,1.12)/100)*g*(d/3+1)*b,m.y]},Oa.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},Oa.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=e.vectorNormInverse,s=e.posPts,u=e.intersectionPts,l=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),p=t.pstyle("control-point-weights"),f=h&&p?Math.min(h.value.length,p.value.length):1,d=h?h.pfValue[0]:void 0,g=p.value[0],y=r;o.edgeType=y?"multibezier":"bezier",o.ctrlpts=[];for(var v=0;v<f;v++){var m,_=(.5-e.eles.length/2+n)*c*(i?-1:1),b=se(_);y&&(d=h?h.pfValue[v]:c,g=p.value[v]);var x=void 0!==(m=r?d:void 0!==d?b*d:void 0)?m:_,E=1-g,w=g,C="node-position"===l?s:u,N={x:C.x1*E+C.x2*w,y:C.y1*E+C.y2*w};o.ctrlpts.push(N.x+a.x*x,N.y+a.y*x)}},Oa.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",o="leftward",a="rightward",s="downward",u="upward",l=e.posPts,c=e.srcW,h=e.srcH,p=e.tgtW,f=e.tgtH,d="node-position"!==t.pstyle("edge-distances").value,g=t.pstyle("taxi-direction").value,y=g,v=t.pstyle("taxi-turn"),m="%"===v.units,_=v.pfValue,b=_<0,x=t.pstyle("taxi-turn-min-distance").pfValue,E=d?(c+p)/2:0,w=d?(h+f)/2:0,C=l.x2-l.x1,N=l.y2-l.y1,I=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},T=I(C,E),S=I(N,w),A=!1;"auto"===y?g=Math.abs(T)>Math.abs(S)?i:r:y===u||y===s?(g=r,A=!0):y!==o&&y!==a||(g=i,A=!0);var L,D=g===r,M=D?S:T,O=D?N:C,P=se(O),R=!1;A&&(m||b)||!(y===s&&O<0||y===u&&O>0||y===o&&O>0||y===a&&O<0)||(M=(P*=-1)*Math.abs(M),R=!0);var k=function(t){return Math.abs(t)<x||Math.abs(t)>=Math.abs(M)},F=k(L=m?(_<0?1+_:_)*M:(_<0?M:0)+_*P),B=k(Math.abs(M)-Math.abs(L));if(!F&&!B||R)if(D){var z=l.y1+L+(d?h/2*P:0),G=l.x1,q=l.x2;n.segpts=[G,z,q,z]}else{var V=l.x1+L+(d?c/2*P:0),U=l.y1,j=l.y2;n.segpts=[V,U,V,j]}else if(D){var Y=Math.abs(O)<=h/2,X=Math.abs(C)<=p/2;if(Y){var H=(l.x1+l.x2)/2,W=l.y1,$=l.y2;n.segpts=[H,W,H,$]}else if(X){var Z=(l.y1+l.y2)/2,K=l.x1,Q=l.x2;n.segpts=[K,Z,Q,Z]}else n.segpts=[l.x1,l.y2]}else{var J=Math.abs(O)<=c/2,tt=Math.abs(N)<=f/2;if(J){var et=(l.y1+l.y2)/2,nt=l.x1,rt=l.x2;n.segpts=[nt,et,rt,et]}else if(tt){var it=(l.x1+l.x2)/2,ot=l.y1,at=l.y2;n.segpts=[it,ot,it,at]}else n.segpts=[l.x2,l.y1]}},Oa.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,h=!M(n.startX)||!M(n.startY),p=!M(n.arrowStartX)||!M(n.arrowStartY),f=!M(n.endX)||!M(n.endY),d=!M(n.arrowEndX)||!M(n.arrowEndY),g=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,y=ue({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),v=y<g,m=ue({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),_=m<g,b=!1;if(h||p||v){b=!0;var x={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},E=Math.sqrt(x.x*x.x+x.y*x.y),w={x:x.x/E,y:x.y/E},C=Math.max(o,a),N={x:n.ctrlpts[0]+2*w.x*C,y:n.ctrlpts[1]+2*w.y*C},I=l.intersectLine(r.x,r.y,o,a,N.x,N.y,0);v?(n.ctrlpts[0]=n.ctrlpts[0]+w.x*(g-y),n.ctrlpts[1]=n.ctrlpts[1]+w.y*(g-y)):(n.ctrlpts[0]=I[0]+w.x*g,n.ctrlpts[1]=I[1]+w.y*g)}if(f||d||_){b=!0;var T={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},S=Math.sqrt(T.x*T.x+T.y*T.y),A={x:T.x/S,y:T.y/S},L=Math.max(o,a),D={x:n.ctrlpts[0]+2*A.x*L,y:n.ctrlpts[1]+2*A.y*L},O=c.intersectLine(i.x,i.y,s,u,D.x,D.y,0);_?(n.ctrlpts[0]=n.ctrlpts[0]+A.x*(g-m),n.ctrlpts[1]=n.ctrlpts[1]+A.y*(g-m)):(n.ctrlpts[0]=O[0]+A.x*g,n.ctrlpts[1]=O[1]+A.y*g)}b&&this.findEndpoints(t)}},Oa.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(r=e.allpts.length/2-1,e.midX=e.allpts[r],e.midY=e.allpts[r+1]):(r=e.allpts.length/2-3,e.midX=he(e.allpts[r],e.allpts[r+2],e.allpts[r+4],.5),e.midY=he(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var a=e.segpts.length/2-1;e.midX=e.segpts[a],e.midY=e.segpts[a+1]}},Oa.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||M(e.startX)&&M(e.startY)&&M(e.endX)&&M(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Tt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Oa.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new Ft,get:function(t){var e=this.map.get(t[0]);return null!=e?e.get(t[1]):null},set:function(t,e){var n=this.map.get(t[0]);null==n&&(n=new Ft,this.map.set(t[0],n)),n.set(t[1],e)}},o=[],a=[],s=0;s<t.length;s++){var u=t[s],l=u._private,c=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace())if("haystack"!==c){var h="unbundled-bezier"===c||"segments"===c||"straight"===c||"straight-triangle"===c||"taxi"===c,p="unbundled-bezier"===c||"bezier"===c,f=l.source,d=l.target,g=[f.poolIndex(),d.poolIndex()].sort(),y=i.get(g);null==y&&(y={eles:[]},i.set(g,y),o.push(g)),y.eles.push(u),h&&(y.hasUnbundled=!0),p&&(y.hasBezier=!0)}else a.push(u)}for(var v=function(t){var a=o[t],s=i.get(a),u=void 0;if(!s.hasUnbundled){var l=s.eles[0].parallelEdges().filter((function(t){return t.isBundledBezier()}));Pt(s.eles),l.forEach((function(t){return s.eles.push(t)})),s.eles.sort((function(t,e){return t.poolIndex()-e.poolIndex()}))}var c=s.eles[0],h=c.source(),p=c.target();if(h.poolIndex()>p.poolIndex()){var f=h;h=p,p=f}var d=s.srcPos=h.position(),g=s.tgtPos=p.position(),y=s.srcW=h.outerWidth(),v=s.srcH=h.outerHeight(),m=s.tgtW=p.outerWidth(),_=s.tgtH=p.outerHeight(),b=s.srcShape=n.nodeShapes[e.getNodeShape(h)],x=s.tgtShape=n.nodeShapes[e.getNodeShape(p)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var E=0;E<s.eles.length;E++){var w=s.eles[E],C=w[0]._private.rscratch,N=w.pstyle("curve-style").value,I="unbundled-bezier"===N||"segments"===N||"taxi"===N,T=!h.same(w.source());if(!s.calculatedIntersection&&h!==p&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var S=b.intersectLine(d.x,d.y,y,v,g.x,g.y,0),A=s.srcIntn=S,L=x.intersectLine(g.x,g.y,m,_,d.x,d.y,0),D=s.tgtIntn=L,O=s.intersectionPts={x1:S[0],x2:L[0],y1:S[1],y2:L[1]},P=s.posPts={x1:d.x,x2:g.x,y1:d.y,y2:g.y},R=L[1]-S[1],k=L[0]-S[0],F=Math.sqrt(k*k+R*R),B=s.vector={x:k,y:R},z=s.vectorNorm={x:B.x/F,y:B.y/F},G={x:-z.y,y:z.x};s.nodesOverlap=!M(F)||x.checkPoint(S[0],S[1],0,m,_,g.x,g.y)||b.checkPoint(L[0],L[1],0,y,v,d.x,d.y),s.vectorNormInverse=G,u={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:g,tgtPos:d,srcW:m,srcH:_,tgtW:y,tgtH:v,srcIntn:D,tgtIntn:A,srcShape:x,tgtShape:b,posPts:{x1:P.x2,y1:P.y2,x2:P.x1,y2:P.y1},intersectionPts:{x1:O.x2,y1:O.y2,x2:O.x1,y2:O.y1},vector:{x:-B.x,y:-B.y},vectorNorm:{x:-z.x,y:-z.y},vectorNormInverse:{x:-G.x,y:-G.y}}}var q=T?u:s;C.nodesOverlap=q.nodesOverlap,C.srcIntn=q.srcIntn,C.tgtIntn=q.tgtIntn,r&&(h.isParent()||h.isChild()||p.isParent()||p.isChild())&&(h.parents().anySame(p)||p.parents().anySame(h)||h.same(p)&&h.isParent())?e.findCompoundLoopPoints(w,q,E,I):h===p?e.findLoopPoints(w,q,E,I):"segments"===N?e.findSegmentsPoints(w,q):"taxi"===N?e.findTaxiPoints(w,q):"straight"===N||!I&&s.eles.length%2==1&&E===Math.floor(s.eles.length/2)?e.findStraightEdgePoints(w):e.findBezierPoints(w,q,E,I,T),e.findEndpoints(w),e.tryToCorrectInvalidPoints(w,q),e.checkForInvalidEdgeWarning(w),e.storeAllpts(w),e.storeEdgeProjections(w),e.calculateArrowAngles(w),e.recalculateEdgeLabelProjections(w),e.calculateLabelAngles(w)}},m=0;m<o.length;m++)v(m);this.findHaystackPoints(a)}},Oa.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),Pa(e.segpts)},Oa.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),Pa(e.ctrlpts)},Oa.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Ra={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var o=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(o[0]=o[0]*r),"%"===e.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var a=e.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(r,i),u=[n.x+Math.cos(a)*s,n.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,u[0],u[1],0)},findEndpoints:function(t){var e,n,r,i,o,a=this,s=t.source()[0],u=t.target()[0],l=s.position(),c=u.position(),h=t.pstyle("target-arrow-shape").value,p=t.pstyle("source-arrow-shape").value,f=t.pstyle("target-distance-from-node").pfValue,d=t.pstyle("source-distance-from-node").pfValue,g=t.pstyle("curve-style").value,y=t._private.rscratch,v=y.edgeType,m="self"===v||"compound"===v,_="bezier"===v||"multibezier"===v||m,b="bezier"!==v,x="straight"===v||"segments"===v,E="segments"===v,w=_||b||x,C=m||"taxi"===g,N=t.pstyle("source-endpoint"),I=C?"outside-to-node":N.value,T=t.pstyle("target-endpoint"),S=C?"outside-to-node":T.value;if(y.srcManEndpt=N,y.tgtManEndpt=T,_){var A=[y.ctrlpts[0],y.ctrlpts[1]];n=b?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:A,r=A}else if(x){var L=E?y.segpts.slice(0,2):[c.x,c.y];n=E?y.segpts.slice(y.segpts.length-2):[l.x,l.y],r=L}if("inside-to-node"===S)e=[c.x,c.y];else if(T.units)e=this.manualEndptToPx(u,T);else if("outside-to-line"===S)e=y.tgtIntn;else if("outside-to-node"===S||"outside-to-node-or-label"===S?i=n:"outside-to-line"!==S&&"outside-to-line-or-label"!==S||(i=[l.x,l.y]),e=a.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===S||"outside-to-line-or-label"===S){var D=u._private.rscratch,O=D.labelWidth,P=D.labelHeight,R=D.labelX,k=D.labelY,F=O/2,B=P/2,z=u.pstyle("text-valign").value;"top"===z?k-=B:"bottom"===z&&(k+=B);var G=u.pstyle("text-halign").value;"left"===G?R-=F:"right"===G&&(R+=F);var q=Re(i[0],i[1],[R-F,k-B,R+F,k-B,R+F,k+B,R-F,k+B],c.x,c.y);if(q.length>0){var V=l,U=le(V,ie(e)),j=le(V,ie(q)),Y=U;j<U&&(e=q,Y=j),q.length>2&&le(V,{x:q[2],y:q[3]})<Y&&(e=[q[2],q[3]])}}var X=ke(e,n,a.arrowShapes[h].spacing(t)+f),H=ke(e,n,a.arrowShapes[h].gap(t)+f);if(y.endX=H[0],y.endY=H[1],y.arrowEndX=X[0],y.arrowEndY=X[1],"inside-to-node"===I)e=[l.x,l.y];else if(N.units)e=this.manualEndptToPx(s,N);else if("outside-to-line"===I)e=y.srcIntn;else if("outside-to-node"===I||"outside-to-node-or-label"===I?o=r:"outside-to-line"!==I&&"outside-to-line-or-label"!==I||(o=[c.x,c.y]),e=a.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===I||"outside-to-line-or-label"===I){var W=s._private.rscratch,$=W.labelWidth,Z=W.labelHeight,K=W.labelX,Q=W.labelY,J=$/2,tt=Z/2,et=s.pstyle("text-valign").value;"top"===et?Q-=tt:"bottom"===et&&(Q+=tt);var nt=s.pstyle("text-halign").value;"left"===nt?K-=J:"right"===nt&&(K+=J);var rt=Re(o[0],o[1],[K-J,Q-tt,K+J,Q-tt,K+J,Q+tt,K-J,Q+tt],l.x,l.y);if(rt.length>0){var it=c,ot=le(it,ie(e)),at=le(it,ie(rt)),st=ot;at<ot&&(e=[rt[0],rt[1]],st=at),rt.length>2&&le(it,{x:rt[2],y:rt[3]})<st&&(e=[rt[2],rt[3]])}}var ut=ke(e,r,a.arrowShapes[p].spacing(t)+d),lt=ke(e,r,a.arrowShapes[p].gap(t)+d);y.startX=lt[0],y.startY=lt[1],y.arrowStartX=ut[0],y.arrowStartY=ut[1],w&&(M(y.startX)&&M(y.startY)&&M(y.endX)&&M(y.endY)?y.badLine=!1:y.badLine=!0)},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),"haystack"===e.edgeType?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),"haystack"===e.edgeType?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}}},ka={};function Fa(t,e,n){for(var r=function(t,e,n,r){return he(t,e,n,r)},i=e._private.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var a=t.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],a),y:r(n[1],n[3],n[5],a)})}}ka.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)Fa(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var o=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},ka.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Ba={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!z(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,h=i.rscratch,p=i.rstyle;switch(l){case"left":n=u.x-o/2-s;break;case"right":n=u.x+o/2+s;break;default:n=u.x}switch(c){case"top":r=u.y-a/2-s;break;case"bottom":r=u.y+a/2+s;break;default:r=u.y}h.labelX=n,h.labelY=r,p.labelX=n,p.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},za=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},Ga=function(t,e){var n=e.x-t.x,r=e.y-t.y;return za(n,r)};Ba.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:r.midX,y:r.midY};var a=function(t,e,r){kt(n.rscratch,t,e,r),kt(n.rstyle,t,e,r)};a("labelX",null,e.x),a("labelY",null,e.y);var s=za(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var u=function t(){if(t.cache)return t.cache;for(var e=[],o=0;o+5<r.allpts.length;o+=4){var a={x:r.allpts[o],y:r.allpts[o+1]},s={x:r.allpts[o+2],y:r.allpts[o+3]},u={x:r.allpts[o+4],y:r.allpts[o+5]};e.push({p0:a,p1:s,p2:u,startDist:0,length:0,segments:[]})}var l=n.rstyle.bezierPts,c=i.bezierProjPcts.length;function h(t,e,n,r,i){var o=ue(e,n),a=t.segments[t.segments.length-1],s={p0:e,p1:n,t0:r,t1:i,startDist:a?a.startDist+a.length:0,length:o};t.segments.push(s),t.length+=o}for(var p=0;p<e.length;p++){var f=e[p],d=e[p-1];d&&(f.startDist=d.startDist+d.length),h(f,f.p0,l[p*c],0,i.bezierProjPcts[0]);for(var g=0;g<c-1;g++)h(f,l[p*c+g],l[p*c+g+1],i.bezierProjPcts[g],i.bezierProjPcts[g+1]);h(f,l[p*c+c-1],f.p2,i.bezierProjPcts[c-1],1)}return t.cache=e},l=function(n){var i,s="source"===n;if(o[n]){var l=t.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,h=u(),p=0,f=0,d=0;d<h.length;d++){for(var g=h[s?d:h.length-1-d],y=0;y<g.segments.length;y++){var v=g.segments[s?y:g.segments.length-1-y],m=d===h.length-1&&y===g.segments.length-1;if(p=f,(f+=v.length)>=l||m){c={cp:g,segment:v};break}}if(c)break}var _=c.cp,b=c.segment,x=(l-p)/b.length,E=b.t1-b.t0,w=s?b.t0+E*x:b.t1-E*x;w=fe(0,w,1),e=pe(_.p0,_.p1,_.p2,w),i=function(t,e,n,r){var i=fe(0,r-.001,1),o=fe(0,r+.001,1),a=pe(t,e,n,i),s=pe(t,e,n,o);return Ga(a,s)}(_.p0,_.p1,_.p2,w);break;case"straight":case"segments":case"haystack":for(var C,N,I,T,S=0,A=r.allpts.length,L=0;L+3<A&&(s?(I={x:r.allpts[L],y:r.allpts[L+1]},T={x:r.allpts[L+2],y:r.allpts[L+3]}):(I={x:r.allpts[A-2-L],y:r.allpts[A-1-L]},T={x:r.allpts[A-4-L],y:r.allpts[A-3-L]}),N=S,!((S+=C=ue(I,T))>=l));L+=2);var D=(l-N)/C;D=fe(0,D,1),e=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=ue(t,e),s=i/a,u=o/a;return n=null==n?0:n,r=null!=r?r:n*a,{x:t.x+s*r,y:t.y+u*r}}(I,T,D),i=Ga(I,T)}a("labelX",n,e.x),a("labelY",n,e.y),a("labelAutoAngle",n,i)}};l("source"),l("target"),this.applyLabelDimensions(t)}},Ba.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},Ba.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),o=t.pstyle("line-height").pfValue,a=t.pstyle("text-wrap").strValue,s=Rt(n.rscratch,"labelWrapCachedLines",e)||[],u="wrap"!==a?1:Math.max(s.length,1),l=i.height/u,c=l*o,h=i.width,p=i.height+(u-1)*(o-1)*l;kt(n.rstyle,"labelWidth",e,h),kt(n.rscratch,"labelWidth",e,h),kt(n.rstyle,"labelHeight",e,p),kt(n.rscratch,"labelHeight",e,p),kt(n.rscratch,"labelLineHeight",e,c)},Ba.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,o=t.pstyle("text-transform").value,a=function(t,r){return r?(kt(n.rscratch,t,e,r),r):Rt(n.rscratch,t,e)};if(!i)return"";"none"==o||("uppercase"==o?i=i.toUpperCase():"lowercase"==o&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if("wrap"===s){var u=a("labelKey");if(null!=u&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l=i.split("\n"),c=t.pstyle("text-max-width").pfValue,h="anywhere"===t.pstyle("text-overflow-wrap").value,p=[],f=/[\s\u200b]+/,d=h?"":" ",g=0;g<l.length;g++){var y=l[g],v=this.calculateLabelDimensions(t,y).width;if(h){var m=y.split("").join("");y=m}if(v>c){for(var _=y.split(f),b="",x=0;x<_.length;x++){var E=_[x],w=0===b.length?E:b+d+E;this.calculateLabelDimensions(t,w).width<=c?b+=E+d:(b&&p.push(b),b=E+d)}b.match(/^[\s\u200b]+$/)||p.push(b)}else p.push(y)}a("labelWrapCachedLines",p),i=a("labelWrapCachedText",p.join("\n")),a("labelWrapKey",u)}else if("ellipsis"===s){var C=t.pstyle("text-max-width").pfValue,N="",I=!1;if(this.calculateLabelDimensions(t,i).width<C)return i;for(var T=0;T<i.length&&!(this.calculateLabelDimensions(t,N+i[T]+"").width>C);T++)N+=i[T],T===i.length-1&&(I=!0);return I||(N+=""),N}return i},Ba.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},Ba.calculateLabelDimensions=function(t,e){var n=dt(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var o=t.pstyle("font-style").strValue,a=t.pstyle("font-size").pfValue,s=t.pstyle("font-family").strValue,u=t.pstyle("font-weight").strValue,l=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!l){l=this.labelCalcCanvas=document.createElement("canvas"),c=this.labelCalcCanvasContext=l.getContext("2d");var h=l.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}c.font="".concat(o," ").concat(u," ").concat(a,"px ").concat(s);for(var p=0,f=0,d=e.split("\n"),g=0;g<d.length;g++){var y=d[g],v=c.measureText(y),m=Math.ceil(v.width),_=a;p=Math.max(m,p),f+=_}return p+=0,f+=0,r[n]={width:p,height:f}},Ba.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),a=o.strValue;return"none"===a?0:r&&"autorotate"===a?n.labelAutoAngle:"autorotate"===a?0:o.pfValue},Ba.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var qa={},Va=!1;qa.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return Va||(Tt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Va=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"round-rectangle"===e||"cutrectangle"===e||"cut-rectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var Ua={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Ai),e.interactive=e.filter((function(t){return t.interactive()})),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}},ja={};[Da,Ma,Oa,Ra,ka,Ba,qa,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),n)for(var r=0;r<t.length;r++){var i=t[r]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",(function(t){var e=t.target;r(e)})).on("style.* background.*",(function(t){var e=t.target;r(e,!1)}));var i=function(i){if(i){var o=n.onUpdateEleCalcsFns;e.cleanStyle();for(var a=0;a<e.length;a++){var s=e[a],u=s._private.rstyle;s.isNode()&&!u.cleanConnected&&(r(s.connectedEdges()),u.cleanConnected=!0)}if(o)for(var l=0;l<o.length;l++)(0,o[l])(i,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=function(t){return t._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===e&&(e=!0);for(var o=0;o<t.length;o++){var a=t[o],s=a._private,u=s.rstyle;!a.isEdge()||n(a.source())&&n(a.target())||(u.clean=!1),e&&u.clean||a.removed()||"none"!==a.pstyle("display").value&&("nodes"===s.group?i.push(a):r.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],h=c._private.rstyle,p=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=p.x,h.nodeY=p.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var d=r[f]._private,g=d.rstyle,y=d.rscratch;g.srcX=y.arrowStartX,g.srcY=y.arrowStartY,g.tgtX=y.arrowEndX,g.tgtY=y.arrowEndY,g.midX=y.midX,g.midY=y.midY,g.labelAngle=y.labelAngle,g.sourceLabelAngle=y.sourceLabelAngle,g.targetLabelAngle=y.targetLabelAngle}}}},Ua].forEach((function(t){Q(ja,t)}));var Ya={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[t]=r[t]||{}).image=new Image;o.addEventListener("load",n),o.addEventListener("error",(function(){o.error=!0}));return"data:"===t.substring(0,5).toLowerCase()||(e="null"===e?null:e,o.crossOrigin=e),o.src=t,o}},Xa={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},binder:function(t){var e=this,n=t===window||t===document||t===document.body||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement;if(null==e.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(t){}e.supportsPassiveEvents=r}var o=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),e.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()}};Xa.load=function(){var t=this,e=function(t){return t.selected()},n=function(e,n,r,i){null==e&&(e=t.cy);for(var o=0;o<n.length;o++){var a=n[o];e.emit({originalEvent:r,type:a,position:i})}},r=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},i=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.pannable()){for(var i=0;n&&i<n.length;i++)if((e=n[i]).isNode()&&e.isParent()&&!e.pannable()){r=!1;break}}else r=!0;return r},o=function(t){t[0]._private.rscratch.inDragLayer=!0},a=function(t){t[0]._private.rscratch.isGrabTarget=!0},s=function(t,e){var n=e.addToList;n.has(t)||!t.grabbable()||t.locked()||(n.merge(t),function(t){t[0]._private.grabbed=!0}(t))},u=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(o),e.neighborhood().stdFilter((function(t){return!r||t.isEdge()})).forEach(o)),n.addToList&&e.forEach((function(t){s(t,n)})),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(o),n.connectedEdges().forEach(o)),e.addToList&&s(n,e)}}(e,n),p(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},c=u,h=function(e){e&&(t.getCachedZSortedEles().forEach((function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)})),t.updateCachedGrabbedEles())},p=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(o),r.forEach(o)),e.addToList&&r.forEach((function(t){s(t,e)}))}}},f=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},d="undefined"!=typeof MutationObserver,g="undefined"!=typeof ResizeObserver;d?(t.removeObserver=new MutationObserver((function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++)if(r[i]===t.container){t.destroy();break}}})),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",(function(e){t.destroy()}));var y=l.default((function(){t.cy.resize()}),100);d&&(t.styleObserver=new MutationObserver(y),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",y),g&&(t.resizeObserver=new ResizeObserver(y),t.resizeObserver.observe(t.container));var v=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,(function(e){t.registerBinding(e,"transitionend",v),t.registerBinding(e,"animationend",v),t.registerBinding(e,"scroll",v)})),t.registerBinding(t.container,"contextmenu",(function(t){t.preventDefault()}));var m,_,b,x=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],u=!1,l=0;l<s.length;l++){var c=s[l];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){u=!0;break}}if(!u)return!1;for(var h=t.container,p=e.target.parentNode,f=!1;p;){if(p===h){f=!0;break}p=p.parentNode}return!!f};t.registerBinding(t.container,"mousedown",(function(e){if(x(e)){e.preventDefault(),f(),t.hoverData.capture=!0,t.hoverData.which=e.which;var r=t.cy,i=[e.clientX,e.clientY],o=t.projectIntoViewport(i[0],i[1]),s=t.selection,l=t.findNearestElements(o[0],o[1],!0,!1),h=l[0],p=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i,3==e.which){t.hoverData.cxtStarted=!0;var d={originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}};h?(h.activate(),h.emit(d),t.hoverData.down=h):r.emit(d),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(h&&h.activate(),null!=h&&t.nodeIsGrabbable(h)){var g=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};if(a(h),h.selected()){p=t.dragData.possibleDragElements=r.collection();var y=r.$((function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)}));u(y,{addToList:p}),h.emit(g("grabon")),y.forEach((function(t){t.emit(g("grab"))}))}else p=t.dragData.possibleDragElements=r.collection(),c(h,{addToList:p}),h.emit(g("grabon")).emit(g("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=h,t.hoverData.downs=l,t.hoverData.downTime=(new Date).getTime(),n(h,["mousedown","tapstart","vmousedown"],e,{x:o[0],y:o[1]}),null==h?(s[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):h.pannable()&&(s[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout((function(){if(!t.hoverData.tapholdCancelled){var n=t.hoverData.down;n?n.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}})}}),t.tapholdDuration)}s[0]=s[2]=o[0],s[1]=s[3]=o[1]}}),!1),t.registerBinding(window,"mousemove",(function(e){if(t.hoverData.capture||x(e)){var o=!1,a=t.cy,s=a.zoom(),l=[e.clientX,e.clientY],c=t.projectIntoViewport(l[0],l[1]),p=t.hoverData.mdownPos,f=t.hoverData.mdownGPos,d=t.selection,g=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(g=t.findNearestElement(c[0],c[1],!0,!1));var y,v=t.hoverData.last,m=t.hoverData.down,_=[c[0]-d[2],c[1]-d[3]],b=t.dragData.possibleDragElements;if(f){var E=l[0]-f[0],w=E*E,C=l[1]-f[1],N=w+C*C;t.hoverData.isOverThresholdDrag=y=N>=t.desktopTapThreshold2}var I=r(e);y&&(t.hoverData.tapholdCancelled=!0),o=!0,n(g,["mousemove","vmousemove","tapdrag"],e,{x:c[0],y:c[1]});var T=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:c[0],y:c[1]}}),d[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(y){var S={originalEvent:e,type:"cxtdrag",position:{x:c[0],y:c[1]}};m?m.emit(S):a.emit(S),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&g===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:c[0],y:c[1]}}),t.hoverData.cxtOver=g,g&&g.emit({originalEvent:e,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(t.hoverData.dragging){if(o=!0,a.panningEnabled()&&a.userPanningEnabled()){var A;if(t.hoverData.justStartedPan){var L=t.hoverData.mdownPos;A={x:(c[0]-L[0])*s,y:(c[1]-L[1])*s},t.hoverData.justStartedPan=!1}else A={x:_[0]*s,y:_[1]*s};a.panBy(A),a.emit("dragpan"),t.hoverData.dragged=!0}c=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=d[4]||null!=m&&!m.pannable()){if(m&&m.pannable()&&m.active()&&m.unactivate(),m&&m.grabbed()||g==v||(v&&n(v,["mouseout","tapdragout"],e,{x:c[0],y:c[1]}),g&&n(g,["mouseover","tapdragover"],e,{x:c[0],y:c[1]}),t.hoverData.last=g),m)if(y){if(a.boxSelectionEnabled()&&I)m&&m.grabbed()&&(h(b),m.emit("freeon"),b.emit("free"),t.dragData.didDrag&&(m.emit("dragfreeon"),b.emit("dragfree"))),T();else if(m&&m.grabbed()&&t.nodeIsDraggable(m)){var D=!t.dragData.didDrag;D&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||u(b,{inDragLayer:!0});var O={x:0,y:0};if(M(_[0])&&M(_[1])&&(O.x+=_[0],O.y+=_[1],D)){var P=t.hoverData.dragDelta;P&&M(P[0])&&M(P[1])&&(O.x+=P[0],O.y+=P[1])}t.hoverData.draggingEles=!0,b.silentShift(O).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(_[0]),e.push(_[1])):(e[0]+=_[0],e[1]+=_[1])}();o=!0}else y&&(t.hoverData.dragging||!a.boxSelectionEnabled()||!I&&a.panningEnabled()&&a.userPanningEnabled()?!t.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()&&i(m,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,d[4]=0,t.data.bgActivePosistion=ie(p),t.redrawHint("select",!0),t.redraw()):T(),m&&m.pannable()&&m.active()&&m.unactivate());return d[2]=c[0],d[3]=c[1],o?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}}),!1),t.registerBinding(window,"mouseup",(function(i){if(t.hoverData.capture){t.hoverData.capture=!1;var o=t.cy,a=t.projectIntoViewport(i.clientX,i.clientY),s=t.selection,u=t.findNearestElement(a[0],a[1],!0,!1),l=t.dragData.possibleDragElements,c=t.hoverData.down,p=r(i);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,c&&c.unactivate(),3===t.hoverData.which){var f={originalEvent:i,type:"cxttapend",position:{x:a[0],y:a[1]}};if(c?c.emit(f):o.emit(f),!t.hoverData.cxtDragged){var d={originalEvent:i,type:"cxttap",position:{x:a[0],y:a[1]}};c?c.emit(d):o.emit(d)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(u,["mouseup","tapend","vmouseup"],i,{x:a[0],y:a[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||(n(c,["click","tap","vclick"],i,{x:a[0],y:a[1]}),_=!1,i.timeStamp-b<=o.multiClickDebounceTime()?(m&&clearTimeout(m),_=!0,b=null,n(c,["dblclick","dbltap","vdblclick"],i,{x:a[0],y:a[1]})):(m=setTimeout((function(){_||n(c,["oneclick","onetap","voneclick"],i,{x:a[0],y:a[1]})}),o.multiClickDebounceTime()),b=i.timeStamp)),null!=c||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(i)||(o.$(e).unselect(["tapunselect"]),l.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=l=o.collection()),u!=c||t.dragData.didDrag||t.hoverData.selecting||null!=u&&u._private.selectable&&(t.hoverData.dragging||("additive"===o.selectionType()||p?u.selected()?u.unselect(["tapunselect"]):u.select(["tapselect"]):p||(o.$(e).unmerge(u).unselect(["tapunselect"]),u.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var g=o.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),g.length>0&&t.redrawHint("eles",!0),o.emit({type:"boxend",originalEvent:i,position:{x:a[0],y:a[1]}});"additive"===o.selectionType()||p||o.$(e).unmerge(g).unselect(),g.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var y=c&&c.grabbed();h(l),y&&(c.emit("freeon"),l.emit("free"),t.dragData.didDrag&&(c.emit("dragfreeon"),l.emit("dragfree")))}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}}),!1);var E,w,C,N,I,T,S,A,L,D,O,P,R,k=function(e){if(!t.scrollingPage){var n=t.cy,r=n.zoom(),i=n.pan(),o=t.projectIntoViewport(e.clientX,e.clientY),a=[o[0]*r+i.x,o[1]*r+i.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])e.preventDefault();else if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){var s;e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout((function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()}),150),s=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,s*=t.wheelSensitivity,1===e.deltaMode&&(s*=33);var u=n.zoom()*Math.pow(10,s);"gesturechange"===e.type&&(u=t.gestureStartZoom*e.scale),n.zoom({level:u,renderedPosition:{x:a[0],y:a[1]}}),n.emit("gesturechange"===e.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",k,!0),t.registerBinding(window,"scroll",(function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout((function(){t.scrollingPage=!1}),250)}),!0),t.registerBinding(t.container,"gesturestart",(function(e){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||e.preventDefault()}),!0),t.registerBinding(t.container,"gesturechange",(function(e){t.hasTouchStarted||k(e)}),!0),t.registerBinding(t.container,"mouseout",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})}),!1),t.registerBinding(t.container,"mouseover",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})}),!1);var F,B,z,G,q,V,U,j=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},Y=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",F=function(e){if(t.hasTouchStarted=!0,x(e)){f(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(e.touches[0]){var s=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(e.touches[1]&&(s=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),i[2]=s[0],i[3]=s[1]),e.touches[2]&&(s=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),i[4]=s[0],i[5]=s[1]),e.touches[1]){t.touchData.singleTouchMoved=!0,h(t.dragData.touchDragEles);var l=t.findContainerClientCoords();L=l[0],D=l[1],O=l[2],P=l[3],E=e.touches[0].clientX-L,w=e.touches[0].clientY-D,C=e.touches[1].clientX-L,N=e.touches[1].clientY-D,R=0<=E&&E<=O&&0<=C&&C<=O&&0<=w&&w<=P&&0<=N&&N<=P;var p=r.pan(),d=r.zoom();if(I=j(E,w,C,N),T=Y(E,w,C,N),A=[((S=[(E+C)/2,(w+N)/2])[0]-p.x)/d,(S[1]-p.y)/d],T<4e4&&!e.touches[2]){var g=t.findNearestElement(i[0],i[1],!0,!0),y=t.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):y&&y.isNode()?(y.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=y):r.emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2])r.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var v=t.findNearestElements(i[0],i[1],!0,!0),m=v[0];if(null!=m&&(m.activate(),t.touchData.start=m,t.touchData.starts=v,t.nodeIsGrabbable(m))){var _=t.dragData.touchDragEles=r.collection(),b=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),m.selected()?(b=r.$((function(e){return e.selected()&&t.nodeIsGrabbable(e)})),u(b,{addToList:_})):c(m,{addToList:_}),a(m);var M=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}};m.emit(M("grabon")),b?b.forEach((function(t){t.emit(M("grab"))})):m.emit(M("grab"))}n(m,["touchstart","tapstart","vmousedown"],e,{x:i[0],y:i[1]}),null==m&&(t.data.bgActivePosistion={x:s[0],y:s[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout((function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],e,{x:i[0],y:i[1]})}),t.tapholdDuration)}if(e.touches.length>=1){for(var k=t.touchData.startPosition=[],F=0;F<i.length;F++)k[F]=o[F]=i[F];var B=e.touches[0];t.touchData.startGPosition=[B.clientX,B.clientY]}}},!1),t.registerBinding(window,"touchmove",B=function(e){var r=t.touchData.capture;if(r||x(e)){var o=t.selection,a=t.cy,s=t.touchData.now,l=t.touchData.earlier,c=a.zoom();if(e.touches[0]){var p=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=p[0],s[1]=p[1]}e.touches[1]&&(p=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=p[0],s[3]=p[1]),e.touches[2]&&(p=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=p[0],s[5]=p[1]);var f,d=t.touchData.startGPosition;if(r&&e.touches[0]&&d){for(var g=[],y=0;y<s.length;y++)g[y]=s[y]-l[y];var v=e.touches[0].clientX-d[0],m=v*v,_=e.touches[0].clientY-d[1];f=m+_*_>=t.touchTapThreshold2}if(r&&t.touchData.cxt){e.preventDefault();var b=e.touches[0].clientX-L,S=e.touches[0].clientY-D,O=e.touches[1].clientX-L,P=e.touches[1].clientY-D,k=Y(b,S,O,P);if(k/T>=2.25||k>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var F={originalEvent:e,type:"cxttapend",position:{x:s[0],y:s[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(F),t.touchData.start=null):a.emit(F)}}if(r&&t.touchData.cxt){F={originalEvent:e,type:"cxtdrag",position:{x:s[0],y:s[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(F):a.emit(F),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var B=t.findNearestElement(s[0],s[1],!0,!0);t.touchData.cxtOver&&B===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:s[0],y:s[1]}}),t.touchData.cxtOver=B,B&&B.emit({originalEvent:e,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&e.touches[2]&&a.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:s[0],y:s[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,o[4]=1,o&&0!==o.length&&void 0!==o[0]?(o[2]=(s[0]+s[2]+s[4])/3,o[3]=(s[1]+s[3]+s[5])/3):(o[0]=(s[0]+s[2]+s[4])/3,o[1]=(s[1]+s[3]+s[5])/3,o[2]=(s[0]+s[2]+s[4])/3+1,o[3]=(s[1]+s[3]+s[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(r&&e.touches[1]&&!t.touchData.didSelect&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),tt=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var z=0;z<tt.length;z++){var G=tt[z]._private;G.grabbed=!1,G.rscratch.inDragLayer=!1}}var q=t.touchData.start,V=(b=e.touches[0].clientX-L,S=e.touches[0].clientY-D,O=e.touches[1].clientX-L,P=e.touches[1].clientY-D,j(b,S,O,P)),U=V/I;if(R){var X=(b-E+(O-C))/2,H=(S-w+(P-N))/2,W=a.zoom(),$=W*U,Z=a.pan(),K=A[0]*W+Z.x,Q=A[1]*W+Z.y,J={x:-$/W*(K-Z.x-X)+K,y:-$/W*(Q-Z.y-H)+Q};if(q&&q.active()){var tt=t.dragData.touchDragEles;h(tt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),q.unactivate().emit("freeon"),tt.emit("free"),t.dragData.didDrag&&(q.emit("dragfreeon"),tt.emit("dragfree"))}a.viewport({zoom:$,pan:J,cancelOnFailedZoom:!0}),a.emit("pinchzoom"),I=V,E=b,w=S,C=O,N=P,t.pinching=!0}e.touches[0]&&(p=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=p[0],s[1]=p[1]),e.touches[1]&&(p=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=p[0],s[3]=p[1]),e.touches[2]&&(p=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=p[0],s[5]=p[1])}else if(e.touches[0]&&!t.touchData.didSelect){var et=t.touchData.start,nt=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(B=t.findNearestElement(s[0],s[1],!0,!0)),r&&null!=et&&e.preventDefault(),r&&null!=et&&t.nodeIsDraggable(et))if(f){tt=t.dragData.touchDragEles;var rt=!t.dragData.didDrag;rt&&u(tt,{inDragLayer:!0}),t.dragData.didDrag=!0;var it={x:0,y:0};M(g[0])&&M(g[1])&&(it.x+=g[0],it.y+=g[1],rt&&(t.redrawHint("eles",!0),(ot=t.touchData.dragDelta)&&M(ot[0])&&M(ot[1])&&(it.x+=ot[0],it.y+=ot[1]))),t.hoverData.draggingEles=!0,tt.silentShift(it).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==l[0]&&t.touchData.startPosition[1]==l[1]&&t.redrawHint("eles",!0),t.redraw()}else{var ot;0===(ot=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(ot.push(g[0]),ot.push(g[1])):(ot[0]+=g[0],ot[1]+=g[1])}if(n(et||B,["touchmove","tapdrag","vmousemove"],e,{x:s[0],y:s[1]}),et&&et.grabbed()||B==nt||(nt&&nt.emit({originalEvent:e,type:"tapdragout",position:{x:s[0],y:s[1]}}),B&&B.emit({originalEvent:e,type:"tapdragover",position:{x:s[0],y:s[1]}})),t.touchData.last=B,r)for(z=0;z<s.length;z++)s[z]&&t.touchData.startPosition[z]&&f&&(t.touchData.singleTouchMoved=!0);r&&(null==et||et.pannable())&&a.panningEnabled()&&a.userPanningEnabled()&&(i(et,t.touchData.starts)&&(e.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ie(t.touchData.startPosition)),t.swipePanning?(a.panBy({x:g[0]*c,y:g[1]*c}),a.emit("dragpan")):f&&(t.swipePanning=!0,a.panBy({x:v*c,y:_*c}),a.emit("dragpan"),et&&(et.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),p=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=p[0],s[1]=p[1])}for(y=0;y<s.length;y++)l[y]=s[y];r&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",z=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(window,"touchend",G=function(r){var i=t.touchData.start;if(t.touchData.capture){0===r.touches.length&&(t.touchData.capture=!1),r.preventDefault();var o=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var a,s=t.cy,u=s.zoom(),l=t.touchData.now,c=t.touchData.earlier;if(r.touches[0]){var p=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=p[0],l[1]=p[1]}if(r.touches[1]&&(p=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY),l[2]=p[0],l[3]=p[1]),r.touches[2]&&(p=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY),l[4]=p[0],l[5]=p[1]),i&&i.unactivate(),t.touchData.cxt){if(a={originalEvent:r,type:"cxttapend",position:{x:l[0],y:l[1]}},i?i.emit(a):s.emit(a),!t.touchData.cxtDragged){var f={originalEvent:r,type:"cxttap",position:{x:l[0],y:l[1]}};i?i.emit(f):s.emit(f)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!r.touches[2]&&s.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var d=s.collection(t.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,t.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:r,position:{x:l[0],y:l[1]}}),d.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),d.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),r.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=i){var y=i._private.grabbed;h(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),y&&(i.emit("freeon"),g.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]}),i.unactivate(),t.touchData.start=null}else{var v=t.findNearestElement(l[0],l[1],!0,!0);n(v,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]})}var m=t.touchData.startPosition[0]-l[0],_=m*m,b=t.touchData.startPosition[1]-l[1],x=(_+b*b)*u*u;t.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],r,{x:l[0],y:l[1]}),q=!1,r.timeStamp-U<=s.multiClickDebounceTime()?(V&&clearTimeout(V),q=!0,U=null,n(i,["dbltap","vdblclick"],r,{x:l[0],y:l[1]})):(V=setTimeout((function(){q||n(i,["onetap","voneclick"],r,{x:l[0],y:l[1]})}),s.multiClickDebounceTime()),U=r.timeStamp)),null!=i&&!t.dragData.didDrag&&i._private.selectable&&x<t.touchTapThreshold2&&!t.pinching&&("single"===s.selectionType()?(s.$(e).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var E=0;E<l.length;E++)c[E]=l[E];t.dragData.didDrag=!1,0===r.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),r.touches.length<2&&(1===r.touches.length&&(t.touchData.startGPosition=[r.touches[0].clientX,r.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var X=[],H=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},W=function(t){for(var e=0;e<X.length;e++)if(X[e].event.pointerId===t.pointerId)return void X.splice(e,1)},$=function(t){t.touches=X.map((function(t){return t.touch}))},Z=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",(function(t){Z(t)||(t.preventDefault(),function(t){X.push(function(t){return{event:t,touch:H(t)}}(t))}(t),$(t),F(t))})),t.registerBinding(t.container,"pointerup",(function(t){Z(t)||(W(t),$(t),G(t))})),t.registerBinding(t.container,"pointercancel",(function(t){Z(t)||(W(t),$(t),z())})),t.registerBinding(t.container,"pointermove",(function(t){Z(t)||(t.preventDefault(),function(t){var e=X.filter((function(e){return e.event.pointerId===t.pointerId}))[0];e.event=t,e.touch=H(t)}(t),$(t),B(t))}))}};var Ha={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return Re(i,o,this.points,t,e,n/2,r/2,a)},checkPoint:function(t,e,n,r,i,o,a){return Se(t,e,this.points,o,a,r,i,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(l<0)return[];var c=l/u;return[(n-t)*c+t,(r-e)*c+e]}(i,o,t,e,n/2+a,r/2+a)},checkPoint:function(t,e,n,r,i,o,a){return De(t,e,r,i,o,a,n)}}},generateRoundPolygon:function(t,e){for(var n=new Array(2*e.length),r=0;r<e.length/2;r++){var i,o=2*r;i=r<e.length/2-1?2*(r+1):0,n[4*r]=e[o],n[4*r+1]=e[o+1];var a=e[i]-e[o],s=e[i+1]-e[o+1],u=Math.sqrt(a*a+s*s);n[4*r+2]=a/u,n[4*r+3]=s/u}return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("round-polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o,a,s){for(var u,l=[],c=new Array(n.length),h=o/2,p=a/2,f=qe(o,a),d=0;d<n.length/4;d++){var g,y;y=0===d?n.length-2:4*d-2,g=4*d+2;var v=r+h*n[4*d],m=i+p*n[4*d+1],_=-n[y]*n[g]-n[y+1]*n[g+1],b=f/Math.tan(Math.acos(_)/2),x=v-b*n[y],E=m-b*n[y+1],w=v+b*n[g],C=m+b*n[g+1];0===d?(c[n.length-2]=x,c[n.length-1]=E):(c[4*d-2]=x,c[4*d-1]=E),c[4*d]=w,c[4*d+1]=C;var N=n[y+1],I=-n[y];N*n[g]+I*n[g+1]<0&&(N*=-1,I*=-1),0!==(u=Me(t,e,r,i,x+N*f,E+I*f,f)).length&&l.push(u[0],u[1])}for(var T=0;T<c.length/4;T++)0!==(u=Pe(t,e,r,i,c[4*T],c[4*T+1],c[4*T+2],c[4*T+3],!1)).length&&l.push(u[0],u[1]);if(l.length>2){for(var S=[l[0],l[1]],A=Math.pow(S[0]-t,2)+Math.pow(S[1]-e,2),L=1;L<l.length/2;L++){var D=Math.pow(l[2*L]-t,2)+Math.pow(l[2*L+1]-e,2);D<=A&&(S[0]=l[2*L],S[1]=l[2*L+1],A=D)}return S}return l}(i,o,this.points,t,e,n,r)},checkPoint:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o,a){for(var s=new Array(n.length),u=o/2,l=a/2,c=qe(o,a),h=c*c,p=0;p<n.length/4;p++){var f,d;d=0===p?n.length-2:4*p-2,f=4*p+2;var g=r+u*n[4*p],y=i+l*n[4*p+1],v=-n[d]*n[f]-n[d+1]*n[f+1],m=c/Math.tan(Math.acos(v)/2),_=g-m*n[d],b=y-m*n[d+1],x=g+m*n[f],E=y+m*n[f+1];s[4*p]=_,s[4*p+1]=b,s[4*p+2]=x,s[4*p+3]=E;var w=n[d+1],C=-n[d];w*n[f]+C*n[f+1]<0&&(w*=-1,C*=-1);var N=_+w*c,I=b+C*c;if(Math.pow(N-t,2)+Math.pow(I-e,2)<=h)return!0}return Te(t,e,s)}(t,e,this.points,o,a,r,i)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Fe(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return Ee(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Ge(r,i),u=2*s;return!!(Se(t,e,this.points,o,a,r,i-u,[0,-1],n)||Se(t,e,this.points,o,a,r-u,i,[0,-1],n)||De(t,e,u,u,o-r/2+s,a-i/2+s,n)||De(t,e,u,u,o+r/2-s,a-i/2+s,n)||De(t,e,u,u,o+r/2-s,a+i/2-s,n)||De(t,e,u,u,o-r/2+s,a+i/2-s,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Fe(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,o=e/2,a=t/2,s=n-a,u=n+a,l=r-o,c=r+o;return{topLeft:[s,l+i,s+i,l,s+i,l+i],topRight:[u-i,l,u,l+i,u-i,l+i],bottomRight:[u,c-i,u-i,c,u-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateCutTrianglePts(n+2*a,r+2*a,t,e),u=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return Re(i,o,u,t,e)},checkPoint:function(t,e,n,r,i,o,a){if(Se(t,e,this.points,o,a,r,i-2*this.cornerLength,[0,-1],n))return!0;if(Se(t,e,this.points,o,a,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,o,a);return Te(t,e,s.topLeft)||Te(t,e,s.topRight)||Te(t,e,s.bottomRight)||Te(t,e,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Fe(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateBarrelBezierPts(n+2*a,r+2*a,t,e),u=function(t){var e=pe({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),n=pe({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),r=pe({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,n.x,n.y,r.x,r.y,t[4],t[5]]},l=[].concat(u(s.topLeft),u(s.topRight),u(s.bottomRight),u(s.bottomLeft));return Re(i,o,l,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,o=t/2,a=n-o,s=n+o,u=r-i,l=r+i,c=Ve(t,e),h=c.heightOffset,p=c.widthOffset,f=c.ctrlPtOffsetPct*t,d={topLeft:[a,u+h,a+f,u,a+p,u],topRight:[s-p,u,s-f,u,s,u+h],bottomRight:[s,l-h,s-f,l,s-p,l],bottomLeft:[a+p,l,a+f,l,a,l-h]};return d.topLeft.isTop=!0,d.topRight.isTop=!0,d.bottomLeft.isBottom=!0,d.bottomRight.isBottom=!0,d},checkPoint:function(t,e,n,r,i,o,a){var s=Ve(r,i),u=s.heightOffset,l=s.widthOffset;if(Se(t,e,this.points,o,a,r,i-2*u,[0,-1],n))return!0;if(Se(t,e,this.points,o,a,r-2*l,i,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(r,i,o,a),h=function(t,e,n){var r,i,o=n[4],a=n[2],s=n[0],u=n[5],l=n[1],c=Math.min(o,s),h=Math.max(o,s),p=Math.min(u,l),f=Math.max(u,l);if(c<=t&&t<=h&&p<=e&&e<=f){var d=[(r=o)-2*(i=a)+s,2*(i-r),r],g=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*t;return[(-e+o)/a,(-e-o)/a]}(d[0],d[1],d[2],t).filter((function(t){return 0<=t&&t<=1}));if(g.length>0)return g[0]}return null},p=Object.keys(c),f=0;f<p.length;f++){var d=c[p[f]],g=h(t,e,d);if(null!=g){var y=d[5],v=d[3],m=d[1],_=he(y,v,m,g);if(d.isTop&&_<=e)return!0;if(d.isBottom&&e<=_)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Fe(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=e-(r/2+a),u=Pe(i,o,t,e,t-(n/2+a),s,t+(n/2+a),s,!1);return u.length>0?u:Ee(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Ge(r,i),u=2*s;if(Se(t,e,this.points,o,a,r,i-u,[0,-1],n))return!0;if(Se(t,e,this.points,o,a,r-u,i,[0,-1],n))return!0;var l=r/2+2*n,c=i/2+2*n;return!!Te(t,e,[o-l,a-c,o-l,a,o+l,a,o+l,a-c])||!!De(t,e,u,u,o+r/2-s,a+i/2-s,n)||!!De(t,e,u,u,o-r/2+s,a+i/2-s,n)}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Fe(3,0)),this.generateRoundPolygon("round-triangle",Fe(3,0)),this.generatePolygon("rectangle",Fe(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",Fe(5,0)),this.generateRoundPolygon("round-pentagon",Fe(5,0)),this.generatePolygon("hexagon",Fe(6,0)),this.generateRoundPolygon("round-hexagon",Fe(6,0)),this.generatePolygon("heptagon",Fe(7,0)),this.generateRoundPolygon("round-heptagon",Fe(7,0)),this.generatePolygon("octagon",Fe(8,0)),this.generateRoundPolygon("round-octagon",Fe(8,0));var r=new Array(20),i=ze(5,0),o=ze(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(s=0;s<5;s++)r[4*s]=i[2*s],r[4*s+1]=i[2*s+1],r[4*s+2]=o[2*s],r[4*s+3]=o[2*s+1];r=Be(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}}},Wa={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Dt();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&Nt("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort((function(t,e){return e.priority-t.priority}))}}},$a=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};Wa.startRenderLoop=function(){var t=this,e=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,ot((function n(r){if(!t.destroyed){if(e.batching());else if(t.requestedFrame&&!t.skipFrame){$a(t,!0,r);var i=at();t.render(t.renderOptions);var o=t.lastDrawTime=at();void 0===t.averageRedrawTime&&(t.averageRedrawTime=o-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var a=o-i;t.redrawTotalTime+=a,t.lastRedrawTime=a,t.averageRedrawTime=t.averageRedrawTime/2+a/2,t.requestedFrame=!1}else $a(t,!1,r);t.skipFrame=!1,ot(n)}})))};var Za=function(t){this.init(t)},Ka=Za.prototype;Ka.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Ka.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(x){var r=x.document,i=r.head,o="__________cytoscape_stylesheet",a="__________cytoscape_container",s=null!=r.getElementById(o);if(n.className.indexOf(a)<0&&(n.className=(n.className||"")+" "+a),!s){var u=r.createElement("style");u.id=o,u.textContent="."+a+" { position: relative; }",i.insertBefore(u,i.children[0])}"static"===x.getComputedStyle(n).getPropertyValue("position")&&Tt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=M(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},Ka.notify=function(t,e){var n=this,r=n.cy;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&r.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},Ka.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},Ka.isHeadless=function(){return!1},[La,ja,Ya,Xa,Ha,Wa].forEach((function(t){Q(Ka,t)}));var Qa=1e3/60,Ja=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=l.default((function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()}),t.deqRedrawThreshold),i=t.priority||Ct;n.beforeRender((function(i,o){var a=at(),s=n.averageRedrawTime,u=n.lastRedrawTime,l=[],c=n.cy.extent(),h=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var p=at(),f=p-a,d=p-o;if(u<Qa){var g=Qa-(i?s:0);if(d>=t.deqFastCost*g)break}else if(i){if(f>=t.deqCost*u||f>=t.deqAvgCost*s)break}else if(d>=t.deqNoDrawCost*Qa)break;var y=t.deq(e,h,c);if(!(y.length>0))break;for(var v=0;v<y.length;v++)l.push(y[v])}l.length>0&&(t.onDeqd(e,l),!i&&t.shouldRedraw(e,l,h,c)&&r())}),i(e))}}},ts=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;g(this,t),this.idsByKey=new Ft,this.keyForId=new Ft,this.cachesByLvl=new Ft,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return v(t,[{key:"getIdsFor",value:function(t){null==t&&Nt("Can not get id list for null key");var e=this.idsByKey,n=this.idsByKey.get(t);return n||(n=new zt,e.set(t,n)),n}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e),r=this.getKey(t);this.deleteIdForKey(n,e),this.addIdForKey(r,e),this.keyForId.set(e,r)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteIdForKey(n,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,n=this.lvls,r=e.get(t);return r||(r=new Ft,e.set(t,r),n.push(t)),r}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var n=this.getKey(t),r=this.getCache(n,e);return null!=r&&this.updateKeyMappingFor(t),r}},{key:"getForCachedKey",value:function(t,e){var n=this.keyForId.get(t.id());return this.getCache(n,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var n=this.getKey(t);return this.hasCache(n,e)}},{key:"setCache",value:function(t,e,n){n.key=t,this.getCachesAt(e).set(t,n)}},{key:"set",value:function(t,e,n){var r=this.getKey(t);this.setCache(r,e,n),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var n=this.getKey(t);this.deleteCache(n,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach((function(n){return e.deleteCache(t,n)}))}},{key:"invalidate",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteKeyMappingFor(t);var r=this.doesEleInvalidateKey(t);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),t}(),es={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},ns=Mt({getKey:null,doesEleInvalidateKey:Et,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:xt,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),rs=function(t,e){var n=this;n.renderer=t,n.onDequeues=[];var r=ns(e);Q(n,r),n.lookup=new ts(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},is=rs.prototype;is.reasons=es,is.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},is.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},is.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new c.default((function(t,e){return e.reqs-t.reqs}))},is.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},is.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed())return null;if(!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(ae(s*n))),r<-4)r=-4;else if(s>=7.99||r>3)return null;var l=Math.pow(2,r),c=e.h*l,h=e.w*l,p=a.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,p))return null;var f,d=u.get(t,r);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;if(f=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||h>1024)return null;var g=o.getTextureQueue(f),y=g[g.length-2],v=function(){return o.recycleTexture(f,h)||o.addTexture(f,h)};y||(y=g[g.length-1]),y||(y=v()),y.width-y.usedWidth<h&&(y=v());for(var m,_=function(t){return t&&t.scaledLabelShown===p},b=i&&i===es.dequeue,x=i&&i===es.highQuality,E=i&&i===es.downscale,w=r+1;w<=3;w++){var C=u.get(t,w);if(C){m=C;break}}var N=m&&m.level===r+1?m:null,I=function(){y.context.drawImage(N.texture.canvas,N.x,0,N.width,N.height,y.usedWidth,0,h,c)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,h,f),_(N))I();else if(_(m)){if(!x)return o.queueElement(t,m.level-1),m;for(var T=m.level;T>r;T--)N=o.getElement(t,e,n,T,es.downscale);I()}else{var S;if(!b&&!x&&!E)for(var A=r-1;A>=-4;A--){var L=u.get(t,A);if(L){S=L;break}}if(_(S))return o.queueElement(t,r),S;y.context.translate(y.usedWidth,0),y.context.scale(l,l),this.drawElement(y.context,t,e,p,!1),y.context.scale(1/l,1/l),y.context.translate(-y.usedWidth,0)}return d={x:y.usedWidth,texture:y,level:r,scale:l,width:h,height:c,scaledLabelShown:p},y.usedWidth+=Math.ceil(h+8),y.eleCaches.push(d),u.set(t,r,d),o.checkTextureFullness(y),d},is.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},is.invalidateElement=function(t){var e=this,n=e.lookup,r=[];if(n.isInvalid(t)){for(var i=-4;i<=3;i++){var o=n.getForCachedKey(t,i);o&&r.push(o)}if(n.invalidate(t))for(var a=0;a<r.length;a++){var s=r[a],u=s.texture;u.invalidatedWidth+=s.width,s.invalidated=!0,e.checkTextureUtility(u)}e.removeFromQueue(t)}},is.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},is.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Ot(e,t):t.fullnessChecks++},is.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;Ot(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var a=i[o];r.deleteCache(a.key,a.level)}Pt(i),this.getRetiredTextureQueue(e).push(t)},is.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},is.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var o=r[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Pt(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Ot(r,o),n.push(o),o}},is.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),o=r[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var a={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(a),r[i]=a}},is.dequeue=function(t){for(var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<1&&n.size()>0;a++){var s=n.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(r[u]=null,!c){i.push(s);var h=e.getBoundingBox(l);e.getElement(l,h,t,s.level,es.dequeue)}}return i},is.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=bt,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},is.onDequeue=function(t){this.onDequeues.push(t)},is.offDequeue=function(t){Ot(this.onDequeues,t)},is.setupDequeueing=Ja({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var o=e[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if(_e(s,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var os=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=at()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=l.default((function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)}),50),n.beforeRender((function(t,n){n-e.lastInvalidationTime<=250?e.skipping=!0:e.skipping=!1}),n.beforeRenderPriorities.lyrTxrSkip),e.layersQueue=new c.default((function(t,e){return e.reqs-t.reqs})),e.setupDequeueing()},as=os.prototype,ss=0,us=Math.pow(2,53)-1;as.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:ss=++ss%us,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(n,n),s.translate(u,l),a},as.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),o=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(ae(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var a,s,u=r.layersByLevel,l=Math.pow(2,n),c=u[n]=u[n]||[];if(r.levelIsComplete(n,t))return c;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return s=u[e],!0},i=function(t){if(!s)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};i(1),i(-1);for(var o=c.length-1;o>=0;o--){var a=c[o];a.invalid&&Ot(c,a)}}();var h=function(e){var i=(e=e||{}).after;if(function(){if(!a){a=de();for(var e=0;e<t.length;e++)n=a,r=t[e].boundingBox(),n.x1=Math.min(n.x1,r.x1),n.x2=Math.max(n.x2,r.x2),n.w=n.x2-n.x1,n.y1=Math.min(n.y1,r.y1),n.y2=Math.max(n.y2,r.y2),n.h=n.y2-n.y1}var n,r}(),a.w*l*(a.h*l)>16e6)return null;var o=r.makeLayer(a,n);if(null!=i){var s=c.indexOf(i)+1;c.splice(s,0,o)}else(void 0===e.insert||e.insert)&&c.unshift(o);return o};if(r.skipping&&!o)return null;for(var p=null,f=t.length/1,d=!o,g=0;g<t.length;g++){var y=t[g],v=y._private.rscratch,m=v.imgLayerCaches=v.imgLayerCaches||{},_=m[n];if(_)p=_;else{if((!p||p.eles.length>=f||!xe(p.bb,y.boundingBox()))&&!(p=h({insert:!0,after:p})))return null;s||d?r.queueLayer(p,y):r.drawEleInLayer(p,y,n,e),p.eles.push(y),m[n]=p}}return s||(d?null:c)},as.getEleLevelForLayerLevel=function(t,e){return t},as.drawEleInLayer=function(t,e,n,r){var i=this.renderer,o=t.context,a=e.boundingBox();0!==a.w&&0!==a.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,n,!0),i.setImgSmoothing(o,!0))},as.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===e.length},as.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}}},as.updateElementsInLayers=function(t,e){for(var n=R(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],o=n?t[r]:t[r].ele,a=o._private.rscratch,s=a.imgLayerCaches=a.imgLayerCaches||{},u=-4;u<=2;u++){var l=s[u];l&&(i&&this.getEleLevelForLayerLevel(l.level)!==i.level||e(l,o,i))}},as.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},as.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=at(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,(function(t,n,r){e.invalidateLayer(t)})))},as.invalidateLayer=function(t){if(this.lastInvalidationTime=at(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];Ot(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}},as.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,(function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])}))},as.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},as.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},as.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<1&&0!==n.size();){var o=n.peek();if(o.replacement)n.pop();else if(o.replaces&&o!==o.replaces.replacement)n.pop();else if(o.invalid)n.pop();else{var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,t),i++),0===r.length&&r.push(!0),0===o.elesQueue.length&&(n.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}}return r},as.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[t.level]=t)}this.requestRedraw()}},as.requestRedraw=l.default((function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()}),100),as.setupDequeueing=Ja({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:Ct,shouldRedraw:xt,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var ls,cs={};function hs(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function ps(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function fs(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}var a=n,s=n[0];for(t.moveTo(s.x,s.y),i=1;i<a.length;i++)o=a[i],t.lineTo(o.x,o.y);t.closePath&&t.closePath()}function ds(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1);var o=e,a=o[0];t.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function gs(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}cs.arrowShapeImpl=function(t){return(ls||(ls={polygon:hs,"triangle-backcurve":ps,"triangle-tee":fs,"circle-triangle":ds,"triangle-cross":fs,circle:gs}))[t]};var ys={drawElement:function(t,e,n,r,i,o){e.isNode()?this.drawNode(t,e,n,r,i,o):this.drawEdge(t,e,n,r,i,o)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawElementUnderlay:function(t,e){e.isNode()?this.drawNodeUnderlay(t,e):this.drawEdgeUnderlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,o,a,s){var u=this,l=n.getBoundingBox(e);if(0!==l.w&&0!==l.h){var c=n.getElement(e,l,r,i,o);if(null!=c){var h=s(u,e);if(0===h)return;var p,f,d,g,y,v,m=a(u,e),_=l.x1,b=l.y1,x=l.w,E=l.h;if(0!==m){var w=n.getRotationPoint(e);d=w.x,g=w.y,t.translate(d,g),t.rotate(m),(y=u.getImgSmoothing(t))||u.setImgSmoothing(t,!0);var C=n.getRotationOffset(e);p=C.x,f=C.y}else p=_,f=b;1!==h&&(v=t.globalAlpha,t.globalAlpha=v*h),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,p,f,x,E),1!==h&&(t.globalAlpha=v),0!==m&&(t.rotate(-m),t.translate(-d,-g),y||u.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},vs=function(){return 0},ms=function(t,e){return t.getTextAngle(e,null)},_s=function(t,e){return t.getTextAngle(e,"source")},bs=function(t,e){return t.getTextAngle(e,"target")},xs=function(t,e){return e.effectiveOpacity()},Es=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};ys.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,p=e.boundingBox(),f=!0===o?u.reasons.highQuality:null;if(0!==p.w&&0!==p.h&&e.visible()&&(!r||_e(p,r))){var d=e.isEdge(),g=e.element()._private.rscratch.badLine;a.drawElementUnderlay(t,e),a.drawCachedElementPortion(t,e,u,n,i,f,vs,xs),d&&g||a.drawCachedElementPortion(t,e,l,n,i,f,ms,Es),d&&!g&&(a.drawCachedElementPortion(t,e,c,n,i,f,_s,Es),a.drawCachedElementPortion(t,e,h,n,i,f,bs,Es)),a.drawElementOverlay(t,e)}},ys.drawElements=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];this.drawElement(t,r)}},ys.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];this.drawCachedElement(t,o,n,r)}},ys.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];o.isNode()&&this.drawCachedElement(t,o,n,r)}},ys.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&t.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(t,e,n,r)};var ws={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=e._private.rscratch;if((!o||e.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var u;n&&(u=n,t.translate(-u.x1,-u.y1));var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,p=e.pstyle("line-style").value,f=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,g=l*c,y=l*c,v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;"straight-triangle"===h?(a.eleStrokeStyle(t,e,n),a.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=f,t.lineCap=d,a.eleStrokeStyle(t,e,n),a.drawEdgePath(e,t,s.allpts,p),t.lineCap="butt")},m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;a.drawArrowheads(t,e,n)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var _=e.pstyle("ghost-offset-x").pfValue,b=e.pstyle("ghost-offset-y").pfValue,x=e.pstyle("ghost-opacity").value,E=g*x;t.translate(_,b),v(E),m(E),t.translate(-_,-b)}i&&a.drawEdgeUnderlay(t,e),v(),m(),i&&a.drawEdgeOverlay(t,e),a.drawElementText(t,e,null,r),n&&t.translate(u.x1,u.y1)}}},Cs=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,n){if(n.visible()){var r=n.pstyle("".concat(t,"-opacity")).value;if(0!==r){var i=this,o=i.usePaths(),a=n._private.rscratch,s=2*n.pstyle("".concat(t,"-padding")).pfValue,u=n.pstyle("".concat(t,"-color")).value;e.lineWidth=s,"self"!==a.edgeType||o?e.lineCap="round":e.lineCap="butt",i.colorStrokeStyle(e,u[0],u[1],u[2],r),i.drawEdgePath(n,e,a.allpts,"solid")}}}};ws.drawEdgeOverlay=Cs("overlay"),ws.drawEdgeUnderlay=Cs("underlay"),ws.drawEdgePath=function(t,e,n,r){var i,o=t._private.rscratch,a=e,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var h=n.join("$");o.pathCacheKey&&o.pathCacheKey===h?(i=e=o.pathCache,s=!0):(i=e=new Path2D,o.pathCacheKey=h,o.pathCache=i)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<n.length;p+=4)e.quadraticCurveTo(n[p],n[p+1],n[p+2],n[p+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<n.length;f+=2)e.lineTo(n[f],n[f+1])}e=a,u?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},ws.drawEdgeTrianglePath=function(t,e,n){e.fillStyle=e.strokeStyle;for(var r=t.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var o=[n[i+2]-n[i],n[i+3]-n[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],u=[s[0]*r/2,s[1]*r/2];e.beginPath(),e.moveTo(n[i]-u[0],n[i+1]-u[1]),e.lineTo(n[i]+u[0],n[i+1]+u[1]),e.lineTo(n[i+2],n[i+3]),e.closePath(),e.fill()}},ws.drawArrowheads=function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},ws.drawArrowhead=function(t,e,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=this,u=e.pstyle(n+"-arrow-shape").value;if("none"!==u){var l="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",c=e.pstyle(n+"-arrow-fill").value,h=e.pstyle("width").pfValue,p=e.pstyle("opacity").value;void 0===a&&(a=p);var f=t.globalCompositeOperation;1===a&&"hollow"!==c||(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,l,h,u,r,i,o),t.globalCompositeOperation=f);var d=e.pstyle(n+"-arrow-color").value;s.colorFillStyle(t,d[0],d[1],d[2],a),s.colorStrokeStyle(t,d[0],d[1],d[2],a),s.drawArrowShape(e,t,c,h,u,r,i,o)}}},ws.drawArrowShape=function(t,e,n,r,i,o,a,s){var u,l=this,c=this.usePaths()&&"triangle-cross"!==i,h=!1,p=e,f={x:o,y:a},d=t.pstyle("arrow-scale").value,g=this.getArrowWidth(r,d),y=l.arrowShapes[i];if(c){var v=l.arrowPathCache=l.arrowPathCache||[],m=dt(i),_=v[m];null!=_?(u=e=_,h=!0):(u=e=new Path2D,v[m]=u)}h||(e.beginPath&&e.beginPath(),c?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,g,s,f,r),e.closePath&&e.closePath()),e=p,c&&(e.translate(o,a),e.rotate(s),e.scale(g,g)),"filled"!==n&&"both"!==n||(c?e.fill(u):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(y.matchEdgeWidth?r:1)/(c?g:1),e.lineJoin="miter",c?e.stroke(u):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-s),e.translate(-o,-a))};var Ns={safeDrawImage:function(t,e,n,r,i,o,a,s,u,l){if(!(i<=0||o<=0||u<=0||l<=0))try{t.drawImage(e,n,r,i,o,a,s,u,l)}catch(t){Tt(t)}},drawInscribedImage:function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,u=a.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),h=c(n,"background-fit","value",r),p=c(n,"background-repeat","value",r),f=n.width(),d=n.height(),g=2*n.padding(),y=f+("inner"===c(n,"background-width-relative-to","value",r)?0:g),v=d+("inner"===c(n,"background-height-relative-to","value",r)?0:g),m=n._private.rscratch,_="node"===c(n,"background-clip","value",r),b=c(n,"background-image-opacity","value",r)*i,x=c(n,"background-image-smoothing","value",r),E=e.width||e.cachedW,w=e.height||e.cachedH;null!=E&&null!=w||(document.body.appendChild(e),E=e.cachedW=e.width||e.offsetWidth,w=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var C=E,N=w;if("auto"!==c(n,"background-width","value",r)&&(C="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*y:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(N="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*v:c(n,"background-height","pfValue",r)),0!==C&&0!==N){if("contain"===h)C*=I=Math.min(y/C,v/N),N*=I;else if("cover"===h){var I;C*=I=Math.max(y/C,v/N),N*=I}var T=s-y/2,S=c(n,"background-position-x","units",r),A=c(n,"background-position-x","pfValue",r);T+="%"===S?(y-C)*A:A;var L=c(n,"background-offset-x","units",r),D=c(n,"background-offset-x","pfValue",r);T+="%"===L?(y-C)*D:D;var M=u-v/2,O=c(n,"background-position-y","units",r),P=c(n,"background-position-y","pfValue",r);M+="%"===O?(v-N)*P:P;var R=c(n,"background-offset-y","units",r),k=c(n,"background-offset-y","pfValue",r);M+="%"===R?(v-N)*k:k,m.pathCache&&(T-=s,M-=u,s=0,u=0);var F=t.globalAlpha;t.globalAlpha=b;var B=o.getImgSmoothing(t),z=!1;if("no"===x&&B?(o.setImgSmoothing(t,!1),z=!0):"yes"!==x||B||(o.setImgSmoothing(t,!0),z=!0),"no-repeat"===p)_&&(t.save(),m.pathCache?t.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,y,v),t.clip())),o.safeDrawImage(t,e,0,0,E,w,T,M,C,N),_&&t.restore();else{var G=t.createPattern(e,p);t.fillStyle=G,o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,y,v),t.translate(T,M),t.fill(),t.translate(-T,-M)}t.globalAlpha=F,z&&o.setImgSmoothing(t,B)}}},Is={eleTextBiggerThanMin:function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(ae(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},drawElementText:function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==r){if(o&&!a.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),h=e.pstyle("source-label"),p=e.pstyle("target-label");if(l||(!c||!c.value)&&(!h||!h.value)&&(!p||!p.value))return;t.textAlign="center",t.textBaseline="bottom"}var f,d=!n;n&&(f=n,t.translate(-f.x1,-f.y1)),null==i?(a.drawText(t,e,null,d,o),e.isEdge()&&(a.drawText(t,e,"source",d,o),a.drawText(t,e,"target",d,o))):a.drawText(t,e,i,d,o),n&&t.translate(f.x1,f.y1)},getFontCache:function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return e={context:t},this.fontCaches.push(e),e},setupTextStyle:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)},getTextAngle:function(t,e){var n=t._private.rscratch,r=e?e+"-":"",i=t.pstyle(r+"text-rotation"),o=Rt(n,"labelAngle",e);return"autorotate"===i.strValue?t.isEdge()?o:0:"none"===i.strValue?0:i.pfValue},drawText:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private.rscratch,a=i?e.effectiveOpacity():1;if(!i||0!==a&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var s,u,l=Rt(o,"labelX",n),c=Rt(o,"labelY",n),h=this.getLabelText(e,n);if(null!=h&&""!==h&&!isNaN(l)&&!isNaN(c)){this.setupTextStyle(t,e,i);var p,f=n?n+"-":"",d=Rt(o,"labelWidth",n),g=Rt(o,"labelHeight",n),y=e.pstyle(f+"text-margin-x").pfValue,v=e.pstyle(f+"text-margin-y").pfValue,m=e.isEdge(),_=e.pstyle("text-halign").value,b=e.pstyle("text-valign").value;switch(m&&(_="center",b="center"),l+=y,c+=v,0!==(p=r?this.getTextAngle(e,n):0)&&(s=l,u=c,t.translate(s,u),t.rotate(p),l=0,c=0),b){case"top":break;case"center":c+=g/2;break;case"bottom":c+=g}var x=e.pstyle("text-background-opacity").value,E=e.pstyle("text-border-opacity").value,w=e.pstyle("text-border-width").pfValue,C=e.pstyle("text-background-padding").pfValue;if(x>0||w>0&&E>0){var N=l-C;switch(_){case"left":N-=d;break;case"center":N-=d/2}var I=c-g-C,T=d+2*C,S=g+2*C;if(x>0){var A=t.fillStyle,L=e.pstyle("text-background-color").value;t.fillStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+x*a+")",0===e.pstyle("text-background-shape").strValue.indexOf("round")?function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}(t,N,I,T,S,2):t.fillRect(N,I,T,S),t.fillStyle=A}if(w>0&&E>0){var D=t.strokeStyle,M=t.lineWidth,O=e.pstyle("text-border-color").value,P=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+E*a+")",t.lineWidth=w,t.setLineDash)switch(P){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=w/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(N,I,T,S),"double"===P){var R=w/2;t.strokeRect(N+R,I+R,T-2*R,S-2*R)}t.setLineDash&&t.setLineDash([]),t.lineWidth=M,t.strokeStyle=D}}var k=2*e.pstyle("text-outline-width").pfValue;if(k>0&&(t.lineWidth=k),"wrap"===e.pstyle("text-wrap").value){var F=Rt(o,"labelWrapCachedLines",n),B=Rt(o,"labelLineHeight",n),z=d/2,G=this.getLabelJustification(e);switch("auto"===G||("left"===_?"left"===G?l+=-d:"center"===G&&(l+=-z):"center"===_?"left"===G?l+=-z:"right"===G&&(l+=z):"right"===_&&("center"===G?l+=z:"right"===G&&(l+=d))),b){case"top":case"center":case"bottom":c-=(F.length-1)*B}for(var q=0;q<F.length;q++)k>0&&t.strokeText(F[q],l,c),t.fillText(F[q],l,c),c+=B}else k>0&&t.strokeText(h,l,c),t.fillText(h,l,c);0!==p&&(t.rotate(-p),t.translate(-s,-u))}}}},Ts={drawNode:function(t,e,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this,l=e._private,c=l.rscratch,h=e.position();if(M(h.x)&&M(h.y)&&(!s||e.visible())){var p,f,d=s?e.effectiveOpacity():1,g=u.usePaths(),y=!1,v=e.padding();r=e.width()+2*v,i=e.height()+2*v,n&&(f=n,t.translate(-f.x1,-f.y1));for(var m=e.pstyle("background-image").value,_=new Array(m.length),b=new Array(m.length),x=0,E=0;E<m.length;E++){var w=m[E];if(_[E]=null!=w&&"none"!==w){var C=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",E);x++,b[E]=u.getCachedImage(w,C,(function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")}))}}var N=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,T=e.pstyle("background-opacity").value*d,S=e.pstyle("border-color").value,A=e.pstyle("border-style").value,L=e.pstyle("border-opacity").value*d;t.lineJoin="miter";var D=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;u.eleFillStyle(t,e,n)},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;u.colorStrokeStyle(t,S[0],S[1],S[2],e)},P=e.pstyle("shape").strValue,R=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(h.x,h.y);var k=u.nodePathCache=u.nodePathCache||[],F=gt("polygon"===P?P+","+R.join(","):P,""+i,""+r),B=k[F];null!=B?(p=B,y=!0,c.pathCache=p):(p=new Path2D,k[F]=c.pathCache=p)}var z=function(){if(!y){var n=h;g&&(n={x:0,y:0}),u.nodeShapes[u.getNodeShape(e)].draw(p||t,n.x,n.y,r,i)}g?t.fill(p):t.fill()},G=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=l.backgrounding,o=0,a=0;a<b.length;a++){var s=e.cy().style().getIndexedStyle(e,"background-image-containment","value",a);r&&"over"===s||!r&&"inside"===s?o++:_[a]&&b[a].complete&&!b[a].error&&(o++,u.drawInscribedImage(t,b[a],e,a,n))}l.backgrounding=!(o===x),i!==l.backgrounding&&e.updateStyle(!1)},q=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;u.hasPie(e)&&(u.drawPie(t,e,o),n&&(g||u.nodeShapes[u.getNodeShape(e)].draw(t,h.x,h.y,r,i)))},V=function(){var e=(N>0?N:-N)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:d),n=N>0?0:255;0!==N&&(u.colorFillStyle(t,n,n,n,e),g?t.fill(p):t.fill())},U=function(){if(I>0){if(t.lineWidth=I,t.lineCap="butt",t.setLineDash)switch(A){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(g?t.stroke(p):t.stroke(),"double"===A){t.lineWidth=I/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(p):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}};if("yes"===e.pstyle("ghost").value){var j=e.pstyle("ghost-offset-x").pfValue,Y=e.pstyle("ghost-offset-y").pfValue,X=e.pstyle("ghost-opacity").value,H=X*d;t.translate(j,Y),D(X*T),z(),G(H,!0),O(X*L),U(),q(0!==N||0!==I),G(H,!1),V(H),t.translate(-j,-Y)}g&&t.translate(-h.x,-h.y),a&&u.drawNodeUnderlay(t,e,h,r,i),g&&t.translate(h.x,h.y),D(),z(),G(d,!0),O(),U(),q(0!==N||0!==I),G(d,!1),V(),g&&t.translate(-h.x,-h.y),u.drawElementText(t,e,null,o),a&&u.drawNodeOverlay(t,e,h,r,i),n&&t.translate(f.x1,f.y1)}}},Ss=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,n,r,i,o){if(n.visible()){var a=n.pstyle("".concat(t,"-padding")).pfValue,s=n.pstyle("".concat(t,"-opacity")).value,u=n.pstyle("".concat(t,"-color")).value,l=n.pstyle("".concat(t,"-shape")).value;if(s>0){if(r=r||n.position(),null==i||null==o){var c=n.padding();i=n.width()+2*c,o=n.height()+2*c}this.colorFillStyle(e,u[0],u[1],u[2],s),this.nodeShapes[l].draw(e,r.x,r.y,i+2*a,o+2*a),e.fill()}}}};Ts.drawNodeOverlay=Ss("overlay"),Ts.drawNodeUnderlay=Ss("underlay"),Ts.hasPie=function(t){return(t=t[0])._private.hasPie},Ts.drawPie=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,h=0;this.usePaths()&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var p=1;p<=i.pieBackgroundN;p++){var f=e.pstyle("pie-"+p+"-background-size").value,d=e.pstyle("pie-"+p+"-background-color").value,g=e.pstyle("pie-"+p+"-background-opacity").value*n,y=f/100;y+h>1&&(y=1-h);var v=1.5*Math.PI+2*Math.PI*h,m=v+2*Math.PI*y;0===f||h>=1||h+y>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,c,v,m),t.closePath(),this.colorFillStyle(t,d[0],d[1],d[2],g),t.fill(),h+=y)}};for(var As={getPixelRatio:function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},paintCache:function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},createGradientStyleFor:function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,u=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var l=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),p=ue(l,h),f=ue(c,h);o=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,f))}else{var d=a?{x:0,y:0}:n.position(),g=n.paddedWidth(),y=n.paddedHeight();o=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(g,y))}else if(n.isEdge()){var v=n.sourceEndpoint(),m=n.targetEndpoint();o=t.createLinearGradient(v.x,v.y,m.x,m.y)}else{var _=a?{x:0,y:0}:n.position(),b=n.paddedWidth()/2,x=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":o=t.createLinearGradient(_.x,_.y-x,_.x,_.y+x);break;case"to-top":o=t.createLinearGradient(_.x,_.y+x,_.x,_.y-x);break;case"to-left":o=t.createLinearGradient(_.x+b,_.y,_.x-b,_.y);break;case"to-right":o=t.createLinearGradient(_.x-b,_.y,_.x+b,_.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(_.x-b,_.y-x,_.x+b,_.y+x);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(_.x-b,_.y+x,_.x+b,_.y-x);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(_.x+b,_.y-x,_.x-b,_.y+x);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(_.x+b,_.y+x,_.x-b,_.y-x)}}if(!o)return null;for(var E=u.length===s.length,w=s.length,C=0;C<w;C++)o.addColorStop(E?u[C]:C/(w-1),"rgba("+s[C][0]+","+s[C][1]+","+s[C][2]+","+i+")");return o},gradientFillStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},colorFillStyle:function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},eleFillStyle:function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},gradientStrokeStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},colorStrokeStyle:function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},eleStrokeStyle:function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},matchCanvasSize:function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(a=s);var u,l=i*a,c=o*a;if(l!==e.canvasWidth||c!==e.canvasHeight){e.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var p=0;p<e.CANVAS_LAYERS;p++)(u=n.canvases[p]).width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px";for(p=0;p<e.BUFFER_COUNT;p++)(u=n.bufferCanvases[p]).width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px";e.textureMult=1,a<=1&&(u=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,u.width=l*e.textureMult,u.height=c*e.textureMult),e.canvasWidth=l,e.canvasHeight=c}},renderTo:function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(t){var e=(t=t||Dt()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,o=t.forcedPan,a=this,s=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,u=a.cy,l=a.data,c=l.canvasNeedsRedraw,h=a.textureOnViewport&&!e&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),p=void 0!==t.motionBlur?t.motionBlur:a.motionBlur,f=a.motionBlurPxRatio,d=u.hasCompoundNodes(),g=a.hoverData.draggingEles,y=!(!a.hoverData.selecting&&!a.touchData.selecting),v=p=p&&!e&&a.motionBlurEnabled&&!y;e||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!e&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),p&&(null==a.mbFrames&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(v=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!h&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var m=u.style(),_=u.zoom(),b=void 0!==i?i:_,x=u.pan(),E={x:x.x,y:x.y},w={zoom:_,pan:{x:x.x,y:x.y}},C=a.prevViewport;void 0===C||w.zoom!==C.zoom||w.pan.x!==C.pan.x||w.pan.y!==C.pan.y||g&&!d||(a.motionBlurPxRatio=1),o&&(E=o),b*=s,E.x*=s,E.y*=s;var N=a.getCachedZSortedEles();function I(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",a.colorFillStyle(t,255,255,255,a.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function T(t,r){var s,u,c,h;a.clearingMotionBlur||t!==l.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]&&t!==l.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]?(s=E,u=b,c=a.canvasWidth,h=a.canvasHeight):(s={x:x.x*f,y:x.y*f},u=_*f,c=a.canvasWidth*f,h=a.canvasHeight*f),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?I(t,0,0,c,h):e||void 0!==r&&!r||t.clearRect(0,0,c,h),n||(t.translate(s.x,s.y),t.scale(u,u)),o&&t.translate(o.x,o.y),i&&t.scale(i,i)}if(h||(a.textureDrawLastFrame=!1),h){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=u.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var S=a.data.bufferContexts[a.TEXTURE_BUFFER];S.setTransform(1,0,0,1,0,0),S.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:S,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult}),(w=a.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:a.canvasWidth,height:a.canvasHeight}).mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var A=l.contexts[a.NODE],L=a.textureCache.texture;w=a.textureCache.viewport,A.setTransform(1,0,0,1,0,0),p?I(A,0,0,w.width,w.height):A.clearRect(0,0,w.width,w.height);var D=m.core("outside-texture-bg-color").value,M=m.core("outside-texture-bg-opacity").value;a.colorFillStyle(A,D[0],D[1],D[2],M),A.fillRect(0,0,w.width,w.height),_=u.zoom(),T(A,!1),A.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/s,w.height/w.zoom/s),A.drawImage(L,w.mpan.x,w.mpan.y,w.width/w.zoom/s,w.height/w.zoom/s)}else a.textureOnViewport&&!e&&(a.textureCache=null);var O=u.extent(),P=a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles||a.cy.animated(),R=a.hideEdgesOnViewport&&P,k=[];if(k[a.NODE]=!c[a.NODE]&&p&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,k[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),k[a.DRAG]=!c[a.DRAG]&&p&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,k[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||n||r||k[a.NODE]){var F=p&&!k[a.NODE]&&1!==f;T(A=e||(F?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:l.contexts[a.NODE]),p&&!F?"motionBlur":void 0),R?a.drawCachedNodes(A,N.nondrag,s,O):a.drawLayeredElements(A,N.nondrag,s,O),a.debug&&a.drawDebugPoints(A,N.nondrag),n||p||(c[a.NODE]=!1)}if(!r&&(c[a.DRAG]||n||k[a.DRAG])&&(F=p&&!k[a.DRAG]&&1!==f,T(A=e||(F?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:l.contexts[a.DRAG]),p&&!F?"motionBlur":void 0),R?a.drawCachedNodes(A,N.drag,s,O):a.drawCachedElements(A,N.drag,s,O),a.debug&&a.drawDebugPoints(A,N.drag),n||p||(c[a.DRAG]=!1)),a.showFps||!r&&c[a.SELECT_BOX]&&!n){if(T(A=e||l.contexts[a.SELECT_BOX]),1==a.selection[4]&&(a.hoverData.selecting||a.touchData.selecting)){_=a.cy.zoom();var B=m.core("selection-box-border-width").value/_;A.lineWidth=B,A.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",A.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),B>0&&(A.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",A.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(l.bgActivePosistion&&!a.hoverData.selecting){_=a.cy.zoom();var z=l.bgActivePosistion;A.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",A.beginPath(),A.arc(z.x,z.y,m.core("active-bg-size").pfValue/_,0,2*Math.PI),A.fill()}var G=a.lastRedrawTime;if(a.showFps&&G){G=Math.round(G);var q=Math.round(1e3/G);A.setTransform(1,0,0,1,0,0),A.fillStyle="rgba(255, 0, 0, 0.75)",A.strokeStyle="rgba(255, 0, 0, 0.75)",A.lineWidth=1,A.fillText("1 frame = "+G+" ms = "+q+" fps",0,20),A.strokeRect(0,30,250,20),A.fillRect(0,30,250*Math.min(q/60,1),20)}n||(c[a.SELECT_BOX]=!1)}if(p&&1!==f){var V=l.contexts[a.NODE],U=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],j=l.contexts[a.DRAG],Y=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],X=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!v?t.clearRect(0,0,a.canvasWidth,a.canvasHeight):I(t,0,0,a.canvasWidth,a.canvasHeight);var r=f;t.drawImage(e,0,0,a.canvasWidth*r,a.canvasHeight*r,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||k[a.NODE])&&(X(V,U,k[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||k[a.DRAG])&&(X(j,Y,k[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=w,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),p&&(a.motionBlurTimeout=setTimeout((function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!h,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()}),100)),e||u.emit("render")}},Ls={drawPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[2*u],n+s*o[2*u+1]);t.closePath()},drawRoundPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2,u=qe(r,i);t.beginPath&&t.beginPath();for(var l=0;l<o.length/4;l++){var c,h;h=0===l?o.length-2:4*l-2,c=4*l+2;var p=e+a*o[4*l],f=n+s*o[4*l+1],d=-o[h]*o[c]-o[h+1]*o[c+1],g=u/Math.tan(Math.acos(d)/2),y=p-g*o[h],v=f-g*o[h+1],m=p+g*o[c],_=f+g*o[c+1];0===l?t.moveTo(y,v):t.lineTo(y,v),t.arcTo(p,f,m,_,u)}t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Ge(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.arcTo(e+o,n-a,e+o,n,s),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.arcTo(e-o,n-a,e,n-a,s),t.lineTo(e,n-a),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Ge(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.lineTo(e+o,n-a),t.lineTo(e+o,n),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.lineTo(e-o,n-a),t.lineTo(e,n-a),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-o+8,n-a),t.lineTo(e+o-8,n-a),t.lineTo(e+o,n-a+8),t.lineTo(e+o,n+a-8),t.lineTo(e+o-8,n+a),t.lineTo(e-o+8,n+a),t.lineTo(e-o,n+a-8),t.lineTo(e-o,n-a+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,u=e+o,l=n-a,c=n+a,h=Ve(r,i),p=h.widthOffset,f=h.heightOffset,d=h.ctrlPtOffsetPct*p;t.beginPath&&t.beginPath(),t.moveTo(s,l+f),t.lineTo(s,c-f),t.quadraticCurveTo(s+d,c,s+p,c),t.lineTo(u-p,c),t.quadraticCurveTo(u-d,c,u,c-f),t.lineTo(u,l+f),t.quadraticCurveTo(u-d,l,u-p,l),t.lineTo(s+p,l),t.quadraticCurveTo(s+d,l,s,l+f),t.closePath()}},Ds=Math.sin(0),Ms=Math.cos(0),Os={},Ps={},Rs=Math.PI/40,ks=0*Math.PI;ks<2*Math.PI;ks+=Rs)Os[ks]=Math.sin(ks),Ps[ks]=Math.cos(ks);Ls.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=Rs)o=e-s*Os[l]*Ds+s*Ps[l]*Ms,a=n+u*Ps[l]*Ds+u*Os[l]*Ms,0===l?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var Fs={};function Bs(t){var e=t.indexOf(",");return t.substr(e+1)}function zs(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new tr((function(r,i){try{e.toBlob((function(t){null!=t?r(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),n,t.quality)}catch(t){i(t)}}));case"blob":return function(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}(Bs(r()),n);case"base64":return Bs(r());default:return r()}}Fs.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},Fs.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],o=t.full?Math.ceil(n.h):r[3],a=M(t.maxWidth)||M(t.maxHeight),s=this.getPixelRatio(),u=1;if(void 0!==t.scale)i*=t.scale,o*=t.scale,u=t.scale;else if(a){var l=1/0,c=1/0;M(t.maxWidth)&&(l=u*t.maxWidth/i),M(t.maxHeight)&&(c=u*t.maxHeight/o),i*=u=Math.min(l,c),o*=u}a||(i*=s,o*=s,u*=s);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var p=h.getContext("2d");if(i>0&&o>0){p.clearRect(0,0,i,o),p.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(t.full)p.translate(-n.x1*u,-n.y1*u),p.scale(u,u),this.drawElements(p,f),p.scale(1/u,1/u),p.translate(n.x1*u,n.y1*u);else{var d=e.pan(),g={x:d.x*u,y:d.y*u};u*=e.zoom(),p.translate(g.x,g.y),p.scale(u,u),this.drawElements(p,f),p.scale(1/u,1/u),p.translate(-g.x,-g.y)}t.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=t.bg,p.rect(0,0,i,o),p.fill())}return h},Fs.png=function(t){return zs(t,this.bufferCanvasImage(t),"image/png")},Fs.jpg=function(t){return zs(t,this.bufferCanvasImage(t),"image/jpeg")};var Gs=Vs,qs=Vs.prototype;function Vs(t){var e=this;e.data={canvases:new Array(qs.CANVAS_LAYERS),contexts:new Array(qs.CANVAS_LAYERS),canvasNeedsRedraw:new Array(qs.CANVAS_LAYERS),bufferCanvases:new Array(qs.BUFFER_COUNT),bufferContexts:new Array(qs.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",r="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var i=e.data.canvasContainer.style;e.data.canvasContainer.style[n]=r,i.position="relative",i.zIndex="0",i.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[n]=r;var a={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};E&&E.userAgent.match(/msie|trident|edge/i)&&(a["-ms-touch-action"]="none",a["touch-action"]="none");for(var s=0;s<qs.CANVAS_LAYERS;s++){var u=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=u.getContext("2d"),Object.keys(a).forEach((function(t){u.style[t]=a[t]})),u.style.position="absolute",u.setAttribute("data-id","layer"+s),u.style.zIndex=String(qs.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[s]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[qs.NODE].setAttribute("data-id","layer"+qs.NODE+"-node"),e.data.canvases[qs.SELECT_BOX].setAttribute("data-id","layer"+qs.SELECT_BOX+"-selectbox"),e.data.canvases[qs.DRAG].setAttribute("data-id","layer"+qs.DRAG+"-drag"),s=0;s<qs.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var l=de(),c=function(t){return{x:-t.w/2,y:-t.h/2}},h=function(t){return t.boundingBox(),t[0]._private.bodyBounds},p=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||l},f=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||l},d=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||l},g=function(t,e){return e},y=function(t,e,n){var r=t?t+"-":"";return{x:e.x+n.pstyle(r+"text-margin-x").pfValue,y:e.y+n.pstyle(r+"text-margin-y").pfValue}},v=function(t,e,n){var r=t[0]._private.rscratch;return{x:r[e],y:r[n]}},m=e.data.eleTxrCache=new rs(e,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},drawElement:function(t,n,r,i,o){return e.drawElement(t,n,r,!1,!1,o)},getBoundingBox:h,getRotationPoint:function(t){return{x:((e=h(t)).x1+e.x2)/2,y:(e.y1+e.y2)/2};var e},getRotationOffset:function(t){return c(h(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),_=e.data.lblTxrCache=new rs(e,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"main",o)},getBoundingBox:p,getRotationPoint:function(t){return y("",v(t,"labelX","labelY"),t)},getRotationOffset:function(t){var e=p(t),n=c(p(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-e.w;break;case"right":n.x=0}switch(t.pstyle("text-valign").value){case"top":n.y=-e.h;break;case"bottom":n.y=0}}return n},isVisible:g}),b=e.data.slbTxrCache=new rs(e,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"source",o)},getBoundingBox:f,getRotationPoint:function(t){return y("source",v(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return c(f(t))},isVisible:g}),x=e.data.tlbTxrCache=new rs(e,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"target",o)},getBoundingBox:d,getRotationPoint:function(t){return y("target",v(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return c(d(t))},isVisible:g}),w=e.data.lyrTxrCache=new os(e);e.onUpdateEleCalcs((function(t,e){m.invalidateElements(e),_.invalidateElements(e),b.invalidateElements(e),x.invalidateElements(e),w.invalidateElements(e);for(var n=0;n<e.length;n++){var r=e[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}}));var C=function(t){for(var e=0;e<t.length;e++)w.enqueueElementRefinement(t[e].ele)};m.onDequeue(C),_.onDequeue(C),b.onDequeue(C),x.onDequeue(C)}qs.CANVAS_LAYERS=3,qs.SELECT_BOX=0,qs.DRAG=1,qs.NODE=2,qs.BUFFER_COUNT=3,qs.TEXTURE_BUFFER=0,qs.MOTIONBLUR_BUFFER_NODE=1,qs.MOTIONBLUR_BUFFER_DRAG=2,qs.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[qs.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[qs.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[qs.SELECT_BOX]=e}};var Us="undefined"!=typeof Path2D;qs.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},qs.usePaths=function(){return Us&&this.pathsEnabled},qs.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},qs.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},qs.makeOffscreenCanvas=function(t,e){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":d(OffscreenCanvas))?n=new OffscreenCanvas(t,e):((n=document.createElement("canvas")).width=t,n.height=e),n},[cs,ys,ws,Ns,Is,Ts,As,Ls,Fs,{nodeShapeImpl:function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,o,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}}}].forEach((function(t){Q(qs,t)}));var js=[{type:"layout",extensions:Ia},{type:"renderer",extensions:[{name:"null",impl:Ta},{name:"base",impl:Za},{name:"canvas",impl:Gs}]}],Ys={},Xs={};function Hs(t,e,n){var r=n,i=function(n){Tt("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(zo.prototype[e])return i(e);zo.prototype[e]=n}else if("collection"===t){if(to.prototype[e])return i(e);to.prototype[e]=n}else if("layout"===t){for(var o=function(t){this.options=t,n.call(this,t),D(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(t){return t._private.cy},p={addEventFields:function(t,e){e.layout=t,e.cy=h(t),e.target=t},bubble:function(){return!0},parent:function(t){return h(t)}};Q(a,{createEmitter:function(){return this._private.emitter=new _i(p,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),ar.eventAliasesOn(a),r=o}else if("renderer"===t&&"null"!==e&&"base"!==e){var f=Ws("renderer","base"),d=f.prototype,g=n,y=n.prototype,v=function(){f.apply(this,arguments),g.apply(this,arguments)},m=v.prototype;for(var _ in d){var b=d[_];if(null!=y[_])return i(_);m[_]=b}for(var x in y)m[x]=y[x];d.clientFunctions.forEach((function(t){m[t]=m[t]||function(){Nt("Renderer does not implement `renderer."+t+"()` on its prototype")}})),r=v}else if("__proto__"===t||"constructor"===t||"prototype"===t)return Nt(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return tt({map:Ys,keys:[t,e],value:r})}function Ws(t,e){return et({map:Ys,keys:[t,e]})}function $s(t,e,n,r,i){return tt({map:Xs,keys:[t,e,n,r],value:i})}function Zs(t,e,n,r){return et({map:Xs,keys:[t,e,n,r]})}var Ks=function(){return 2===arguments.length?Ws.apply(null,arguments):3===arguments.length?Hs.apply(null,arguments):4===arguments.length?Zs.apply(null,arguments):5===arguments.length?$s.apply(null,arguments):void Nt("Invalid extension access syntax")};zo.prototype.extension=Ks,js.forEach((function(t){t.extensions.forEach((function(e){Hs(t.type,e.name,e.impl)}))}));var Qs=function t(){if(!(this instanceof t))return new t;this.length=0},Js=Qs.prototype;Js.instanceString=function(){return"stylesheet"},Js.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Js.css=function(t,e){var n=this.length-1;if(S(t))this[n].properties.push({name:t,value:e});else if(D(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(null!=s){var u=Po.properties[a]||Po.properties[U(a)];if(null!=u){var l=u.name,c=s;this[n].properties.push({name:l,value:c})}}}return this},Js.style=Js.css,Js.generateStyle=function(t){var e=new Po(t);return this.appendToStyle(e)},Js.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var o=0;o<i.length;o++){var a=i[o];t.css(a.name,a.value)}}return t};var tu=function(t){return void 0===t&&(t={}),D(t)?new zo(t):S(t)?Ks.apply(Ks,arguments):void 0};tu.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(tu),t.apply(null,e),this},tu.warnings=function(t){return It(t)},tu.version="3.25.0",tu.stylesheet=tu.Stylesheet=Qs,t.exports=tu},4485:(t,e,n)=>{t.exports=n(2894)},2894:function(t,e){var n,r,i;(function(){var o,a,s,u,l,c,h,p,f,d,g,y,v,m,_;s=Math.floor,d=Math.min,a=function(t,e){return t<e?-1:t>e?1:0},f=function(t,e,n,r,i){var o;if(null==n&&(n=0),null==i&&(i=a),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);n<r;)i(e,t[o=s((n+r)/2)])<0?r=o:n=o+1;return[].splice.apply(t,[n,n-n].concat(e)),e},c=function(t,e,n){return null==n&&(n=a),t.push(e),m(t,0,t.length-1,n)},l=function(t,e){var n,r;return null==e&&(e=a),n=t.pop(),t.length?(r=t[0],t[0]=n,_(t,0,e)):r=n,r},p=function(t,e,n){var r;return null==n&&(n=a),r=t[0],t[0]=e,_(t,0,n),r},h=function(t,e,n){var r;return null==n&&(n=a),t.length&&n(t[0],e)<0&&(e=(r=[t[0],e])[0],t[0]=r[1],_(t,0,n)),e},u=function(t,e){var n,r,i,o,u,l;for(null==e&&(e=a),u=[],r=0,i=(o=function(){l=[];for(var e=0,n=s(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)l.push(e);return l}.apply(this).reverse()).length;r<i;r++)n=o[r],u.push(_(t,n,e));return u},v=function(t,e,n){var r;if(null==n&&(n=a),-1!==(r=t.indexOf(e)))return m(t,0,r,n),_(t,r,n)},g=function(t,e,n){var r,i,o,s,l;if(null==n&&(n=a),!(i=t.slice(0,e)).length)return i;for(u(i,n),o=0,s=(l=t.slice(e)).length;o<s;o++)r=l[o],h(i,r,n);return i.sort(n).reverse()},y=function(t,e,n){var r,i,o,s,c,h,p,g,y;if(null==n&&(n=a),10*e<=t.length){if(!(o=t.slice(0,e).sort(n)).length)return o;for(i=o[o.length-1],s=0,h=(p=t.slice(e)).length;s<h;s++)n(r=p[s],i)<0&&(f(o,r,0,null,n),o.pop(),i=o[o.length-1]);return o}for(u(t,n),y=[],c=0,g=d(e,t.length);0<=g?c<g:c>g;0<=g?++c:--c)y.push(l(t,n));return y},m=function(t,e,n,r){var i,o,s;for(null==r&&(r=a),i=t[n];n>e&&r(i,o=t[s=n-1>>1])<0;)t[n]=o,n=s;return t[n]=i},_=function(t,e,n){var r,i,o,s,u;for(null==n&&(n=a),i=t.length,u=e,o=t[e],r=2*e+1;r<i;)(s=r+1)<i&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],r=2*(e=r)+1;return t[e]=o,m(t,u,e,n)},o=function(){function t(t){this.cmp=null!=t?t:a,this.nodes=[]}return t.push=c,t.pop=l,t.replace=p,t.pushpop=h,t.heapify=u,t.updateItem=v,t.nlargest=g,t.nsmallest=y,t.prototype.push=function(t){return c(this.nodes,t,this.cmp)},t.prototype.pop=function(){return l(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return p(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return h(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return u(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return v(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),r=[],void 0===(i="function"==typeof(n=function(){return o})?n.apply(e,r):n)||(t.exports=i)}).call(this)},2241:function(t){var e;e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=28)}([function(t,e,n){"use strict";function r(){}r.QUALITY=1,r.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,r.DEFAULT_INCREMENTAL=!1,r.DEFAULT_ANIMATION_ON_LAYOUT=!0,r.DEFAULT_ANIMATION_DURING_LAYOUT=!1,r.DEFAULT_ANIMATION_PERIOD=50,r.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,r.DEFAULT_GRAPH_MARGIN=15,r.NODE_DIMENSIONS_INCLUDE_LABELS=!1,r.SIMPLE_NODE_SIZE=40,r.SIMPLE_NODE_HALF_SIZE=r.SIMPLE_NODE_SIZE/2,r.EMPTY_COMPOUND_NODE_SIZE=40,r.MIN_EDGE_LENGTH=1,r.WORLD_BOUNDARY=1e6,r.INITIAL_WORLD_BOUNDARY=r.WORLD_BOUNDARY/1e3,r.WORLD_CENTER_X=1200,r.WORLD_CENTER_Y=900,t.exports=r},function(t,e,n){"use strict";var r=n(2),i=n(8),o=n(9);function a(t,e,n){r.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=t,this.target=e}for(var s in a.prototype=Object.create(r.prototype),r)a[s]=r[s];a.prototype.getSource=function(){return this.source},a.prototype.getTarget=function(){return this.target},a.prototype.isInterGraph=function(){return this.isInterGraph},a.prototype.getLength=function(){return this.length},a.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},a.prototype.getBendpoints=function(){return this.bendpoints},a.prototype.getLca=function(){return this.lca},a.prototype.getSourceInLca=function(){return this.sourceInLca},a.prototype.getTargetInLca=function(){return this.targetInLca},a.prototype.getOtherEnd=function(t){if(this.source===t)return this.target;if(this.target===t)return this.source;throw"Node is not incident with this edge"},a.prototype.getOtherEndInGraph=function(t,e){for(var n=this.getOtherEnd(t),r=e.getGraphManager().getRoot();;){if(n.getOwner()==e)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},a.prototype.updateLength=function(){var t=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),t),this.isOverlapingSourceAndTarget||(this.lengthX=t[0]-t[2],this.lengthY=t[1]-t[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},a.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=a},function(t,e,n){"use strict";t.exports=function(t){this.vGraphObject=t}},function(t,e,n){"use strict";var r=n(2),i=n(10),o=n(13),a=n(0),s=n(16),u=n(5);function l(t,e,n,a){null==n&&null==a&&(a=e),r.call(this,a),null!=t.graphManager&&(t=t.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=a,this.edges=[],this.graphManager=t,this.rect=null!=n&&null!=e?new o(e.x,e.y,n.width,n.height):new o}for(var c in l.prototype=Object.create(r.prototype),r)l[c]=r[c];l.prototype.getEdges=function(){return this.edges},l.prototype.getChild=function(){return this.child},l.prototype.getOwner=function(){return this.owner},l.prototype.getWidth=function(){return this.rect.width},l.prototype.setWidth=function(t){this.rect.width=t},l.prototype.getHeight=function(){return this.rect.height},l.prototype.setHeight=function(t){this.rect.height=t},l.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},l.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},l.prototype.getCenter=function(){return new u(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},l.prototype.getLocation=function(){return new u(this.rect.x,this.rect.y)},l.prototype.getRect=function(){return this.rect},l.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},l.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},l.prototype.setRect=function(t,e){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=e.width,this.rect.height=e.height},l.prototype.setCenter=function(t,e){this.rect.x=t-this.rect.width/2,this.rect.y=e-this.rect.height/2},l.prototype.setLocation=function(t,e){this.rect.x=t,this.rect.y=e},l.prototype.moveBy=function(t,e){this.rect.x+=t,this.rect.y+=e},l.prototype.getEdgeListToNode=function(t){var e=[],n=this;return n.edges.forEach((function(r){if(r.target==t){if(r.source!=n)throw"Incorrect edge source!";e.push(r)}})),e},l.prototype.getEdgesBetween=function(t){var e=[],n=this;return n.edges.forEach((function(r){if(r.source!=n&&r.target!=n)throw"Incorrect edge source and/or target";r.target!=t&&r.source!=t||e.push(r)})),e},l.prototype.getNeighborsList=function(){var t=new Set,e=this;return e.edges.forEach((function(n){if(n.source==e)t.add(n.target);else{if(n.target!=e)throw"Incorrect incidency!";t.add(n.source)}})),t},l.prototype.withChildren=function(){var t=new Set;if(t.add(this),null!=this.child)for(var e=this.child.getNodes(),n=0;n<e.length;n++)e[n].withChildren().forEach((function(e){t.add(e)}));return t},l.prototype.getNoOfChildren=function(){var t=0;if(null==this.child)t=1;else for(var e=this.child.getNodes(),n=0;n<e.length;n++)t+=e[n].getNoOfChildren();return 0==t&&(t=1),t},l.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},l.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},l.prototype.scatter=function(){var t,e,n=-a.INITIAL_WORLD_BOUNDARY,r=a.INITIAL_WORLD_BOUNDARY;t=a.WORLD_CENTER_X+s.nextDouble()*(r-n)+n;var i=-a.INITIAL_WORLD_BOUNDARY,o=a.INITIAL_WORLD_BOUNDARY;e=a.WORLD_CENTER_Y+s.nextDouble()*(o-i)+i,this.rect.x=t,this.rect.y=e},l.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var t=this.getChild();if(t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()),this.setHeight(t.getBottom()-t.getTop()),a.NODE_DIMENSIONS_INCLUDE_LABELS){var e=t.getRight()-t.getLeft(),n=t.getBottom()-t.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(e+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>e?(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(e+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(n+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>n?(this.rect.y-=(this.labelHeight-n)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(n+this.labelHeight))}}},l.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},l.prototype.transform=function(t){var e=this.rect.x;e>a.WORLD_BOUNDARY?e=a.WORLD_BOUNDARY:e<-a.WORLD_BOUNDARY&&(e=-a.WORLD_BOUNDARY);var n=this.rect.y;n>a.WORLD_BOUNDARY?n=a.WORLD_BOUNDARY:n<-a.WORLD_BOUNDARY&&(n=-a.WORLD_BOUNDARY);var r=new u(e,n),i=t.inverseTransformPoint(r);this.setLocation(i.x,i.y)},l.prototype.getLeft=function(){return this.rect.x},l.prototype.getRight=function(){return this.rect.x+this.rect.width},l.prototype.getTop=function(){return this.rect.y},l.prototype.getBottom=function(){return this.rect.y+this.rect.height},l.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},t.exports=l},function(t,e,n){"use strict";var r=n(0);function i(){}for(var o in r)i[o]=r[o];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=i},function(t,e,n){"use strict";function r(t,e){null==t&&null==e?(this.x=0,this.y=0):(this.x=t,this.y=e)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.setX=function(t){this.x=t},r.prototype.setY=function(t){this.y=t},r.prototype.getDifference=function(t){return new DimensionD(this.x-t.x,this.y-t.y)},r.prototype.getCopy=function(){return new r(this.x,this.y)},r.prototype.translate=function(t){return this.x+=t.width,this.y+=t.height,this},t.exports=r},function(t,e,n){"use strict";var r=n(2),i=n(10),o=n(0),a=n(7),s=n(3),u=n(1),l=n(13),c=n(12),h=n(11);function p(t,e,n){r.call(this,n),this.estimatedSize=i.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=t,null!=e&&e instanceof a?this.graphManager=e:null!=e&&e instanceof Layout&&(this.graphManager=e.graphManager)}for(var f in p.prototype=Object.create(r.prototype),r)p[f]=r[f];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(t,e,n){if(null==e&&null==n){var r=t;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(r)>-1)throw"Node already in graph!";return r.owner=this,this.getNodes().push(r),r}var i=t;if(!(this.getNodes().indexOf(e)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(e.owner!=n.owner||e.owner!=this)throw"Both owners must be this graph!";return e.owner!=n.owner?null:(i.source=e,i.target=n,i.isInterGraph=!1,this.getEdges().push(i),e.edges.push(i),n!=e&&n.edges.push(i),i)},p.prototype.remove=function(t){var e=t;if(t instanceof s){if(null==e)throw"Node is null!";if(null==e.owner||e.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n=e.edges.slice(),r=n.length,i=0;i<r;i++)(o=n[i]).isInterGraph?this.graphManager.remove(o):o.source.owner.remove(o);if(-1==(a=this.nodes.indexOf(e)))throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(t instanceof u){var o;if(null==(o=t))throw"Edge is null!";if(null==o.source||null==o.target)throw"Source and/or target is null!";if(null==o.source.owner||null==o.target.owner||o.source.owner!=this||o.target.owner!=this)throw"Source and/or target owner is invalid!";var a,l=o.source.edges.indexOf(o),c=o.target.edges.indexOf(o);if(!(l>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(o.source.edges.splice(l,1),o.target!=o.source&&o.target.edges.splice(c,1),-1==(a=o.source.owner.getEdges().indexOf(o)))throw"Not in owner's edge list!";o.source.owner.getEdges().splice(a,1)}},p.prototype.updateLeftTop=function(){for(var t,e,n,r=i.MAX_VALUE,o=i.MAX_VALUE,a=this.getNodes(),s=a.length,u=0;u<s;u++){var l=a[u];r>(t=l.getTop())&&(r=t),o>(e=l.getLeft())&&(o=e)}return r==i.MAX_VALUE?null:(n=null!=a[0].getParent().paddingLeft?a[0].getParent().paddingLeft:this.margin,this.left=o-n,this.top=r-n,new c(this.left,this.top))},p.prototype.updateBounds=function(t){for(var e,n,r,o,a,s=i.MAX_VALUE,u=-i.MAX_VALUE,c=i.MAX_VALUE,h=-i.MAX_VALUE,p=this.nodes,f=p.length,d=0;d<f;d++){var g=p[d];t&&null!=g.child&&g.updateBounds(),s>(e=g.getLeft())&&(s=e),u<(n=g.getRight())&&(u=n),c>(r=g.getTop())&&(c=r),h<(o=g.getBottom())&&(h=o)}var y=new l(s,c,u-s,h-c);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),a=null!=p[0].getParent().paddingLeft?p[0].getParent().paddingLeft:this.margin,this.left=y.x-a,this.right=y.x+y.width+a,this.top=y.y-a,this.bottom=y.y+y.height+a},p.calculateBounds=function(t){for(var e,n,r,o,a=i.MAX_VALUE,s=-i.MAX_VALUE,u=i.MAX_VALUE,c=-i.MAX_VALUE,h=t.length,p=0;p<h;p++){var f=t[p];a>(e=f.getLeft())&&(a=e),s<(n=f.getRight())&&(s=n),u>(r=f.getTop())&&(u=r),c<(o=f.getBottom())&&(c=o)}return new l(a,u,s-a,c-u)},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var t=0,e=this.nodes,n=e.length,r=0;r<n;r++)t+=e[r].calcEstimatedSize();return this.estimatedSize=0==t?o.EMPTY_COMPOUND_NODE_SIZE:t/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var t=this;if(0!=this.nodes.length){var e,n,r=new h,i=new Set,o=this.nodes[0];for(o.withChildren().forEach((function(t){r.push(t),i.add(t)}));0!==r.length;)for(var a=(e=(o=r.shift()).getEdges()).length,s=0;s<a;s++)null==(n=e[s].getOtherEndInGraph(o,this))||i.has(n)||n.withChildren().forEach((function(t){r.push(t),i.add(t)}));if(this.isConnected=!1,i.size>=this.nodes.length){var u=0;i.forEach((function(e){e.owner==t&&u++})),u==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},t.exports=p},function(t,e,n){"use strict";var r,i=n(1);function o(t){r=n(6),this.layout=t,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var t=this.layout.newGraph(),e=this.layout.newNode(null),n=this.add(t,e);return this.setRootGraph(n),this.rootGraph},o.prototype.add=function(t,e,n,r,i){if(null==n&&null==r&&null==i){if(null==t)throw"Graph is null!";if(null==e)throw"Parent node is null!";if(this.graphs.indexOf(t)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(t),null!=t.parent)throw"Already has a parent!";if(null!=e.child)throw"Already has a child!";return t.parent=e,e.child=t,t}i=n,n=t;var o=(r=e).getOwner(),a=i.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return n.isInterGraph=!1,o.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(-1!=n.source.edges.indexOf(n)||-1!=n.target.edges.indexOf(n))throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},o.prototype.remove=function(t){if(t instanceof r){var e=t;if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(e!=this.rootGraph&&(null==e.parent||e.parent.graphManager!=this))throw"Invalid parent node!";for(var n,o=[],a=(o=o.concat(e.getEdges())).length,s=0;s<a;s++)n=o[s],e.remove(n);var u,l=[];for(a=(l=l.concat(e.getNodes())).length,s=0;s<a;s++)u=l[s],e.remove(u);e==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(e);this.graphs.splice(c,1),e.parent=null}else if(t instanceof i){if(null==(n=t))throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(-1==n.source.edges.indexOf(n)||-1==n.target.edges.indexOf(n))throw"Source and/or target doesn't know this edge!";if(c=n.source.edges.indexOf(n),n.source.edges.splice(c,1),c=n.target.edges.indexOf(n),n.target.edges.splice(c,1),null==n.source.owner||null==n.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==n.source.owner.getGraphManager().edges.indexOf(n))throw"Not in owner graph manager's edge list!";c=n.source.owner.getGraphManager().edges.indexOf(n),n.source.owner.getGraphManager().edges.splice(c,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(null==this.allNodes){for(var t=[],e=this.getGraphs(),n=e.length,r=0;r<n;r++)t=t.concat(e[r].getNodes());this.allNodes=t}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(null==this.allEdges){for(var t=[],e=this.getGraphs(),n=(e.length,0);n<e.length;n++)t=t.concat(e[n].getEdges());t=t.concat(this.edges),this.allEdges=t}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(t){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=t},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(t){if(t.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=t,null==t.parent&&(t.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(t,e){if(null==t||null==e)throw"assert failed";if(t==e)return!0;for(var n,r=t.getOwner();null!=(n=r.getParent());){if(n==e)return!0;if(null==(r=n.getOwner()))break}for(r=e.getOwner();null!=(n=r.getParent());){if(n==t)return!0;if(null==(r=n.getOwner()))break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var t,e,n,r,i,o=this.getAllEdges(),a=o.length,s=0;s<a;s++)if(e=(t=o[s]).source,n=t.target,t.lca=null,t.sourceInLca=e,t.targetInLca=n,e!=n){for(r=e.getOwner();null==t.lca;){for(t.targetInLca=n,i=n.getOwner();null==t.lca;){if(i==r){t.lca=i;break}if(i==this.rootGraph)break;if(null!=t.lca)throw"assert failed";t.targetInLca=i.getParent(),i=t.targetInLca.getOwner()}if(r==this.rootGraph)break;null==t.lca&&(t.sourceInLca=r.getParent(),r=t.sourceInLca.getOwner())}if(null==t.lca)throw"assert failed"}else t.lca=e.getOwner()},o.prototype.calcLowestCommonAncestor=function(t,e){if(t==e)return t.getOwner();for(var n=t.getOwner();null!=n;){for(var r=e.getOwner();null!=r;){if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},o.prototype.calcInclusionTreeDepths=function(t,e){var n;null==t&&null==e&&(t=this.rootGraph,e=1);for(var r=t.getNodes(),i=r.length,o=0;o<i;o++)(n=r[o]).inclusionTreeDepth=e,null!=n.child&&this.calcInclusionTreeDepths(n.child,e+1)},o.prototype.includesInvalidEdge=function(){for(var t,e=[],n=this.edges.length,r=0;r<n;r++)t=this.edges[r],this.isOneAncestorOfOther(t.source,t.target)&&e.push(t);for(r=0;r<e.length;r++)this.remove(e[r]);return!1},t.exports=o},function(t,e,n){"use strict";var r=n(12);function i(){}i.calcSeparationAmount=function(t,e,n,r){if(!t.intersects(e))throw"assert failed";var i=new Array(2);this.decideDirectionsForOverlappingNodes(t,e,i),n[0]=Math.min(t.getRight(),e.getRight())-Math.max(t.x,e.x),n[1]=Math.min(t.getBottom(),e.getBottom())-Math.max(t.y,e.y),t.getX()<=e.getX()&&t.getRight()>=e.getRight()?n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight()):e.getX()<=t.getX()&&e.getRight()>=t.getRight()&&(n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight())),t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()?n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()):e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()&&(n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()));var o=Math.abs((e.getCenterY()-t.getCenterY())/(e.getCenterX()-t.getCenterX()));e.getCenterY()===t.getCenterY()&&e.getCenterX()===t.getCenterX()&&(o=1);var a=o*n[0],s=n[1]/o;n[0]<s?s=n[0]:a=n[1],n[0]=-1*i[0]*(s/2+r),n[1]=-1*i[1]*(a/2+r)},i.decideDirectionsForOverlappingNodes=function(t,e,n){t.getCenterX()<e.getCenterX()?n[0]=-1:n[0]=1,t.getCenterY()<e.getCenterY()?n[1]=-1:n[1]=1},i.getIntersection2=function(t,e,n){var r=t.getCenterX(),i=t.getCenterY(),o=e.getCenterX(),a=e.getCenterY();if(t.intersects(e))return n[0]=r,n[1]=i,n[2]=o,n[3]=a,!0;var s=t.getX(),u=t.getY(),l=t.getRight(),c=t.getX(),h=t.getBottom(),p=t.getRight(),f=t.getWidthHalf(),d=t.getHeightHalf(),g=e.getX(),y=e.getY(),v=e.getRight(),m=e.getX(),_=e.getBottom(),b=e.getRight(),x=e.getWidthHalf(),E=e.getHeightHalf(),w=!1,C=!1;if(r===o){if(i>a)return n[0]=r,n[1]=u,n[2]=o,n[3]=_,!1;if(i<a)return n[0]=r,n[1]=h,n[2]=o,n[3]=y,!1}else if(i===a){if(r>o)return n[0]=s,n[1]=i,n[2]=v,n[3]=a,!1;if(r<o)return n[0]=l,n[1]=i,n[2]=g,n[3]=a,!1}else{var N=t.height/t.width,I=e.height/e.width,T=(a-i)/(o-r),S=void 0,A=void 0,L=void 0,D=void 0,M=void 0,O=void 0;if(-N===T?r>o?(n[0]=c,n[1]=h,w=!0):(n[0]=l,n[1]=u,w=!0):N===T&&(r>o?(n[0]=s,n[1]=u,w=!0):(n[0]=p,n[1]=h,w=!0)),-I===T?o>r?(n[2]=m,n[3]=_,C=!0):(n[2]=v,n[3]=y,C=!0):I===T&&(o>r?(n[2]=g,n[3]=y,C=!0):(n[2]=b,n[3]=_,C=!0)),w&&C)return!1;if(r>o?i>a?(S=this.getCardinalDirection(N,T,4),A=this.getCardinalDirection(I,T,2)):(S=this.getCardinalDirection(-N,T,3),A=this.getCardinalDirection(-I,T,1)):i>a?(S=this.getCardinalDirection(-N,T,1),A=this.getCardinalDirection(-I,T,3)):(S=this.getCardinalDirection(N,T,2),A=this.getCardinalDirection(I,T,4)),!w)switch(S){case 1:D=u,L=r+-d/T,n[0]=L,n[1]=D;break;case 2:L=p,D=i+f*T,n[0]=L,n[1]=D;break;case 3:D=h,L=r+d/T,n[0]=L,n[1]=D;break;case 4:L=c,D=i+-f*T,n[0]=L,n[1]=D}if(!C)switch(A){case 1:O=y,M=o+-E/T,n[2]=M,n[3]=O;break;case 2:M=b,O=a+x*T,n[2]=M,n[3]=O;break;case 3:O=_,M=o+E/T,n[2]=M,n[3]=O;break;case 4:M=m,O=a+-x*T,n[2]=M,n[3]=O}}return!1},i.getCardinalDirection=function(t,e,n){return t>e?n:1+n%4},i.getIntersection=function(t,e,n,i){if(null==i)return this.getIntersection2(t,e,n);var o,a,s,u,l,c,h,p=t.x,f=t.y,d=e.x,g=e.y,y=n.x,v=n.y,m=i.x,_=i.y;return 0==(h=(o=g-f)*(u=y-m)-(a=_-v)*(s=p-d))?null:new r((s*(c=m*v-y*_)-u*(l=d*f-p*g))/h,(a*l-o*c)/h)},i.angleOfVector=function(t,e,n,r){var i=void 0;return t!==n?(i=Math.atan((r-e)/(n-t)),n<t?i+=Math.PI:r<e&&(i+=this.TWO_PI)):i=r<e?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(t,e,n,r){var i=t.x,o=t.y,a=e.x,s=e.y,u=n.x,l=n.y,c=r.x,h=r.y,p=(a-i)*(h-l)-(c-u)*(s-o);if(0===p)return!1;var f=((h-l)*(c-i)+(u-c)*(h-o))/p,d=((o-s)*(c-i)+(a-i)*(h-o))/p;return 0<f&&f<1&&0<d&&d<1},i.findCircleLineIntersections=function(t,e,n,r,i,o,a){var s=(n-t)*(n-t)+(r-e)*(r-e),u=2*((t-i)*(n-t)+(e-o)*(r-e)),l=(t-i)*(t-i)+(e-o)*(e-o)-a*a;if(u*u-4*s*l>=0){var c=(-u+Math.sqrt(u*u-4*s*l))/(2*s),h=(-u-Math.sqrt(u*u-4*s*l))/(2*s);return c>=0&&c<=1?[c]:h>=0&&h<=1?[h]:null}return null},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,t.exports=i},function(t,e,n){"use strict";function r(){}r.sign=function(t){return t>0?1:t<0?-1:0},r.floor=function(t){return t<0?Math.ceil(t):Math.floor(t)},r.ceil=function(t){return t<0?Math.floor(t):Math.ceil(t)},t.exports=r},function(t,e,n){"use strict";function r(){}r.MAX_VALUE=2147483647,r.MIN_VALUE=-2147483648,t.exports=r},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return{value:t,next:null,prev:null}},o=function(t,e,n,r){return null!==t?t.next=e:r.head=e,null!==n?n.prev=e:r.tail=e,e.prev=t,e.next=n,r.length++,e},a=function(t,e){var n=t.prev,r=t.next;return null!==n?n.next=r:e.head=r,null!==r?r.prev=n:e.tail=n,t.prev=t.next=null,e.length--,t},s=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=0,this.head=null,this.tail=null,null!=e&&e.forEach((function(t){return n.push(t)}))}return r(t,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(t,e){return o(e.prev,i(t),e,this)}},{key:"insertAfter",value:function(t,e){return o(e,i(t),e.next,this)}},{key:"insertNodeBefore",value:function(t,e){return o(e.prev,t,e,this)}},{key:"insertNodeAfter",value:function(t,e){return o(e,t,e.next,this)}},{key:"push",value:function(t){return o(this.tail,i(t),null,this)}},{key:"unshift",value:function(t){return o(null,i(t),this.head,this)}},{key:"remove",value:function(t){return a(t,this)}},{key:"pop",value:function(){return a(this.tail,this).value}},{key:"popNode",value:function(){return a(this.tail,this)}},{key:"shift",value:function(){return a(this.head,this).value}},{key:"shiftNode",value:function(){return a(this.head,this)}},{key:"get_object_at",value:function(t){if(t<=this.length()){for(var e=1,n=this.head;e<t;)n=n.next,e++;return n.value}}},{key:"set_object_at",value:function(t,e){if(t<=this.length()){for(var n=1,r=this.head;n<t;)r=r.next,n++;r.value=e}}}]),t}();t.exports=s},function(t,e,n){"use strict";function r(t,e,n){this.x=null,this.y=null,null==t&&null==e&&null==n?(this.x=0,this.y=0):"number"==typeof t&&"number"==typeof e&&null==n?(this.x=t,this.y=e):"Point"==t.constructor.name&&null==e&&null==n&&(n=t,this.x=n.x,this.y=n.y)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.getLocation=function(){return new r(this.x,this.y)},r.prototype.setLocation=function(t,e,n){"Point"==t.constructor.name&&null==e&&null==n?(n=t,this.setLocation(n.x,n.y)):"number"==typeof t&&"number"==typeof e&&null==n&&(parseInt(t)==t&&parseInt(e)==e?this.move(t,e):(this.x=Math.floor(t+.5),this.y=Math.floor(e+.5)))},r.prototype.move=function(t,e){this.x=t,this.y=e},r.prototype.translate=function(t,e){this.x+=t,this.y+=e},r.prototype.equals=function(t){if("Point"==t.constructor.name){var e=t;return this.x==e.x&&this.y==e.y}return this==t},r.prototype.toString=function(){return(new r).constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=t&&null!=e&&null!=n&&null!=r&&(this.x=t,this.y=e,this.width=n,this.height=r)}r.prototype.getX=function(){return this.x},r.prototype.setX=function(t){this.x=t},r.prototype.getY=function(){return this.y},r.prototype.setY=function(t){this.y=t},r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(t){this.width=t},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(t){this.height=t},r.prototype.getRight=function(){return this.x+this.width},r.prototype.getBottom=function(){return this.y+this.height},r.prototype.intersects=function(t){return!(this.getRight()<t.x||this.getBottom()<t.y||t.getRight()<this.x||t.getBottom()<this.y)},r.prototype.getCenterX=function(){return this.x+this.width/2},r.prototype.getMinX=function(){return this.getX()},r.prototype.getMaxX=function(){return this.getX()+this.width},r.prototype.getCenterY=function(){return this.y+this.height/2},r.prototype.getMinY=function(){return this.getY()},r.prototype.getMaxY=function(){return this.getY()+this.height},r.prototype.getWidthHalf=function(){return this.width/2},r.prototype.getHeightHalf=function(){return this.height/2},t.exports=r},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(){}i.lastID=0,i.createID=function(t){return i.isPrimitive(t)?t:(null!=t.uniqueID||(t.uniqueID=i.getString(),i.lastID++),t.uniqueID)},i.getString=function(t){return null==t&&(t=i.lastID),"Object#"+t},i.isPrimitive=function(t){var e=void 0===t?"undefined":r(t);return null==t||"object"!=e&&"function"!=e},t.exports=i},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=n(0),o=n(7),a=n(3),s=n(1),u=n(6),l=n(5),c=n(17),h=n(29);function p(t){h.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=t&&(this.isRemoteUse=t)}p.RANDOM_SEED=1,p.prototype=Object.create(h.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var t=new o(this);return this.graphManager=t,t},p.prototype.newGraph=function(t){return new u(null,this.graphManager,t)},p.prototype.newNode=function(t){return new a(this.graphManager,t)},p.prototype.newEdge=function(t){return new s(null,null,t)},p.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){var t;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),t=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(t&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,t)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var t=this.graphManager.getAllEdges(),e=0;e<t.length;e++)t[e];var n=this.graphManager.getRoot().getNodes();for(e=0;e<n.length;e++)n[e];this.update(this.graphManager.getRoot())}},p.prototype.update=function(t){if(null==t)this.update2();else if(t instanceof a){var e=t;if(null!=e.getChild())for(var n=e.getChild().getNodes(),r=0;r<n.length;r++)update(n[r]);null!=e.vGraphObject&&e.vGraphObject.update(e)}else if(t instanceof s){var i=t;null!=i.vGraphObject&&i.vGraphObject.update(i)}else if(t instanceof u){var o=t;null!=o.vGraphObject&&o.vGraphObject.update(o)}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(t){if(null==t)this.transform(new l(0,0));else{var e=new c,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){e.setWorldOrgX(t.x),e.setWorldOrgY(t.y),e.setDeviceOrgX(n.x),e.setDeviceOrgY(n.y);for(var r=this.getAllNodes(),i=0;i<r.length;i++)r[i].transform(e)}}},p.prototype.positionNodesRandomly=function(t){if(null==t)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var e,n,r=t.getNodes(),i=0;i<r.length;i++)null==(n=(e=r[i]).getChild())||0==n.getNodes().length?e.scatter():(this.positionNodesRandomly(n),e.updateBounds())},p.prototype.getFlatForest=function(){for(var t=[],e=!0,n=this.graphManager.getRoot().getNodes(),i=!0,o=0;o<n.length;o++)null!=n[o].getChild()&&(i=!1);if(!i)return t;var a=new Set,s=[],u=new Map,l=[];for(l=l.concat(n);l.length>0&&e;){for(s.push(l[0]);s.length>0&&e;){var c=s[0];s.splice(0,1),a.add(c);var h=c.getEdges();for(o=0;o<h.length;o++){var p=h[o].getOtherEnd(c);if(u.get(c)!=p){if(a.has(p)){e=!1;break}s.push(p),u.set(p,c)}}}if(e){var f=[].concat(r(a));for(t.push(f),o=0;o<f.length;o++){var d=f[o],g=l.indexOf(d);g>-1&&l.splice(g,1)}a=new Set,u=new Map}else t=[]}return t},p.prototype.createDummyNodesForBendpoints=function(t){for(var e=[],n=t.source,r=this.graphManager.calcLowestCommonAncestor(t.source,t.target),i=0;i<t.bendpoints.length;i++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),r.add(o);var a=this.newEdge(null);this.graphManager.add(a,n,o),e.add(o),n=o}return a=this.newEdge(null),this.graphManager.add(a,n,t.target),this.edgeToDummyNodes.set(t,e),t.isInterGraph()?this.graphManager.remove(t):r.remove(t),e},p.prototype.createBendpointsFromDummyNodes=function(){var t=[];t=t.concat(this.graphManager.getAllEdges()),t=[].concat(r(this.edgeToDummyNodes.keys())).concat(t);for(var e=0;e<t.length;e++){var n=t[e];if(n.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(n),o=0;o<i.length;o++){var a=i[o],s=new l(a.getCenterX(),a.getCenterY()),u=n.bendpoints.get(o);u.x=s.x,u.y=s.y,a.getOwner().remove(a)}this.graphManager.add(n,n.source,n.target)}}},p.transform=function(t,e,n,r){if(null!=n&&null!=r){var i=e;return t<=50?i-=(e-e/n)/50*(50-t):i+=(e*r-e)/50*(t-50),i}var o,a;return t<=50?(o=9*e/500,a=e/10):(o=9*e/50,a=-8*e),o*t+a},p.findCenterOfTree=function(t){var e=[];e=e.concat(t);var n=[],r=new Map,i=!1,o=null;1!=e.length&&2!=e.length||(i=!0,o=e[0]);for(var a=0;a<e.length;a++){var s=(c=e[a]).getNeighborsList().size;r.set(c,c.getNeighborsList().size),1==s&&n.push(c)}var u=[];for(u=u.concat(n);!i;){var l=[];for(l=l.concat(u),u=[],a=0;a<e.length;a++){var c=e[a],h=e.indexOf(c);h>=0&&e.splice(h,1),c.getNeighborsList().forEach((function(t){if(n.indexOf(t)<0){var e=r.get(t)-1;1==e&&u.push(t),r.set(t,e)}}))}n=n.concat(u),1!=e.length&&2!=e.length||(i=!0,o=e[0])}return o},p.prototype.setGraphManager=function(t){this.graphManager=t},t.exports=p},function(t,e,n){"use strict";function r(){}r.seed=1,r.x=0,r.nextDouble=function(){return r.x=1e4*Math.sin(r.seed++),r.x-Math.floor(r.x)},t.exports=r},function(t,e,n){"use strict";var r=n(5);function i(t,e){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(t){this.lworldOrgX=t},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(t){this.lworldOrgY=t},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(t){this.lworldExtX=t},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(t){this.lworldExtY=t},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(t){this.ldeviceOrgX=t},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(t){this.ldeviceOrgY=t},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(t){this.ldeviceExtX=t},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(t){this.ldeviceExtY=t},i.prototype.transformX=function(t){var e=0,n=this.lworldExtX;return 0!=n&&(e=this.ldeviceOrgX+(t-this.lworldOrgX)*this.ldeviceExtX/n),e},i.prototype.transformY=function(t){var e=0,n=this.lworldExtY;return 0!=n&&(e=this.ldeviceOrgY+(t-this.lworldOrgY)*this.ldeviceExtY/n),e},i.prototype.inverseTransformX=function(t){var e=0,n=this.ldeviceExtX;return 0!=n&&(e=this.lworldOrgX+(t-this.ldeviceOrgX)*this.lworldExtX/n),e},i.prototype.inverseTransformY=function(t){var e=0,n=this.ldeviceExtY;return 0!=n&&(e=this.lworldOrgY+(t-this.ldeviceOrgY)*this.lworldExtY/n),e},i.prototype.inverseTransformPoint=function(t){return new r(this.inverseTransformX(t.x),this.inverseTransformY(t.y))},t.exports=i},function(t,e,n){"use strict";var r=n(15),i=n(4),o=n(0),a=n(8),s=n(9);function u(){r.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}for(var l in u.prototype=Object.create(r.prototype),r)u[l]=r[l];u.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},u.prototype.calcIdealEdgeLengths=function(){for(var t,e,n,r,a,s,u,l=this.getGraphManager().getAllEdges(),c=0;c<l.length;c++)e=(t=l[c]).idealLength,t.isInterGraph&&(r=t.getSource(),a=t.getTarget(),s=t.getSourceInLca().getEstimatedSize(),u=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=s+u-2*o.SIMPLE_NODE_SIZE),n=t.getLca().getInclusionTreeDepth(),t.idealLength+=e*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(r.getInclusionTreeDepth()+a.getInclusionTreeDepth()-2*n))},u.prototype.initSpringEmbedder=function(){var t=this.getAllNodes().length;this.incremental?(t>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(t-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(t>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(t-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},u.prototype.calcSpringForces=function(){for(var t,e=this.getAllEdges(),n=0;n<e.length;n++)t=e[n],this.calcSpringForce(t,t.idealLength)},u.prototype.calcRepulsionForces=function(){var t,e,n,r,o,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&a&&this.updateGrid(),o=new Set,t=0;t<u.length;t++)n=u[t],this.calculateRepulsionForceOfANode(n,o,a,s),o.add(n);else for(t=0;t<u.length;t++)for(n=u[t],e=t+1;e<u.length;e++)r=u[e],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},u.prototype.calcGravitationalForces=function(){for(var t,e=this.getAllNodesToApplyGravitation(),n=0;n<e.length;n++)t=e[n],this.calcGravitationalForce(t)},u.prototype.moveNodes=function(){for(var t=this.getAllNodes(),e=0;e<t.length;e++)t[e].move()},u.prototype.calcSpringForce=function(t,e){var n,r,i,o,a=t.getSource(),s=t.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;0!=(n=t.getLength())&&(i=(r=t.edgeElasticity*(n-e))*(t.lengthX/n),o=r*(t.lengthY/n),a.springForceX+=i,a.springForceY+=o,s.springForceX-=i,s.springForceY-=o)},u.prototype.calcRepulsionForce=function(t,e){var n,r,o,u,l,c,h,p=t.getRect(),f=e.getRect(),d=new Array(2),g=new Array(4);if(p.intersects(f)){a.calcSeparationAmount(p,f,d,i.DEFAULT_EDGE_LENGTH/2),c=2*d[0],h=2*d[1];var y=t.noOfChildren*e.noOfChildren/(t.noOfChildren+e.noOfChildren);t.repulsionForceX-=y*c,t.repulsionForceY-=y*h,e.repulsionForceX+=y*c,e.repulsionForceY+=y*h}else this.uniformLeafNodeSizes&&null==t.getChild()&&null==e.getChild()?(n=f.getCenterX()-p.getCenterX(),r=f.getCenterY()-p.getCenterY()):(a.getIntersection(p,f,g),n=g[2]-g[0],r=g[3]-g[1]),Math.abs(n)<i.MIN_REPULSION_DIST&&(n=s.sign(n)*i.MIN_REPULSION_DIST),Math.abs(r)<i.MIN_REPULSION_DIST&&(r=s.sign(r)*i.MIN_REPULSION_DIST),o=n*n+r*r,u=Math.sqrt(o),c=(l=(t.nodeRepulsion/2+e.nodeRepulsion/2)*t.noOfChildren*e.noOfChildren/o)*n/u,h=l*r/u,t.repulsionForceX-=c,t.repulsionForceY-=h,e.repulsionForceX+=c,e.repulsionForceY+=h},u.prototype.calcGravitationalForce=function(t){var e,n,r,i,o,a,s,u;n=((e=t.getOwner()).getRight()+e.getLeft())/2,r=(e.getTop()+e.getBottom())/2,i=t.getCenterX()-n,o=t.getCenterY()-r,a=Math.abs(i)+t.getWidth()/2,s=Math.abs(o)+t.getHeight()/2,t.getOwner()==this.graphManager.getRoot()?(a>(u=e.getEstimatedSize()*this.gravityRangeFactor)||s>u)&&(t.gravitationForceX=-this.gravityConstant*i,t.gravitationForceY=-this.gravityConstant*o):(a>(u=e.getEstimatedSize()*this.compoundGravityRangeFactor)||s>u)&&(t.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,t.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant)},u.prototype.isConverged=function(){var t,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||e},u.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},u.prototype.calcNoOfChildrenForAllNodes=function(){for(var t,e=this.graphManager.getAllNodes(),n=0;n<e.length;n++)(t=e[n]).noOfChildren=t.getNoOfChildren()},u.prototype.calcGrid=function(t){var e,n;e=parseInt(Math.ceil((t.getRight()-t.getLeft())/this.repulsionRange)),n=parseInt(Math.ceil((t.getBottom()-t.getTop())/this.repulsionRange));for(var r=new Array(e),i=0;i<e;i++)r[i]=new Array(n);for(i=0;i<e;i++)for(var o=0;o<n;o++)r[i][o]=new Array;return r},u.prototype.addNodeToGrid=function(t,e,n){var r,i,o,a;r=parseInt(Math.floor((t.getRect().x-e)/this.repulsionRange)),i=parseInt(Math.floor((t.getRect().width+t.getRect().x-e)/this.repulsionRange)),o=parseInt(Math.floor((t.getRect().y-n)/this.repulsionRange)),a=parseInt(Math.floor((t.getRect().height+t.getRect().y-n)/this.repulsionRange));for(var s=r;s<=i;s++)for(var u=o;u<=a;u++)this.grid[s][u].push(t),t.setGridCoordinates(r,i,o,a)},u.prototype.updateGrid=function(){var t,e,n=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),t=0;t<n.length;t++)e=n[t],this.addNodeToGrid(e,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},u.prototype.calculateRepulsionForceOfANode=function(t,e,n,r){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&n||r){var o,a=new Set;t.surrounding=new Array;for(var s=this.grid,u=t.startX-1;u<t.finishX+2;u++)for(var l=t.startY-1;l<t.finishY+2;l++)if(!(u<0||l<0||u>=s.length||l>=s[0].length))for(var c=0;c<s[u][l].length;c++)if(o=s[u][l][c],t.getOwner()==o.getOwner()&&t!=o&&!e.has(o)&&!a.has(o)){var h=Math.abs(t.getCenterX()-o.getCenterX())-(t.getWidth()/2+o.getWidth()/2),p=Math.abs(t.getCenterY()-o.getCenterY())-(t.getHeight()/2+o.getHeight()/2);h<=this.repulsionRange&&p<=this.repulsionRange&&a.add(o)}t.surrounding=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(a))}for(u=0;u<t.surrounding.length;u++)this.calcRepulsionForce(t,t.surrounding[u])},u.prototype.calcRepulsionRange=function(){return 0},t.exports=u},function(t,e,n){"use strict";var r=n(1),i=n(4);function o(t,e,n){r.call(this,t,e,n),this.idealLength=i.DEFAULT_EDGE_LENGTH,this.edgeElasticity=i.DEFAULT_SPRING_STRENGTH}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];t.exports=o},function(t,e,n){"use strict";var r=n(3),i=n(4);function o(t,e,n,o){r.call(this,t,e,n,o),this.nodeRepulsion=i.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];o.prototype.setGridCoordinates=function(t,e,n,r){this.startX=t,this.finishX=e,this.startY=n,this.finishY=r},t.exports=o},function(t,e,n){"use strict";function r(t,e){this.width=0,this.height=0,null!==t&&null!==e&&(this.height=e,this.width=t)}r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(t){this.width=t},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(t){this.height=t},t.exports=r},function(t,e,n){"use strict";var r=n(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(t,e){var n=r.createID(t);this.contains(n)||(this.map[n]=e,this.keys.push(t))},i.prototype.contains=function(t){return r.createID(t),null!=this.map[t]},i.prototype.get=function(t){var e=r.createID(t);return this.map[e]},i.prototype.keySet=function(){return this.keys},t.exports=i},function(t,e,n){"use strict";var r=n(14);function i(){this.set={}}i.prototype.add=function(t){var e=r.createID(t);this.contains(e)||(this.set[e]=t)},i.prototype.remove=function(t){delete this.set[r.createID(t)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(t){return this.set[r.createID(t)]==t},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(t){for(var e=Object.keys(this.set),n=e.length,r=0;r<n;r++)t.push(this.set[e[r]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(t){for(var e=t.length,n=0;n<e;n++){var r=t[n];this.add(r)}},t.exports=i},function(t,e,n){"use strict";function r(){}r.multMat=function(t,e){for(var n=[],r=0;r<t.length;r++){n[r]=[];for(var i=0;i<e[0].length;i++){n[r][i]=0;for(var o=0;o<t[0].length;o++)n[r][i]+=t[r][o]*e[o][i]}}return n},r.transpose=function(t){for(var e=[],n=0;n<t[0].length;n++){e[n]=[];for(var r=0;r<t.length;r++)e[n][r]=t[r][n]}return e},r.multCons=function(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=t[r]*e;return n},r.minusOp=function(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=t[r]-e[r];return n},r.dotProduct=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n},r.mag=function(t){return Math.sqrt(this.dotProduct(t,t))},r.normalize=function(t){for(var e=[],n=this.mag(t),r=0;r<t.length;r++)e[r]=t[r]/n;return e},r.multGamma=function(t){for(var e=[],n=0,r=0;r<t.length;r++)n+=t[r];n*=-1/t.length;for(var i=0;i<t.length;i++)e[i]=n+t[i];return e},r.multL=function(t,e,n){for(var r=[],i=[],o=[],a=0;a<e[0].length;a++){for(var s=0,u=0;u<e.length;u++)s+=-.5*e[u][a]*t[u];i[a]=s}for(var l=0;l<n.length;l++){for(var c=0,h=0;h<n.length;h++)c+=n[l][h]*i[h];o[l]=c}for(var p=0;p<e.length;p++){for(var f=0,d=0;d<e[0].length;d++)f+=e[p][d]*o[d];r[p]=f}return r},t.exports=r},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(11),o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null===n&&void 0===n||(this.compareFunction=this._defaultCompareFunction);var r;r=e instanceof i?e.size():e.length,this._quicksort(e,0,r-1)}return r(t,[{key:"_quicksort",value:function(t,e,n){if(e<n){var r=this._partition(t,e,n);this._quicksort(t,e,r),this._quicksort(t,r+1,n)}}},{key:"_partition",value:function(t,e,n){for(var r=this._get(t,e),i=e,o=n;;){for(;this.compareFunction(r,this._get(t,o));)o--;for(;this.compareFunction(this._get(t,i),r);)i++;if(!(i<o))return o;this._swap(t,i,o),i++,o--}}},{key:"_get",value:function(t,e){return t instanceof i?t.get_object_at(e):t[e]}},{key:"_set",value:function(t,e,n){t instanceof i?t.set_object_at(e,n):t[e]=n}},{key:"_swap",value:function(t,e,n){var r=this._get(t,e);this._set(t,e,this._get(t,n)),this._set(t,n,r)}},{key:"_defaultCompareFunction",value:function(t,e){return e>t}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(){}r.svd=function(t){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=t.length,this.n=t[0].length;var e=Math.min(this.m,this.n);this.s=function(t){for(var e=[];t-- >0;)e.push(0);return e}(Math.min(this.m+1,this.n)),this.U=function t(e){if(0==e.length)return 0;for(var n=[],r=0;r<e[0];r++)n.push(t(e.slice(1)));return n}([this.m,e]),this.V=function t(e){if(0==e.length)return 0;for(var n=[],r=0;r<e[0];r++)n.push(t(e.slice(1)));return n}([this.n,this.n]);for(var n,i,o=function(t){for(var e=[];t-- >0;)e.push(0);return e}(this.n),a=function(t){for(var e=[];t-- >0;)e.push(0);return e}(this.m),s=Math.min(this.m-1,this.n),u=Math.max(0,Math.min(this.n-2,this.m)),l=0;l<Math.max(s,u);l++){if(l<s){this.s[l]=0;for(var c=l;c<this.m;c++)this.s[l]=r.hypot(this.s[l],t[c][l]);if(0!==this.s[l]){t[l][l]<0&&(this.s[l]=-this.s[l]);for(var h=l;h<this.m;h++)t[h][l]/=this.s[l];t[l][l]+=1}this.s[l]=-this.s[l]}for(var p=l+1;p<this.n;p++){if(n=l<s,i=0!==this.s[l],n&&i){for(var f=0,d=l;d<this.m;d++)f+=t[d][l]*t[d][p];f=-f/t[l][l];for(var g=l;g<this.m;g++)t[g][p]+=f*t[g][l]}o[p]=t[l][p]}if(function(t,e){return e}(0,l<s))for(var y=l;y<this.m;y++)this.U[y][l]=t[y][l];if(l<u){o[l]=0;for(var v=l+1;v<this.n;v++)o[l]=r.hypot(o[l],o[v]);if(0!==o[l]){o[l+1]<0&&(o[l]=-o[l]);for(var m=l+1;m<this.n;m++)o[m]/=o[l];o[l+1]+=1}if(o[l]=-o[l],function(t,e){return t&&e}(l+1<this.m,0!==o[l])){for(var _=l+1;_<this.m;_++)a[_]=0;for(var b=l+1;b<this.n;b++)for(var x=l+1;x<this.m;x++)a[x]+=o[b]*t[x][b];for(var E=l+1;E<this.n;E++)for(var w=-o[E]/o[l+1],C=l+1;C<this.m;C++)t[C][E]+=w*a[C]}for(var N=l+1;N<this.n;N++)this.V[N][l]=o[N]}}var I=Math.min(this.n,this.m+1);s<this.n&&(this.s[s]=t[s][s]),this.m<I&&(this.s[I-1]=0),u+1<I&&(o[u]=t[u][I-1]),o[I-1]=0;for(var T=s;T<e;T++){for(var S=0;S<this.m;S++)this.U[S][T]=0;this.U[T][T]=1}for(var A=s-1;A>=0;A--)if(0!==this.s[A]){for(var L=A+1;L<e;L++){for(var D=0,M=A;M<this.m;M++)D+=this.U[M][A]*this.U[M][L];D=-D/this.U[A][A];for(var O=A;O<this.m;O++)this.U[O][L]+=D*this.U[O][A]}for(var P=A;P<this.m;P++)this.U[P][A]=-this.U[P][A];this.U[A][A]=1+this.U[A][A];for(var R=0;R<A-1;R++)this.U[R][A]=0}else{for(var k=0;k<this.m;k++)this.U[k][A]=0;this.U[A][A]=1}for(var F=this.n-1;F>=0;F--){if(function(t,e){return t&&e}(F<u,0!==o[F]))for(var B=F+1;B<e;B++){for(var z=0,G=F+1;G<this.n;G++)z+=this.V[G][F]*this.V[G][B];z=-z/this.V[F+1][F];for(var q=F+1;q<this.n;q++)this.V[q][B]+=z*this.V[q][F]}for(var V=0;V<this.n;V++)this.V[V][F]=0;this.V[F][F]=1}for(var U=I-1,j=Math.pow(2,-52),Y=Math.pow(2,-966);I>0;){var X=void 0,H=void 0;for(X=I-2;X>=-1&&-1!==X;X--)if(Math.abs(o[X])<=Y+j*(Math.abs(this.s[X])+Math.abs(this.s[X+1]))){o[X]=0;break}if(X===I-2)H=4;else{var W=void 0;for(W=I-1;W>=X&&W!==X;W--){var $=(W!==I?Math.abs(o[W]):0)+(W!==X+1?Math.abs(o[W-1]):0);if(Math.abs(this.s[W])<=Y+j*$){this.s[W]=0;break}}W===X?H=3:W===I-1?H=1:(H=2,X=W)}switch(X++,H){case 1:var Z=o[I-2];o[I-2]=0;for(var K=I-2;K>=X;K--){var Q=r.hypot(this.s[K],Z),J=this.s[K]/Q,tt=Z/Q;this.s[K]=Q,K!==X&&(Z=-tt*o[K-1],o[K-1]=J*o[K-1]);for(var et=0;et<this.n;et++)Q=J*this.V[et][K]+tt*this.V[et][I-1],this.V[et][I-1]=-tt*this.V[et][K]+J*this.V[et][I-1],this.V[et][K]=Q}break;case 2:var nt=o[X-1];o[X-1]=0;for(var rt=X;rt<I;rt++){var it=r.hypot(this.s[rt],nt),ot=this.s[rt]/it,at=nt/it;this.s[rt]=it,nt=-at*o[rt],o[rt]=ot*o[rt];for(var st=0;st<this.m;st++)it=ot*this.U[st][rt]+at*this.U[st][X-1],this.U[st][X-1]=-at*this.U[st][rt]+ot*this.U[st][X-1],this.U[st][rt]=it}break;case 3:var ut=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[I-1]),Math.abs(this.s[I-2])),Math.abs(o[I-2])),Math.abs(this.s[X])),Math.abs(o[X])),lt=this.s[I-1]/ut,ct=this.s[I-2]/ut,ht=o[I-2]/ut,pt=this.s[X]/ut,ft=o[X]/ut,dt=((ct+lt)*(ct-lt)+ht*ht)/2,gt=lt*ht*(lt*ht),yt=0;(function(t,e){return t||e})(0!==dt,0!==gt)&&(yt=Math.sqrt(dt*dt+gt),dt<0&&(yt=-yt),yt=gt/(dt+yt));for(var vt=(pt+lt)*(pt-lt)+yt,mt=pt*ft,_t=X;_t<I-1;_t++){var bt=r.hypot(vt,mt),xt=vt/bt,Et=mt/bt;_t!==X&&(o[_t-1]=bt),vt=xt*this.s[_t]+Et*o[_t],o[_t]=xt*o[_t]-Et*this.s[_t],mt=Et*this.s[_t+1],this.s[_t+1]=xt*this.s[_t+1];for(var wt=0;wt<this.n;wt++)bt=xt*this.V[wt][_t]+Et*this.V[wt][_t+1],this.V[wt][_t+1]=-Et*this.V[wt][_t]+xt*this.V[wt][_t+1],this.V[wt][_t]=bt;if(xt=vt/(bt=r.hypot(vt,mt)),Et=mt/bt,this.s[_t]=bt,vt=xt*o[_t]+Et*this.s[_t+1],this.s[_t+1]=-Et*o[_t]+xt*this.s[_t+1],mt=Et*o[_t+1],o[_t+1]=xt*o[_t+1],_t<this.m-1)for(var Ct=0;Ct<this.m;Ct++)bt=xt*this.U[Ct][_t]+Et*this.U[Ct][_t+1],this.U[Ct][_t+1]=-Et*this.U[Ct][_t]+xt*this.U[Ct][_t+1],this.U[Ct][_t]=bt}o[I-2]=vt;break;case 4:if(this.s[X]<=0){this.s[X]=this.s[X]<0?-this.s[X]:0;for(var Nt=0;Nt<=U;Nt++)this.V[Nt][X]=-this.V[Nt][X]}for(;X<U&&!(this.s[X]>=this.s[X+1]);){var It=this.s[X];if(this.s[X]=this.s[X+1],this.s[X+1]=It,X<this.n-1)for(var Tt=0;Tt<this.n;Tt++)It=this.V[Tt][X+1],this.V[Tt][X+1]=this.V[Tt][X],this.V[Tt][X]=It;if(X<this.m-1)for(var St=0;St<this.m;St++)It=this.U[St][X+1],this.U[St][X+1]=this.U[St][X],this.U[St][X]=It;X++}I--}}return{U:this.U,V:this.V,S:this.s}},r.hypot=function(t,e){var n=void 0;return Math.abs(t)>Math.abs(e)?(n=e/t,n=Math.abs(t)*Math.sqrt(1+n*n)):0!=e?(n=t/e,n=Math.abs(e)*Math.sqrt(1+n*n)):n=0,n},t.exports=r},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sequence1=e,this.sequence2=n,this.match_score=r,this.mismatch_penalty=i,this.gap_penalty=o,this.iMax=e.length+1,this.jMax=n.length+1,this.grid=new Array(this.iMax);for(var a=0;a<this.iMax;a++){this.grid[a]=new Array(this.jMax);for(var s=0;s<this.jMax;s++)this.grid[a][s]=0}this.tracebackGrid=new Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.tracebackGrid[u][l]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return r(t,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var t=1;t<this.jMax;t++)this.grid[0][t]=this.grid[0][t-1]+this.gap_penalty,this.tracebackGrid[0][t]=[!1,!1,!0];for(var e=1;e<this.iMax;e++)this.grid[e][0]=this.grid[e-1][0]+this.gap_penalty,this.tracebackGrid[e][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var r=1;r<this.jMax;r++){var i=[this.sequence1[n-1]===this.sequence2[r-1]?this.grid[n-1][r-1]+this.match_score:this.grid[n-1][r-1]+this.mismatch_penalty,this.grid[n-1][r]+this.gap_penalty,this.grid[n][r-1]+this.gap_penalty],o=this.arrayAllMaxIndexes(i);this.grid[n][r]=i[o[0]],this.tracebackGrid[n][r]=[o.includes(0),o.includes(1),o.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var t=[];for(t.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});t[0];){var e=t[0],n=this.tracebackGrid[e.pos[0]][e.pos[1]];n[0]&&t.push({pos:[e.pos[0]-1,e.pos[1]-1],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),n[1]&&t.push({pos:[e.pos[0]-1,e.pos[1]],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:"-"+e.seq2}),n[2]&&t.push({pos:[e.pos[0],e.pos[1]-1],seq1:"-"+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),0===e.pos[0]&&0===e.pos[1]&&this.alignments.push({sequence1:e.seq1,sequence2:e.seq2}),t.shift()}return this.alignments}},{key:"getAllIndexes",value:function(t,e){for(var n=[],r=-1;-1!==(r=t.indexOf(e,r+1));)n.push(r);return n}},{key:"arrayAllMaxIndexes",value:function(t){return this.getAllIndexes(t,Math.max.apply(null,t))}}]),t}();t.exports=i},function(t,e,n){"use strict";var r=function(){};r.FDLayout=n(18),r.FDLayoutConstants=n(4),r.FDLayoutEdge=n(19),r.FDLayoutNode=n(20),r.DimensionD=n(21),r.HashMap=n(22),r.HashSet=n(23),r.IGeometry=n(8),r.IMath=n(9),r.Integer=n(10),r.Point=n(12),r.PointD=n(5),r.RandomSeed=n(16),r.RectangleD=n(13),r.Transform=n(17),r.UniqueIDGeneretor=n(14),r.Quicksort=n(25),r.LinkedList=n(11),r.LGraphObject=n(2),r.LGraph=n(6),r.LEdge=n(1),r.LGraphManager=n(7),r.LNode=n(3),r.Layout=n(15),r.LayoutConstants=n(0),r.NeedlemanWunsch=n(27),r.Matrix=n(24),r.SVD=n(26),t.exports=r},function(t,e,n){"use strict";function r(){this.listeners=[]}var i=r.prototype;i.addListener=function(t,e){this.listeners.push({event:t,callback:e})},i.removeListener=function(t,e){for(var n=this.listeners.length;n>=0;n--){var r=this.listeners[n];r.event===t&&r.callback===e&&this.listeners.splice(n,1)}},i.emit=function(t,e){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];t===r.event&&r.callback(e)}},t.exports=r}])},t.exports=e()},8337:(t,e,n)=>{"use strict";function r(t){return Array.prototype.slice.call(arguments,1).forEach((function(e){e&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t}function i(t){return Object.prototype.toString.call(t)}function o(t){return"[object Function]"===i(t)}function a(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},u={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&":"===t[e-3]||e>=3&&"/"===t[e-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},l="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",c="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function h(t){var e=t.re=n(6066)(t.__opts__),r=t.__tlds__.slice();function s(t){return t.replace("%TLDS%",e.src_tlds)}t.onCompile(),t.__tlds_replaced__||r.push(l),r.push(e.src_xn),e.src_tlds=r.join("|"),e.email_fuzzy=RegExp(s(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(s(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(s(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(s(e.tpl_host_fuzzy_test),"i");var u=[];function c(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}t.__compiled__={},Object.keys(t.__schemas__).forEach((function(e){var n=t.__schemas__[e];if(null!==n){var r={validate:null,link:null};if(t.__compiled__[e]=r,"[object Object]"===i(n))return"[object RegExp]"!==i(n.validate)?o(n.validate)?r.validate=n.validate:c(e,n):r.validate=function(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}(n.validate),void(o(n.normalize)?r.normalize=n.normalize:n.normalize?c(e,n):r.normalize=function(t,e){e.normalize(t)});!function(t){return"[object String]"===i(t)}(n)?c(e,n):u.push(e)}})),u.forEach((function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)})),t.__compiled__[""]={validate:null,normalize:function(t,e){e.normalize(t)}};var h=Object.keys(t.__compiled__).filter((function(e){return e.length>0&&t.__compiled__[e]})).map(a).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+h+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+h+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(t){t.__index__=-1,t.__text_cache__=""}(t)}function p(t,e){var n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function f(t,e){var n=new p(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function d(t,e){if(!(this instanceof d))return new d(t,e);var n;e||(n=t,Object.keys(n||{}).reduce((function(t,e){return t||s.hasOwnProperty(e)}),!1)&&(e=t,t={})),this.__opts__=r({},s,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},u,t),this.__compiled__={},this.__tlds__=c,this.__tlds_replaced__=!1,this.re={},h(this)}d.prototype.add=function(t,e){return this.__schemas__[t]=e,h(this),this},d.prototype.set=function(t){return this.__opts__=r(this.__opts__,t),this},d.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var e,n,r,i,o,a,s,u;if(this.re.schema_test.test(t))for((s=this.re.schema_search).lastIndex=0;null!==(e=s.exec(t));)if(i=this.testSchemaAt(t,e[2],s.lastIndex)){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||u<this.__index__)&&null!==(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&t.indexOf("@")>=0&&null!==(r=t.match(this.re.email_fuzzy))&&(o=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a)),this.__index__>=0},d.prototype.pretest=function(t){return this.re.pretest.test(t)},d.prototype.testSchemaAt=function(t,e,n){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,n,this):0},d.prototype.match=function(t){var e=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(f(this,e)),e=this.__last_index__);for(var r=e?t.slice(e):t;this.test(r);)n.push(f(this,e)),r=r.slice(this.__last_index__),e+=this.__last_index__;return n.length?n:null},d.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;var e=this.re.schema_at_start.exec(t);if(!e)return null;var n=this.testSchemaAt(t,e[2],e[0].length);return n?(this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+n,f(this,0)):null},d.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter((function(t,e,n){return t!==n[e-1]})).reverse(),h(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,h(this),this)},d.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},d.prototype.onCompile=function(){},t.exports=d},6066:(t,e,n)=>{"use strict";t.exports=function(t){var e={};t=t||{},e.src_Any=n(9369).source,e.src_Cc=n(9413).source,e.src_Z=n(5045).source,e.src_P=n(3189).source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");return e.src_pseudo_letter="(?:(?![><]|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|[><]|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|[><]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy='(^|[><]|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}},773:(t,e,n)=>{var r,i="__lodash_hash_undefined__",o="[object Function]",a="[object GeneratorFunction]",s=/^\[object .+?Constructor\]$/,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),h=Array.prototype,p=Function.prototype,f=Object.prototype,d=c["__core-js_shared__"],g=(r=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",y=p.toString,v=f.hasOwnProperty,m=f.toString,_=RegExp("^"+y.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=h.splice,x=S(c,"Map"),E=S(Object,"create");function w(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function C(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function N(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function I(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!=n&&r!=r)return i;return-1}function T(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function S(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){if(!L(t)||g&&g in t)return!1;var e=function(t){var e=L(t)?m.call(t):"";return e==o||e==a}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?_:s;return e.test(function(t){if(null!=t){try{return y.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(n)?n:void 0}function A(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(A.Cache||N),n}function L(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}w.prototype.clear=function(){this.__data__=E?E(null):{}},w.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},w.prototype.get=function(t){var e=this.__data__;if(E){var n=e[t];return n===i?void 0:n}return v.call(e,t)?e[t]:void 0},w.prototype.has=function(t){var e=this.__data__;return E?void 0!==e[t]:v.call(e,t)},w.prototype.set=function(t,e){return this.__data__[t]=E&&void 0===e?i:e,this},C.prototype.clear=function(){this.__data__=[]},C.prototype.delete=function(t){var e=this.__data__,n=I(e,t);return!(n<0||(n==e.length-1?e.pop():b.call(e,n,1),0))},C.prototype.get=function(t){var e=this.__data__,n=I(e,t);return n<0?void 0:e[n][1]},C.prototype.has=function(t){return I(this.__data__,t)>-1},C.prototype.set=function(t,e){var n=this.__data__,r=I(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},N.prototype.clear=function(){this.__data__={hash:new w,map:new(x||C),string:new w}},N.prototype.delete=function(t){return T(this,t).delete(t)},N.prototype.get=function(t){return T(this,t).get(t)},N.prototype.has=function(t){return T(this,t).has(t)},N.prototype.set=function(t,e){return T(this,t).set(t,e),this},A.Cache=N,t.exports=A},3096:(t,e,n)=>{var r="Expected a function",i=NaN,o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,f=h||p||Function("return this")(),d=Object.prototype.toString,g=Math.max,y=Math.min,v=function(){return f.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&d.call(t)==o}(t))return i;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=u.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):s.test(t)?i:+t}t.exports=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(r);return m(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),function(t,e,n){var i,o,a,s,u,l,c=0,h=!1,p=!1,f=!0;if("function"!=typeof t)throw new TypeError(r);function d(e){var n=i,r=o;return i=o=void 0,c=e,s=t.apply(r,n)}function b(t){var n=t-l;return void 0===l||n>=e||n<0||p&&t-c>=a}function x(){var t=v();if(b(t))return E(t);u=setTimeout(x,function(t){var n=e-(t-l);return p?y(n,a-(t-c)):n}(t))}function E(t){return u=void 0,f&&i?d(t):(i=o=void 0,s)}function w(){var t=v(),n=b(t);if(i=arguments,o=this,l=t,n){if(void 0===u)return function(t){return c=t,u=setTimeout(x,e),h?d(t):s}(l);if(p)return u=setTimeout(x,e),d(l)}return void 0===u&&(u=setTimeout(x,e)),s}return e=_(e)||0,m(n)&&(h=!!n.leading,a=(p="maxWait"in n)?g(_(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f),w.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},w.flush=function(){return void 0===u?s:E(v())},w}(t,e,{leading:i,maxWait:e,trailing:o})}},1989:(t,e,n)=>{var r=n(1789),i=n(401),o=n(7667),a=n(1327),s=n(1866);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},8407:(t,e,n)=>{var r=n(7040),i=n(4125),o=n(2117),a=n(7518),s=n(4705);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},7071:(t,e,n)=>{var r=n(852)(n(5639),"Map");t.exports=r},3369:(t,e,n)=>{var r=n(4785),i=n(1285),o=n(6e3),a=n(9916),s=n(5265);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},2705:(t,e,n)=>{var r=n(5639).Symbol;t.exports=r},9932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},4865:(t,e,n)=>{var r=n(9465),i=n(7813),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},8470:(t,e,n)=>{var r=n(7813);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},9465:(t,e,n)=>{var r=n(8777);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},7786:(t,e,n)=>{var r=n(1811),i=n(327);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},4239:(t,e,n)=>{var r=n(2705),i=n(9607),o=n(2333),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},8458:(t,e,n)=>{var r=n(3560),i=n(5346),o=n(3218),a=n(346),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,p=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?p:s).test(a(t))}},611:(t,e,n)=>{var r=n(4865),i=n(1811),o=n(5776),a=n(3218),s=n(327);t.exports=function(t,e,n,u){if(!a(t))return t;for(var l=-1,c=(e=i(e,t)).length,h=c-1,p=t;null!=p&&++l<c;){var f=s(e[l]),d=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(l!=h){var g=p[f];void 0===(d=u?u(g,f,p):void 0)&&(d=a(g)?g:o(e[l+1])?[]:{})}r(p,f,d),p=p[f]}return t}},531:(t,e,n)=>{var r=n(2705),i=n(9932),o=n(1469),a=n(3448),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},7561:(t,e,n)=>{var r=n(7990),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},1811:(t,e,n)=>{var r=n(1469),i=n(5403),o=n(5514),a=n(9833);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},278:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},4429:(t,e,n)=>{var r=n(5639)["__core-js_shared__"];t.exports=r},8777:(t,e,n)=>{var r=n(852),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},1957:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},5050:(t,e,n)=>{var r=n(7019);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},852:(t,e,n)=>{var r=n(8458),i=n(7801);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},9607:(t,e,n)=>{var r=n(2705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},7801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},1789:(t,e,n)=>{var r=n(4536);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7667:(t,e,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},1327:(t,e,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},1866:(t,e,n)=>{var r=n(4536);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},5776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},5403:(t,e,n)=>{var r=n(1469),i=n(3448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},7019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5346:(t,e,n)=>{var r,i=n(4429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,n)=>{var r=n(8470),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},2117:(t,e,n)=>{var r=n(8470);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},7518:(t,e,n)=>{var r=n(8470);t.exports=function(t){return r(this.__data__,t)>-1}},4705:(t,e,n)=>{var r=n(8470);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},4785:(t,e,n)=>{var r=n(1989),i=n(8407),o=n(7071);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},1285:(t,e,n)=>{var r=n(5050);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},6e3:(t,e,n)=>{var r=n(5050);t.exports=function(t){return r(this,t).get(t)}},9916:(t,e,n)=>{var r=n(5050);t.exports=function(t){return r(this,t).has(t)}},5265:(t,e,n)=>{var r=n(5050);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},4523:(t,e,n)=>{var r=n(8306);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},4536:(t,e,n)=>{var r=n(852)(Object,"create");t.exports=r},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5639:(t,e,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},5514:(t,e,n)=>{var r=n(4523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},327:(t,e,n)=>{var r=n(3448);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7990:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},3279:(t,e,n)=>{var r=n(3218),i=n(7771),o=n(4841),a=Math.max,s=Math.min;t.exports=function(t,e,n){var u,l,c,h,p,f,d=0,g=!1,y=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=u,r=l;return u=l=void 0,d=e,h=t.apply(r,n)}function _(t){var n=t-f;return void 0===f||n>=e||n<0||y&&t-d>=c}function b(){var t=i();if(_(t))return x(t);p=setTimeout(b,function(t){var n=e-(t-f);return y?s(n,c-(t-d)):n}(t))}function x(t){return p=void 0,v&&u?m(t):(u=l=void 0,h)}function E(){var t=i(),n=_(t);if(u=arguments,l=this,f=t,n){if(void 0===p)return function(t){return d=t,p=setTimeout(b,e),g?m(t):h}(f);if(y)return clearTimeout(p),p=setTimeout(b,e),m(f)}return void 0===p&&(p=setTimeout(b,e)),h}return e=o(e)||0,r(n)&&(g=!!n.leading,c=(y="maxWait"in n)?a(o(n.maxWait)||0,e):c,v="trailing"in n?!!n.trailing:v),E.cancel=function(){void 0!==p&&clearTimeout(p),d=0,u=f=l=p=void 0},E.flush=function(){return void 0===p?h:x(i())},E}},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},7361:(t,e,n)=>{var r=n(7786);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},1469:t=>{var e=Array.isArray;t.exports=e},3560:(t,e,n)=>{var r=n(4239),i=n(3218);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},3448:(t,e,n)=>{var r=n(4239),i=n(7005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},6486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,h=9007199254740991,p=NaN,f=4294967295,d=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",y="[object Array]",v="[object Boolean]",m="[object Date]",_="[object Error]",b="[object Function]",x="[object GeneratorFunction]",E="[object Map]",w="[object Number]",C="[object Object]",N="[object Promise]",I="[object RegExp]",T="[object Set]",S="[object String]",A="[object Symbol]",L="[object WeakMap]",D="[object ArrayBuffer]",M="[object DataView]",O="[object Float32Array]",P="[object Float64Array]",R="[object Int8Array]",k="[object Int16Array]",F="[object Int32Array]",B="[object Uint8Array]",z="[object Uint8ClampedArray]",G="[object Uint16Array]",q="[object Uint32Array]",V=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,j=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,H=RegExp(Y.source),W=RegExp(X.source),$=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,xt="\\ud800-\\udfff",Et="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="\\u2700-\\u27bf",Ct="a-z\\xdf-\\xf6\\xf8-\\xff",Nt="A-Z\\xc0-\\xd6\\xd8-\\xde",It="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",St="["+xt+"]",At="["+Tt+"]",Lt="["+Et+"]",Dt="\\d+",Mt="["+wt+"]",Ot="["+Ct+"]",Pt="[^"+xt+Tt+Dt+wt+Ct+Nt+"]",Rt="\\ud83c[\\udffb-\\udfff]",kt="[^"+xt+"]",Ft="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",zt="["+Nt+"]",Gt="\\u200d",qt="(?:"+Ot+"|"+Pt+")",Vt="(?:"+zt+"|"+Pt+")",Ut="(?:['](?:d|ll|m|re|s|t|ve))?",jt="(?:['](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Lt+"|"+Rt+")?",Xt="["+It+"]?",Ht=Xt+Yt+"(?:"+Gt+"(?:"+[kt,Ft,Bt].join("|")+")"+Xt+Yt+")*",Wt="(?:"+[Mt,Ft,Bt].join("|")+")"+Ht,$t="(?:"+[kt+Lt+"?",Lt,Ft,Bt,St].join("|")+")",Zt=RegExp("[']","g"),Kt=RegExp(Lt,"g"),Qt=RegExp(Rt+"(?="+Rt+")|"+$t+Ht,"g"),Jt=RegExp([zt+"?"+Ot+"+"+Ut+"(?="+[At,zt,"$"].join("|")+")",Vt+"+"+jt+"(?="+[At,zt+qt,"$"].join("|")+")",zt+"?"+qt+"+"+Ut,zt+"+"+jt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt,Wt].join("|"),"g"),te=RegExp("["+Gt+xt+Et+It+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[O]=ie[P]=ie[R]=ie[k]=ie[F]=ie[B]=ie[z]=ie[G]=ie[q]=!0,ie[g]=ie[y]=ie[D]=ie[v]=ie[M]=ie[m]=ie[_]=ie[b]=ie[E]=ie[w]=ie[C]=ie[I]=ie[T]=ie[S]=ie[L]=!1;var oe={};oe[g]=oe[y]=oe[D]=oe[M]=oe[v]=oe[m]=oe[O]=oe[P]=oe[R]=oe[k]=oe[F]=oe[E]=oe[w]=oe[C]=oe[I]=oe[T]=oe[S]=oe[A]=oe[B]=oe[z]=oe[G]=oe[q]=!0,oe[_]=oe[b]=oe[L]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,ue=parseInt,le="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ce="object"==typeof self&&self&&self.Object===Object&&self,he=le||ce||Function("return this")(),pe=e&&!e.nodeType&&e,fe=pe&&t&&!t.nodeType&&t,de=fe&&fe.exports===pe,ge=de&&le.process,ye=function(){try{return fe&&fe.require&&fe.require("util").types||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),ve=ye&&ye.isArrayBuffer,me=ye&&ye.isDate,_e=ye&&ye.isMap,be=ye&&ye.isRegExp,xe=ye&&ye.isSet,Ee=ye&&ye.isTypedArray;function we(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Ne(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ie(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Se(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ae(t,e){return!(null==t||!t.length)&&ze(t,e,0)>-1}function Le(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function De(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Me(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Oe(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Pe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Re(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ke=Ue("length");function Fe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function ze(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Be(t,qe,n)}function Ge(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function qe(t){return t!=t}function Ve(t,e){var n=null==t?0:t.length;return n?Xe(t,e)/n:p}function Ue(t){return function(e){return null==e?i:e[t]}}function je(t){return function(e){return null==t?i:t[e]}}function Ye(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Xe(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function He(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function We(t){return t?t.slice(0,pn(t)+1).replace(rt,""):t}function $e(t){return function(e){return t(e)}}function Ze(t,e){return De(e,(function(e){return t[e]}))}function Ke(t,e){return t.has(e)}function Qe(t,e){for(var n=-1,r=t.length;++n<r&&ze(e,t[n],0)>-1;);return n}function Je(t,e){for(var n=t.length;n--&&ze(e,t[n],0)>-1;);return n}var tn=je({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),en=je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+ae[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function an(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function cn(t){return rn(t)?function(t){for(var e=Qt.lastIndex=0;Qt.test(t);)++e;return e}(t):ke(t)}function hn(t){return rn(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}function pn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var fn=je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),dn=function t(e){var n,r=(e=null==e?he:dn.defaults(he.Object(),e,dn.pick(he,ne))).Array,it=e.Date,xt=e.Error,Et=e.Function,wt=e.Math,Ct=e.Object,Nt=e.RegExp,It=e.String,Tt=e.TypeError,St=r.prototype,At=Et.prototype,Lt=Ct.prototype,Dt=e["__core-js_shared__"],Mt=At.toString,Ot=Lt.hasOwnProperty,Pt=0,Rt=(n=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",kt=Lt.toString,Ft=Mt.call(Ct),Bt=he._,zt=Nt("^"+Mt.call(Ot).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=de?e.Buffer:i,qt=e.Symbol,Vt=e.Uint8Array,Ut=Gt?Gt.allocUnsafe:i,jt=an(Ct.getPrototypeOf,Ct),Yt=Ct.create,Xt=Lt.propertyIsEnumerable,Ht=St.splice,Wt=qt?qt.isConcatSpreadable:i,$t=qt?qt.iterator:i,Qt=qt?qt.toStringTag:i,te=function(){try{var t=uo(Ct,"defineProperty");return t({},"",{}),t}catch(t){}}(),ae=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,le=it&&it.now!==he.Date.now&&it.now,ce=e.setTimeout!==he.setTimeout&&e.setTimeout,pe=wt.ceil,fe=wt.floor,ge=Ct.getOwnPropertySymbols,ye=Gt?Gt.isBuffer:i,ke=e.isFinite,je=St.join,gn=an(Ct.keys,Ct),yn=wt.max,vn=wt.min,mn=it.now,_n=e.parseInt,bn=wt.random,xn=St.reverse,En=uo(e,"DataView"),wn=uo(e,"Map"),Cn=uo(e,"Promise"),Nn=uo(e,"Set"),In=uo(e,"WeakMap"),Tn=uo(Ct,"create"),Sn=In&&new In,An={},Ln=Fo(En),Dn=Fo(wn),Mn=Fo(Cn),On=Fo(Nn),Pn=Fo(In),Rn=qt?qt.prototype:i,kn=Rn?Rn.valueOf:i,Fn=Rn?Rn.toString:i;function Bn(t){if(ts(t)&&!Ua(t)&&!(t instanceof Vn)){if(t instanceof qn)return t;if(Ot.call(t,"__wrapped__"))return Bo(t)}return new qn(t)}var zn=function(){function t(){}return function(e){if(!Ja(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Gn(){}function qn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Yn;++e<n;)this.add(t[e])}function Hn(t){var e=this.__data__=new jn(t);this.size=e.size}function Wn(t,e){var n=Ua(t),r=!n&&Va(t),i=!n&&!r&&Ha(t),o=!n&&!r&&!i&&us(t),a=n||r||i||o,s=a?He(t.length,It):[],u=s.length;for(var l in t)!e&&!Ot.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||yo(l,u))||s.push(l);return s}function $n(t){var e=t.length;return e?t[Yr(0,e-1)]:i}function Zn(t,e){return Mo(Ii(t),or(e,0,t.length))}function Kn(t){return Mo(Ii(t))}function Qn(t,e,n){(n!==i&&!za(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Jn(t,e,n){var r=t[e];Ot.call(t,e)&&za(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(za(t[n][0],e))return n;return-1}function er(t,e,n,r){return cr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function nr(t,e){return t&&Ti(e,Ls(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,a=r(o),s=null==t;++n<o;)a[n]=s?i:Ns(t,e[n]);return a}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,a){var s,u=1&e,l=2&e,c=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!Ja(t))return t;var h=Ua(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Ii(t,s)}else{var p=ho(t),f=p==b||p==x;if(Ha(t))return bi(t,u);if(p==C||p==g||f&&!o){if(s=l||f?{}:fo(t),!u)return l?function(t,e){return Ti(t,co(t),e)}(t,function(t,e){return t&&Ti(e,Ds(e),t)}(s,t)):function(t,e){return Ti(t,lo(t),e)}(t,nr(s,t))}else{if(!oe[p])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case D:return xi(t);case v:case m:return new i(+t);case M:return function(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case P:case R:case k:case F:case B:case z:case G:case q:return Ei(t,n);case E:return new i;case w:case S:return new i(t);case I:return function(t){var e=new t.constructor(t.source,pt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case T:return new i;case A:return r=t,kn?Ct(kn.call(r)):{}}}(t,p,u)}}a||(a=new Hn);var d=a.get(t);if(d)return d;a.set(t,s),os(t)?t.forEach((function(r){s.add(ar(r,e,n,r,t,a))})):es(t)&&t.forEach((function(r,i){s.set(i,ar(r,e,n,i,t,a))}));var y=h?i:(c?l?eo:to:l?Ds:Ls)(t);return Ne(y||t,(function(r,i){y&&(r=t[i=r]),Jn(s,i,ar(r,e,n,i,t,a))})),s}function sr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Ct(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Tt(o);return So((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,o=Ae,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=De(e,$e(n))),r?(o=Le,a=!1):e.length>=200&&(o=Ke,a=!1,e=new Xn(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var p=l;p--;)if(e[p]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}Bn.templateSettings={escape:$,evaluate:Z,interpolate:K,variable:"",imports:{_:Bn}},Bn.prototype=Gn.prototype,Bn.prototype.constructor=Bn,qn.prototype=zn(Gn.prototype),qn.prototype.constructor=qn,Vn.prototype=zn(Gn.prototype),Vn.prototype.constructor=Vn,Un.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Un.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Un.prototype.get=function(t){var e=this.__data__;if(Tn){var n=e[t];return n===a?i:n}return Ot.call(e,t)?e[t]:i},Un.prototype.has=function(t){var e=this.__data__;return Tn?e[t]!==i:Ot.call(e,t)},Un.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tn&&e===i?a:e,this},jn.prototype.clear=function(){this.__data__=[],this.size=0},jn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Ht.call(e,n,1),--this.size,0))},jn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},jn.prototype.has=function(t){return tr(this.__data__,t)>-1},jn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(wn||jn),string:new Un}},Yn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Yn.prototype.get=function(t){return ao(this,t).get(t)},Yn.prototype.has=function(t){return ao(this,t).has(t)},Yn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(t){return this.__data__.set(t,a),this},Xn.prototype.has=function(t){return this.__data__.has(t)},Hn.prototype.clear=function(){this.__data__=new jn,this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Hn.prototype.get=function(t){return this.__data__.get(t)},Hn.prototype.has=function(t){return this.__data__.has(t)},Hn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof jn){var r=n.__data__;if(!wn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(t,e),this.size=n.size,this};var cr=Li(mr),hr=Li(_r,!0);function pr(t,e){var n=!0;return cr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function fr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(u===i?s==s&&!ss(s):n(s,u)))var u=s,l=a}return l}function dr(t,e){var n=[];return cr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=go),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?gr(s,e-1,n,r,i):Me(i,s):r||(i[i.length]=s)}return i}var yr=Di(),vr=Di(!0);function mr(t,e){return t&&yr(t,e,Ls)}function _r(t,e){return t&&vr(t,e,Ls)}function br(t,e){return Se(e,(function(e){return Za(t[e])}))}function xr(t,e){for(var n=0,r=(e=yi(e,t)).length;null!=t&&n<r;)t=t[ko(e[n++])];return n&&n==r?t:i}function Er(t,e,n){var r=e(t);return Ua(t)?r:Me(r,n(t))}function wr(t){return null==t?t===i?"[object Undefined]":"[object Null]":Qt&&Qt in Ct(t)?function(t){var e=Ot.call(t,Qt),n=t[Qt];try{t[Qt]=i;var r=!0}catch(t){}var o=kt.call(t);return r&&(e?t[Qt]=n:delete t[Qt]),o}(t):function(t){return kt.call(t)}(t)}function Cr(t,e){return t>e}function Nr(t,e){return null!=t&&Ot.call(t,e)}function Ir(t,e){return null!=t&&e in Ct(t)}function Tr(t,e,n){for(var o=n?Le:Ae,a=t[0].length,s=t.length,u=s,l=r(s),c=1/0,h=[];u--;){var p=t[u];u&&e&&(p=De(p,$e(e))),c=vn(p.length,c),l[u]=!n&&(e||a>=120&&p.length>=120)?new Xn(u&&p):i}p=t[0];var f=-1,d=l[0];t:for(;++f<a&&h.length<c;){var g=p[f],y=e?e(g):g;if(g=n||0!==g?g:0,!(d?Ke(d,y):o(h,y,n))){for(u=s;--u;){var v=l[u];if(!(v?Ke(v,y):o(t[u],y,n)))continue t}d&&d.push(y),h.push(g)}}return h}function Sr(t,e,n){var r=null==(t=No(t,e=yi(e,t)))?t:t[ko($o(e))];return null==r?i:we(r,t,n)}function Ar(t){return ts(t)&&wr(t)==g}function Lr(t,e,n,r,o){return t===e||(null==t||null==e||!ts(t)&&!ts(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=Ua(t),u=Ua(e),l=s?y:ho(t),c=u?y:ho(e),h=(l=l==g?C:l)==C,p=(c=c==g?C:c)==C,f=l==c;if(f&&Ha(t)){if(!Ha(e))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new Hn),s||us(t)?Qi(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!o(new Vt(t),new Vt(e)));case v:case m:case w:return za(+t,+e);case _:return t.name==e.name&&t.message==e.message;case I:case S:return t==e+"";case E:var s=on;case T:var u=1&r;if(s||(s=un),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=Qi(s(t),s(e),r,i,o,a);return a.delete(t),c;case A:if(kn)return kn.call(t)==kn.call(e)}return!1}(t,e,l,n,r,o,a);if(!(1&n)){var d=h&&Ot.call(t,"__wrapped__"),b=p&&Ot.call(e,"__wrapped__");if(d||b){var x=d?t.value():t,N=b?e.value():e;return a||(a=new Hn),o(x,N,n,r,a)}}return!!f&&(a||(a=new Hn),function(t,e,n,r,o,a){var s=1&n,u=to(t),l=u.length;if(l!=to(e).length&&!s)return!1;for(var c=l;c--;){var h=u[c];if(!(s?h in e:Ot.call(e,h)))return!1}var p=a.get(t),f=a.get(e);if(p&&f)return p==e&&f==t;var d=!0;a.set(t,e),a.set(e,t);for(var g=s;++c<l;){var y=t[h=u[c]],v=e[h];if(r)var m=s?r(v,y,h,e,t,a):r(y,v,h,t,e,a);if(!(m===i?y===v||o(y,v,n,r,a):m)){d=!1;break}g||(g="constructor"==h)}if(d&&!g){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,r,o,a))}(t,e,n,r,Lr,o))}function Dr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Ct(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var l=(u=n[o])[0],c=t[l],h=u[1];if(s&&u[2]){if(c===i&&!(l in t))return!1}else{var p=new Hn;if(r)var f=r(c,h,l,t,e,p);if(!(f===i?Lr(h,c,3,r,p):f))return!1}}return!0}function Mr(t){return!(!Ja(t)||(e=t,Rt&&Rt in e))&&(Za(t)?zt:gt).test(Fo(t));var e}function Or(t){return"function"==typeof t?t:null==t?nu:"object"==typeof t?Ua(t)?Br(t[0],t[1]):Fr(t):hu(t)}function Pr(t){if(!xo(t))return gn(t);var e=[];for(var n in Ct(t))Ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Rr(t,e){return t<e}function kr(t,e){var n=-1,i=Ya(t)?r(t.length):[];return cr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fr(t){var e=so(t);return 1==e.length&&e[0][2]?wo(e[0][0],e[0][1]):function(n){return n===t||Dr(n,t,e)}}function Br(t,e){return mo(t)&&Eo(e)?wo(ko(t),e):function(n){var r=Ns(n,t);return r===i&&r===e?Is(n,t):Lr(e,r,3)}}function zr(t,e,n,r,o){t!==e&&yr(e,(function(a,s){if(o||(o=new Hn),Ja(a))!function(t,e,n,r,o,a,s){var u=Io(t,n),l=Io(e,n),c=s.get(l);if(c)Qn(t,n,c);else{var h=a?a(u,l,n+"",t,e,s):i,p=h===i;if(p){var f=Ua(l),d=!f&&Ha(l),g=!f&&!d&&us(l);h=l,f||d||g?Ua(u)?h=u:Xa(u)?h=Ii(u):d?(p=!1,h=bi(l,!0)):g?(p=!1,h=Ei(l,!0)):h=[]:rs(l)||Va(l)?(h=u,Va(u)?h=ys(u):Ja(u)&&!Za(u)||(h=fo(l))):p=!1}p&&(s.set(l,h),o(h,l,r,a,s),s.delete(l)),Qn(t,n,h)}}(t,e,s,n,zr,r,o);else{var u=r?r(Io(t,s),a,s+"",t,e,o):i;u===i&&(u=a),Qn(t,s,u)}}),Ds)}function Gr(t,e){var n=t.length;if(n)return yo(e+=e<0?n:0,n)?t[e]:i}function qr(t,e,n){e=e.length?De(e,(function(t){return Ua(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[nu];var r=-1;e=De(e,$e(oo()));var i=kr(t,(function(t,n,i){var o=De(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=wi(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Vr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=xr(t,a);n(s,a)&&Zr(o,yi(a,t),s)}return o}function Ur(t,e,n,r){var i=r?Ge:ze,o=-1,a=e.length,s=t;for(t===e&&(e=Ii(e)),n&&(s=De(t,$e(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Ht.call(s,u,1),Ht.call(t,u,1);return t}function jr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;yo(i)?Ht.call(t,i,1):ui(t,i)}}return t}function Yr(t,e){return t+fe(bn()*(e-t+1))}function Xr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=fe(e/2))&&(t+=t)}while(e);return n}function Hr(t,e){return Ao(Co(t,e,nu),t+"")}function Wr(t){return $n(zs(t))}function $r(t,e){var n=zs(t);return Mo(n,or(e,0,n.length))}function Zr(t,e,n,r){if(!Ja(t))return t;for(var o=-1,a=(e=yi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var l=ko(e[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var h=u[l];(c=r?r(h,l,u):i)===i&&(c=Ja(h)?h:yo(e[o+1])?[]:{})}Jn(u,l,c),u=u[l]}return t}var Kr=Sn?function(t,e){return Sn.set(t,e),t}:nu,Qr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Js(e),writable:!0})}:nu;function Jr(t){return Mo(zs(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function ei(t,e){var n;return cr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ss(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ri(t,e,nu,n)}function ri(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,l=ss(e),c=e===i;o<a;){var h=fe((o+a)/2),p=n(t[h]),f=p!==i,d=null===p,g=p==p,y=ss(p);if(s)var v=r||g;else v=c?g&&(r||f):u?g&&f&&(r||!d):l?g&&f&&!d&&(r||!y):!d&&!y&&(r?p<=e:p<e);v?o=h+1:a=h}return vn(a,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!za(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function oi(t){return"number"==typeof t?t:ss(t)?p:+t}function ai(t){if("string"==typeof t)return t;if(Ua(t))return De(t,ai)+"";if(ss(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=Ae,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Le;else if(o>=200){var l=e?null:Xi(t);if(l)return un(l);a=!1,i=Ke,u=new Xn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var p=u.length;p--;)if(u[p]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function ui(t,e){return null==(t=No(t,e=yi(e,t)))||delete t[ko($o(e))]}function li(t,e,n,r){return Zr(t,e,n(xr(t,e)),r)}function ci(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function hi(t,e){var n=t;return n instanceof Vn&&(n=n.value()),Oe(e,(function(t,e){return e.func.apply(e.thisArg,Me([t],e.args))}),n)}function pi(t,e,n){var i=t.length;if(i<2)return i?si(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=lr(a[o]||s,t[u],e,n));return si(gr(a,1),e,n)}function fi(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var u=r<a?e[r]:i;n(s,t[r],u)}return s}function di(t){return Xa(t)?t:[]}function gi(t){return"function"==typeof t?t:nu}function yi(t,e){return Ua(t)?t:mo(t,e)?[t]:Ro(vs(t))}var vi=Hr;function mi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var _i=ae||function(t){return he.clearTimeout(t)};function bi(t,e){if(e)return t.slice();var n=t.length,r=Ut?Ut(n):new t.constructor(n);return t.copy(r),r}function xi(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function Ei(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function wi(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=ss(t),s=e!==i,u=null===e,l=e==e,c=ss(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&t<e||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function Ci(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,l=e.length,c=yn(a-s,0),h=r(l+c),p=!i;++u<l;)h[u]=e[u];for(;++o<s;)(p||o<a)&&(h[n[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function Ni(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,l=-1,c=e.length,h=yn(a-u,0),p=r(h+c),f=!i;++o<h;)p[o]=t[o];for(var d=o;++l<c;)p[d+l]=e[l];for(;++s<u;)(f||o<a)&&(p[d+n[s]]=t[o++]);return p}function Ii(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ti(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):i;l===i&&(l=t[u]),o?rr(n,u,l):Jn(n,u,l)}return n}function Si(t,e){return function(n,r){var i=Ua(n)?Ce:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ai(t){return Hr((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&vo(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Ct(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))}function Li(t,e){return function(n,r){if(null==n)return n;if(!Ya(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Ct(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Di(t){return function(e,n,r){for(var i=-1,o=Ct(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Mi(t){return function(e){var n=rn(e=vs(e))?hn(e):i,r=n?n[0]:e.charAt(0),o=n?mi(n,1).join(""):e.slice(1);return r[t]()+o}}function Oi(t){return function(e){return Oe(Zs(Vs(e).replace(Zt,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=zn(t.prototype),r=t.apply(n,e);return Ja(r)?r:n}}function Ri(t){return function(e,n,r){var o=Ct(e);if(!Ya(e)){var a=oo(n,3);e=Ls(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function ki(t){return Ji((function(e){var n=e.length,r=n,a=qn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Tt(o);if(a&&!u&&"wrapper"==ro(s))var u=new qn([],!0)}for(r=u?r:n;++r<n;){var l=ro(s=e[r]),c="wrapper"==l?no(s):i;u=c&&_o(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ro(c[0])].apply(u,c[3]):1==s.length&&_o(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ua(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,o,a,s,u,c,h,p){var f=e&l,d=1&e,g=2&e,y=24&e,v=512&e,m=g?i:Pi(t);return function l(){for(var _=arguments.length,b=r(_),x=_;x--;)b[x]=arguments[x];if(y)var E=io(l),w=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,E);if(o&&(b=Ci(b,o,a,y)),s&&(b=Ni(b,s,u,y)),_-=w,y&&_<p){var C=sn(b,E);return ji(t,e,Fi,l.placeholder,n,b,C,c,h,p-_)}var N=d?n:this,I=g?N[t]:t;return _=b.length,c?b=function(t,e){for(var n=t.length,r=vn(e.length,n),o=Ii(t);r--;){var a=e[r];t[r]=yo(a,n)?o[a]:i}return t}(b,c):v&&_>1&&b.reverse(),f&&h<_&&(b.length=h),this&&this!==he&&this instanceof l&&(I=m||Pi(I)),I.apply(N,b)}}function Bi(t,e){return function(n,r){return function(t,e,n,r){return mr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function zi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function Gi(t){return Ji((function(e){return e=De(e,$e(oo())),Hr((function(n){var r=this;return t(e,(function(t){return we(t,r,n)}))}))}))}function qi(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?Xr(e,t):e;var r=Xr(e,pe(t/cn(e)));return rn(e)?mi(hn(r),0,t).join(""):r.slice(0,t)}function Vi(t){return function(e,n,o){return o&&"number"!=typeof o&&vo(e,n,o)&&(n=o=i),e=ps(e),n===i?(n=e,e=0):n=ps(n),function(t,e,n,i){for(var o=-1,a=yn(pe((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:ps(o),t)}}function Ui(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=gs(e),n=gs(n)),t(e,n)}}function ji(t,e,n,r,o,a,s,l,c,h){var p=8&e;e|=p?u:64,4&(e&=~(p?64:u))||(e&=-4);var f=[t,e,o,p?a:i,p?s:i,p?i:a,p?i:s,l,c,h],d=n.apply(i,f);return _o(t)&&To(d,f),d.placeholder=r,Lo(d,t,e)}function Yi(t){var e=wt[t];return function(t,n){if(t=gs(t),(n=null==n?0:vn(fs(n),292))&&ke(t)){var r=(vs(t)+"e").split("e");return+((r=(vs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xi=Nn&&1/un(new Nn([,-0]))[1]==c?function(t){return new Nn(t)}:su;function Hi(t){return function(e){var n=ho(e);return n==E?on(e):n==T?ln(e):function(t,e){return De(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Wi(t,e,n,a,c,h,p,f){var d=2&e;if(!d&&"function"!=typeof t)throw new Tt(o);var g=a?a.length:0;if(g||(e&=-97,a=c=i),p=p===i?p:yn(fs(p),0),f=f===i?f:fs(f),g-=c?c.length:0,64&e){var y=a,v=c;a=c=i}var m=d?i:no(t),_=[t,e,n,a,c,y,v,h,p,f];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==l&&8==n||r==l&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Ci(c,u,e[4]):u,t[4]=c?sn(t[3],s):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Ni(c,u,e[6]):u,t[6]=c?sn(t[5],s):e[6]),(u=e[7])&&(t[7]=u),r&l&&(t[8]=null==t[8]?e[8]:vn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(_,m),t=_[0],e=_[1],n=_[2],a=_[3],c=_[4],!(f=_[9]=_[9]===i?d?0:t.length:yn(_[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var o=Pi(t);return function a(){for(var s=arguments.length,u=r(s),l=s,c=io(a);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:sn(u,c);return(s-=h.length)<n?ji(t,e,Fi,a.placeholder,i,u,h,i,i,n-s):we(this&&this!==he&&this instanceof a?o:t,this,u)}}(t,e,f):e!=u&&33!=e||c.length?Fi.apply(i,_):function(t,e,n,i){var o=1&e,a=Pi(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=r(c+u),p=this&&this!==he&&this instanceof e?a:t;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return we(p,o?n:this,h)}}(t,e,n,a);else var b=function(t,e,n){var r=1&e,i=Pi(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Lo((m?Kr:To)(b,_),t,e)}function $i(t,e,n,r){return t===i||za(t,Lt[n])&&!Ot.call(r,n)?e:t}function Zi(t,e,n,r,o,a){return Ja(t)&&Ja(e)&&(a.set(e,t),zr(t,e,i,Zi,a),a.delete(e)),t}function Ki(t){return rs(t)?i:t}function Qi(t,e,n,r,o,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var p=-1,f=!0,d=2&n?new Xn:i;for(a.set(t,e),a.set(e,t);++p<u;){var g=t[p],y=e[p];if(r)var v=s?r(y,g,p,e,t,a):r(g,y,p,t,e,a);if(v!==i){if(v)continue;f=!1;break}if(d){if(!Re(e,(function(t,e){if(!Ke(d,e)&&(g===t||o(g,t,n,r,a)))return d.push(e)}))){f=!1;break}}else if(g!==y&&!o(g,y,n,r,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function Ji(t){return Ao(Co(t,i,jo),t+"")}function to(t){return Er(t,Ls,lo)}function eo(t){return Er(t,Ds,co)}var no=Sn?function(t){return Sn.get(t)}:su;function ro(t){for(var e=t.name+"",n=An[e],r=Ot.call(An,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Ot.call(Bn,"placeholder")?Bn:t).placeholder}function oo(){var t=Bn.iteratee||ru;return t=t===ru?Or:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function so(t){for(var e=Ls(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Eo(i)]}return e}function uo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Mr(n)?n:i}var lo=ge?function(t){return null==t?[]:(t=Ct(t),Se(ge(t),(function(e){return Xt.call(t,e)})))}:du,co=ge?function(t){for(var e=[];t;)Me(e,lo(t)),t=jt(t);return e}:du,ho=wr;function po(t,e,n){for(var r=-1,i=(e=yi(e,t)).length,o=!1;++r<i;){var a=ko(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Qa(i)&&yo(a,i)&&(Ua(t)||Va(t))}function fo(t){return"function"!=typeof t.constructor||xo(t)?{}:zn(jt(t))}function go(t){return Ua(t)||Va(t)||!!(Wt&&t&&t[Wt])}function yo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e}function vo(t,e,n){if(!Ja(n))return!1;var r=typeof e;return!!("number"==r?Ya(n)&&yo(e,n.length):"string"==r&&e in n)&&za(n[e],t)}function mo(t,e){if(Ua(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ss(t))||J.test(t)||!Q.test(t)||null!=e&&t in Ct(e)}function _o(t){var e=ro(t),n=Bn[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(En&&ho(new En(new ArrayBuffer(1)))!=M||wn&&ho(new wn)!=E||Cn&&ho(Cn.resolve())!=N||Nn&&ho(new Nn)!=T||In&&ho(new In)!=L)&&(ho=function(t){var e=wr(t),n=e==C?t.constructor:i,r=n?Fo(n):"";if(r)switch(r){case Ln:return M;case Dn:return E;case Mn:return N;case On:return T;case Pn:return L}return e});var bo=Dt?Za:gu;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function Eo(t){return t==t&&!Ja(t)}function wo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Ct(n))}}function Co(t,e,n){return e=yn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=yn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),we(t,this,u)}}function No(t,e){return e.length<2?t:xr(t,ti(e,0,-1))}function Io(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var To=Do(Kr),So=ce||function(t,e){return he.setTimeout(t,e)},Ao=Do(Qr);function Lo(t,e,n){var r=e+"";return Ao(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ne(d,(function(n){var r="_."+n[0];e&n[1]&&!Ae(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(r),n)))}function Do(t){var e=0,n=0;return function(){var r=mn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Mo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Yr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Oo,Po,Ro=(Oo=Oa((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===Po.size&&Po.clear(),t})),Po=Oo.cache,Oo);function ko(t){if("string"==typeof t||ss(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Fo(t){if(null!=t){try{return Mt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bo(t){if(t instanceof Vn)return t.clone();var e=new qn(t.__wrapped__,t.__chain__);return e.__actions__=Ii(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var zo=Hr((function(t,e){return Xa(t)?lr(t,gr(e,1,Xa,!0)):[]})),Go=Hr((function(t,e){var n=$o(e);return Xa(n)&&(n=i),Xa(t)?lr(t,gr(e,1,Xa,!0),oo(n,2)):[]})),qo=Hr((function(t,e){var n=$o(e);return Xa(n)&&(n=i),Xa(t)?lr(t,gr(e,1,Xa,!0),i,n):[]}));function Vo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=yn(r+i,0)),Be(t,oo(e,3),i)}function Uo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=fs(n),o=n<0?yn(r+o,0):vn(o,r-1)),Be(t,oo(e,3),o,!0)}function jo(t){return null!=t&&t.length?gr(t,1):[]}function Yo(t){return t&&t.length?t[0]:i}var Xo=Hr((function(t){var e=De(t,di);return e.length&&e[0]===t[0]?Tr(e):[]})),Ho=Hr((function(t){var e=$o(t),n=De(t,di);return e===$o(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Tr(n,oo(e,2)):[]})),Wo=Hr((function(t){var e=$o(t),n=De(t,di);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Tr(n,i,e):[]}));function $o(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Zo=Hr(Ko);function Ko(t,e){return t&&t.length&&e&&e.length?Ur(t,e):t}var Qo=Ji((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return jr(t,De(e,(function(t){return yo(t,n)?+t:t})).sort(wi)),r}));function Jo(t){return null==t?t:xn.call(t)}var ta=Hr((function(t){return si(gr(t,1,Xa,!0))})),ea=Hr((function(t){var e=$o(t);return Xa(e)&&(e=i),si(gr(t,1,Xa,!0),oo(e,2))})),na=Hr((function(t){var e=$o(t);return e="function"==typeof e?e:i,si(gr(t,1,Xa,!0),i,e)}));function ra(t){if(!t||!t.length)return[];var e=0;return t=Se(t,(function(t){if(Xa(t))return e=yn(t.length,e),!0})),He(e,(function(e){return De(t,Ue(e))}))}function ia(t,e){if(!t||!t.length)return[];var n=ra(t);return null==e?n:De(n,(function(t){return we(e,i,t)}))}var oa=Hr((function(t,e){return Xa(t)?lr(t,e):[]})),aa=Hr((function(t){return pi(Se(t,Xa))})),sa=Hr((function(t){var e=$o(t);return Xa(e)&&(e=i),pi(Se(t,Xa),oo(e,2))})),ua=Hr((function(t){var e=$o(t);return e="function"==typeof e?e:i,pi(Se(t,Xa),i,e)})),la=Hr(ra),ca=Hr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ia(t,n)}));function ha(t){var e=Bn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var fa=Ji((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Vn&&yo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[o],thisArg:i}),new qn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),da=Si((function(t,e,n){Ot.call(t,n)?++t[n]:rr(t,n,1)})),ga=Ri(Vo),ya=Ri(Uo);function va(t,e){return(Ua(t)?Ne:cr)(t,oo(e,3))}function ma(t,e){return(Ua(t)?Ie:hr)(t,oo(e,3))}var _a=Si((function(t,e,n){Ot.call(t,n)?t[n].push(e):rr(t,n,[e])})),ba=Hr((function(t,e,n){var i=-1,o="function"==typeof e,a=Ya(t)?r(t.length):[];return cr(t,(function(t){a[++i]=o?we(e,t,n):Sr(t,e,n)})),a})),xa=Si((function(t,e,n){rr(t,n,e)}));function Ea(t,e){return(Ua(t)?De:kr)(t,oo(e,3))}var wa=Si((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ca=Hr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&vo(t,e[0],e[1])?e=[]:n>2&&vo(e[0],e[1],e[2])&&(e=[e[0]]),qr(t,gr(e,1),[])})),Na=le||function(){return he.Date.now()};function Ia(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Wi(t,l,i,i,i,i,e)}function Ta(t,e){var n;if("function"!=typeof e)throw new Tt(o);return t=fs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Sa=Hr((function(t,e,n){var r=1;if(n.length){var i=sn(n,io(Sa));r|=u}return Wi(t,r,e,n,i)})),Aa=Hr((function(t,e,n){var r=3;if(n.length){var i=sn(n,io(Aa));r|=u}return Wi(e,r,t,n,i)}));function La(t,e,n){var r,a,s,u,l,c,h=0,p=!1,f=!1,d=!0;if("function"!=typeof t)throw new Tt(o);function g(e){var n=r,o=a;return r=a=i,h=e,u=t.apply(o,n)}function y(t){var n=t-c;return c===i||n>=e||n<0||f&&t-h>=s}function v(){var t=Na();if(y(t))return m(t);l=So(v,function(t){var n=e-(t-c);return f?vn(n,s-(t-h)):n}(t))}function m(t){return l=i,d&&r?g(t):(r=a=i,u)}function _(){var t=Na(),n=y(t);if(r=arguments,a=this,c=t,n){if(l===i)return function(t){return h=t,l=So(v,e),p?g(t):u}(c);if(f)return _i(l),l=So(v,e),g(c)}return l===i&&(l=So(v,e)),u}return e=gs(e)||0,Ja(n)&&(p=!!n.leading,s=(f="maxWait"in n)?yn(gs(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),_.cancel=function(){l!==i&&_i(l),h=0,r=c=a=l=i},_.flush=function(){return l===i?u:m(Na())},_}var Da=Hr((function(t,e){return ur(t,1,e)})),Ma=Hr((function(t,e,n){return ur(t,gs(e)||0,n)}));function Oa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Tt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Oa.Cache||Yn),n}function Pa(t){if("function"!=typeof t)throw new Tt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Oa.Cache=Yn;var Ra=vi((function(t,e){var n=(e=1==e.length&&Ua(e[0])?De(e[0],$e(oo())):De(gr(e,1),$e(oo()))).length;return Hr((function(r){for(var i=-1,o=vn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return we(t,this,r)}))})),ka=Hr((function(t,e){var n=sn(e,io(ka));return Wi(t,u,i,e,n)})),Fa=Hr((function(t,e){var n=sn(e,io(Fa));return Wi(t,64,i,e,n)})),Ba=Ji((function(t,e){return Wi(t,256,i,i,i,e)}));function za(t,e){return t===e||t!=t&&e!=e}var Ga=Ui(Cr),qa=Ui((function(t,e){return t>=e})),Va=Ar(function(){return arguments}())?Ar:function(t){return ts(t)&&Ot.call(t,"callee")&&!Xt.call(t,"callee")},Ua=r.isArray,ja=ve?$e(ve):function(t){return ts(t)&&wr(t)==D};function Ya(t){return null!=t&&Qa(t.length)&&!Za(t)}function Xa(t){return ts(t)&&Ya(t)}var Ha=ye||gu,Wa=me?$e(me):function(t){return ts(t)&&wr(t)==m};function $a(t){if(!ts(t))return!1;var e=wr(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!rs(t)}function Za(t){if(!Ja(t))return!1;var e=wr(t);return e==b||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ka(t){return"number"==typeof t&&t==fs(t)}function Qa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function Ja(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ts(t){return null!=t&&"object"==typeof t}var es=_e?$e(_e):function(t){return ts(t)&&ho(t)==E};function ns(t){return"number"==typeof t||ts(t)&&wr(t)==w}function rs(t){if(!ts(t)||wr(t)!=C)return!1;var e=jt(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Mt.call(n)==Ft}var is=be?$e(be):function(t){return ts(t)&&wr(t)==I},os=xe?$e(xe):function(t){return ts(t)&&ho(t)==T};function as(t){return"string"==typeof t||!Ua(t)&&ts(t)&&wr(t)==S}function ss(t){return"symbol"==typeof t||ts(t)&&wr(t)==A}var us=Ee?$e(Ee):function(t){return ts(t)&&Qa(t.length)&&!!ie[wr(t)]},ls=Ui(Rr),cs=Ui((function(t,e){return t<=e}));function hs(t){if(!t)return[];if(Ya(t))return as(t)?hn(t):Ii(t);if($t&&t[$t])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[$t]());var e=ho(t);return(e==E?on:e==T?un:zs)(t)}function ps(t){return t?(t=gs(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function fs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function ds(t){return t?or(fs(t),0,f):0}function gs(t){if("number"==typeof t)return t;if(ss(t))return p;if(Ja(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ja(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=We(t);var n=dt.test(t);return n||yt.test(t)?ue(t.slice(2),n?2:8):ft.test(t)?p:+t}function ys(t){return Ti(t,Ds(t))}function vs(t){return null==t?"":ai(t)}var ms=Ai((function(t,e){if(xo(e)||Ya(e))Ti(e,Ls(e),t);else for(var n in e)Ot.call(e,n)&&Jn(t,n,e[n])})),_s=Ai((function(t,e){Ti(e,Ds(e),t)})),bs=Ai((function(t,e,n,r){Ti(e,Ds(e),t,r)})),xs=Ai((function(t,e,n,r){Ti(e,Ls(e),t,r)})),Es=Ji(ir),ws=Hr((function(t,e){t=Ct(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&vo(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=Ds(a),u=-1,l=s.length;++u<l;){var c=s[u],h=t[c];(h===i||za(h,Lt[c])&&!Ot.call(t,c))&&(t[c]=a[c])}return t})),Cs=Hr((function(t){return t.push(i,Zi),we(Os,i,t)}));function Ns(t,e,n){var r=null==t?i:xr(t,e);return r===i?n:r}function Is(t,e){return null!=t&&po(t,e,Ir)}var Ts=Bi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=kt.call(e)),t[e]=n}),Js(nu)),Ss=Bi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=kt.call(e)),Ot.call(t,e)?t[e].push(n):t[e]=[n]}),oo),As=Hr(Sr);function Ls(t){return Ya(t)?Wn(t):Pr(t)}function Ds(t){return Ya(t)?Wn(t,!0):function(t){if(!Ja(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var r in t)("constructor"!=r||!e&&Ot.call(t,r))&&n.push(r);return n}(t)}var Ms=Ai((function(t,e,n){zr(t,e,n)})),Os=Ai((function(t,e,n,r){zr(t,e,n,r)})),Ps=Ji((function(t,e){var n={};if(null==t)return n;var r=!1;e=De(e,(function(e){return e=yi(e,t),r||(r=e.length>1),e})),Ti(t,eo(t),n),r&&(n=ar(n,7,Ki));for(var i=e.length;i--;)ui(n,e[i]);return n})),Rs=Ji((function(t,e){return null==t?{}:function(t,e){return Vr(t,e,(function(e,n){return Is(t,n)}))}(t,e)}));function ks(t,e){if(null==t)return{};var n=De(eo(t),(function(t){return[t]}));return e=oo(e),Vr(t,n,(function(t,n){return e(t,n[0])}))}var Fs=Hi(Ls),Bs=Hi(Ds);function zs(t){return null==t?[]:Ze(t,Ls(t))}var Gs=Oi((function(t,e,n){return e=e.toLowerCase(),t+(n?qs(e):e)}));function qs(t){return $s(vs(t).toLowerCase())}function Vs(t){return(t=vs(t))&&t.replace(mt,tn).replace(Kt,"")}var Us=Oi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),js=Oi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ys=Mi("toLowerCase"),Xs=Oi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Hs=Oi((function(t,e,n){return t+(n?" ":"")+$s(e)})),Ws=Oi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),$s=Mi("toUpperCase");function Zs(t,e,n){return t=vs(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Ks=Hr((function(t,e){try{return we(t,i,e)}catch(t){return $a(t)?t:new xt(t)}})),Qs=Ji((function(t,e){return Ne(e,(function(e){e=ko(e),rr(t,e,Sa(t[e],t))})),t}));function Js(t){return function(){return t}}var tu=ki(),eu=ki(!0);function nu(t){return t}function ru(t){return Or("function"==typeof t?t:ar(t,1))}var iu=Hr((function(t,e){return function(n){return Sr(n,t,e)}})),ou=Hr((function(t,e){return function(n){return Sr(t,n,e)}}));function au(t,e,n){var r=Ls(e),i=br(e,r);null!=n||Ja(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=br(e,Ls(e)));var o=!(Ja(n)&&"chain"in n&&!n.chain),a=Za(t);return Ne(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Me([this.value()],arguments))})})),t}function su(){}var uu=Gi(De),lu=Gi(Te),cu=Gi(Re);function hu(t){return mo(t)?Ue(ko(t)):function(t){return function(e){return xr(e,t)}}(t)}var pu=Vi(),fu=Vi(!0);function du(){return[]}function gu(){return!1}var yu,vu=zi((function(t,e){return t+e}),0),mu=Yi("ceil"),_u=zi((function(t,e){return t/e}),1),bu=Yi("floor"),xu=zi((function(t,e){return t*e}),1),Eu=Yi("round"),wu=zi((function(t,e){return t-e}),0);return Bn.after=function(t,e){if("function"!=typeof e)throw new Tt(o);return t=fs(t),function(){if(--t<1)return e.apply(this,arguments)}},Bn.ary=Ia,Bn.assign=ms,Bn.assignIn=_s,Bn.assignInWith=bs,Bn.assignWith=xs,Bn.at=Es,Bn.before=Ta,Bn.bind=Sa,Bn.bindAll=Qs,Bn.bindKey=Aa,Bn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ua(t)?t:[t]},Bn.chain=ha,Bn.chunk=function(t,e,n){e=(n?vo(t,e,n):e===i)?1:yn(fs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,u=r(pe(o/e));a<o;)u[s++]=ti(t,a,a+=e);return u},Bn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Bn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Me(Ua(n)?Ii(n):[n],gr(e,1))},Bn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?De(t,(function(t){if("function"!=typeof t[1])throw new Tt(o);return[n(t[0]),t[1]]})):[],Hr((function(n){for(var r=-1;++r<e;){var i=t[r];if(we(i[0],this,n))return we(i[1],this,n)}}))},Bn.conforms=function(t){return function(t){var e=Ls(t);return function(n){return sr(n,t,e)}}(ar(t,1))},Bn.constant=Js,Bn.countBy=da,Bn.create=function(t,e){var n=zn(t);return null==e?n:nr(n,e)},Bn.curry=function t(e,n,r){var o=Wi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Bn.curryRight=function t(e,n,r){var o=Wi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Bn.debounce=La,Bn.defaults=ws,Bn.defaultsDeep=Cs,Bn.defer=Da,Bn.delay=Ma,Bn.difference=zo,Bn.differenceBy=Go,Bn.differenceWith=qo,Bn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:fs(e))<0?0:e,r):[]},Bn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:fs(e)))<0?0:e):[]},Bn.dropRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0,!0):[]},Bn.dropWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0):[]},Bn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&vo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=fs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:fs(r))<0&&(r+=o),r=n>r?0:ds(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Bn.filter=function(t,e){return(Ua(t)?Se:dr)(t,oo(e,3))},Bn.flatMap=function(t,e){return gr(Ea(t,e),1)},Bn.flatMapDeep=function(t,e){return gr(Ea(t,e),c)},Bn.flatMapDepth=function(t,e,n){return n=n===i?1:fs(n),gr(Ea(t,e),n)},Bn.flatten=jo,Bn.flattenDeep=function(t){return null!=t&&t.length?gr(t,c):[]},Bn.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:fs(e)):[]},Bn.flip=function(t){return Wi(t,512)},Bn.flow=tu,Bn.flowRight=eu,Bn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Bn.functions=function(t){return null==t?[]:br(t,Ls(t))},Bn.functionsIn=function(t){return null==t?[]:br(t,Ds(t))},Bn.groupBy=_a,Bn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Bn.intersection=Xo,Bn.intersectionBy=Ho,Bn.intersectionWith=Wo,Bn.invert=Ts,Bn.invertBy=Ss,Bn.invokeMap=ba,Bn.iteratee=ru,Bn.keyBy=xa,Bn.keys=Ls,Bn.keysIn=Ds,Bn.map=Ea,Bn.mapKeys=function(t,e){var n={};return e=oo(e,3),mr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},Bn.mapValues=function(t,e){var n={};return e=oo(e,3),mr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},Bn.matches=function(t){return Fr(ar(t,1))},Bn.matchesProperty=function(t,e){return Br(t,ar(e,1))},Bn.memoize=Oa,Bn.merge=Ms,Bn.mergeWith=Os,Bn.method=iu,Bn.methodOf=ou,Bn.mixin=au,Bn.negate=Pa,Bn.nthArg=function(t){return t=fs(t),Hr((function(e){return Gr(e,t)}))},Bn.omit=Ps,Bn.omitBy=function(t,e){return ks(t,Pa(oo(e)))},Bn.once=function(t){return Ta(2,t)},Bn.orderBy=function(t,e,n,r){return null==t?[]:(Ua(e)||(e=null==e?[]:[e]),Ua(n=r?i:n)||(n=null==n?[]:[n]),qr(t,e,n))},Bn.over=uu,Bn.overArgs=Ra,Bn.overEvery=lu,Bn.overSome=cu,Bn.partial=ka,Bn.partialRight=Fa,Bn.partition=wa,Bn.pick=Rs,Bn.pickBy=ks,Bn.property=hu,Bn.propertyOf=function(t){return function(e){return null==t?i:xr(t,e)}},Bn.pull=Zo,Bn.pullAll=Ko,Bn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,oo(n,2)):t},Bn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,i,n):t},Bn.pullAt=Qo,Bn.range=pu,Bn.rangeRight=fu,Bn.rearg=Ba,Bn.reject=function(t,e){return(Ua(t)?Se:dr)(t,Pa(oo(e,3)))},Bn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return jr(t,i),n},Bn.rest=function(t,e){if("function"!=typeof t)throw new Tt(o);return Hr(t,e=e===i?e:fs(e))},Bn.reverse=Jo,Bn.sampleSize=function(t,e,n){return e=(n?vo(t,e,n):e===i)?1:fs(e),(Ua(t)?Zn:$r)(t,e)},Bn.set=function(t,e,n){return null==t?t:Zr(t,e,n)},Bn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Zr(t,e,n,r)},Bn.shuffle=function(t){return(Ua(t)?Kn:Jr)(t)},Bn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&vo(t,e,n)?(e=0,n=r):(e=null==e?0:fs(e),n=n===i?r:fs(n)),ti(t,e,n)):[]},Bn.sortBy=Ca,Bn.sortedUniq=function(t){return t&&t.length?ii(t):[]},Bn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},Bn.split=function(t,e,n){return n&&"number"!=typeof n&&vo(t,e,n)&&(e=n=i),(n=n===i?f:n>>>0)?(t=vs(t))&&("string"==typeof e||null!=e&&!is(e))&&!(e=ai(e))&&rn(t)?mi(hn(t),0,n):t.split(e,n):[]},Bn.spread=function(t,e){if("function"!=typeof t)throw new Tt(o);return e=null==e?0:yn(fs(e),0),Hr((function(n){var r=n[e],i=mi(n,0,e);return r&&Me(i,r),we(t,this,i)}))},Bn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Bn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:fs(e))<0?0:e):[]},Bn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:fs(e)))<0?0:e,r):[]},Bn.takeRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!1,!0):[]},Bn.takeWhile=function(t,e){return t&&t.length?ci(t,oo(e,3)):[]},Bn.tap=function(t,e){return e(t),t},Bn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Tt(o);return Ja(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),La(t,e,{leading:r,maxWait:e,trailing:i})},Bn.thru=pa,Bn.toArray=hs,Bn.toPairs=Fs,Bn.toPairsIn=Bs,Bn.toPath=function(t){return Ua(t)?De(t,ko):ss(t)?[t]:Ii(Ro(vs(t)))},Bn.toPlainObject=ys,Bn.transform=function(t,e,n){var r=Ua(t),i=r||Ha(t)||us(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ja(t)&&Za(o)?zn(jt(t)):{}}return(i?Ne:mr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Bn.unary=function(t){return Ia(t,1)},Bn.union=ta,Bn.unionBy=ea,Bn.unionWith=na,Bn.uniq=function(t){return t&&t.length?si(t):[]},Bn.uniqBy=function(t,e){return t&&t.length?si(t,oo(e,2)):[]},Bn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?si(t,i,e):[]},Bn.unset=function(t,e){return null==t||ui(t,e)},Bn.unzip=ra,Bn.unzipWith=ia,Bn.update=function(t,e,n){return null==t?t:li(t,e,gi(n))},Bn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,gi(n),r)},Bn.values=zs,Bn.valuesIn=function(t){return null==t?[]:Ze(t,Ds(t))},Bn.without=oa,Bn.words=Zs,Bn.wrap=function(t,e){return ka(gi(e),t)},Bn.xor=aa,Bn.xorBy=sa,Bn.xorWith=ua,Bn.zip=la,Bn.zipObject=function(t,e){return fi(t||[],e||[],Jn)},Bn.zipObjectDeep=function(t,e){return fi(t||[],e||[],Zr)},Bn.zipWith=ca,Bn.entries=Fs,Bn.entriesIn=Bs,Bn.extend=_s,Bn.extendWith=bs,au(Bn,Bn),Bn.add=vu,Bn.attempt=Ks,Bn.camelCase=Gs,Bn.capitalize=qs,Bn.ceil=mu,Bn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=gs(n))==n?n:0),e!==i&&(e=(e=gs(e))==e?e:0),or(gs(t),e,n)},Bn.clone=function(t){return ar(t,4)},Bn.cloneDeep=function(t){return ar(t,5)},Bn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},Bn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},Bn.conformsTo=function(t,e){return null==e||sr(t,e,Ls(e))},Bn.deburr=Vs,Bn.defaultTo=function(t,e){return null==t||t!=t?e:t},Bn.divide=_u,Bn.endsWith=function(t,e,n){t=vs(t),e=ai(e);var r=t.length,o=n=n===i?r:or(fs(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Bn.eq=za,Bn.escape=function(t){return(t=vs(t))&&W.test(t)?t.replace(X,en):t},Bn.escapeRegExp=function(t){return(t=vs(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Bn.every=function(t,e,n){var r=Ua(t)?Te:pr;return n&&vo(t,e,n)&&(e=i),r(t,oo(e,3))},Bn.find=ga,Bn.findIndex=Vo,Bn.findKey=function(t,e){return Fe(t,oo(e,3),mr)},Bn.findLast=ya,Bn.findLastIndex=Uo,Bn.findLastKey=function(t,e){return Fe(t,oo(e,3),_r)},Bn.floor=bu,Bn.forEach=va,Bn.forEachRight=ma,Bn.forIn=function(t,e){return null==t?t:yr(t,oo(e,3),Ds)},Bn.forInRight=function(t,e){return null==t?t:vr(t,oo(e,3),Ds)},Bn.forOwn=function(t,e){return t&&mr(t,oo(e,3))},Bn.forOwnRight=function(t,e){return t&&_r(t,oo(e,3))},Bn.get=Ns,Bn.gt=Ga,Bn.gte=qa,Bn.has=function(t,e){return null!=t&&po(t,e,Nr)},Bn.hasIn=Is,Bn.head=Yo,Bn.identity=nu,Bn.includes=function(t,e,n,r){t=Ya(t)?t:zs(t),n=n&&!r?fs(n):0;var i=t.length;return n<0&&(n=yn(i+n,0)),as(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ze(t,e,n)>-1},Bn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=yn(r+i,0)),ze(t,e,i)},Bn.inRange=function(t,e,n){return e=ps(e),n===i?(n=e,e=0):n=ps(n),function(t,e,n){return t>=vn(e,n)&&t<yn(e,n)}(t=gs(t),e,n)},Bn.invoke=As,Bn.isArguments=Va,Bn.isArray=Ua,Bn.isArrayBuffer=ja,Bn.isArrayLike=Ya,Bn.isArrayLikeObject=Xa,Bn.isBoolean=function(t){return!0===t||!1===t||ts(t)&&wr(t)==v},Bn.isBuffer=Ha,Bn.isDate=Wa,Bn.isElement=function(t){return ts(t)&&1===t.nodeType&&!rs(t)},Bn.isEmpty=function(t){if(null==t)return!0;if(Ya(t)&&(Ua(t)||"string"==typeof t||"function"==typeof t.splice||Ha(t)||us(t)||Va(t)))return!t.length;var e=ho(t);if(e==E||e==T)return!t.size;if(xo(t))return!Pr(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},Bn.isEqual=function(t,e){return Lr(t,e)},Bn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Lr(t,e,i,n):!!r},Bn.isError=$a,Bn.isFinite=function(t){return"number"==typeof t&&ke(t)},Bn.isFunction=Za,Bn.isInteger=Ka,Bn.isLength=Qa,Bn.isMap=es,Bn.isMatch=function(t,e){return t===e||Dr(t,e,so(e))},Bn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Dr(t,e,so(e),n)},Bn.isNaN=function(t){return ns(t)&&t!=+t},Bn.isNative=function(t){if(bo(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(t)},Bn.isNil=function(t){return null==t},Bn.isNull=function(t){return null===t},Bn.isNumber=ns,Bn.isObject=Ja,Bn.isObjectLike=ts,Bn.isPlainObject=rs,Bn.isRegExp=is,Bn.isSafeInteger=function(t){return Ka(t)&&t>=-9007199254740991&&t<=h},Bn.isSet=os,Bn.isString=as,Bn.isSymbol=ss,Bn.isTypedArray=us,Bn.isUndefined=function(t){return t===i},Bn.isWeakMap=function(t){return ts(t)&&ho(t)==L},Bn.isWeakSet=function(t){return ts(t)&&"[object WeakSet]"==wr(t)},Bn.join=function(t,e){return null==t?"":je.call(t,e)},Bn.kebabCase=Us,Bn.last=$o,Bn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=fs(n))<0?yn(r+o,0):vn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Be(t,qe,o,!0)},Bn.lowerCase=js,Bn.lowerFirst=Ys,Bn.lt=ls,Bn.lte=cs,Bn.max=function(t){return t&&t.length?fr(t,nu,Cr):i},Bn.maxBy=function(t,e){return t&&t.length?fr(t,oo(e,2),Cr):i},Bn.mean=function(t){return Ve(t,nu)},Bn.meanBy=function(t,e){return Ve(t,oo(e,2))},Bn.min=function(t){return t&&t.length?fr(t,nu,Rr):i},Bn.minBy=function(t,e){return t&&t.length?fr(t,oo(e,2),Rr):i},Bn.stubArray=du,Bn.stubFalse=gu,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=xu,Bn.nth=function(t,e){return t&&t.length?Gr(t,fs(e)):i},Bn.noConflict=function(){return he._===this&&(he._=Bt),this},Bn.noop=su,Bn.now=Na,Bn.pad=function(t,e,n){t=vs(t);var r=(e=fs(e))?cn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return qi(fe(i),n)+t+qi(pe(i),n)},Bn.padEnd=function(t,e,n){t=vs(t);var r=(e=fs(e))?cn(t):0;return e&&r<e?t+qi(e-r,n):t},Bn.padStart=function(t,e,n){t=vs(t);var r=(e=fs(e))?cn(t):0;return e&&r<e?qi(e-r,n)+t:t},Bn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_n(vs(t).replace(rt,""),e||0)},Bn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&vo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=ps(t),e===i?(e=t,t=0):e=ps(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=bn();return vn(t+o*(e-t+se("1e-"+((o+"").length-1))),e)}return Yr(t,e)},Bn.reduce=function(t,e,n){var r=Ua(t)?Oe:Ye,i=arguments.length<3;return r(t,oo(e,4),n,i,cr)},Bn.reduceRight=function(t,e,n){var r=Ua(t)?Pe:Ye,i=arguments.length<3;return r(t,oo(e,4),n,i,hr)},Bn.repeat=function(t,e,n){return e=(n?vo(t,e,n):e===i)?1:fs(e),Xr(vs(t),e)},Bn.replace=function(){var t=arguments,e=vs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Bn.result=function(t,e,n){var r=-1,o=(e=yi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[ko(e[r])];a===i&&(r=o,a=n),t=Za(a)?a.call(t):a}return t},Bn.round=Eu,Bn.runInContext=t,Bn.sample=function(t){return(Ua(t)?$n:Wr)(t)},Bn.size=function(t){if(null==t)return 0;if(Ya(t))return as(t)?cn(t):t.length;var e=ho(t);return e==E||e==T?t.size:Pr(t).length},Bn.snakeCase=Xs,Bn.some=function(t,e,n){var r=Ua(t)?Re:ei;return n&&vo(t,e,n)&&(e=i),r(t,oo(e,3))},Bn.sortedIndex=function(t,e){return ni(t,e)},Bn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},Bn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&za(t[r],e))return r}return-1},Bn.sortedLastIndex=function(t,e){return ni(t,e,!0)},Bn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},Bn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(za(t[n],e))return n}return-1},Bn.startCase=Hs,Bn.startsWith=function(t,e,n){return t=vs(t),n=null==n?0:or(fs(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},Bn.subtract=wu,Bn.sum=function(t){return t&&t.length?Xe(t,nu):0},Bn.sumBy=function(t,e){return t&&t.length?Xe(t,oo(e,2)):0},Bn.template=function(t,e,n){var r=Bn.templateSettings;n&&vo(t,e,n)&&(e=i),t=vs(t),e=bs({},e,r,$i);var o,a,s=bs({},e.imports,r.imports,$i),u=Ls(s),l=Ze(s,u),c=0,h=e.interpolate||_t,p="__p += '",f=Nt((e.escape||_t).source+"|"+h.source+"|"+(h===K?ht:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),d="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(f,(function(e,n,r,i,s,u){return r||(r=i),p+=t.slice(c,u).replace(bt,nn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),p+="';\n";var g=Ot.call(e,"variable")&&e.variable;if(g){if(lt.test(g))throw new xt("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(V,""):p).replace(U,"$1").replace(j,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Ks((function(){return Et(u,d+"return "+p).apply(i,l)}));if(y.source=p,$a(y))throw y;return y},Bn.times=function(t,e){if((t=fs(t))<1||t>h)return[];var n=f,r=vn(t,f);e=oo(e),t-=f;for(var i=He(r,e);++n<t;)e(n);return i},Bn.toFinite=ps,Bn.toInteger=fs,Bn.toLength=ds,Bn.toLower=function(t){return vs(t).toLowerCase()},Bn.toNumber=gs,Bn.toSafeInteger=function(t){return t?or(fs(t),-9007199254740991,h):0===t?t:0},Bn.toString=vs,Bn.toUpper=function(t){return vs(t).toUpperCase()},Bn.trim=function(t,e,n){if((t=vs(t))&&(n||e===i))return We(t);if(!t||!(e=ai(e)))return t;var r=hn(t),o=hn(e);return mi(r,Qe(r,o),Je(r,o)+1).join("")},Bn.trimEnd=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.slice(0,pn(t)+1);if(!t||!(e=ai(e)))return t;var r=hn(t);return mi(r,0,Je(r,hn(e))+1).join("")},Bn.trimStart=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=hn(t);return mi(r,Qe(r,hn(e))).join("")},Bn.truncate=function(t,e){var n=30,r="...";if(Ja(e)){var o="separator"in e?e.separator:o;n="length"in e?fs(e.length):n,r="omission"in e?ai(e.omission):r}var a=(t=vs(t)).length;if(rn(t)){var s=hn(t);a=s.length}if(n>=a)return t;var u=n-cn(r);if(u<1)return r;var l=s?mi(s,0,u).join(""):t.slice(0,u);if(o===i)return l+r;if(s&&(u+=l.length-u),is(o)){if(t.slice(u).search(o)){var c,h=l;for(o.global||(o=Nt(o.source,vs(pt.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var p=c.index;l=l.slice(0,p===i?u:p)}}else if(t.indexOf(ai(o),u)!=u){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+r},Bn.unescape=function(t){return(t=vs(t))&&H.test(t)?t.replace(Y,fn):t},Bn.uniqueId=function(t){var e=++Pt;return vs(t)+e},Bn.upperCase=Ws,Bn.upperFirst=$s,Bn.each=va,Bn.eachRight=ma,Bn.first=Yo,au(Bn,(yu={},mr(Bn,(function(t,e){Ot.call(Bn.prototype,e)||(yu[e]=t)})),yu),{chain:!1}),Bn.VERSION="4.17.21",Ne(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Bn[t].placeholder=Bn})),Ne(["drop","take"],(function(t,e){Vn.prototype[t]=function(n){n=n===i?1:yn(fs(n),0);var r=this.__filtered__&&!e?new Vn(this):this.clone();return r.__filtered__?r.__takeCount__=vn(n,r.__takeCount__):r.__views__.push({size:vn(n,f),type:t+(r.__dir__<0?"Right":"")}),r},Vn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ne(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ne(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}})),Ne(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(nu)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Hr((function(t,e){return"function"==typeof t?new Vn(this):this.map((function(n){return Sr(n,t,e)}))})),Vn.prototype.reject=function(t){return this.filter(Pa(oo(t)))},Vn.prototype.slice=function(t,e){t=fs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Vn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=fs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(f)},mr(Vn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Bn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(Bn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Vn,l=s[0],c=u||Ua(e),h=function(t){var e=o.apply(Bn,Me([t],s));return r&&p?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var p=this.__chain__,f=!!this.__actions__.length,d=a&&!p,g=u&&!f;if(!a&&c){e=g?e:new Vn(this);var y=t.apply(e,s);return y.__actions__.push({func:pa,args:[h],thisArg:i}),new qn(y,p)}return d&&g?t.apply(this,s):(y=this.thru(h),d?r?y.value()[0]:y.value():y)})})),Ne(["pop","push","shift","sort","splice","unshift"],(function(t){var e=St[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Bn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ua(i)?i:[],t)}return this[n]((function(n){return e.apply(Ua(n)?n:[],t)}))}})),mr(Vn.prototype,(function(t,e){var n=Bn[e];if(n){var r=n.name+"";Ot.call(An,r)||(An[r]=[]),An[r].push({name:e,func:n})}})),An[Fi(i,2).name]=[{name:"wrapper",func:i}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=Ii(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ii(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ii(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ua(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=vn(e,t+a);break;case"takeRight":t=yn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,p=0,f=vn(u,this.__takeCount__);if(!n||!r&&i==u&&f==u)return hi(t,this.__actions__);var d=[];t:for(;u--&&p<f;){for(var g=-1,y=t[l+=e];++g<h;){var v=c[g],m=v.iteratee,_=v.type,b=m(y);if(2==_)y=b;else if(!b){if(1==_)continue t;break t}}d[p++]=y}return d},Bn.prototype.at=fa,Bn.prototype.chain=function(){return ha(this)},Bn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===i&&(this.__values__=hs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Bn.prototype.plant=function(t){for(var e,n=this;n instanceof Gn;){var r=Bo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Bn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vn){var e=t;return this.__actions__.length&&(e=new Vn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[Jo],thisArg:i}),new qn(e,this.__chain__)}return this.thru(Jo)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,$t&&(Bn.prototype[$t]=function(){return this}),Bn}();he._=dn,(r=function(){return dn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},8306:(t,e,n)=>{var r=n(3369);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},7771:(t,e,n)=>{var r=n(5639);t.exports=function(){return r.Date.now()}},6968:(t,e,n)=>{var r=n(611);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},4841:(t,e,n)=>{var r=n(7561),i=n(3218),o=n(3448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},84:(t,e,n)=>{var r=n(9932),i=n(278),o=n(1469),a=n(3448),s=n(5514),u=n(327),l=n(9833);t.exports=function(t){return o(t)?r(t,u):a(t)?[t]:i(s(l(t)))}},9833:(t,e,n)=>{var r=n(531);t.exports=function(t){return null==t?"":r(t)}},9980:(t,e,n)=>{"use strict";t.exports=n(7024)},6233:(t,e,n)=>{"use strict";t.exports=n(9323)},813:t=>{"use strict";t.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},1947:t=>{"use strict";var e="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",n="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",r=new RegExp("^(?:"+e+"|"+n+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),i=new RegExp("^(?:"+e+"|"+n+")");t.exports.n=r,t.exports.q=i},7022:(t,e,n)=>{"use strict";var r=Object.prototype.hasOwnProperty;function i(t,e){return r.call(t,e)}function o(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||65535==(65535&t)||65534==(65535&t)||t>=0&&t<=8||11===t||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function a(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}var s=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=new RegExp(s.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),l=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,c=n(6233),h=/[&<>"]/,p=/[&<>"]/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function d(t){return f[t]}var g=/[.?*+^$[\]\\(){}|-]/g,y=n(3189);e.lib={},e.lib.mdurl=n(8765),e.lib.ucmicro=n(4205),e.assign=function(t){return Array.prototype.slice.call(arguments,1).forEach((function(e){if(e){if("object"!=typeof e)throw new TypeError(e+"must be object");Object.keys(e).forEach((function(n){t[n]=e[n]}))}})),t},e.isString=function(t){return"[object String]"===function(t){return Object.prototype.toString.call(t)}(t)},e.has=i,e.unescapeMd=function(t){return t.indexOf("\\")<0?t:t.replace(s,"$1")},e.unescapeAll=function(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(u,(function(t,e,n){return e||function(t,e){var n=0;return i(c,e)?c[e]:35===e.charCodeAt(0)&&l.test(e)&&o(n="x"===e[1].toLowerCase()?parseInt(e.slice(2),16):parseInt(e.slice(1),10))?a(n):t}(t,n)}))},e.isValidEntityCode=o,e.fromCodePoint=a,e.escapeHtml=function(t){return h.test(t)?t.replace(p,d):t},e.arrayReplaceAt=function(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))},e.isSpace=function(t){switch(t){case 9:case 32:return!0}return!1},e.isWhiteSpace=function(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},e.isMdAsciiPunct=function(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},e.isPunctChar=function(t){return y.test(t)},e.escapeRE=function(t){return t.replace(g,"\\$&")},e.normalizeReference=function(t){return t=t.trim().replace(/\s+/g," "),""==="".toLowerCase()&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}},1685:(t,e,n)=>{"use strict";e.parseLinkLabel=n(3595),e.parseLinkDestination=n(2548),e.parseLinkTitle=n(8040)},2548:(t,e,n)=>{"use strict";var r=n(7022).unescapeAll;t.exports=function(t,e,n){var i,o,a=e,s={ok:!1,pos:0,lines:0,str:""};if(60===t.charCodeAt(e)){for(e++;e<n;){if(10===(i=t.charCodeAt(e)))return s;if(60===i)return s;if(62===i)return s.pos=e+1,s.str=r(t.slice(a+1,e)),s.ok=!0,s;92===i&&e+1<n?e+=2:e++}return s}for(o=0;e<n&&32!==(i=t.charCodeAt(e))&&!(i<32||127===i);)if(92===i&&e+1<n){if(32===t.charCodeAt(e+1))break;e+=2}else{if(40===i&&++o>32)return s;if(41===i){if(0===o)break;o--}e++}return a===e||0!==o||(s.str=r(t.slice(a,e)),s.lines=0,s.pos=e,s.ok=!0),s}},3595:t=>{"use strict";t.exports=function(t,e,n){var r,i,o,a,s=-1,u=t.posMax,l=t.pos;for(t.pos=e+1,r=1;t.pos<u;){if(93===(o=t.src.charCodeAt(t.pos))&&0==--r){i=!0;break}if(a=t.pos,t.md.inline.skipToken(t),91===o)if(a===t.pos-1)r++;else if(n)return t.pos=l,-1}return i&&(s=t.pos),t.pos=l,s}},8040:(t,e,n)=>{"use strict";var r=n(7022).unescapeAll;t.exports=function(t,e,n){var i,o,a=0,s=e,u={ok:!1,pos:0,lines:0,str:""};if(e>=n)return u;if(34!==(o=t.charCodeAt(e))&&39!==o&&40!==o)return u;for(e++,40===o&&(o=41);e<n;){if((i=t.charCodeAt(e))===o)return u.pos=e+1,u.lines=a,u.str=r(t.slice(s+1,e)),u.ok=!0,u;if(40===i&&41===o)return u;10===i?a++:92===i&&e+1<n&&(e++,10===t.charCodeAt(e)&&a++),e++}return u}},7024:(t,e,n)=>{"use strict";var r=n(7022),i=n(1685),o=n(7529),a=n(7346),s=n(2471),u=n(9813),l=n(8337),c=n(8765),h=n(3689),p={default:n(4218),zero:n(873),commonmark:n(6895)},f=/^(vbscript|javascript|file|data):/,d=/^data:image\/(gif|png|jpeg|webp);/;function g(t){var e=t.trim().toLowerCase();return!f.test(e)||!!d.test(e)}var y=["http:","https:","mailto:"];function v(t){var e=c.parse(t,!0);if(e.hostname&&(!e.protocol||y.indexOf(e.protocol)>=0))try{e.hostname=h.toASCII(e.hostname)}catch(t){}return c.encode(c.format(e))}function m(t){var e=c.parse(t,!0);if(e.hostname&&(!e.protocol||y.indexOf(e.protocol)>=0))try{e.hostname=h.toUnicode(e.hostname)}catch(t){}return c.decode(c.format(e),c.decode.defaultChars+"%")}function _(t,e){if(!(this instanceof _))return new _(t,e);e||r.isString(t)||(e=t||{},t="default"),this.inline=new u,this.block=new s,this.core=new a,this.renderer=new o,this.linkify=new l,this.validateLink=g,this.normalizeLink=v,this.normalizeLinkText=m,this.utils=r,this.helpers=r.assign({},i),this.options={},this.configure(t),e&&this.set(e)}_.prototype.set=function(t){return r.assign(this.options,t),this},_.prototype.configure=function(t){var e,n=this;if(r.isString(t)&&!(t=p[e=t]))throw new Error('Wrong `markdown-it` preset "'+e+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&n.set(t.options),t.components&&Object.keys(t.components).forEach((function(e){t.components[e].rules&&n[e].ruler.enableOnly(t.components[e].rules),t.components[e].rules2&&n[e].ruler2.enableOnly(t.components[e].rules2)})),this},_.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.enable(t,!0))}),this),n=n.concat(this.inline.ruler2.enable(t,!0));var r=t.filter((function(t){return n.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},_.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.disable(t,!0))}),this),n=n.concat(this.inline.ruler2.disable(t,!0));var r=t.filter((function(t){return n.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},_.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this},_.prototype.parse=function(t,e){if("string"!=typeof t)throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens},_.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)},_.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens},_.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)},t.exports=_},2471:(t,e,n)=>{"use strict";var r=n(9580),i=[["table",n(1785),["paragraph","reference"]],["code",n(8768)],["fence",n(3542),["paragraph","reference","blockquote","list"]],["blockquote",n(5258),["paragraph","reference","blockquote","list"]],["hr",n(5634),["paragraph","reference","blockquote","list"]],["list",n(8532),["paragraph","reference","blockquote"]],["reference",n(3804)],["html_block",n(6329),["paragraph","reference","blockquote"]],["heading",n(1630),["paragraph","reference","blockquote"]],["lheading",n(6850)],["paragraph",n(6864)]];function o(){this.ruler=new r;for(var t=0;t<i.length;t++)this.ruler.push(i[t][0],i[t][1],{alt:(i[t][2]||[]).slice()})}o.prototype.tokenize=function(t,e,n){for(var r,i=this.ruler.getRules(""),o=i.length,a=e,s=!1,u=t.md.options.maxNesting;a<n&&(t.line=a=t.skipEmptyLines(a),!(a>=n))&&!(t.sCount[a]<t.blkIndent);){if(t.level>=u){t.line=n;break}for(r=0;r<o&&!i[r](t,a,n,!1);r++);t.tight=!s,t.isEmpty(t.line-1)&&(s=!0),(a=t.line)<n&&t.isEmpty(a)&&(s=!0,a++,t.line=a)}},o.prototype.parse=function(t,e,n,r){var i;t&&(i=new this.State(t,e,n,r),this.tokenize(i,i.line,i.lineMax))},o.prototype.State=n(2948),t.exports=o},7346:(t,e,n)=>{"use strict";var r=n(9580),i=[["normalize",n(4129)],["block",n(898)],["inline",n(9827)],["linkify",n(7830)],["replacements",n(2834)],["smartquotes",n(8450)],["text_join",n(6633)]];function o(){this.ruler=new r;for(var t=0;t<i.length;t++)this.ruler.push(i[t][0],i[t][1])}o.prototype.process=function(t){var e,n,r;for(e=0,n=(r=this.ruler.getRules("")).length;e<n;e++)r[e](t)},o.prototype.State=n(6480),t.exports=o},9813:(t,e,n)=>{"use strict";var r=n(9580),i=[["text",n(9941)],["linkify",n(2906)],["newline",n(3905)],["escape",n(1917)],["backticks",n(9755)],["strikethrough",n(4814).w],["emphasis",n(7894).w],["link",n(1727)],["image",n(3006)],["autolink",n(3420)],["html_inline",n(1779)],["entity",n(9391)]],o=[["balance_pairs",n(9354)],["strikethrough",n(4814).g],["emphasis",n(7894).g],["fragments_join",n(9969)]];function a(){var t;for(this.ruler=new r,t=0;t<i.length;t++)this.ruler.push(i[t][0],i[t][1]);for(this.ruler2=new r,t=0;t<o.length;t++)this.ruler2.push(o[t][0],o[t][1])}a.prototype.skipToken=function(t){var e,n,r=t.pos,i=this.ruler.getRules(""),o=i.length,a=t.md.options.maxNesting,s=t.cache;if(void 0===s[r]){if(t.level<a)for(n=0;n<o&&(t.level++,e=i[n](t,!0),t.level--,!e);n++);else t.pos=t.posMax;e||t.pos++,s[r]=t.pos}else t.pos=s[r]},a.prototype.tokenize=function(t){for(var e,n,r=this.ruler.getRules(""),i=r.length,o=t.posMax,a=t.md.options.maxNesting;t.pos<o;){if(t.level<a)for(n=0;n<i&&!(e=r[n](t,!1));n++);if(e){if(t.pos>=o)break}else t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},a.prototype.parse=function(t,e,n,r){var i,o,a,s=new this.State(t,e,n,r);for(this.tokenize(s),a=(o=this.ruler2.getRules("")).length,i=0;i<a;i++)o[i](s)},a.prototype.State=n(670),t.exports=a},6895:t=>{"use strict";t.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},4218:t=>{"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},873:t=>{"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},7529:(t,e,n)=>{"use strict";var r=n(7022).assign,i=n(7022).unescapeAll,o=n(7022).escapeHtml,a={};function s(){this.rules=r({},a)}a.code_inline=function(t,e,n,r,i){var a=t[e];return"<code"+i.renderAttrs(a)+">"+o(t[e].content)+"</code>"},a.code_block=function(t,e,n,r,i){var a=t[e];return"<pre"+i.renderAttrs(a)+"><code>"+o(t[e].content)+"</code></pre>\n"},a.fence=function(t,e,n,r,a){var s,u,l,c,h,p=t[e],f=p.info?i(p.info).trim():"",d="",g="";return f&&(d=(l=f.split(/(\s+)/g))[0],g=l.slice(2).join("")),0===(s=n.highlight&&n.highlight(p.content,d,g)||o(p.content)).indexOf("<pre")?s+"\n":f?(u=p.attrIndex("class"),c=p.attrs?p.attrs.slice():[],u<0?c.push(["class",n.langPrefix+d]):(c[u]=c[u].slice(),c[u][1]+=" "+n.langPrefix+d),h={attrs:c},"<pre><code"+a.renderAttrs(h)+">"+s+"</code></pre>\n"):"<pre><code"+a.renderAttrs(p)+">"+s+"</code></pre>\n"},a.image=function(t,e,n,r,i){var o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(t,e,n)},a.hardbreak=function(t,e,n){return n.xhtmlOut?"<br />\n":"<br>\n"},a.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},a.text=function(t,e){return o(t[e].content)},a.html_block=function(t,e){return t[e].content},a.html_inline=function(t,e){return t[e].content},s.prototype.renderAttrs=function(t){var e,n,r;if(!t.attrs)return"";for(r="",e=0,n=t.attrs.length;e<n;e++)r+=" "+o(t.attrs[e][0])+'="'+o(t.attrs[e][1])+'"';return r},s.prototype.renderToken=function(t,e,n){var r,i="",o=!1,a=t[e];return a.hidden?"":(a.block&&-1!==a.nesting&&e&&t[e-1].hidden&&(i+="\n"),i+=(-1===a.nesting?"</":"<")+a.tag,i+=this.renderAttrs(a),0===a.nesting&&n.xhtmlOut&&(i+=" /"),a.block&&(o=!0,1===a.nesting&&e+1<t.length&&("inline"===(r=t[e+1]).type||r.hidden||-1===r.nesting&&r.tag===a.tag)&&(o=!1)),i+=o?">\n":">")},s.prototype.renderInline=function(t,e,n){for(var r,i="",o=this.rules,a=0,s=t.length;a<s;a++)void 0!==o[r=t[a].type]?i+=o[r](t,a,e,n,this):i+=this.renderToken(t,a,e);return i},s.prototype.renderInlineAsText=function(t,e,n){for(var r="",i=0,o=t.length;i<o;i++)"text"===t[i].type?r+=t[i].content:"image"===t[i].type?r+=this.renderInlineAsText(t[i].children,e,n):"softbreak"===t[i].type&&(r+="\n");return r},s.prototype.render=function(t,e,n){var r,i,o,a="",s=this.rules;for(r=0,i=t.length;r<i;r++)"inline"===(o=t[r].type)?a+=this.renderInline(t[r].children,e,n):void 0!==s[o]?a+=s[t[r].type](t,r,e,n,this):a+=this.renderToken(t,r,e,n);return a},t.exports=s},9580:t=>{"use strict";function e(){this.__rules__=[],this.__cache__=null}e.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1},e.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach((function(t){t.enabled&&t.alt.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),t.__cache__={},e.forEach((function(e){t.__cache__[e]=[],t.__rules__.forEach((function(n){n.enabled&&(e&&n.alt.indexOf(e)<0||t.__cache__[e].push(n.fn))}))}))},e.prototype.at=function(t,e,n){var r=this.__find__(t),i=n||{};if(-1===r)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null},e.prototype.before=function(t,e,n,r){var i=this.__find__(t),o=r||{};if(-1===i)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},e.prototype.after=function(t,e,n,r){var i=this.__find__(t),o=r||{};if(-1===i)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},e.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null},e.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var r=this.__find__(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[r].enabled=!0,n.push(t)}),this),this.__cache__=null,n},e.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach((function(t){t.enabled=!1})),this.enable(t,e)},e.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var r=this.__find__(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[r].enabled=!1,n.push(t)}),this),this.__cache__=null,n},e.prototype.getRules=function(t){return null===this.__cache__&&this.__compile__(),this.__cache__[t]||[]},t.exports=e},5258:(t,e,n)=>{"use strict";var r=n(7022).isSpace;t.exports=function(t,e,n,i){var o,a,s,u,l,c,h,p,f,d,g,y,v,m,_,b,x,E,w,C,N=t.lineMax,I=t.bMarks[e]+t.tShift[e],T=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(62!==t.src.charCodeAt(I++))return!1;if(i)return!0;for(u=f=t.sCount[e]+1,32===t.src.charCodeAt(I)?(I++,u++,f++,o=!1,b=!0):9===t.src.charCodeAt(I)?(b=!0,(t.bsCount[e]+f)%4==3?(I++,u++,f++,o=!1):o=!0):b=!1,d=[t.bMarks[e]],t.bMarks[e]=I;I<T&&(a=t.src.charCodeAt(I),r(a));)9===a?f+=4-(f+t.bsCount[e]+(o?1:0))%4:f++,I++;for(g=[t.bsCount[e]],t.bsCount[e]=t.sCount[e]+1+(b?1:0),c=I>=T,m=[t.sCount[e]],t.sCount[e]=f-u,_=[t.tShift[e]],t.tShift[e]=I-t.bMarks[e],E=t.md.block.ruler.getRules("blockquote"),v=t.parentType,t.parentType="blockquote",p=e+1;p<n&&(C=t.sCount[p]<t.blkIndent,!((I=t.bMarks[p]+t.tShift[p])>=(T=t.eMarks[p])));p++)if(62!==t.src.charCodeAt(I++)||C){if(c)break;for(x=!1,s=0,l=E.length;s<l;s++)if(E[s](t,p,n,!0)){x=!0;break}if(x){t.lineMax=p,0!==t.blkIndent&&(d.push(t.bMarks[p]),g.push(t.bsCount[p]),_.push(t.tShift[p]),m.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}d.push(t.bMarks[p]),g.push(t.bsCount[p]),_.push(t.tShift[p]),m.push(t.sCount[p]),t.sCount[p]=-1}else{for(u=f=t.sCount[p]+1,32===t.src.charCodeAt(I)?(I++,u++,f++,o=!1,b=!0):9===t.src.charCodeAt(I)?(b=!0,(t.bsCount[p]+f)%4==3?(I++,u++,f++,o=!1):o=!0):b=!1,d.push(t.bMarks[p]),t.bMarks[p]=I;I<T&&(a=t.src.charCodeAt(I),r(a));)9===a?f+=4-(f+t.bsCount[p]+(o?1:0))%4:f++,I++;c=I>=T,g.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(b?1:0),m.push(t.sCount[p]),t.sCount[p]=f-u,_.push(t.tShift[p]),t.tShift[p]=I-t.bMarks[p]}for(y=t.blkIndent,t.blkIndent=0,(w=t.push("blockquote_open","blockquote",1)).markup=">",w.map=h=[e,0],t.md.block.tokenize(t,e,p),(w=t.push("blockquote_close","blockquote",-1)).markup=">",t.lineMax=N,t.parentType=v,h[1]=t.line,s=0;s<_.length;s++)t.bMarks[s+e]=d[s],t.tShift[s+e]=_[s],t.sCount[s+e]=m[s],t.bsCount[s+e]=g[s];return t.blkIndent=y,!0}},8768:t=>{"use strict";t.exports=function(t,e,n){var r,i,o;if(t.sCount[e]-t.blkIndent<4)return!1;for(i=r=e+1;r<n;)if(t.isEmpty(r))r++;else{if(!(t.sCount[r]-t.blkIndent>=4))break;i=++r}return t.line=i,(o=t.push("code_block","code",0)).content=t.getLines(e,i,4+t.blkIndent,!1)+"\n",o.map=[e,t.line],!0}},3542:t=>{"use strict";t.exports=function(t,e,n,r){var i,o,a,s,u,l,c,h=!1,p=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(p+3>f)return!1;if(126!==(i=t.src.charCodeAt(p))&&96!==i)return!1;if(u=p,(o=(p=t.skipChars(p,i))-u)<3)return!1;if(c=t.src.slice(u,p),a=t.src.slice(p,f),96===i&&a.indexOf(String.fromCharCode(i))>=0)return!1;if(r)return!0;for(s=e;!(++s>=n||(p=u=t.bMarks[s]+t.tShift[s])<(f=t.eMarks[s])&&t.sCount[s]<t.blkIndent);)if(t.src.charCodeAt(p)===i&&!(t.sCount[s]-t.blkIndent>=4||(p=t.skipChars(p,i))-u<o||(p=t.skipSpaces(p))<f)){h=!0;break}return o=t.sCount[e],t.line=s+(h?1:0),(l=t.push("fence","code",0)).info=a,l.content=t.getLines(e+1,s,o,!0),l.markup=c,l.map=[e,t.line],!0}},1630:(t,e,n)=>{"use strict";var r=n(7022).isSpace;t.exports=function(t,e,n,i){var o,a,s,u,l=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(35!==(o=t.src.charCodeAt(l))||l>=c)return!1;for(a=1,o=t.src.charCodeAt(++l);35===o&&l<c&&a<=6;)a++,o=t.src.charCodeAt(++l);return!(a>6||l<c&&!r(o)||(i||(c=t.skipSpacesBack(c,l),(s=t.skipCharsBack(c,35,l))>l&&r(t.src.charCodeAt(s-1))&&(c=s),t.line=e+1,(u=t.push("heading_open","h"+String(a),1)).markup="########".slice(0,a),u.map=[e,t.line],(u=t.push("inline","",0)).content=t.src.slice(l,c).trim(),u.map=[e,t.line],u.children=[],(u=t.push("heading_close","h"+String(a),-1)).markup="########".slice(0,a)),0))}},5634:(t,e,n)=>{"use strict";var r=n(7022).isSpace;t.exports=function(t,e,n,i){var o,a,s,u,l=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(42!==(o=t.src.charCodeAt(l++))&&45!==o&&95!==o)return!1;for(a=1;l<c;){if((s=t.src.charCodeAt(l++))!==o&&!r(s))return!1;s===o&&a++}return!(a<3||(i||(t.line=e+1,(u=t.push("hr","hr",0)).map=[e,t.line],u.markup=Array(a+1).join(String.fromCharCode(o))),0))}},6329:(t,e,n)=>{"use strict";var r=n(813),i=n(1947).q,o=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(i.source+"\\s*$"),/^$/,!1]];t.exports=function(t,e,n,r){var i,a,s,u,l=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(!t.md.options.html)return!1;if(60!==t.src.charCodeAt(l))return!1;for(u=t.src.slice(l,c),i=0;i<o.length&&!o[i][0].test(u);i++);if(i===o.length)return!1;if(r)return o[i][2];if(a=e+1,!o[i][1].test(u))for(;a<n&&!(t.sCount[a]<t.blkIndent);a++)if(l=t.bMarks[a]+t.tShift[a],c=t.eMarks[a],u=t.src.slice(l,c),o[i][1].test(u)){0!==u.length&&a++;break}return t.line=a,(s=t.push("html_block","",0)).map=[e,a],s.content=t.getLines(e,a,t.blkIndent,!0),!0}},6850:t=>{"use strict";t.exports=function(t,e,n){var r,i,o,a,s,u,l,c,h,p,f=e+1,d=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;for(p=t.parentType,t.parentType="paragraph";f<n&&!t.isEmpty(f);f++)if(!(t.sCount[f]-t.blkIndent>3)){if(t.sCount[f]>=t.blkIndent&&(u=t.bMarks[f]+t.tShift[f])<(l=t.eMarks[f])&&(45===(h=t.src.charCodeAt(u))||61===h)&&(u=t.skipChars(u,h),(u=t.skipSpaces(u))>=l)){c=61===h?1:2;break}if(!(t.sCount[f]<0)){for(i=!1,o=0,a=d.length;o<a;o++)if(d[o](t,f,n,!0)){i=!0;break}if(i)break}}return!!c&&(r=t.getLines(e,f,t.blkIndent,!1).trim(),t.line=f+1,(s=t.push("heading_open","h"+String(c),1)).markup=String.fromCharCode(h),s.map=[e,t.line],(s=t.push("inline","",0)).content=r,s.map=[e,t.line-1],s.children=[],(s=t.push("heading_close","h"+String(c),-1)).markup=String.fromCharCode(h),t.parentType=p,!0)}},8532:(t,e,n)=>{"use strict";var r=n(7022).isSpace;function i(t,e){var n,i,o,a;return i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],42!==(n=t.src.charCodeAt(i++))&&45!==n&&43!==n||i<o&&(a=t.src.charCodeAt(i),!r(a))?-1:i}function o(t,e){var n,i=t.bMarks[e]+t.tShift[e],o=i,a=t.eMarks[e];if(o+1>=a)return-1;if((n=t.src.charCodeAt(o++))<48||n>57)return-1;for(;;){if(o>=a)return-1;if(!((n=t.src.charCodeAt(o++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(o-i>=10)return-1}return o<a&&(n=t.src.charCodeAt(o),!r(n))?-1:o}t.exports=function(t,e,n,r){var a,s,u,l,c,h,p,f,d,g,y,v,m,_,b,x,E,w,C,N,I,T,S,A,L,D,M,O,P=!1,R=!0;if(t.sCount[e]-t.blkIndent>=4)return!1;if(t.listIndent>=0&&t.sCount[e]-t.listIndent>=4&&t.sCount[e]<t.blkIndent)return!1;if(r&&"paragraph"===t.parentType&&t.sCount[e]>=t.blkIndent&&(P=!0),(S=o(t,e))>=0){if(p=!0,L=t.bMarks[e]+t.tShift[e],m=Number(t.src.slice(L,S-1)),P&&1!==m)return!1}else{if(!((S=i(t,e))>=0))return!1;p=!1}if(P&&t.skipSpaces(S)>=t.eMarks[e])return!1;if(v=t.src.charCodeAt(S-1),r)return!0;for(y=t.tokens.length,p?(O=t.push("ordered_list_open","ol",1),1!==m&&(O.attrs=[["start",m]])):O=t.push("bullet_list_open","ul",1),O.map=g=[e,0],O.markup=String.fromCharCode(v),b=e,A=!1,M=t.md.block.ruler.getRules("list"),w=t.parentType,t.parentType="list";b<n;){for(T=S,_=t.eMarks[b],h=x=t.sCount[b]+S-(t.bMarks[e]+t.tShift[e]);T<_;){if(9===(a=t.src.charCodeAt(T)))x+=4-(x+t.bsCount[b])%4;else{if(32!==a)break;x++}T++}if((c=(s=T)>=_?1:x-h)>4&&(c=1),l=h+c,(O=t.push("list_item_open","li",1)).markup=String.fromCharCode(v),O.map=f=[e,0],p&&(O.info=t.src.slice(L,S-1)),I=t.tight,N=t.tShift[e],C=t.sCount[e],E=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=l,t.tight=!0,t.tShift[e]=s-t.bMarks[e],t.sCount[e]=x,s>=_&&t.isEmpty(e+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,e,n,!0),t.tight&&!A||(R=!1),A=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=E,t.tShift[e]=N,t.sCount[e]=C,t.tight=I,(O=t.push("list_item_close","li",-1)).markup=String.fromCharCode(v),b=e=t.line,f[1]=b,s=t.bMarks[e],b>=n)break;if(t.sCount[b]<t.blkIndent)break;if(t.sCount[e]-t.blkIndent>=4)break;for(D=!1,u=0,d=M.length;u<d;u++)if(M[u](t,b,n,!0)){D=!0;break}if(D)break;if(p){if((S=o(t,b))<0)break;L=t.bMarks[b]+t.tShift[b]}else if((S=i(t,b))<0)break;if(v!==t.src.charCodeAt(S-1))break}return(O=p?t.push("ordered_list_close","ol",-1):t.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(v),g[1]=b,t.line=b,t.parentType=w,R&&function(t,e){var n,r,i=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===i&&"paragraph_open"===t.tokens[n].type&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}(t,y),!0}},6864:t=>{"use strict";t.exports=function(t,e){var n,r,i,o,a,s,u=e+1,l=t.md.block.ruler.getRules("paragraph"),c=t.lineMax;for(s=t.parentType,t.parentType="paragraph";u<c&&!t.isEmpty(u);u++)if(!(t.sCount[u]-t.blkIndent>3||t.sCount[u]<0)){for(r=!1,i=0,o=l.length;i<o;i++)if(l[i](t,u,c,!0)){r=!0;break}if(r)break}return n=t.getLines(e,u,t.blkIndent,!1).trim(),t.line=u,(a=t.push("paragraph_open","p",1)).map=[e,t.line],(a=t.push("inline","",0)).content=n,a.map=[e,t.line],a.children=[],a=t.push("paragraph_close","p",-1),t.parentType=s,!0}},3804:(t,e,n)=>{"use strict";var r=n(7022).normalizeReference,i=n(7022).isSpace;t.exports=function(t,e,n,o){var a,s,u,l,c,h,p,f,d,g,y,v,m,_,b,x,E=0,w=t.bMarks[e]+t.tShift[e],C=t.eMarks[e],N=e+1;if(t.sCount[e]-t.blkIndent>=4)return!1;if(91!==t.src.charCodeAt(w))return!1;for(;++w<C;)if(93===t.src.charCodeAt(w)&&92!==t.src.charCodeAt(w-1)){if(w+1===C)return!1;if(58!==t.src.charCodeAt(w+1))return!1;break}for(l=t.lineMax,b=t.md.block.ruler.getRules("reference"),g=t.parentType,t.parentType="reference";N<l&&!t.isEmpty(N);N++)if(!(t.sCount[N]-t.blkIndent>3||t.sCount[N]<0)){for(_=!1,h=0,p=b.length;h<p;h++)if(b[h](t,N,l,!0)){_=!0;break}if(_)break}for(C=(m=t.getLines(e,N,t.blkIndent,!1).trim()).length,w=1;w<C;w++){if(91===(a=m.charCodeAt(w)))return!1;if(93===a){d=w;break}(10===a||92===a&&++w<C&&10===m.charCodeAt(w))&&E++}if(d<0||58!==m.charCodeAt(d+1))return!1;for(w=d+2;w<C;w++)if(10===(a=m.charCodeAt(w)))E++;else if(!i(a))break;if(!(y=t.md.helpers.parseLinkDestination(m,w,C)).ok)return!1;if(c=t.md.normalizeLink(y.str),!t.md.validateLink(c))return!1;for(s=w=y.pos,u=E+=y.lines,v=w;w<C;w++)if(10===(a=m.charCodeAt(w)))E++;else if(!i(a))break;for(y=t.md.helpers.parseLinkTitle(m,w,C),w<C&&v!==w&&y.ok?(x=y.str,w=y.pos,E+=y.lines):(x="",w=s,E=u);w<C&&(a=m.charCodeAt(w),i(a));)w++;if(w<C&&10!==m.charCodeAt(w)&&x)for(x="",w=s,E=u;w<C&&(a=m.charCodeAt(w),i(a));)w++;return!(w<C&&10!==m.charCodeAt(w)||!(f=r(m.slice(1,d)))||(o||(void 0===t.env.references&&(t.env.references={}),void 0===t.env.references[f]&&(t.env.references[f]={title:x,href:c}),t.parentType=g,t.line=e+E+1),0))}},2948:(t,e,n)=>{"use strict";var r=n(5872),i=n(7022).isSpace;function o(t,e,n,r){var o,a,s,u,l,c,h,p;for(this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",p=!1,s=u=c=h=0,l=(a=this.src).length;u<l;u++){if(o=a.charCodeAt(u),!p){if(i(o)){c++,9===o?h+=4-h%4:h++;continue}p=!0}10!==o&&u!==l-1||(10!==o&&u++,this.bMarks.push(s),this.eMarks.push(u),this.tShift.push(c),this.sCount.push(h),this.bsCount.push(0),p=!1,c=0,h=0,s=u+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}o.prototype.push=function(t,e,n){var i=new r(t,e,n);return i.block=!0,n<0&&this.level--,i.level=this.level,n>0&&this.level++,this.tokens.push(i),i},o.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]},o.prototype.skipEmptyLines=function(t){for(var e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t},o.prototype.skipSpaces=function(t){for(var e,n=this.src.length;t<n&&(e=this.src.charCodeAt(t),i(e));t++);return t},o.prototype.skipSpacesBack=function(t,e){if(t<=e)return t;for(;t>e;)if(!i(this.src.charCodeAt(--t)))return t+1;return t},o.prototype.skipChars=function(t,e){for(var n=this.src.length;t<n&&this.src.charCodeAt(t)===e;t++);return t},o.prototype.skipCharsBack=function(t,e,n){if(t<=n)return t;for(;t>n;)if(e!==this.src.charCodeAt(--t))return t+1;return t},o.prototype.getLines=function(t,e,n,r){var o,a,s,u,l,c,h,p=t;if(t>=e)return"";for(c=new Array(e-t),o=0;p<e;p++,o++){for(a=0,h=u=this.bMarks[p],l=p+1<e||r?this.eMarks[p]+1:this.eMarks[p];u<l&&a<n;){if(s=this.src.charCodeAt(u),i(s))9===s?a+=4-(a+this.bsCount[p])%4:a++;else{if(!(u-h<this.tShift[p]))break;a++}u++}c[o]=a>n?new Array(a-n+1).join(" ")+this.src.slice(u,l):this.src.slice(u,l)}return c.join("")},o.prototype.Token=r,t.exports=o},1785:(t,e,n)=>{"use strict";var r=n(7022).isSpace;function i(t,e){var n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function o(t){var e,n=[],r=0,i=t.length,o=!1,a=0,s="";for(e=t.charCodeAt(r);r<i;)124===e&&(o?(s+=t.substring(a,r-1),a=r):(n.push(s+t.substring(a,r)),s="",a=r+1)),o=92===e,r++,e=t.charCodeAt(r);return n.push(s+t.substring(a)),n}t.exports=function(t,e,n,a){var s,u,l,c,h,p,f,d,g,y,v,m,_,b,x,E,w,C;if(e+2>n)return!1;if(p=e+1,t.sCount[p]<t.blkIndent)return!1;if(t.sCount[p]-t.blkIndent>=4)return!1;if((l=t.bMarks[p]+t.tShift[p])>=t.eMarks[p])return!1;if(124!==(w=t.src.charCodeAt(l++))&&45!==w&&58!==w)return!1;if(l>=t.eMarks[p])return!1;if(124!==(C=t.src.charCodeAt(l++))&&45!==C&&58!==C&&!r(C))return!1;if(45===w&&r(C))return!1;for(;l<t.eMarks[p];){if(124!==(s=t.src.charCodeAt(l))&&45!==s&&58!==s&&!r(s))return!1;l++}for(f=(u=i(t,e+1)).split("|"),y=[],c=0;c<f.length;c++){if(!(v=f[c].trim())){if(0===c||c===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?y.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?y.push("left"):y.push("")}if(-1===(u=i(t,e).trim()).indexOf("|"))return!1;if(t.sCount[e]-t.blkIndent>=4)return!1;if((f=o(u)).length&&""===f[0]&&f.shift(),f.length&&""===f[f.length-1]&&f.pop(),0===(d=f.length)||d!==y.length)return!1;if(a)return!0;for(b=t.parentType,t.parentType="table",E=t.md.block.ruler.getRules("blockquote"),(g=t.push("table_open","table",1)).map=m=[e,0],(g=t.push("thead_open","thead",1)).map=[e,e+1],(g=t.push("tr_open","tr",1)).map=[e,e+1],c=0;c<f.length;c++)g=t.push("th_open","th",1),y[c]&&(g.attrs=[["style","text-align:"+y[c]]]),(g=t.push("inline","",0)).content=f[c].trim(),g.children=[],g=t.push("th_close","th",-1);for(g=t.push("tr_close","tr",-1),g=t.push("thead_close","thead",-1),p=e+2;p<n&&!(t.sCount[p]<t.blkIndent);p++){for(x=!1,c=0,h=E.length;c<h;c++)if(E[c](t,p,n,!0)){x=!0;break}if(x)break;if(!(u=i(t,p).trim()))break;if(t.sCount[p]-t.blkIndent>=4)break;for((f=o(u)).length&&""===f[0]&&f.shift(),f.length&&""===f[f.length-1]&&f.pop(),p===e+2&&((g=t.push("tbody_open","tbody",1)).map=_=[e+2,0]),(g=t.push("tr_open","tr",1)).map=[p,p+1],c=0;c<d;c++)g=t.push("td_open","td",1),y[c]&&(g.attrs=[["style","text-align:"+y[c]]]),(g=t.push("inline","",0)).content=f[c]?f[c].trim():"",g.children=[],g=t.push("td_close","td",-1);g=t.push("tr_close","tr",-1)}return _&&(g=t.push("tbody_close","tbody",-1),_[1]=p),g=t.push("table_close","table",-1),m[1]=p,t.parentType=b,t.line=p,!0}},898:t=>{"use strict";t.exports=function(t){var e;t.inlineMode?((e=new t.Token("inline","",0)).content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}},9827:t=>{"use strict";t.exports=function(t){var e,n,r,i=t.tokens;for(n=0,r=i.length;n<r;n++)"inline"===(e=i[n]).type&&t.md.inline.parse(e.content,t.md,t.env,e.children)}},7830:(t,e,n)=>{"use strict";var r=n(7022).arrayReplaceAt;function i(t){return/^<\/a\s*>/i.test(t)}t.exports=function(t){var e,n,o,a,s,u,l,c,h,p,f,d,g,y,v,m,_,b,x=t.tokens;if(t.md.options.linkify)for(n=0,o=x.length;n<o;n++)if("inline"===x[n].type&&t.md.linkify.pretest(x[n].content))for(g=0,e=(a=x[n].children).length-1;e>=0;e--)if("link_close"!==(u=a[e]).type){if("html_inline"===u.type&&(b=u.content,/^<a[>\s]/i.test(b)&&g>0&&g--,i(u.content)&&g++),!(g>0)&&"text"===u.type&&t.md.linkify.test(u.content)){for(h=u.content,_=t.md.linkify.match(h),l=[],d=u.level,f=0,_.length>0&&0===_[0].index&&e>0&&"text_special"===a[e-1].type&&(_=_.slice(1)),c=0;c<_.length;c++)y=_[c].url,v=t.md.normalizeLink(y),t.md.validateLink(v)&&(m=_[c].text,m=_[c].schema?"mailto:"!==_[c].schema||/^mailto:/i.test(m)?t.md.normalizeLinkText(m):t.md.normalizeLinkText("mailto:"+m).replace(/^mailto:/,""):t.md.normalizeLinkText("http://"+m).replace(/^http:\/\//,""),(p=_[c].index)>f&&((s=new t.Token("text","",0)).content=h.slice(f,p),s.level=d,l.push(s)),(s=new t.Token("link_open","a",1)).attrs=[["href",v]],s.level=d++,s.markup="linkify",s.info="auto",l.push(s),(s=new t.Token("text","",0)).content=m,s.level=d,l.push(s),(s=new t.Token("link_close","a",-1)).level=--d,s.markup="linkify",s.info="auto",l.push(s),f=_[c].lastIndex);f<h.length&&((s=new t.Token("text","",0)).content=h.slice(f),s.level=d,l.push(s)),x[n].children=a=r(a,e,l)}}else for(e--;a[e].level!==u.level&&"link_open"!==a[e].type;)e--}},4129:t=>{"use strict";var e=/\r\n?|\n/g,n=/\0/g;t.exports=function(t){var r;r=(r=t.src.replace(e,"\n")).replace(n,""),t.src=r}},2834:t=>{"use strict";var e=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,n=/\((c|tm|r)\)/i,r=/\((c|tm|r)\)/gi,i={c:"",r:"",tm:""};function o(t,e){return i[e.toLowerCase()]}function a(t){var e,n,i=0;for(e=t.length-1;e>=0;e--)"text"!==(n=t[e]).type||i||(n.content=n.content.replace(r,o)),"link_open"===n.type&&"auto"===n.info&&i--,"link_close"===n.type&&"auto"===n.info&&i++}function s(t){var n,r,i=0;for(n=t.length-1;n>=0;n--)"text"!==(r=t[n]).type||i||e.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1").replace(/(^|\s)--(?=\s|$)/gm,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1")),"link_open"===r.type&&"auto"===r.info&&i--,"link_close"===r.type&&"auto"===r.info&&i++}t.exports=function(t){var r;if(t.md.options.typographer)for(r=t.tokens.length-1;r>=0;r--)"inline"===t.tokens[r].type&&(n.test(t.tokens[r].content)&&a(t.tokens[r].children),e.test(t.tokens[r].content)&&s(t.tokens[r].children))}},8450:(t,e,n)=>{"use strict";var r=n(7022).isWhiteSpace,i=n(7022).isPunctChar,o=n(7022).isMdAsciiPunct,a=/['"]/,s=/['"]/g;function u(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function l(t,e){var n,a,l,c,h,p,f,d,g,y,v,m,_,b,x,E,w,C,N,I,T;for(N=[],n=0;n<t.length;n++){for(a=t[n],f=t[n].level,w=N.length-1;w>=0&&!(N[w].level<=f);w--);if(N.length=w+1,"text"===a.type){h=0,p=(l=a.content).length;t:for(;h<p&&(s.lastIndex=h,c=s.exec(l));){if(x=E=!0,h=c.index+1,C="'"===c[0],g=32,c.index-1>=0)g=l.charCodeAt(c.index-1);else for(w=n-1;w>=0&&"softbreak"!==t[w].type&&"hardbreak"!==t[w].type;w--)if(t[w].content){g=t[w].content.charCodeAt(t[w].content.length-1);break}if(y=32,h<p)y=l.charCodeAt(h);else for(w=n+1;w<t.length&&"softbreak"!==t[w].type&&"hardbreak"!==t[w].type;w++)if(t[w].content){y=t[w].content.charCodeAt(0);break}if(v=o(g)||i(String.fromCharCode(g)),m=o(y)||i(String.fromCharCode(y)),_=r(g),(b=r(y))?x=!1:m&&(_||v||(x=!1)),_?E=!1:v&&(b||m||(E=!1)),34===y&&'"'===c[0]&&g>=48&&g<=57&&(E=x=!1),x&&E&&(x=v,E=m),x||E){if(E)for(w=N.length-1;w>=0&&(d=N[w],!(N[w].level<f));w--)if(d.single===C&&N[w].level===f){d=N[w],C?(I=e.md.options.quotes[2],T=e.md.options.quotes[3]):(I=e.md.options.quotes[0],T=e.md.options.quotes[1]),a.content=u(a.content,c.index,T),t[d.token].content=u(t[d.token].content,d.pos,I),h+=T.length-1,d.token===n&&(h+=I.length-1),p=(l=a.content).length,N.length=w;continue t}x?N.push({token:n,pos:c.index,single:C,level:f}):E&&C&&(a.content=u(a.content,c.index,""))}else C&&(a.content=u(a.content,c.index,""))}}}}t.exports=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&a.test(t.tokens[e].content)&&l(t.tokens[e].children,t)}},6480:(t,e,n)=>{"use strict";var r=n(5872);function i(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}i.prototype.Token=r,t.exports=i},6633:t=>{"use strict";t.exports=function(t){var e,n,r,i,o,a,s=t.tokens;for(e=0,n=s.length;e<n;e++)if("inline"===s[e].type){for(o=(r=s[e].children).length,i=0;i<o;i++)"text_special"===r[i].type&&(r[i].type="text");for(i=a=0;i<o;i++)"text"===r[i].type&&i+1<o&&"text"===r[i+1].type?r[i+1].content=r[i].content+r[i+1].content:(i!==a&&(r[a]=r[i]),a++);i!==a&&(r.length=a)}}},3420:t=>{"use strict";var e=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,n=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;t.exports=function(t,r){var i,o,a,s,u,l,c=t.pos;if(60!==t.src.charCodeAt(c))return!1;for(u=t.pos,l=t.posMax;;){if(++c>=l)return!1;if(60===(s=t.src.charCodeAt(c)))return!1;if(62===s)break}return i=t.src.slice(u+1,c),n.test(i)?(o=t.md.normalizeLink(i),!!t.md.validateLink(o)&&(r||((a=t.push("link_open","a",1)).attrs=[["href",o]],a.markup="autolink",a.info="auto",(a=t.push("text","",0)).content=t.md.normalizeLinkText(i),(a=t.push("link_close","a",-1)).markup="autolink",a.info="auto"),t.pos+=i.length+2,!0)):!!e.test(i)&&(o=t.md.normalizeLink("mailto:"+i),!!t.md.validateLink(o)&&(r||((a=t.push("link_open","a",1)).attrs=[["href",o]],a.markup="autolink",a.info="auto",(a=t.push("text","",0)).content=t.md.normalizeLinkText(i),(a=t.push("link_close","a",-1)).markup="autolink",a.info="auto"),t.pos+=i.length+2,!0))}},9755:t=>{"use strict";t.exports=function(t,e){var n,r,i,o,a,s,u,l,c=t.pos;if(96!==t.src.charCodeAt(c))return!1;for(n=c,c++,r=t.posMax;c<r&&96===t.src.charCodeAt(c);)c++;if(u=(i=t.src.slice(n,c)).length,t.backticksScanned&&(t.backticks[u]||0)<=n)return e||(t.pending+=i),t.pos+=u,!0;for(a=s=c;-1!==(a=t.src.indexOf("`",s));){for(s=a+1;s<r&&96===t.src.charCodeAt(s);)s++;if((l=s-a)===u)return e||((o=t.push("code_inline","code",0)).markup=i,o.content=t.src.slice(c,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=s,!0;t.backticks[l]=a}return t.backticksScanned=!0,e||(t.pending+=i),t.pos+=u,!0}},9354:t=>{"use strict";function e(t,e){var n,r,i,o,a,s,u,l,c={},h=e.length;if(h){var p=0,f=-2,d=[];for(n=0;n<h;n++)if(i=e[n],d.push(0),e[p].marker===i.marker&&f===i.token-1||(p=n),f=i.token,i.length=i.length||0,i.close){for(c.hasOwnProperty(i.marker)||(c[i.marker]=[-1,-1,-1,-1,-1,-1]),a=c[i.marker][(i.open?3:0)+i.length%3],s=r=p-d[p]-1;r>a;r-=d[r]+1)if((o=e[r]).marker===i.marker&&o.open&&o.end<0&&(u=!1,(o.close||i.open)&&(o.length+i.length)%3==0&&(o.length%3==0&&i.length%3==0||(u=!0)),!u)){l=r>0&&!e[r-1].open?d[r-1]+1:0,d[n]=n-r+l,d[r]=l,i.open=!1,o.end=n,o.close=!1,s=-1,f=-2;break}-1!==s&&(c[i.marker][(i.open?3:0)+(i.length||0)%3]=s)}}}t.exports=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(e(0,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&e(0,r[n].delimiters)}},7894:t=>{"use strict";function e(t,e){var n,r,i,o,a,s;for(n=e.length-1;n>=0;n--)95!==(r=e[n]).marker&&42!==r.marker||-1!==r.end&&(i=e[r.end],s=n>0&&e[n-1].end===r.end+1&&e[n-1].marker===r.marker&&e[n-1].token===r.token-1&&e[r.end+1].token===i.token+1,a=String.fromCharCode(r.marker),(o=t.tokens[r.token]).type=s?"strong_open":"em_open",o.tag=s?"strong":"em",o.nesting=1,o.markup=s?a+a:a,o.content="",(o=t.tokens[i.token]).type=s?"strong_close":"em_close",o.tag=s?"strong":"em",o.nesting=-1,o.markup=s?a+a:a,o.content="",s&&(t.tokens[e[n-1].token].content="",t.tokens[e[r.end+1].token].content="",n--))}t.exports.w=function(t,e){var n,r,i=t.pos,o=t.src.charCodeAt(i);if(e)return!1;if(95!==o&&42!==o)return!1;for(r=t.scanDelims(t.pos,42===o),n=0;n<r.length;n++)t.push("text","",0).content=String.fromCharCode(o),t.delimiters.push({marker:o,length:r.length,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return t.pos+=r.length,!0},t.exports.g=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(e(t,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&e(t,r[n].delimiters)}},9391:(t,e,n)=>{"use strict";var r=n(6233),i=n(7022).has,o=n(7022).isValidEntityCode,a=n(7022).fromCodePoint,s=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,u=/^&([a-z][a-z0-9]{1,31});/i;t.exports=function(t,e){var n,l,c,h=t.pos,p=t.posMax;if(38!==t.src.charCodeAt(h))return!1;if(h+1>=p)return!1;if(35===t.src.charCodeAt(h+1)){if(l=t.src.slice(h).match(s))return e||(n="x"===l[1][0].toLowerCase()?parseInt(l[1].slice(1),16):parseInt(l[1],10),(c=t.push("text_special","",0)).content=o(n)?a(n):a(65533),c.markup=l[0],c.info="entity"),t.pos+=l[0].length,!0}else if((l=t.src.slice(h).match(u))&&i(r,l[1]))return e||((c=t.push("text_special","",0)).content=r[l[1]],c.markup=l[0],c.info="entity"),t.pos+=l[0].length,!0;return!1}},1917:(t,e,n)=>{"use strict";for(var r=n(7022).isSpace,i=[],o=0;o<256;o++)i.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(t){i[t.charCodeAt(0)]=1})),t.exports=function(t,e){var n,o,a,s,u,l=t.pos,c=t.posMax;if(92!==t.src.charCodeAt(l))return!1;if(++l>=c)return!1;if(10===(n=t.src.charCodeAt(l))){for(e||t.push("hardbreak","br",0),l++;l<c&&(n=t.src.charCodeAt(l),r(n));)l++;return t.pos=l,!0}return s=t.src[l],n>=55296&&n<=56319&&l+1<c&&(o=t.src.charCodeAt(l+1))>=56320&&o<=57343&&(s+=t.src[l+1],l++),a="\\"+s,e||(u=t.push("text_special","",0),n<256&&0!==i[n]?u.content=s:u.content=a,u.markup=a,u.info="escape"),t.pos=l+1,!0}},9969:t=>{"use strict";t.exports=function(t){var e,n,r=0,i=t.tokens,o=t.tokens.length;for(e=n=0;e<o;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,"text"===i[e].type&&e+1<o&&"text"===i[e+1].type?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}},1779:(t,e,n)=>{"use strict";var r=n(1947).n;t.exports=function(t,e){var n,i,o,a,s,u=t.pos;return!(!t.md.options.html||(o=t.posMax,60!==t.src.charCodeAt(u)||u+2>=o||33!==(n=t.src.charCodeAt(u+1))&&63!==n&&47!==n&&!function(t){var e=32|t;return e>=97&&e<=122}(n)||!(i=t.src.slice(u).match(r))||(e||((a=t.push("html_inline","",0)).content=t.src.slice(u,u+i[0].length),s=a.content,/^<a[>\s]/i.test(s)&&t.linkLevel++,function(t){return/^<\/a\s*>/i.test(t)}(a.content)&&t.linkLevel--),t.pos+=i[0].length,0)))}},3006:(t,e,n)=>{"use strict";var r=n(7022).normalizeReference,i=n(7022).isSpace;t.exports=function(t,e){var n,o,a,s,u,l,c,h,p,f,d,g,y,v="",m=t.pos,_=t.posMax;if(33!==t.src.charCodeAt(t.pos))return!1;if(91!==t.src.charCodeAt(t.pos+1))return!1;if(l=t.pos+2,(u=t.md.helpers.parseLinkLabel(t,t.pos+1,!1))<0)return!1;if((c=u+1)<_&&40===t.src.charCodeAt(c)){for(c++;c<_&&(o=t.src.charCodeAt(c),i(o)||10===o);c++);if(c>=_)return!1;for(y=c,(p=t.md.helpers.parseLinkDestination(t.src,c,t.posMax)).ok&&(v=t.md.normalizeLink(p.str),t.md.validateLink(v)?c=p.pos:v=""),y=c;c<_&&(o=t.src.charCodeAt(c),i(o)||10===o);c++);if(p=t.md.helpers.parseLinkTitle(t.src,c,t.posMax),c<_&&y!==c&&p.ok)for(f=p.str,c=p.pos;c<_&&(o=t.src.charCodeAt(c),i(o)||10===o);c++);else f="";if(c>=_||41!==t.src.charCodeAt(c))return t.pos=m,!1;c++}else{if(void 0===t.env.references)return!1;if(c<_&&91===t.src.charCodeAt(c)?(y=c+1,(c=t.md.helpers.parseLinkLabel(t,c))>=0?s=t.src.slice(y,c++):c=u+1):c=u+1,s||(s=t.src.slice(l,u)),!(h=t.env.references[r(s)]))return t.pos=m,!1;v=h.href,f=h.title}return e||(a=t.src.slice(l,u),t.md.inline.parse(a,t.md,t.env,g=[]),(d=t.push("image","img",0)).attrs=n=[["src",v],["alt",""]],d.children=g,d.content=a,f&&n.push(["title",f])),t.pos=c,t.posMax=_,!0}},1727:(t,e,n)=>{"use strict";var r=n(7022).normalizeReference,i=n(7022).isSpace;t.exports=function(t,e){var n,o,a,s,u,l,c,h,p="",f="",d=t.pos,g=t.posMax,y=t.pos,v=!0;if(91!==t.src.charCodeAt(t.pos))return!1;if(u=t.pos+1,(s=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)return!1;if((l=s+1)<g&&40===t.src.charCodeAt(l)){for(v=!1,l++;l<g&&(o=t.src.charCodeAt(l),i(o)||10===o);l++);if(l>=g)return!1;if(y=l,(c=t.md.helpers.parseLinkDestination(t.src,l,t.posMax)).ok){for(p=t.md.normalizeLink(c.str),t.md.validateLink(p)?l=c.pos:p="",y=l;l<g&&(o=t.src.charCodeAt(l),i(o)||10===o);l++);if(c=t.md.helpers.parseLinkTitle(t.src,l,t.posMax),l<g&&y!==l&&c.ok)for(f=c.str,l=c.pos;l<g&&(o=t.src.charCodeAt(l),i(o)||10===o);l++);}(l>=g||41!==t.src.charCodeAt(l))&&(v=!0),l++}if(v){if(void 0===t.env.references)return!1;if(l<g&&91===t.src.charCodeAt(l)?(y=l+1,(l=t.md.helpers.parseLinkLabel(t,l))>=0?a=t.src.slice(y,l++):l=s+1):l=s+1,a||(a=t.src.slice(u,s)),!(h=t.env.references[r(a)]))return t.pos=d,!1;p=h.href,f=h.title}return e||(t.pos=u,t.posMax=s,t.push("link_open","a",1).attrs=n=[["href",p]],f&&n.push(["title",f]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)),t.pos=l,t.posMax=g,!0}},2906:t=>{"use strict";var e=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;t.exports=function(t,n){var r,i,o,a,s,u,l;return!(!t.md.options.linkify||t.linkLevel>0||(r=t.pos)+3>t.posMax||58!==t.src.charCodeAt(r)||47!==t.src.charCodeAt(r+1)||47!==t.src.charCodeAt(r+2)||!(i=t.pending.match(e))||(o=i[1],!(a=t.md.linkify.matchAtStart(t.src.slice(r-o.length)))||(s=(s=a.url).replace(/\*+$/,""),u=t.md.normalizeLink(s),!t.md.validateLink(u)||(n||(t.pending=t.pending.slice(0,-o.length),(l=t.push("link_open","a",1)).attrs=[["href",u]],l.markup="linkify",l.info="auto",(l=t.push("text","",0)).content=t.md.normalizeLinkText(s),(l=t.push("link_close","a",-1)).markup="linkify",l.info="auto"),t.pos+=s.length-o.length,0))))}},3905:(t,e,n)=>{"use strict";var r=n(7022).isSpace;t.exports=function(t,e){var n,i,o,a=t.pos;if(10!==t.src.charCodeAt(a))return!1;if(n=t.pending.length-1,i=t.posMax,!e)if(n>=0&&32===t.pending.charCodeAt(n))if(n>=1&&32===t.pending.charCodeAt(n-1)){for(o=n-1;o>=1&&32===t.pending.charCodeAt(o-1);)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(a++;a<i&&r(t.src.charCodeAt(a));)a++;return t.pos=a,!0}},670:(t,e,n)=>{"use strict";var r=n(5872),i=n(7022).isWhiteSpace,o=n(7022).isPunctChar,a=n(7022).isMdAsciiPunct;function s(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}s.prototype.pushPending=function(){var t=new r("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t},s.prototype.push=function(t,e,n){this.pending&&this.pushPending();var i=new r(t,e,n),o=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),i.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(i),this.tokens_meta.push(o),i},s.prototype.scanDelims=function(t,e){var n,r,s,u,l,c,h,p,f,d=t,g=!0,y=!0,v=this.posMax,m=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;d<v&&this.src.charCodeAt(d)===m;)d++;return s=d-t,r=d<v?this.src.charCodeAt(d):32,h=a(n)||o(String.fromCharCode(n)),f=a(r)||o(String.fromCharCode(r)),c=i(n),(p=i(r))?g=!1:f&&(c||h||(g=!1)),c?y=!1:h&&(p||f||(y=!1)),e?(u=g,l=y):(u=g&&(!y||h),l=y&&(!g||f)),{can_open:u,can_close:l,length:s}},s.prototype.Token=r,t.exports=s},4814:t=>{"use strict";function e(t,e){var n,r,i,o,a,s=[],u=e.length;for(n=0;n<u;n++)126===(i=e[n]).marker&&-1!==i.end&&(o=e[i.end],(a=t.tokens[i.token]).type="s_open",a.tag="s",a.nesting=1,a.markup="~~",a.content="",(a=t.tokens[o.token]).type="s_close",a.tag="s",a.nesting=-1,a.markup="~~",a.content="","text"===t.tokens[o.token-1].type&&"~"===t.tokens[o.token-1].content&&s.push(o.token-1));for(;s.length;){for(r=(n=s.pop())+1;r<t.tokens.length&&"s_close"===t.tokens[r].type;)r++;n!==--r&&(a=t.tokens[r],t.tokens[r]=t.tokens[n],t.tokens[n]=a)}}t.exports.w=function(t,e){var n,r,i,o,a=t.pos,s=t.src.charCodeAt(a);if(e)return!1;if(126!==s)return!1;if(i=(r=t.scanDelims(t.pos,!0)).length,o=String.fromCharCode(s),i<2)return!1;for(i%2&&(t.push("text","",0).content=o,i--),n=0;n<i;n+=2)t.push("text","",0).content=o+o,t.delimiters.push({marker:s,length:0,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return t.pos+=r.length,!0},t.exports.g=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(e(t,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&e(t,r[n].delimiters)}},9941:t=>{"use strict";function e(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}t.exports=function(t,n){for(var r=t.pos;r<t.posMax&&!e(t.src.charCodeAt(r));)r++;return r!==t.pos&&(n||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)}},5872:t=>{"use strict";function e(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}e.prototype.attrIndex=function(t){var e,n,r;if(!this.attrs)return-1;for(n=0,r=(e=this.attrs).length;n<r;n++)if(e[n][0]===t)return n;return-1},e.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]},e.prototype.attrSet=function(t,e){var n=this.attrIndex(t),r=[t,e];n<0?this.attrPush(r):this.attrs[n]=r},e.prototype.attrGet=function(t){var e=this.attrIndex(t),n=null;return e>=0&&(n=this.attrs[e][1]),n},e.prototype.attrJoin=function(t,e){var n=this.attrIndex(t);n<0?this.attrPush([t,e]):this.attrs[n][1]=this.attrs[n][1]+" "+e},t.exports=e},3122:t=>{"use strict";var e={};function n(t,r){var i;return"string"!=typeof r&&(r=n.defaultChars),i=function(t){var n,r,i=e[t];if(i)return i;for(i=e[t]=[],n=0;n<128;n++)r=String.fromCharCode(n),i.push(r);for(n=0;n<t.length;n++)i[r=t.charCodeAt(n)]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return i}(r),t.replace(/(%[a-f0-9]{2})+/gi,(function(t){var e,n,r,o,a,s,u,l="";for(e=0,n=t.length;e<n;e+=3)(r=parseInt(t.slice(e+1,e+3),16))<128?l+=i[r]:192==(224&r)&&e+3<n&&128==(192&(o=parseInt(t.slice(e+4,e+6),16)))?(l+=(u=r<<6&1984|63&o)<128?"":String.fromCharCode(u),e+=3):224==(240&r)&&e+6<n&&(o=parseInt(t.slice(e+4,e+6),16),a=parseInt(t.slice(e+7,e+9),16),128==(192&o)&&128==(192&a))?(l+=(u=r<<12&61440|o<<6&4032|63&a)<2048||u>=55296&&u<=57343?"":String.fromCharCode(u),e+=6):240==(248&r)&&e+9<n&&(o=parseInt(t.slice(e+4,e+6),16),a=parseInt(t.slice(e+7,e+9),16),s=parseInt(t.slice(e+10,e+12),16),128==(192&o)&&128==(192&a)&&128==(192&s))?((u=r<<18&1835008|o<<12&258048|a<<6&4032|63&s)<65536||u>1114111?l+="":(u-=65536,l+=String.fromCharCode(55296+(u>>10),56320+(1023&u))),e+=9):l+="";return l}))}n.defaultChars=";/?:@&=+$,#",n.componentChars="",t.exports=n},729:t=>{"use strict";var e={};function n(t,r,i){var o,a,s,u,l,c="";for("string"!=typeof r&&(i=r,r=n.defaultChars),void 0===i&&(i=!0),l=function(t){var n,r,i=e[t];if(i)return i;for(i=e[t]=[],n=0;n<128;n++)r=String.fromCharCode(n),/^[0-9a-z]$/i.test(r)?i.push(r):i.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2));for(n=0;n<t.length;n++)i[t.charCodeAt(n)]=t[n];return i}(r),o=0,a=t.length;o<a;o++)if(s=t.charCodeAt(o),i&&37===s&&o+2<a&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3)))c+=t.slice(o,o+3),o+=2;else if(s<128)c+=l[s];else if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&o+1<a&&(u=t.charCodeAt(o+1))>=56320&&u<=57343){c+=encodeURIComponent(t[o]+t[o+1]),o++;continue}c+="%EF%BF%BD"}else c+=encodeURIComponent(t[o]);return c}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()",t.exports=n},2201:t=>{"use strict";t.exports=function(t){var e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&-1!==t.hostname.indexOf(":")?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",(e+=t.search||"")+(t.hash||"")}},8765:(t,e,n)=>{"use strict";t.exports.encode=n(729),t.exports.decode=n(3122),t.exports.format=n(2201),t.exports.parse=n(9553)},9553:t=>{"use strict";function e(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var n=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),a=["'"].concat(o),s=["%","/","?",";","#"].concat(a),u=["/","?","#"],l=/^[+a-z0-9A-Z_-]{0,63}$/,c=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},p={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};e.prototype.parse=function(t,e){var r,o,a,f,d,g=t;if(g=g.trim(),!e&&1===t.split("#").length){var y=i.exec(g);if(y)return this.pathname=y[1],y[2]&&(this.search=y[2]),this}var v=n.exec(g);if(v&&(a=(v=v[0]).toLowerCase(),this.protocol=v,g=g.substr(v.length)),(e||v||g.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(d="//"===g.substr(0,2))||v&&h[v]||(g=g.substr(2),this.slashes=!0)),!h[v]&&(d||v&&!p[v])){var m,_,b=-1;for(r=0;r<u.length;r++)-1!==(f=g.indexOf(u[r]))&&(-1===b||f<b)&&(b=f);for(-1!==(_=-1===b?g.lastIndexOf("@"):g.lastIndexOf("@",b))&&(m=g.slice(0,_),g=g.slice(_+1),this.auth=m),b=-1,r=0;r<s.length;r++)-1!==(f=g.indexOf(s[r]))&&(-1===b||f<b)&&(b=f);-1===b&&(b=g.length),":"===g[b-1]&&b--;var x=g.slice(0,b);g=g.slice(b),this.parseHost(x),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E){var w=this.hostname.split(/\./);for(r=0,o=w.length;r<o;r++){var C=w[r];if(C&&!C.match(l)){for(var N="",I=0,T=C.length;I<T;I++)C.charCodeAt(I)>127?N+="x":N+=C[I];if(!N.match(l)){var S=w.slice(0,r),A=w.slice(r+1),L=C.match(c);L&&(S.push(L[1]),A.unshift(L[2])),A.length&&(g=A.join(".")+g),this.hostname=S.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var D=g.indexOf("#");-1!==D&&(this.hash=g.substr(D),g=g.slice(0,D));var M=g.indexOf("?");return-1!==M&&(this.search=g.substr(M),g=g.slice(0,M)),g&&(this.pathname=g),p[a]&&this.hostname&&!this.pathname&&(this.pathname=""),this},e.prototype.parseHost=function(t){var e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},t.exports=function(t,n){if(t&&t instanceof e)return t;var r=new e;return r.parse(t,n),r}},3689:(t,e,n)=>{"use strict";n.r(e),n.d(e,{decode:()=>v,default:()=>x,encode:()=>m,toASCII:()=>b,toUnicode:()=>_,ucs2decode:()=>f,ucs2encode:()=>d});const r=2147483647,i=36,o=/^xn--/,a=/[^\0-\x7F]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},l=Math.floor,c=String.fromCharCode;function h(t){throw new RangeError(u[t])}function p(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]);const i=function(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}((t=t.replace(s,".")).split("."),e).join(".");return r+i}function f(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=t.charCodeAt(n++);56320==(64512&r)?e.push(((1023&i)<<10)+(1023&r)+65536):(e.push(i),n--)}else e.push(i)}return e}const d=t=>String.fromCodePoint(...t),g=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},y=function(t,e,n){let r=0;for(t=n?l(t/700):t>>1,t+=l(t/e);t>455;r+=i)t=l(t/35);return l(r+36*t/(t+38))},v=function(t){const e=[],n=t.length;let o=0,a=128,s=72,u=t.lastIndexOf("-");u<0&&(u=0);for(let n=0;n<u;++n)t.charCodeAt(n)>=128&&h("not-basic"),e.push(t.charCodeAt(n));for(let p=u>0?u+1:0;p<n;){const u=o;for(let e=1,a=i;;a+=i){p>=n&&h("invalid-input");const u=(c=t.charCodeAt(p++))>=48&&c<58?c-48+26:c>=65&&c<91?c-65:c>=97&&c<123?c-97:i;u>=i&&h("invalid-input"),u>l((r-o)/e)&&h("overflow"),o+=u*e;const f=a<=s?1:a>=s+26?26:a-s;if(u<f)break;const d=i-f;e>l(r/d)&&h("overflow"),e*=d}const f=e.length+1;s=y(o-u,f,0==u),l(o/f)>r-a&&h("overflow"),a+=l(o/f),o%=f,e.splice(o++,0,a)}var c;return String.fromCodePoint(...e)},m=function(t){const e=[],n=(t=f(t)).length;let o=128,a=0,s=72;for(const n of t)n<128&&e.push(c(n));const u=e.length;let p=u;for(u&&e.push("-");p<n;){let n=r;for(const e of t)e>=o&&e<n&&(n=e);const f=p+1;n-o>l((r-a)/f)&&h("overflow"),a+=(n-o)*f,o=n;for(const n of t)if(n<o&&++a>r&&h("overflow"),n===o){let t=a;for(let n=i;;n+=i){const r=n<=s?1:n>=s+26?26:n-s;if(t<r)break;const o=t-r,a=i-r;e.push(c(g(r+o%a,0))),t=l(o/a)}e.push(c(g(t,0))),s=y(a,f,p===u),a=0,++p}++a,++o}return e.join("")},_=function(t){return p(t,(function(t){return o.test(t)?v(t.slice(4).toLowerCase()):t}))},b=function(t){return p(t,(function(t){return a.test(t)?"xn--"+m(t):t}))},x={version:"2.1.0",ucs2:{decode:f,encode:d},decode:v,encode:m,toASCII:b,toUnicode:_}},9413:t=>{t.exports=/[\0-\x1F\x7F-\x9F]/},2326:t=>{t.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},3189:t=>{t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},5045:t=>{t.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},4205:(t,e,n)=>{"use strict";e.Any=n(9369),e.Cc=n(9413),e.Cf=n(2326),e.P=n(3189),e.Z=n(5045)},9369:t=>{t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},9323:t=>{"use strict";t.exports=JSON.parse('{"Aacute":"","aacute":"","Abreve":"","abreve":"","ac":"","acd":"","acE":"","Acirc":"","acirc":"","acute":"","Acy":"","acy":"","AElig":"","aelig":"","af":"","Afr":"","afr":"","Agrave":"","agrave":"","alefsym":"","aleph":"","Alpha":"","alpha":"","Amacr":"","amacr":"","amalg":"","amp":"&","AMP":"&","andand":"","And":"","and":"","andd":"","andslope":"","andv":"","ang":"","ange":"","angle":"","angmsdaa":"","angmsdab":"","angmsdac":"","angmsdad":"","angmsdae":"","angmsdaf":"","angmsdag":"","angmsdah":"","angmsd":"","angrt":"","angrtvb":"","angrtvbd":"","angsph":"","angst":"","angzarr":"","Aogon":"","aogon":"","Aopf":"","aopf":"","apacir":"","ap":"","apE":"","ape":"","apid":"","apos":"\'","ApplyFunction":"","approx":"","approxeq":"","Aring":"","aring":"","Ascr":"","ascr":"","Assign":"","ast":"*","asymp":"","asympeq":"","Atilde":"","atilde":"","Auml":"","auml":"","awconint":"","awint":"","backcong":"","backepsilon":"","backprime":"","backsim":"","backsimeq":"","Backslash":"","Barv":"","barvee":"","barwed":"","Barwed":"","barwedge":"","bbrk":"","bbrktbrk":"","bcong":"","Bcy":"","bcy":"","bdquo":"","becaus":"","because":"","Because":"","bemptyv":"","bepsi":"","bernou":"","Bernoullis":"","Beta":"","beta":"","beth":"","between":"","Bfr":"","bfr":"","bigcap":"","bigcirc":"","bigcup":"","bigodot":"","bigoplus":"","bigotimes":"","bigsqcup":"","bigstar":"","bigtriangledown":"","bigtriangleup":"","biguplus":"","bigvee":"","bigwedge":"","bkarow":"","blacklozenge":"","blacksquare":"","blacktriangle":"","blacktriangledown":"","blacktriangleleft":"","blacktriangleright":"","blank":"","blk12":"","blk14":"","blk34":"","block":"","bne":"=","bnequiv":"","bNot":"","bnot":"","Bopf":"","bopf":"","bot":"","bottom":"","bowtie":"","boxbox":"","boxdl":"","boxdL":"","boxDl":"","boxDL":"","boxdr":"","boxdR":"","boxDr":"","boxDR":"","boxh":"","boxH":"","boxhd":"","boxHd":"","boxhD":"","boxHD":"","boxhu":"","boxHu":"","boxhU":"","boxHU":"","boxminus":"","boxplus":"","boxtimes":"","boxul":"","boxuL":"","boxUl":"","boxUL":"","boxur":"","boxuR":"","boxUr":"","boxUR":"","boxv":"","boxV":"","boxvh":"","boxvH":"","boxVh":"","boxVH":"","boxvl":"","boxvL":"","boxVl":"","boxVL":"","boxvr":"","boxvR":"","boxVr":"","boxVR":"","bprime":"","breve":"","Breve":"","brvbar":"","bscr":"","Bscr":"","bsemi":"","bsim":"","bsime":"","bsolb":"","bsol":"\\\\","bsolhsub":"","bull":"","bullet":"","bump":"","bumpE":"","bumpe":"","Bumpeq":"","bumpeq":"","Cacute":"","cacute":"","capand":"","capbrcup":"","capcap":"","cap":"","Cap":"","capcup":"","capdot":"","CapitalDifferentialD":"","caps":"","caret":"","caron":"","Cayleys":"","ccaps":"","Ccaron":"","ccaron":"","Ccedil":"","ccedil":"","Ccirc":"","ccirc":"","Cconint":"","ccups":"","ccupssm":"","Cdot":"","cdot":"","cedil":"","Cedilla":"","cemptyv":"","cent":"","centerdot":"","CenterDot":"","cfr":"","Cfr":"","CHcy":"","chcy":"","check":"","checkmark":"","Chi":"","chi":"","circ":"","circeq":"","circlearrowleft":"","circlearrowright":"","circledast":"","circledcirc":"","circleddash":"","CircleDot":"","circledR":"","circledS":"","CircleMinus":"","CirclePlus":"","CircleTimes":"","cir":"","cirE":"","cire":"","cirfnint":"","cirmid":"","cirscir":"","ClockwiseContourIntegral":"","CloseCurlyDoubleQuote":"","CloseCurlyQuote":"","clubs":"","clubsuit":"","colon":":","Colon":"","Colone":"","colone":"","coloneq":"","comma":",","commat":"@","comp":"","compfn":"","complement":"","complexes":"","cong":"","congdot":"","Congruent":"","conint":"","Conint":"","ContourIntegral":"","copf":"","Copf":"","coprod":"","Coproduct":"","copy":"","COPY":"","copysr":"","CounterClockwiseContourIntegral":"","crarr":"","cross":"","Cross":"","Cscr":"","cscr":"","csub":"","csube":"","csup":"","csupe":"","ctdot":"","cudarrl":"","cudarrr":"","cuepr":"","cuesc":"","cularr":"","cularrp":"","cupbrcap":"","cupcap":"","CupCap":"","cup":"","Cup":"","cupcup":"","cupdot":"","cupor":"","cups":"","curarr":"","curarrm":"","curlyeqprec":"","curlyeqsucc":"","curlyvee":"","curlywedge":"","curren":"","curvearrowleft":"","curvearrowright":"","cuvee":"","cuwed":"","cwconint":"","cwint":"","cylcty":"","dagger":"","Dagger":"","daleth":"","darr":"","Darr":"","dArr":"","dash":"","Dashv":"","dashv":"","dbkarow":"","dblac":"","Dcaron":"","dcaron":"","Dcy":"","dcy":"","ddagger":"","ddarr":"","DD":"","dd":"","DDotrahd":"","ddotseq":"","deg":"","Del":"","Delta":"","delta":"","demptyv":"","dfisht":"","Dfr":"","dfr":"","dHar":"","dharl":"","dharr":"","DiacriticalAcute":"","DiacriticalDot":"","DiacriticalDoubleAcute":"","DiacriticalGrave":"`","DiacriticalTilde":"","diam":"","diamond":"","Diamond":"","diamondsuit":"","diams":"","die":"","DifferentialD":"","digamma":"","disin":"","div":"","divide":"","divideontimes":"","divonx":"","DJcy":"","djcy":"","dlcorn":"","dlcrop":"","dollar":"$","Dopf":"","dopf":"","Dot":"","dot":"","DotDot":"","doteq":"","doteqdot":"","DotEqual":"","dotminus":"","dotplus":"","dotsquare":"","doublebarwedge":"","DoubleContourIntegral":"","DoubleDot":"","DoubleDownArrow":"","DoubleLeftArrow":"","DoubleLeftRightArrow":"","DoubleLeftTee":"","DoubleLongLeftArrow":"","DoubleLongLeftRightArrow":"","DoubleLongRightArrow":"","DoubleRightArrow":"","DoubleRightTee":"","DoubleUpArrow":"","DoubleUpDownArrow":"","DoubleVerticalBar":"","DownArrowBar":"","downarrow":"","DownArrow":"","Downarrow":"","DownArrowUpArrow":"","DownBreve":"","downdownarrows":"","downharpoonleft":"","downharpoonright":"","DownLeftRightVector":"","DownLeftTeeVector":"","DownLeftVectorBar":"","DownLeftVector":"","DownRightTeeVector":"","DownRightVectorBar":"","DownRightVector":"","DownTeeArrow":"","DownTee":"","drbkarow":"","drcorn":"","drcrop":"","Dscr":"","dscr":"","DScy":"","dscy":"","dsol":"","Dstrok":"","dstrok":"","dtdot":"","dtri":"","dtrif":"","duarr":"","duhar":"","dwangle":"","DZcy":"","dzcy":"","dzigrarr":"","Eacute":"","eacute":"","easter":"","Ecaron":"","ecaron":"","Ecirc":"","ecirc":"","ecir":"","ecolon":"","Ecy":"","ecy":"","eDDot":"","Edot":"","edot":"","eDot":"","ee":"","efDot":"","Efr":"","efr":"","eg":"","Egrave":"","egrave":"","egs":"","egsdot":"","el":"","Element":"","elinters":"","ell":"","els":"","elsdot":"","Emacr":"","emacr":"","empty":"","emptyset":"","EmptySmallSquare":"","emptyv":"","EmptyVerySmallSquare":"","emsp13":"","emsp14":"","emsp":"","ENG":"","eng":"","ensp":"","Eogon":"","eogon":"","Eopf":"","eopf":"","epar":"","eparsl":"","eplus":"","epsi":"","Epsilon":"","epsilon":"","epsiv":"","eqcirc":"","eqcolon":"","eqsim":"","eqslantgtr":"","eqslantless":"","Equal":"","equals":"=","EqualTilde":"","equest":"","Equilibrium":"","equiv":"","equivDD":"","eqvparsl":"","erarr":"","erDot":"","escr":"","Escr":"","esdot":"","Esim":"","esim":"","Eta":"","eta":"","ETH":"","eth":"","Euml":"","euml":"","euro":"","excl":"!","exist":"","Exists":"","expectation":"","exponentiale":"","ExponentialE":"","fallingdotseq":"","Fcy":"","fcy":"","female":"","ffilig":"","fflig":"","ffllig":"","Ffr":"","ffr":"","filig":"","FilledSmallSquare":"","FilledVerySmallSquare":"","fjlig":"fj","flat":"","fllig":"","fltns":"","fnof":"","Fopf":"","fopf":"","forall":"","ForAll":"","fork":"","forkv":"","Fouriertrf":"","fpartint":"","frac12":"","frac13":"","frac14":"","frac15":"","frac16":"","frac18":"","frac23":"","frac25":"","frac34":"","frac35":"","frac38":"","frac45":"","frac56":"","frac58":"","frac78":"","frasl":"","frown":"","fscr":"","Fscr":"","gacute":"","Gamma":"","gamma":"","Gammad":"","gammad":"","gap":"","Gbreve":"","gbreve":"","Gcedil":"","Gcirc":"","gcirc":"","Gcy":"","gcy":"","Gdot":"","gdot":"","ge":"","gE":"","gEl":"","gel":"","geq":"","geqq":"","geqslant":"","gescc":"","ges":"","gesdot":"","gesdoto":"","gesdotol":"","gesl":"","gesles":"","Gfr":"","gfr":"","gg":"","Gg":"","ggg":"","gimel":"","GJcy":"","gjcy":"","gla":"","gl":"","glE":"","glj":"","gnap":"","gnapprox":"","gne":"","gnE":"","gneq":"","gneqq":"","gnsim":"","Gopf":"","gopf":"","grave":"`","GreaterEqual":"","GreaterEqualLess":"","GreaterFullEqual":"","GreaterGreater":"","GreaterLess":"","GreaterSlantEqual":"","GreaterTilde":"","Gscr":"","gscr":"","gsim":"","gsime":"","gsiml":"","gtcc":"","gtcir":"","gt":">","GT":">","Gt":"","gtdot":"","gtlPar":"","gtquest":"","gtrapprox":"","gtrarr":"","gtrdot":"","gtreqless":"","gtreqqless":"","gtrless":"","gtrsim":"","gvertneqq":"","gvnE":"","Hacek":"","hairsp":"","half":"","hamilt":"","HARDcy":"","hardcy":"","harrcir":"","harr":"","hArr":"","harrw":"","Hat":"^","hbar":"","Hcirc":"","hcirc":"","hearts":"","heartsuit":"","hellip":"","hercon":"","hfr":"","Hfr":"","HilbertSpace":"","hksearow":"","hkswarow":"","hoarr":"","homtht":"","hookleftarrow":"","hookrightarrow":"","hopf":"","Hopf":"","horbar":"","HorizontalLine":"","hscr":"","Hscr":"","hslash":"","Hstrok":"","hstrok":"","HumpDownHump":"","HumpEqual":"","hybull":"","hyphen":"","Iacute":"","iacute":"","ic":"","Icirc":"","icirc":"","Icy":"","icy":"","Idot":"","IEcy":"","iecy":"","iexcl":"","iff":"","ifr":"","Ifr":"","Igrave":"","igrave":"","ii":"","iiiint":"","iiint":"","iinfin":"","iiota":"","IJlig":"","ijlig":"","Imacr":"","imacr":"","image":"","ImaginaryI":"","imagline":"","imagpart":"","imath":"","Im":"","imof":"","imped":"","Implies":"","incare":"","in":"","infin":"","infintie":"","inodot":"","intcal":"","int":"","Int":"","integers":"","Integral":"","intercal":"","Intersection":"","intlarhk":"","intprod":"","InvisibleComma":"","InvisibleTimes":"","IOcy":"","iocy":"","Iogon":"","iogon":"","Iopf":"","iopf":"","Iota":"","iota":"","iprod":"","iquest":"","iscr":"","Iscr":"","isin":"","isindot":"","isinE":"","isins":"","isinsv":"","isinv":"","it":"","Itilde":"","itilde":"","Iukcy":"","iukcy":"","Iuml":"","iuml":"","Jcirc":"","jcirc":"","Jcy":"","jcy":"","Jfr":"","jfr":"","jmath":"","Jopf":"","jopf":"","Jscr":"","jscr":"","Jsercy":"","jsercy":"","Jukcy":"","jukcy":"","Kappa":"","kappa":"","kappav":"","Kcedil":"","kcedil":"","Kcy":"","kcy":"","Kfr":"","kfr":"","kgreen":"","KHcy":"","khcy":"","KJcy":"","kjcy":"","Kopf":"","kopf":"","Kscr":"","kscr":"","lAarr":"","Lacute":"","lacute":"","laemptyv":"","lagran":"","Lambda":"","lambda":"","lang":"","Lang":"","langd":"","langle":"","lap":"","Laplacetrf":"","laquo":"","larrb":"","larrbfs":"","larr":"","Larr":"","lArr":"","larrfs":"","larrhk":"","larrlp":"","larrpl":"","larrsim":"","larrtl":"","latail":"","lAtail":"","lat":"","late":"","lates":"","lbarr":"","lBarr":"","lbbrk":"","lbrace":"{","lbrack":"[","lbrke":"","lbrksld":"","lbrkslu":"","Lcaron":"","lcaron":"","Lcedil":"","lcedil":"","lceil":"","lcub":"{","Lcy":"","lcy":"","ldca":"","ldquo":"","ldquor":"","ldrdhar":"","ldrushar":"","ldsh":"","le":"","lE":"","LeftAngleBracket":"","LeftArrowBar":"","leftarrow":"","LeftArrow":"","Leftarrow":"","LeftArrowRightArrow":"","leftarrowtail":"","LeftCeiling":"","LeftDoubleBracket":"","LeftDownTeeVector":"","LeftDownVectorBar":"","LeftDownVector":"","LeftFloor":"","leftharpoondown":"","leftharpoonup":"","leftleftarrows":"","leftrightarrow":"","LeftRightArrow":"","Leftrightarrow":"","leftrightarrows":"","leftrightharpoons":"","leftrightsquigarrow":"","LeftRightVector":"","LeftTeeArrow":"","LeftTee":"","LeftTeeVector":"","leftthreetimes":"","LeftTriangleBar":"","LeftTriangle":"","LeftTriangleEqual":"","LeftUpDownVector":"","LeftUpTeeVector":"","LeftUpVectorBar":"","LeftUpVector":"","LeftVectorBar":"","LeftVector":"","lEg":"","leg":"","leq":"","leqq":"","leqslant":"","lescc":"","les":"","lesdot":"","lesdoto":"","lesdotor":"","lesg":"","lesges":"","lessapprox":"","lessdot":"","lesseqgtr":"","lesseqqgtr":"","LessEqualGreater":"","LessFullEqual":"","LessGreater":"","lessgtr":"","LessLess":"","lesssim":"","LessSlantEqual":"","LessTilde":"","lfisht":"","lfloor":"","Lfr":"","lfr":"","lg":"","lgE":"","lHar":"","lhard":"","lharu":"","lharul":"","lhblk":"","LJcy":"","ljcy":"","llarr":"","ll":"","Ll":"","llcorner":"","Lleftarrow":"","llhard":"","lltri":"","Lmidot":"","lmidot":"","lmoustache":"","lmoust":"","lnap":"","lnapprox":"","lne":"","lnE":"","lneq":"","lneqq":"","lnsim":"","loang":"","loarr":"","lobrk":"","longleftarrow":"","LongLeftArrow":"","Longleftarrow":"","longleftrightarrow":"","LongLeftRightArrow":"","Longleftrightarrow":"","longmapsto":"","longrightarrow":"","LongRightArrow":"","Longrightarrow":"","looparrowleft":"","looparrowright":"","lopar":"","Lopf":"","lopf":"","loplus":"","lotimes":"","lowast":"","lowbar":"_","LowerLeftArrow":"","LowerRightArrow":"","loz":"","lozenge":"","lozf":"","lpar":"(","lparlt":"","lrarr":"","lrcorner":"","lrhar":"","lrhard":"","lrm":"","lrtri":"","lsaquo":"","lscr":"","Lscr":"","lsh":"","Lsh":"","lsim":"","lsime":"","lsimg":"","lsqb":"[","lsquo":"","lsquor":"","Lstrok":"","lstrok":"","ltcc":"","ltcir":"","lt":"<","LT":"<","Lt":"","ltdot":"","lthree":"","ltimes":"","ltlarr":"","ltquest":"","ltri":"","ltrie":"","ltrif":"","ltrPar":"","lurdshar":"","luruhar":"","lvertneqq":"","lvnE":"","macr":"","male":"","malt":"","maltese":"","Map":"","map":"","mapsto":"","mapstodown":"","mapstoleft":"","mapstoup":"","marker":"","mcomma":"","Mcy":"","mcy":"","mdash":"","mDDot":"","measuredangle":"","MediumSpace":"","Mellintrf":"","Mfr":"","mfr":"","mho":"","micro":"","midast":"*","midcir":"","mid":"","middot":"","minusb":"","minus":"","minusd":"","minusdu":"","MinusPlus":"","mlcp":"","mldr":"","mnplus":"","models":"","Mopf":"","mopf":"","mp":"","mscr":"","Mscr":"","mstpos":"","Mu":"","mu":"","multimap":"","mumap":"","nabla":"","Nacute":"","nacute":"","nang":"","nap":"","napE":"","napid":"","napos":"","napprox":"","natural":"","naturals":"","natur":"","nbsp":"","nbump":"","nbumpe":"","ncap":"","Ncaron":"","ncaron":"","Ncedil":"","ncedil":"","ncong":"","ncongdot":"","ncup":"","Ncy":"","ncy":"","ndash":"","nearhk":"","nearr":"","neArr":"","nearrow":"","ne":"","nedot":"","NegativeMediumSpace":"","NegativeThickSpace":"","NegativeThinSpace":"","NegativeVeryThinSpace":"","nequiv":"","nesear":"","nesim":"","NestedGreaterGreater":"","NestedLessLess":"","NewLine":"\\n","nexist":"","nexists":"","Nfr":"","nfr":"","ngE":"","nge":"","ngeq":"","ngeqq":"","ngeqslant":"","nges":"","nGg":"","ngsim":"","nGt":"","ngt":"","ngtr":"","nGtv":"","nharr":"","nhArr":"","nhpar":"","ni":"","nis":"","nisd":"","niv":"","NJcy":"","njcy":"","nlarr":"","nlArr":"","nldr":"","nlE":"","nle":"","nleftarrow":"","nLeftarrow":"","nleftrightarrow":"","nLeftrightarrow":"","nleq":"","nleqq":"","nleqslant":"","nles":"","nless":"","nLl":"","nlsim":"","nLt":"","nlt":"","nltri":"","nltrie":"","nLtv":"","nmid":"","NoBreak":"","NonBreakingSpace":"","nopf":"","Nopf":"","Not":"","not":"","NotCongruent":"","NotCupCap":"","NotDoubleVerticalBar":"","NotElement":"","NotEqual":"","NotEqualTilde":"","NotExists":"","NotGreater":"","NotGreaterEqual":"","NotGreaterFullEqual":"","NotGreaterGreater":"","NotGreaterLess":"","NotGreaterSlantEqual":"","NotGreaterTilde":"","NotHumpDownHump":"","NotHumpEqual":"","notin":"","notindot":"","notinE":"","notinva":"","notinvb":"","notinvc":"","NotLeftTriangleBar":"","NotLeftTriangle":"","NotLeftTriangleEqual":"","NotLess":"","NotLessEqual":"","NotLessGreater":"","NotLessLess":"","NotLessSlantEqual":"","NotLessTilde":"","NotNestedGreaterGreater":"","NotNestedLessLess":"","notni":"","notniva":"","notnivb":"","notnivc":"","NotPrecedes":"","NotPrecedesEqual":"","NotPrecedesSlantEqual":"","NotReverseElement":"","NotRightTriangleBar":"","NotRightTriangle":"","NotRightTriangleEqual":"","NotSquareSubset":"","NotSquareSubsetEqual":"","NotSquareSuperset":"","NotSquareSupersetEqual":"","NotSubset":"","NotSubsetEqual":"","NotSucceeds":"","NotSucceedsEqual":"","NotSucceedsSlantEqual":"","NotSucceedsTilde":"","NotSuperset":"","NotSupersetEqual":"","NotTilde":"","NotTildeEqual":"","NotTildeFullEqual":"","NotTildeTilde":"","NotVerticalBar":"","nparallel":"","npar":"","nparsl":"","npart":"","npolint":"","npr":"","nprcue":"","nprec":"","npreceq":"","npre":"","nrarrc":"","nrarr":"","nrArr":"","nrarrw":"","nrightarrow":"","nRightarrow":"","nrtri":"","nrtrie":"","nsc":"","nsccue":"","nsce":"","Nscr":"","nscr":"","nshortmid":"","nshortparallel":"","nsim":"","nsime":"","nsimeq":"","nsmid":"","nspar":"","nsqsube":"","nsqsupe":"","nsub":"","nsubE":"","nsube":"","nsubset":"","nsubseteq":"","nsubseteqq":"","nsucc":"","nsucceq":"","nsup":"","nsupE":"","nsupe":"","nsupset":"","nsupseteq":"","nsupseteqq":"","ntgl":"","Ntilde":"","ntilde":"","ntlg":"","ntriangleleft":"","ntrianglelefteq":"","ntriangleright":"","ntrianglerighteq":"","Nu":"","nu":"","num":"#","numero":"","numsp":"","nvap":"","nvdash":"","nvDash":"","nVdash":"","nVDash":"","nvge":"","nvgt":">","nvHarr":"","nvinfin":"","nvlArr":"","nvle":"","nvlt":"<","nvltrie":"","nvrArr":"","nvrtrie":"","nvsim":"","nwarhk":"","nwarr":"","nwArr":"","nwarrow":"","nwnear":"","Oacute":"","oacute":"","oast":"","Ocirc":"","ocirc":"","ocir":"","Ocy":"","ocy":"","odash":"","Odblac":"","odblac":"","odiv":"","odot":"","odsold":"","OElig":"","oelig":"","ofcir":"","Ofr":"","ofr":"","ogon":"","Ograve":"","ograve":"","ogt":"","ohbar":"","ohm":"","oint":"","olarr":"","olcir":"","olcross":"","oline":"","olt":"","Omacr":"","omacr":"","Omega":"","omega":"","Omicron":"","omicron":"","omid":"","ominus":"","Oopf":"","oopf":"","opar":"","OpenCurlyDoubleQuote":"","OpenCurlyQuote":"","operp":"","oplus":"","orarr":"","Or":"","or":"","ord":"","order":"","orderof":"","ordf":"","ordm":"","origof":"","oror":"","orslope":"","orv":"","oS":"","Oscr":"","oscr":"","Oslash":"","oslash":"","osol":"","Otilde":"","otilde":"","otimesas":"","Otimes":"","otimes":"","Ouml":"","ouml":"","ovbar":"","OverBar":"","OverBrace":"","OverBracket":"","OverParenthesis":"","para":"","parallel":"","par":"","parsim":"","parsl":"","part":"","PartialD":"","Pcy":"","pcy":"","percnt":"%","period":".","permil":"","perp":"","pertenk":"","Pfr":"","pfr":"","Phi":"","phi":"","phiv":"","phmmat":"","phone":"","Pi":"","pi":"","pitchfork":"","piv":"","planck":"","planckh":"","plankv":"","plusacir":"","plusb":"","pluscir":"","plus":"+","plusdo":"","plusdu":"","pluse":"","PlusMinus":"","plusmn":"","plussim":"","plustwo":"","pm":"","Poincareplane":"","pointint":"","popf":"","Popf":"","pound":"","prap":"","Pr":"","pr":"","prcue":"","precapprox":"","prec":"","preccurlyeq":"","Precedes":"","PrecedesEqual":"","PrecedesSlantEqual":"","PrecedesTilde":"","preceq":"","precnapprox":"","precneqq":"","precnsim":"","pre":"","prE":"","precsim":"","prime":"","Prime":"","primes":"","prnap":"","prnE":"","prnsim":"","prod":"","Product":"","profalar":"","profline":"","profsurf":"","prop":"","Proportional":"","Proportion":"","propto":"","prsim":"","prurel":"","Pscr":"","pscr":"","Psi":"","psi":"","puncsp":"","Qfr":"","qfr":"","qint":"","qopf":"","Qopf":"","qprime":"","Qscr":"","qscr":"","quaternions":"","quatint":"","quest":"?","questeq":"","quot":"\\"","QUOT":"\\"","rAarr":"","race":"","Racute":"","racute":"","radic":"","raemptyv":"","rang":"","Rang":"","rangd":"","range":"","rangle":"","raquo":"","rarrap":"","rarrb":"","rarrbfs":"","rarrc":"","rarr":"","Rarr":"","rArr":"","rarrfs":"","rarrhk":"","rarrlp":"","rarrpl":"","rarrsim":"","Rarrtl":"","rarrtl":"","rarrw":"","ratail":"","rAtail":"","ratio":"","rationals":"","rbarr":"","rBarr":"","RBarr":"","rbbrk":"","rbrace":"}","rbrack":"]","rbrke":"","rbrksld":"","rbrkslu":"","Rcaron":"","rcaron":"","Rcedil":"","rcedil":"","rceil":"","rcub":"}","Rcy":"","rcy":"","rdca":"","rdldhar":"","rdquo":"","rdquor":"","rdsh":"","real":"","realine":"","realpart":"","reals":"","Re":"","rect":"","reg":"","REG":"","ReverseElement":"","ReverseEquilibrium":"","ReverseUpEquilibrium":"","rfisht":"","rfloor":"","rfr":"","Rfr":"","rHar":"","rhard":"","rharu":"","rharul":"","Rho":"","rho":"","rhov":"","RightAngleBracket":"","RightArrowBar":"","rightarrow":"","RightArrow":"","Rightarrow":"","RightArrowLeftArrow":"","rightarrowtail":"","RightCeiling":"","RightDoubleBracket":"","RightDownTeeVector":"","RightDownVectorBar":"","RightDownVector":"","RightFloor":"","rightharpoondown":"","rightharpoonup":"","rightleftarrows":"","rightleftharpoons":"","rightrightarrows":"","rightsquigarrow":"","RightTeeArrow":"","RightTee":"","RightTeeVector":"","rightthreetimes":"","RightTriangleBar":"","RightTriangle":"","RightTriangleEqual":"","RightUpDownVector":"","RightUpTeeVector":"","RightUpVectorBar":"","RightUpVector":"","RightVectorBar":"","RightVector":"","ring":"","risingdotseq":"","rlarr":"","rlhar":"","rlm":"","rmoustache":"","rmoust":"","rnmid":"","roang":"","roarr":"","robrk":"","ropar":"","ropf":"","Ropf":"","roplus":"","rotimes":"","RoundImplies":"","rpar":")","rpargt":"","rppolint":"","rrarr":"","Rrightarrow":"","rsaquo":"","rscr":"","Rscr":"","rsh":"","Rsh":"","rsqb":"]","rsquo":"","rsquor":"","rthree":"","rtimes":"","rtri":"","rtrie":"","rtrif":"","rtriltri":"","RuleDelayed":"","ruluhar":"","rx":"","Sacute":"","sacute":"","sbquo":"","scap":"","Scaron":"","scaron":"","Sc":"","sc":"","sccue":"","sce":"","scE":"","Scedil":"","scedil":"","Scirc":"","scirc":"","scnap":"","scnE":"","scnsim":"","scpolint":"","scsim":"","Scy":"","scy":"","sdotb":"","sdot":"","sdote":"","searhk":"","searr":"","seArr":"","searrow":"","sect":"","semi":";","seswar":"","setminus":"","setmn":"","sext":"","Sfr":"","sfr":"","sfrown":"","sharp":"","SHCHcy":"","shchcy":"","SHcy":"","shcy":"","ShortDownArrow":"","ShortLeftArrow":"","shortmid":"","shortparallel":"","ShortRightArrow":"","ShortUpArrow":"","shy":"","Sigma":"","sigma":"","sigmaf":"","sigmav":"","sim":"","simdot":"","sime":"","simeq":"","simg":"","simgE":"","siml":"","simlE":"","simne":"","simplus":"","simrarr":"","slarr":"","SmallCircle":"","smallsetminus":"","smashp":"","smeparsl":"","smid":"","smile":"","smt":"","smte":"","smtes":"","SOFTcy":"","softcy":"","solbar":"","solb":"","sol":"/","Sopf":"","sopf":"","spades":"","spadesuit":"","spar":"","sqcap":"","sqcaps":"","sqcup":"","sqcups":"","Sqrt":"","sqsub":"","sqsube":"","sqsubset":"","sqsubseteq":"","sqsup":"","sqsupe":"","sqsupset":"","sqsupseteq":"","square":"","Square":"","SquareIntersection":"","SquareSubset":"","SquareSubsetEqual":"","SquareSuperset":"","SquareSupersetEqual":"","SquareUnion":"","squarf":"","squ":"","squf":"","srarr":"","Sscr":"","sscr":"","ssetmn":"","ssmile":"","sstarf":"","Star":"","star":"","starf":"","straightepsilon":"","straightphi":"","strns":"","sub":"","Sub":"","subdot":"","subE":"","sube":"","subedot":"","submult":"","subnE":"","subne":"","subplus":"","subrarr":"","subset":"","Subset":"","subseteq":"","subseteqq":"","SubsetEqual":"","subsetneq":"","subsetneqq":"","subsim":"","subsub":"","subsup":"","succapprox":"","succ":"","succcurlyeq":"","Succeeds":"","SucceedsEqual":"","SucceedsSlantEqual":"","SucceedsTilde":"","succeq":"","succnapprox":"","succneqq":"","succnsim":"","succsim":"","SuchThat":"","sum":"","Sum":"","sung":"","sup1":"","sup2":"","sup3":"","sup":"","Sup":"","supdot":"","supdsub":"","supE":"","supe":"","supedot":"","Superset":"","SupersetEqual":"","suphsol":"","suphsub":"","suplarr":"","supmult":"","supnE":"","supne":"","supplus":"","supset":"","Supset":"","supseteq":"","supseteqq":"","supsetneq":"","supsetneqq":"","supsim":"","supsub":"","supsup":"","swarhk":"","swarr":"","swArr":"","swarrow":"","swnwar":"","szlig":"","Tab":"\\t","target":"","Tau":"","tau":"","tbrk":"","Tcaron":"","tcaron":"","Tcedil":"","tcedil":"","Tcy":"","tcy":"","tdot":"","telrec":"","Tfr":"","tfr":"","there4":"","therefore":"","Therefore":"","Theta":"","theta":"","thetasym":"","thetav":"","thickapprox":"","thicksim":"","ThickSpace":"","ThinSpace":"","thinsp":"","thkap":"","thksim":"","THORN":"","thorn":"","tilde":"","Tilde":"","TildeEqual":"","TildeFullEqual":"","TildeTilde":"","timesbar":"","timesb":"","times":"","timesd":"","tint":"","toea":"","topbot":"","topcir":"","top":"","Topf":"","topf":"","topfork":"","tosa":"","tprime":"","trade":"","TRADE":"","triangle":"","triangledown":"","triangleleft":"","trianglelefteq":"","triangleq":"","triangleright":"","trianglerighteq":"","tridot":"","trie":"","triminus":"","TripleDot":"","triplus":"","trisb":"","tritime":"","trpezium":"","Tscr":"","tscr":"","TScy":"","tscy":"","TSHcy":"","tshcy":"","Tstrok":"","tstrok":"","twixt":"","twoheadleftarrow":"","twoheadrightarrow":"","Uacute":"","uacute":"","uarr":"","Uarr":"","uArr":"","Uarrocir":"","Ubrcy":"","ubrcy":"","Ubreve":"","ubreve":"","Ucirc":"","ucirc":"","Ucy":"","ucy":"","udarr":"","Udblac":"","udblac":"","udhar":"","ufisht":"","Ufr":"","ufr":"","Ugrave":"","ugrave":"","uHar":"","uharl":"","uharr":"","uhblk":"","ulcorn":"","ulcorner":"","ulcrop":"","ultri":"","Umacr":"","umacr":"","uml":"","UnderBar":"_","UnderBrace":"","UnderBracket":"","UnderParenthesis":"","Union":"","UnionPlus":"","Uogon":"","uogon":"","Uopf":"","uopf":"","UpArrowBar":"","uparrow":"","UpArrow":"","Uparrow":"","UpArrowDownArrow":"","updownarrow":"","UpDownArrow":"","Updownarrow":"","UpEquilibrium":"","upharpoonleft":"","upharpoonright":"","uplus":"","UpperLeftArrow":"","UpperRightArrow":"","upsi":"","Upsi":"","upsih":"","Upsilon":"","upsilon":"","UpTeeArrow":"","UpTee":"","upuparrows":"","urcorn":"","urcorner":"","urcrop":"","Uring":"","uring":"","urtri":"","Uscr":"","uscr":"","utdot":"","Utilde":"","utilde":"","utri":"","utrif":"","uuarr":"","Uuml":"","uuml":"","uwangle":"","vangrt":"","varepsilon":"","varkappa":"","varnothing":"","varphi":"","varpi":"","varpropto":"","varr":"","vArr":"","varrho":"","varsigma":"","varsubsetneq":"","varsubsetneqq":"","varsupsetneq":"","varsupsetneqq":"","vartheta":"","vartriangleleft":"","vartriangleright":"","vBar":"","Vbar":"","vBarv":"","Vcy":"","vcy":"","vdash":"","vDash":"","Vdash":"","VDash":"","Vdashl":"","veebar":"","vee":"","Vee":"","veeeq":"","vellip":"","verbar":"|","Verbar":"","vert":"|","Vert":"","VerticalBar":"","VerticalLine":"|","VerticalSeparator":"","VerticalTilde":"","VeryThinSpace":"","Vfr":"","vfr":"","vltri":"","vnsub":"","vnsup":"","Vopf":"","vopf":"","vprop":"","vrtri":"","Vscr":"","vscr":"","vsubnE":"","vsubne":"","vsupnE":"","vsupne":"","Vvdash":"","vzigzag":"","Wcirc":"","wcirc":"","wedbar":"","wedge":"","Wedge":"","wedgeq":"","weierp":"","Wfr":"","wfr":"","Wopf":"","wopf":"","wp":"","wr":"","wreath":"","Wscr":"","wscr":"","xcap":"","xcirc":"","xcup":"","xdtri":"","Xfr":"","xfr":"","xharr":"","xhArr":"","Xi":"","xi":"","xlarr":"","xlArr":"","xmap":"","xnis":"","xodot":"","Xopf":"","xopf":"","xoplus":"","xotime":"","xrarr":"","xrArr":"","Xscr":"","xscr":"","xsqcup":"","xuplus":"","xutri":"","xvee":"","xwedge":"","Yacute":"","yacute":"","YAcy":"","yacy":"","Ycirc":"","ycirc":"","Ycy":"","ycy":"","yen":"","Yfr":"","yfr":"","YIcy":"","yicy":"","Yopf":"","yopf":"","Yscr":"","yscr":"","YUcy":"","yucy":"","yuml":"","Yuml":"","Zacute":"","zacute":"","Zcaron":"","zcaron":"","Zcy":"","zcy":"","Zdot":"","zdot":"","zeetrf":"","ZeroWidthSpace":"","Zeta":"","zeta":"","zfr":"","Zfr":"","ZHcy":"","zhcy":"","zigrarr":"","zopf":"","Zopf":"","Zscr":"","zscr":"","zwj":"","zwnj":""}')}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(9058),e=__webpack_require__.n(t),n=__webpack_require__(6486),r=__webpack_require__.n(n),i=__webpack_require__(474),o=__webpack_require__.n(i),a=__webpack_require__(5466),s=__webpack_require__.n(a),u=__webpack_require__(4867),l=__webpack_require__.n(u),c=__webpack_require__(9764),h=__webpack_require__.n(c);const p={Actor:"fa-users",Artifact:"fa-archive",DetectionRule:"fa-magic",Device:"fa-server",Event:"fa-bolt",Observable:"fa-bullseye",EntityRelation:"fa-link",PiRogueExperiment:"fa-flask",Threat:"fa-bug",DataFragment:"fa-code"},f={Actor:"",Artifact:"",DetectionRule:"",Device:"",Event:"",Observable:"",EntityRelation:"",PiRogueExperiment:"",Threat:"",DataFragment:""},d={Actor:"#8dd3c7",Artifact:"#ffffb3",DetectionRule:"#bebada",Device:"#fb8072",Event:"#80b1d3",Observable:"#fdb462",EntityRelation:"#b3de69",PiRogueExperiment:"#fccde5",Threat:"#d9d9d9",DataFragment:"#bc80bd"},g=(t,e,n)=>(n=n||e,$(`<button class="btn btn-sm btn-outline-secondary bg-light" title="${n}">\n      <i class="fa ${t}" aria-hidden="true"></i>\n      <span class="label">${e}</span>\n    </button>`));var y=__webpack_require__(5867),v=__webpack_require__(9980),m=__webpack_require__.n(v);window.Markdown=new(m())({breaks:!0}),e().use(o()),e().use(s()),e().use(h()),e().use(l());let _=[],b=r().memoize((function(t,e){let n=`${f[e]} ${t.data("name")}`;const r=document.createElement("canvas").getContext("2d"),i=t.style("font-style").strValue,o=t.style("font-size").pfValue+"px",a=t.style("font-family").strValue,s=t.style("font-weight").strValue;r.font=i+" "+s+" "+o+" "+a;let u=r.measureText(n),l=u.width+8;if(t.data("type")){let e=t.cy().data("all-styles")[t.data("super_type")].types[t.data("type")].name;u=r.measureText(`${e}    `),l=Math.max(l,u.width),n+=`\n${e}`}return{svgTxt:n,width:l}}),(t=>`${t.id()}-${t.data("name")}-${t.data("type")}`));_.push({selector:"node",style:{"background-blacken":-.5,shape:"round-rectangle","border-width":3,"font-family":"sans-serif, ForkAwesome","font-size":"10px","text-halign":"center","text-valign":"center","text-wrap":"wrap"}});for(let t in p)_.push({selector:`node.${t}`,style:{"background-color":d[t],"border-color":d[t],label:e=>b(e,t).svgTxt,width:e=>b(e,t).width}});_.push({selector:"node:selected",style:{"background-color":"#7122da","border-color":"#7122da","background-blacken":0,color:"white"}}),_.push({selector:"edge",style:{"target-arrow-shape":"vee",width:1,label:"data(name)","text-halign":"center","text-valign":"center","text-outline-color":"white","text-outline-opacity":1,"text-outline-width":3,"font-family":"sans-serif, ForkAwesome","font-size":"10px","curve-style":"bezier","loop-direction":"0deg","loop-sweep":"-45deg"}}),_.push({selector:"edge:selected",style:{"line-color":"#7122da",color:"#7122da","target-arrow-color":"#7122da"}}),_.push({selector:"edge.eh-ghost-edge",style:{label:"",color:"#7122da","line-color":"#7122da","target-arrow-color":"#7122da","line-style":"dashed"}}),_.push({selector:"edge[temporary]",style:{color:"#7122da","line-color":"#7122da","target-arrow-color":"#7122da","line-style":"dashed"}}),_.push({selector:"edge.immutable",style:{label:t=>` ${t.data("name")}`}});class x{jRootElement;cy;g;jOverlayMenu;_config;constructor(t){this.config(t||{}),this._domSetup(),fetch("/rest/dataset/all_styles/").then((t=>t.json())).then(this._onStyleFetched.bind(this)).catch(console.error)}_domSetup(){this.jRootElement=$(`#${this._config.containerId}`),this.jRootElement.addClass("colander-dgraph"),this.jGraphElement=$("<div class='graph-sub-container'/>"),this.jRootElement.append(this.jGraphElement),this.jOverlayMenu=$('<div class="graph-overlay-menu position-absolute top-0 start-0" style="z-index: 20;">'),this.jRootElement.append(this.jOverlayMenu),this.jLoading=$('<div class="graph-loading">\n        <div class="spinner-border" role="status">\n            <span class="visually-hidden">Loading...</span>\n        </div>\n    </div>'),this.jRootElement.append(this.jLoading)}_onStyleFetched(t){this.allStyles=t,this.cy=e()({container:this.jGraphElement,userZoomingEnabled:!0,userPanningEnabled:!0,boxSelectionEnabled:!0,wheelSensitivity:.5,style:_,ready:this._onCyReady.bind(this)}),this.cy.data("all-styles",this.allStyles),this.fixedPosition={},this.cy.on("layoutstop",(()=>{this.jLoading.hide()})),this._applyInternalConfig()}_scheduleOverridesSave(){this._HANDLER_OVERRIDE_SAVE&&clearTimeout(this._HANDLER_OVERRIDE_SAVE),this._HANDLER_OVERRIDE_SAVE=setTimeout(this._overrideSave.bind(this),1e3)}async _overrideSave(){if(this._HANDLING_SAVE_IN_PROGRESS)return void(this._SCHEDULE_SAVE_AGAIN=!0);this._HANDLING_SAVE_IN_PROGRESS=!0,this.jStatusSaving&&this.jStatusSaving.show();let t={};for(let e in this.fixedPosition)t[e]={position:this.fixedPosition[e].position};try{await fetch(this._config.datasourceUrl,{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":this._config.csrfToken},body:JSON.stringify(t)})}catch(t){console.error("Unable to save overrides",t)}this._SCHEDULE_SAVE_AGAIN&&(this._scheduleOverridesSave(),delete this._SCHEDULE_SAVE_AGAIN),this.jStatusSaving&&this.jStatusSaving.hide(),delete this._HANDLING_SAVE_IN_PROGRESS}_onCyReady(){console.log("Fetching ..."),fetch(this._config.datasourceUrl).then((t=>t.json())).then(this._onGraphData.bind(this)).catch((t=>{console.error("Fetch error",t)}))}_onGraphData(t){this.g=t;for(let t in this.g.entities){let e=this._toNode(t);this.cy.add(e)}for(let t in this.g.relations){let e=this._toEdge(t);this.cy.add(e)}if(this.g.overrides)for(let t in this.g.overrides)t in this.g.entities!=0&&(this.fixedPosition[t]={nodeId:t,position:this.g.overrides[t].position});if(this._sidepane_entities_overview){let t=this._sidepane_entities_overview.data("vue");t&&(t.entities=this.g.entities)}this.refreshGraph()}_createRelation(t,e,n,r){let i={name:r.data("name"),obj_from:e.id(),obj_to:n.id(),pending_edge:r};this._create_or_rename_relation(i)}_renameRelation(t){let e={id:t.id(),name:t.data("name"),pending_edge:t};this._create_or_rename_relation(e)}_create_or_rename_relation(t){this._sidepane_relation_create_or_edit.data("vue").edit_relation(t),this.sidepane(this._sidepane_relation_create_or_edit)}async _do_createOrRenameRelation(t){if(t.name=t.name?.trim(),!t.name)throw new Error("Empty relation name");let e=Object.assign({case_id:this._config.caseId},t);delete e.pending_edge;const n=await fetch(t.id?`/rest/entity_relation/${t.id}/`:"/rest/entity_relation/",{method:t.id?"PATCH":"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":this._config.csrfToken},body:JSON.stringify(e)});if(!n.ok)throw new Error("Unexcpeted server error");if(t.id)t.pending_edge.data("name",t.name);else{const t=await n.json();this.g.relations[t.id]=t;let e=this._toEdge(t.id);this.cy.add(e)}}async _deleteRelation(t){(await fetch(`/rest/entity_relation/${t.id()}/`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":this._config.csrfToken},body:JSON.stringify({})})).ok?this.cy.remove(t):alert("Unexcpeted server error")}_createEntity(t,e){let n={super_type:t,name:"New entity",position:e};this._createOrEditEntity(n)}_createOrEditEntity(t){this._sidepane_entity_create_or_edit.data("vue").edit_entity(t),this.sidepane(this._sidepane_entity_create_or_edit)}_quickEditEntity(t){let e={id:t.id(),type:t.data("type"),name:t.data("name"),super_type:t.data("super_type"),content:t.data("content")};this._createOrEditEntity(e)}async _do_createOrEditEntity(t){let e=Object.assign({case_id:this._config.caseId},t);delete e.position;const n=await fetch(t.id?`/rest/entity/${t.id}/`:"/rest/entity/",{method:t.id?"PATCH":"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":this._config.csrfToken},body:JSON.stringify(e)});if(!n.ok)throw new Error("Unexcpeted server error");const r=await n.json();if(this.g.entities[r.id]=r,t.id){let e=this.cy.$(`#${t.id}`);e.data("name",r.name),e.data("content",r.content),e.data("type",r.type)}else{let e=this._toNode(r.id);this.cy.add(e).position(t.position).emit("free"),this._sidepane_entities_overview&&this._sidepane_entities_overview.data("vue").track_new_entity(r)}this._sidepane_entities_overview&&this._sidepane_entities_overview.data("vue").refresh()}async _viewDetail(t){const e=await fetch(`/rest/entity/${t.id()}/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":this._config.csrfToken}});if(!e.ok)return void alert("Unexpected server error");const n=await e.json();this._sidepane_entity_overview.data("vue").entity=n,this.sidepane(this._sidepane_entity_overview)}_toEdge(t){let e=Object.assign({},this.g.relations[t]);return e.source=e.obj_from,e.target=e.obj_to,{group:"edges",data:e,classes:e.immutable?["immutable"]:["mutable"]}}_toNode(t){let e=Object.assign({},this.g.entities[t]);return{group:"nodes",data:e,classes:[`${e.super_type}`,`${e.tlp}`,`${e.pap}`]}}config(t){if(this._config=Object.assign(this._config||{},t),!this._config.containerId)throw new Error("ColanderDGraph; Missing containerId in config");if(!this._config.datasourceUrl)throw new Error("ColanderDGraph; Missing datasourceUrl in config")}_applyInternalConfig(){if(this.cy.userZoomingEnabled(!this._config.lock),this.cy.userPanningEnabled(!this._config.lock),this.cy.boxSelectionEnabled(!this._config.lock),this._config.lock)return this.cy.style().selector("*").style({events:"no"}),!1;if(this.cy.on("layoutstop",(()=>{this.cy.$("node").emit("free")})),this.cy.on("free","node",(t=>{let e=t.target;this.fixedPosition[e.id()]=this.fixedPosition[e.id()]||{nodeId:e.id()},this.fixedPosition[e.id()].position=e.position(),this._scheduleOverridesSave()})),this.jStatusBar||(this.jStatusBar=$("<div class='status-bar'></div>"),this.jStatusSaving=$('<span class=\'status-saving\' style="display: none;">\n            <i class="fa fa-save"></i>\n            <span>Saving ...</span>\n        </span>'),this.jStatusBar.append(this.jStatusSaving),this.jRootElement.append(this.jStatusBar)),this.edgeHandler||(this.edgeHandler=this.cy.edgehandles({canConnect:function(t,e){return!0},edgeParams:(t,e)=>({data:{name:"New relation",temporary:!0}}),snap:!1}),this.cy.on("ehcomplete",this._createRelation.bind(this))),this.cy.on("dbltap",(t=>{let e=t.target;t.target===this.cy||t.target.isEdge()?this._sidepane_entities_overview&&this.sidepane(this._sidepane_entities_overview):this._viewDetail(e).then(console.log).catch(console.error)})),this.contextMenu||(this.contextMenu=this.cy.contextMenus({menuItems:[{id:"relation-create",content:"Create relation",tooltipText:"Add relation between two entities",selector:"node",image:{src:"/static/images/icons/link.svg",width:12,height:12,x:4,y:7},onClickFunction:t=>{let e=t.target;this.edgeHandler.start(e)}},{id:"relation-rename",content:"Rename relation",tooltipText:"Add relation between two entities",selector:"edge.mutable",image:{src:"/static/images/icons/pencil-square-o.svg",width:12,height:12,x:4,y:7},onClickFunction:t=>{let e=t.target;this._renameRelation(e)}},{id:"relation-delete",content:"Delete relation",tooltipText:"Delete relation between two entities",selector:"edge.mutable",image:{src:"/static/images/icons/trash.svg",width:12,height:12,x:4,y:7},onClickFunction:t=>{let e=t.target;this._deleteRelation(e).then(console.log).catch(console.error)}},{id:"entity-details",content:"Entity overview",tooltipText:"View entity details",selector:"node",image:{src:"/static/images/icons/eye.svg",width:12,height:12,x:4,y:7},onClickFunction:t=>{let e=t.target;this._viewDetail(e).then(console.log).catch(console.error)}},{id:"entity-edit",content:"Quick edit entity",tooltipText:"Quick edit",selector:"node",image:{src:"/static/images/icons/pencil-square-o.svg",width:12,height:12,x:4,y:7},onClickFunction:t=>{let e=t.target;this._quickEditEntity(e)}},{id:"select-linked",content:"Select linked",tooltipText:"Select all linked entities",selector:"node,edge",image:{src:"/static/images/icons/hubzilla.svg",width:12,height:12,x:4,y:7},onClickFunction:t=>{x.cy_linked(t.target).select()}},{id:"relax-linked",content:"Relax linked",tooltipText:"Relax all linked entities",selector:"node",image:{src:"/static/images/icons/hubzilla.svg",width:12,height:12,x:4,y:7},onClickFunction:t=>{let e=x.cy_linked(t.target);for(let t of e)delete this.fixedPosition[t.id()];this.refreshGraph()}},{id:"entity-create",content:"New entity",tooltipText:"Create a new entity",image:{src:"/static/images/icons/plus-circle.svg",width:12,height:12,x:4,y:7},coreAsWell:!0,submenu:["Actor","Device","Threat","Observable","DataFragment"].map((t=>({id:`create-${t}`,content:`${t}`,tooltipText:`Create a new ${t} entity`,image:{src:`/static/images/icons/${t}.svg`,width:12,height:12,x:4,y:7},onClickFunction:e=>{this._createEntity(t,e.position)}})))}],submenuIndicator:{src:"/static/images/icons/caret-right.svg",width:12,height:12,x:4,y:4}})),this._config.fullscreen&&!this.jOverlayMenu_Fullscreen&&(this.jOverlayMenu_Fullscreen=g("fa-arrows-alt","Fullscreen"),this.jOverlayMenu_Fullscreen.click((t=>{this.jRootElement.toggleClass("fullscreen")})),this.jOverlayMenu.append(this.jOverlayMenu_Fullscreen)),this._config.recenter&&!this.jOverlayMenu_Recenter&&(this.jOverlayMenu_Recenter=g("fa-crosshairs","Re-Center"),this.jOverlayMenu_Recenter.click((t=>{t.stopPropagation(),t.preventDefault(),this.cy.fit()})),this.jOverlayMenu.append(this.jOverlayMenu_Recenter)),this._config.snapshot&&!this.jOverlayMenu_Snapshot&&(this.jOverlayMenu_Snapshot=g("fa-picture-o","Export as PNG"),this.jOverlayMenu_Snapshot.click((t=>{t.stopPropagation(),t.preventDefault();let e=this.cy.png({full:!0,bg:"white",scale:2}),n=document.createElement("a");n.download=`${this.g.name}.png`,n.href=e,n.click()})),this.jOverlayMenu.append(this.jOverlayMenu_Snapshot)),this._config.sidepane&&!this.jOverlayMenu_Sidepane){this.jOverlayMenu_Sidepane=$("<div class='sidepane'></div>"),this.jRootElement.append(this.jOverlayMenu_Sidepane);let t=!1,e=0,n=0;this.jRootElement.mousedown((r=>{t=r.offsetX<5,t&&(n=this.jOverlayMenu_Sidepane.outerWidth(),e=r.screenX,r.preventDefault(),r.stopPropagation())})).mousemove((r=>{if(!t)return;let i=e-r.screenX;e=r.screenX,n=Math.max(40,n+i),this.jOverlayMenu_Sidepane.get(0).style.setProperty("--sidepane-width",`${n}px`)})).mouseup((e=>{t=!1})),this.sidepane=t=>{"boolean"==typeof t&&this.jRootElement.toggleClass("sidepane-active",t),"object"==typeof t&&(this.jOverlayMenu_Sidepane.find(".vue-component").removeClass("active"),t.addClass("active"),this.jRootElement.toggleClass("sidepane-active",!0))},this.sidepane_add=t=>{this.jOverlayMenu_Sidepane.append(t)},this.sidePaneContent=t=>{this.jOverlayMenu_Sidepane.empty().append(t),this.sidepane(!0)}}setTimeout(this._init_vues.bind(this))}static cy_linked(t){let e=t;e.isEdge()&&(e=e.connectedNodes());let n=e.length;do{n=e.length,e=e.closedNeighborhood()}while(n<e.length);return e}_init_vues(){this._sidepane_entities_overview=(0,y.B)("colander-dgraph-entities-table"),this.sidepane_add(this._sidepane_entities_overview),this._sidepane_entities_overview.on("close-component",(t=>{this.sidepane(!1)})),this._sidepane_entities_overview.on("vue-ready",((t,e,n)=>{n.allStyles=this.allStyles,this.g&&(n.entities=this.g.entities)})),this._sidepane_entities_overview.on("focus-entity",((t,e)=>{this.cy.$(`#${e}`).position(),this.cy.animate({center:{eles:this.cy.$(`#${e}`)},zoom:2,easing:"ease-in-out",duration:1500})})),this._sidepane_entity_create_or_edit=(0,y.B)("colander-dgraph-entity-edit"),this.sidepane_add(this._sidepane_entity_create_or_edit),this._sidepane_entity_create_or_edit.on("vue-ready",((t,e,n)=>{n.allStyles=this.allStyles})),this._sidepane_entity_create_or_edit.on("close-component",(t=>{this.sidepane(!1)})),this._sidepane_entity_create_or_edit.on("save-entity",((t,e)=>{this._do_createOrEditEntity(e).then(console.log).catch(console.error),this.sidepane(!1)})),this._sidepane_relation_create_or_edit=(0,y.B)("colander-dgraph-relation-edit"),this.sidepane_add(this._sidepane_relation_create_or_edit),this._sidepane_relation_create_or_edit.on("vue-ready",((t,e,n)=>{n.allStyles=this.allStyles})),this._sidepane_relation_create_or_edit.on("close-component",((t,e)=>{this.sidepane(!1),e.id||this.cy.remove(e.pending_edge)})),this._sidepane_relation_create_or_edit.on("save-relation",((t,e)=>{this._do_createOrRenameRelation(e).then(console.log).catch(console.error),this.sidepane(!1),e.id||this.cy.remove(e.pending_edge)})),this._sidepane_entity_overview=(0,y.B)("colander-dgraph-entity-overview"),this.sidepane_add(this._sidepane_entity_overview),this._sidepane_entity_overview.on("vue-ready",((t,e,n)=>{n.allStyles=this.allStyles})),this._sidepane_entity_overview.on("close-component",(t=>{this.sidepane(!1)})),this._sidepane_entity_overview.on("quick-edit-entity",((t,e)=>{let n=JSON.parse(JSON.stringify(this.g.entities[e]));this._sidepane_entity_create_or_edit.data("vue").edit_entity(n),this.sidepane(this._sidepane_entity_create_or_edit)}))}refreshGraph(){this.firstLayout=void 0===this.firstLayout,this.cy.layout({name:"fcose",quality:"proof",randomize:this.firstLayout,fit:this.firstLayout,animate:!this.firstLayout,animationDuration:200,padding:0,nodeDimensionsIncludeLabels:!0,packComponents:!0,numIter:2500,gravity:5,idealEdgeLength:t=>10*Math.max(5,t.data("name").length),fixedNodeConstraint:Object.values(this.fixedPosition),initialEnergyOnIncremental:.5}).run()}}window.ColanderDGraph=x})()})();